(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[5571],{"./ui/components/app/transaction-decoding/components/decoding/address/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>address_component});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),copy_to_clipboard=__webpack_require__("./node_modules/copy-to-clipboard/index.js"),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard),util=__webpack_require__("./ui/helpers/utils/util.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),selectors=__webpack_require__("./ui/selectors/index.js"),nickname_popovers=__webpack_require__("./ui/components/app/modals/nickname-popovers/index.js");const Address=({checksummedRecipientAddress,onRecipientClick,addressOnly,recipientEns,recipientName})=>{const t=(0,useI18nContext.C)(),[showNicknamePopovers,setShowNicknamePopovers]=(0,react.useState)(!1),addressBookEntryObject=(0,es.v9)(selectors.FuL).find((entry=>entry.address.toLowerCase()===checksummedRecipientAddress.toLowerCase())),recipientNickname=null==addressBookEntryObject?void 0:addressBookEntryObject.name,recipientMetadataName=(0,es.v9)((state=>(0,selectors._87)(state,checksummedRecipientAddress))),recipientToRender=addressOnly?recipientName||recipientNickname||recipientMetadataName||recipientEns||(0,util.$Q)(checksummedRecipientAddress):recipientName||recipientNickname||recipientMetadataName||recipientEns||t("newContract");return react.createElement("div",{className:"tx-insight tx-insight-component tx-insight-component-address",onClick:()=>{copy_to_clipboard_default()(checksummedRecipientAddress),onRecipientClick&&onRecipientClick()}},react.createElement("div",{className:"tx-insight-component-address__sender-icon"},react.createElement(identicon.Z,{address:checksummedRecipientAddress,diameter:18})),react.createElement("div",{className:"tx-insight-component-address__name",onClick:()=>setShowNicknamePopovers(!0)},recipientToRender),showNicknamePopovers?react.createElement(nickname_popovers.Z,{onClose:()=>setShowNicknamePopovers(!1),address:checksummedRecipientAddress}):null)};Address.propTypes={checksummedRecipientAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientEns:prop_types_default().string,addressOnly:prop_types_default().bool,onRecipientClick:prop_types_default().func},Address.__docgenInfo={description:"",methods:[],displayName:"Address",props:{checksummedRecipientAddress:{description:"",type:{name:"string"},required:!1},recipientName:{description:"",type:{name:"string"},required:!1},recipientEns:{description:"",type:{name:"string"},required:!1},addressOnly:{description:"",type:{name:"bool"},required:!1},onRecipientClick:{description:"",type:{name:"func"},required:!1}}};const address_component=Address},"./ui/components/app/transaction-decoding/components/ui/accreditation/accreditation.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_metamask_etherscan_link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@metamask/etherscan-link/dist/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/index.js"),_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/contexts/i18n.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_ui_button__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/ui/button/index.js"),_ui_typography__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/components/ui/typography/index.js"),_component_library__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/components/component-library/index.js");const Accreditation=({fetchVia,address})=>{const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__.OO),chainId=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_3__.BVZ),rpcPrefs=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_3__.Kzx),addressLink=(0,_metamask_etherscan_link__WEBPACK_IMPORTED_MODULE_2__.getAccountLink)(address,chainId,rpcPrefs),AccreditationLink=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_typography__WEBPACK_IMPORTED_MODULE_7__.Z,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.TypographyVariant.H7,className:"accreditation__prefix",boxProps:{margin:0}},t("transactionDecodingAccreditationVerified",[react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_button__WEBPACK_IMPORTED_MODULE_6__.Z,{type:"link",className:"accreditation__link",onClick:()=>{__webpack_require__.g.platform.openTab({url:addressLink})},target:"_blank",rel:"noopener noreferrer",title:t("etherscanView"),key:"accreditation-link-button"},fetchVia)])),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_typography__WEBPACK_IMPORTED_MODULE_7__.Z,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.TypographyVariant.H7,boxProps:{margin:0}},t("transactionDecodingAccreditationDecoded")));return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accreditation"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accreditation__icon"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_8__.JO,{name:_component_library__WEBPACK_IMPORTED_MODULE_8__.uH.Info})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"accreditation__info"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(AccreditationLink,null)))};Accreditation.propTypes={fetchVia:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string.isRequired,address:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string.isRequired},Accreditation.__docgenInfo={description:"",methods:[],displayName:"Accreditation",props:{fetchVia:{description:"",type:{name:"string"},required:!0},address:{description:"",type:{name:"string"},required:!0}}};const __WEBPACK_DEFAULT_EXPORT__=Accreditation},"./ui/components/app/transaction-decoding/components/ui/copy-raw-data/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>copy_raw_data_component});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),tooltip=__webpack_require__("./ui/components/ui/tooltip/tooltip.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),useCopyToClipboard=__webpack_require__("./ui/hooks/useCopyToClipboard.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts");const CopyRawData=({data})=>{const t=(0,react.useContext)(i18n.OO),[copied,handleCopy]=(0,useCopyToClipboard.m)();return react.createElement("div",{className:"copy-raw-data"},react.createElement(tooltip.Z,{position:"right",title:copied?t("copiedExclamation"):""},react.createElement("button",{onClick:()=>{handleCopy(data)},className:"copy-raw-data__button"},react.createElement("div",{className:"copy-raw-data__icon"},react.createElement(component_library.JO,{name:copied?component_library.uH.CopySuccess:component_library.uH.Copy,color:design_system.EY.iconDefault})),react.createElement("div",{className:"copy-raw-data__label"},t("copyRawTransactionData")))))};CopyRawData.propTypes={data:prop_types_default().string.isRequired},CopyRawData.__docgenInfo={description:"",methods:[],displayName:"CopyRawData",props:{data:{description:"",type:{name:"string"},required:!0}}};const copy_raw_data_component=CopyRawData},"./ui/components/app/transaction-decoding/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>TransactionDecoding});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),browser_util_inspect=__webpack_require__("./node_modules/browser-util-inspect/index.js"),browser_util_inspect_default=__webpack_require__.n(browser_util_inspect),dist=__webpack_require__("./node_modules/@truffle/decoder/dist/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),lib=__webpack_require__("./node_modules/@truffle/codec/dist/lib/index.js"),spinner=__webpack_require__("./ui/components/ui/spinner/index.js"),error_message=__webpack_require__("./ui/components/ui/error-message/index.js"),fetch_with_cache=__webpack_require__("./shared/lib/fetch-with-cache.js"),selectors=__webpack_require__("./ui/selectors/index.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts");const transformTxDecoding=params=>params.map((node=>{const nodeName=node.name,nodeValue=node.value,nodeKind=nodeValue.kind,nodeTypeClass=nodeValue.type.typeClass,treeItem={name:nodeName,kind:nodeKind,typeClass:nodeTypeClass,type:nodeValue.type};return"struct"===nodeTypeClass?{...treeItem,children:transformTxDecoding(nodeValue.value)}:{...treeItem,value:nodeValue.value?nodeValue.value:nodeValue}})),FETCH_PROJECT_INFO_URI="https://tx-insights.metaswap.codefi.network/fetch-project",FETCH_SUPPORTED_NETWORKS_URI="https://tx-insights.metaswap.codefi.network/networks";var decoding_address=__webpack_require__("./ui/components/app/transaction-decoding/components/decoding/address/index.js"),copy_raw_data=__webpack_require__("./ui/components/app/transaction-decoding/components/ui/copy-raw-data/index.js"),accreditation_component=__webpack_require__("./ui/components/app/transaction-decoding/components/ui/accreditation/accreditation.component.js");function TransactionDecoding({to="",inputData:data=""}){const t=(0,react.useContext)(i18n.OO),[tx,setTx]=(0,react.useState)([]),[sourceAddress,setSourceAddress]=(0,react.useState)(""),[sourceFetchedVia,setSourceFetchedVia]=(0,react.useState)(""),{address:from}=(0,es.v9)(selectors.uWD),network=(0,conversion_utils.Z8)((0,es.v9)(selectors.BVZ)),[loading,setLoading]=(0,react.useState)(!1),[hasError,setError]=(0,react.useState)(!1),[errorMessage,setErrorMessage]=(0,react.useState)("");(0,react.useEffect)((()=>{(async()=>{setLoading(!0);try{if(!(await(0,fetch_with_cache.Z)(FETCH_SUPPORTED_NETWORKS_URI,{method:"GET"})).some((n=>n.active&&Number(n.chainId)===Number(network))))throw new Error(t("transactionDecodingUnsupportedNetworkError",[network]));const requestUrl=`${FETCH_PROJECT_INFO_URI}?${new URLSearchParams({to,"network-id":network})}`,response=await(0,fetch_with_cache.Z)(requestUrl,{method:"GET"}),{info:projectInfo,fetchedVia,address}=response;address&&setSourceAddress(address),fetchedVia&&setSourceFetchedVia(fetchedVia);const decoder=await(0,dist.forAddress)(to,{provider:__webpack_require__.g.ethereumProvider,projectInfo}),decoding=await decoder.decodeTransaction({from,to,input:data,blockNumber:null}),params=transformTxDecoding(null==decoding?void 0:decoding.arguments);setTx(params),setLoading(!1)}catch(error){setLoading(!1),setError(!0),null!=error&&error.message.match("400")?setErrorMessage(t("txInsightsNotSupported")):setErrorMessage(null==error?void 0:error.message)}})()}),[t,from,to,network,data]);const renderLeaf=({name,kind,typeClass,value})=>{if("error"===kind)return react.createElement("span",{className:"sol-item solidity-error"},react.createElement("span",null,t("malformedData")));switch(typeClass){case"int":return react.createElement("span",{className:"sol-item solidity-int"},[value.asBN||value.asString].toString());case"uint":return react.createElement("span",{className:"sol-item solidity-uint"},[value.asBN||value.asString].toString());case"bool":return react.createElement("span",{className:"sol-item"},String(value.asBoolean));case"bytes":return react.createElement("span",{className:"sol-item solidity-bytes"},value.asHex);case"string":return react.createElement("span",{className:"sol-item solidity-string"},value.asString);case"array":return react.createElement("details",null,react.createElement("summary",{className:"typography--color-black"},name,": "),react.createElement("ol",null,value.map(((itemValue,index)=>{var _itemValue$type,_itemValue$type2;return react.createElement("li",{key:`${null===(_itemValue$type=itemValue.type)||void 0===_itemValue$type?void 0:_itemValue$type.typeClass}-${index}`},renderLeaf({typeClass:null===(_itemValue$type2=itemValue.type)||void 0===_itemValue$type2?void 0:_itemValue$type2.typeClass,value:itemValue.value,kind:itemValue.kind}))}))));case"address":{const address=null==value?void 0:value.asAddress;return react.createElement(decoding_address.Z,{addressOnly:!0,checksummedRecipientAddress:(0,hexstring_utils.QG)(address)})}default:return react.createElement("pre",{className:"sol-item solidity-raw"},browser_util_inspect_default()(new lib.Format.Utils.Inspect.ResultInspector(value)))}},renderTree=({name,kind,typeClass,type,value,children},index)=>children?react.createElement("li",{key:`${typeClass}-${index}`},react.createElement("details",{open:0===index?"open":""},react.createElement("summary",null,name,": "),react.createElement("ol",null,children.map(renderTree)))):react.createElement("li",{className:"solidity-value",key:`solidity-value-${index}`},react.createElement("div",{className:"solidity-named-item solidity-item"},"array"===typeClass||Array.isArray(value)?null:react.createElement("span",{className:"param-name typography--color-black"},name,": "),react.createElement("span",{className:"sol-item solidity-uint"},renderLeaf({name,typeClass,type,value,kind}))));return react.createElement("div",{className:"tx-insight"},loading?react.createElement("div",{className:"tx-insight-loading"},react.createElement(spinner.Z,{color:"var(--color-warning-default)"})):hasError?react.createElement("div",{className:"tx-insight-error"},react.createElement(error_message.Z,{errorMessage})):react.createElement("div",{className:"tx-insight-content"},react.createElement("div",{className:"tx-insight-content__tree-component"},react.createElement("ol",null,tx.map(renderTree))),react.createElement("div",{className:"tx-insight-content__copy-raw-tx"},react.createElement(copy_raw_data.Z,{data})),sourceFetchedVia&&sourceAddress?react.createElement("div",{className:"tx-insight-content__accreditation"},react.createElement(accreditation_component.Z,{address:sourceAddress,fetchVia:sourceFetchedVia})):null))}TransactionDecoding.propTypes={to:prop_types_default().string,inputData:prop_types_default().string.isRequired},TransactionDecoding.__docgenInfo={description:"",methods:[],displayName:"TransactionDecoding",props:{to:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},inputData:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1}}}},"./ui/components/ui/disclosure/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>disclosure});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),component_library=__webpack_require__("./ui/components/component-library/index.js");const Disclosure=({children,title,size})=>{const disclosureFooterEl=(0,react.useRef)(null),[open,setOpen]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{open&&disclosureFooterEl&&disclosureFooterEl.current&&disclosureFooterEl.current.scrollIntoView({behavior:"smooth"})}),[open]),react.createElement("div",{className:"disclosure",onClick:()=>setOpen((state=>!state))},title?react.createElement("details",null,react.createElement("summary",{className:"disclosure__summary"},react.createElement(component_library.JO,{className:"disclosure__summary--icon",name:component_library.uH.Add,size:component_library.Jh.Sm,marginInlineEnd:2}),title),react.createElement("div",{className:classnames_default()("disclosure__content",size)},children),react.createElement("div",{ref:disclosureFooterEl,className:"disclosure__footer"})):children)};Disclosure.propTypes={children:prop_types_default().node.isRequired,title:prop_types_default().string,size:prop_types_default().string},Disclosure.defaultProps={size:"normal",title:null},Disclosure.__docgenInfo={description:"",methods:[],displayName:"Disclosure",props:{size:{defaultValue:{value:"'normal'",computed:!1},description:"",type:{name:"string"},required:!1},title:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"node"},required:!0}}};const disclosure=Disclosure},"?79cc":()=>{},"?a4fa":()=>{},"?055a":()=>{},"?258c":()=>{},"?5efb":()=>{},"?913a":()=>{},"?68df":()=>{}}]);