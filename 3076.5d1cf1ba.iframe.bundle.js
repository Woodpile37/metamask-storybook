"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[3076],{"./ui/components/app/permission-cell/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>permission_cell});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),box=__webpack_require__("./ui/components/ui/box/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),menu=__webpack_require__("./ui/components/ui/menu/index.js"),popover_component=__webpack_require__("./ui/components/ui/popover/popover.component.js"),permissions=__webpack_require__("./shared/constants/snaps/permissions.ts"),actions=__webpack_require__("./ui/store/actions.ts");const PermissionCellOptions=({snapId,permissionName,description})=>{const t=(0,useI18nContext.C)(),dispatch=(0,es.I0)(),ref=(0,react.useRef)(!1),[showOptions,setShowOptions]=(0,react.useState)(!1),[showDetails,setShowDetails]=(0,react.useState)(!1),isRevokable=permissions.X5.includes(permissionName);return react.createElement(box.ZP,{ref},react.createElement(component_library.Ei,{iconName:component_library.uH.MoreVertical,ariaLabel:t("options"),onClick:()=>{setShowOptions(!0)},"data-testid":permissionName}),showOptions&&react.createElement(menu.v,{anchorElement:ref.current,onHide:()=>{setShowOptions(!1)}},react.createElement(menu.s,{onClick:()=>{setShowOptions(!1),setShowDetails(!0)}},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,style:{whiteSpace:"nowrap"}},t("details"))),isRevokable&&react.createElement(menu.s,{onClick:()=>{setShowOptions(!1),dispatch((0,actions.nCB)(snapId,[permissionName]))}},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.errorDefault,style:{whiteSpace:"nowrap"}},t("revokePermission")))),showDetails&&react.createElement(popover_component.Z,{title:t("details"),onClose:()=>{setShowOptions(!1),setShowDetails(!1)}},react.createElement(box.ZP,{marginLeft:4,marginRight:4,marginBottom:4},react.createElement(component_library.xv,null,description))))};PermissionCellOptions.propTypes={snapId:prop_types_default().string.isRequired,permissionName:prop_types_default().string.isRequired,description:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object])},PermissionCellOptions.__docgenInfo={description:"",methods:[],displayName:"PermissionCellOptions",props:{snapId:{description:"",type:{name:"string"},required:!0},permissionName:{description:"",type:{name:"string"},required:!0},description:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1}}};const PermissionCell=({snapId,permissionName,title,description,weight,avatarIcon,dateApproved,revoked,showOptions,hideStatus})=>{var _avatarIcon$props;const t=(0,useI18nContext.C)(),infoIcon=component_library.uH.Info;let infoIconColor=design_system.EY.iconMuted,iconColor=design_system.EY.primaryDefault,iconBackgroundColor=design_system.Il.primaryMuted;!revoked&&weight<=2&&(iconColor=design_system.EY.warningDefault,iconBackgroundColor=design_system.Il.warningMuted,infoIconColor=design_system.EY.warningDefault),dateApproved&&(iconColor=design_system.EY.iconMuted,iconBackgroundColor=design_system.Il.backgroundAlternative),revoked&&(iconColor=design_system.EY.iconMuted,iconBackgroundColor=design_system.Il.backgroundAlternative);let permissionIcon=avatarIcon;return"string"!=typeof avatarIcon&&null!=avatarIcon&&null!==(_avatarIcon$props=avatarIcon.props)&&void 0!==_avatarIcon$props&&_avatarIcon$props.iconName&&(permissionIcon=avatarIcon.props.iconName),react.createElement(box.ZP,{className:"permission-cell",justifyContent:design_system.E0.center,alignItems:design_system.g1.flexStart,marginLeft:4,marginRight:4,paddingTop:2,paddingBottom:2},react.createElement(box.ZP,null,"string"==typeof permissionIcon?react.createElement(component_library.fM,{iconName:permissionIcon,size:component_library.dt.Md,iconProps:{size:component_library.Jh.Sm},color:iconColor,backgroundColor:iconBackgroundColor}):permissionIcon),react.createElement(box.ZP,{width:"full",marginLeft:4,marginRight:4},react.createElement(component_library.xv,{size:design_system.$u.MD,variant:design_system.rK.bodyMd,className:classnames_default()("permission-cell__title",{"permission-cell__title-revoked":revoked})},title),!hideStatus&&react.createElement(component_library.xv,{className:"permission-cell__status",variant:design_system.rK.bodySm,color:design_system.d9.textAlternative},!revoked&&(dateApproved?t("approvedOn",[(0,util.p6)(dateApproved,"yyyy-MM-dd")]):t("permissionRequested")),revoked?t("permissionRevoked"):"")),react.createElement(box.ZP,null,showOptions&&snapId?react.createElement(PermissionCellOptions,{snapId,permissionName,description}):react.createElement(tooltip.Z,{html:react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative},description),position:"bottom"},react.createElement(component_library.JO,{color:infoIconColor,name:infoIcon,size:component_library.Jh.Sm}))))};PermissionCell.propTypes={snapId:prop_types_default().string,permissionName:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element]).isRequired,title:prop_types_default().oneOfType([prop_types_default().string.isRequired,prop_types_default().object.isRequired]),description:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]),weight:prop_types_default().number,avatarIcon:prop_types_default().any.isRequired,dateApproved:prop_types_default().number,revoked:prop_types_default().bool,showOptions:prop_types_default().bool,hideStatus:prop_types_default().bool},PermissionCell.__docgenInfo={description:"",methods:[],displayName:"PermissionCell",props:{snapId:{description:"",type:{name:"string"},required:!1},permissionName:{description:"",type:{name:"union",value:[{name:"string"},{name:"element"}]},required:!0},title:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1},description:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1},weight:{description:"",type:{name:"number"},required:!1},avatarIcon:{description:"",type:{name:"any"},required:!0},dateApproved:{description:"",type:{name:"number"},required:!1},revoked:{description:"",type:{name:"bool"},required:!1},showOptions:{description:"",type:{name:"bool"},required:!1},hideStatus:{description:"",type:{name:"bool"},required:!1}}};const permission_cell=PermissionCell},"./ui/components/app/snaps/install-error/install-error.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts");const InstallError=({title,error,description,iconName})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.Qb.Column,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.g1.center,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.E0.center,height:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.Sw.Full,padding:2},iconName&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.fM,{iconName,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.dt.Xl,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.EY.errorDefault,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.lP.errorMuted,marginBottom:4}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.rK.headingLg},title),description&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.xv,{textAlign:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.PH.Center},description),error&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.wB,{marginTop:4,startAccessory:null,severity:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.zb.Danger},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.rK.bodySm},error)));InstallError.propTypes={title:prop_types__WEBPACK_IMPORTED_MODULE_3___default().node.isRequired,error:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,description:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,iconName:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string},InstallError.__docgenInfo={description:"",methods:[],displayName:"InstallError",props:{title:{description:"",type:{name:"node"},required:!0},error:{description:"",type:{name:"string"},required:!1},description:{description:"",type:{name:"string"},required:!1},iconName:{description:"",type:{name:"string"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=InstallError},"./ui/components/app/snaps/snap-install-warning/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>SnapInstallWarning});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),permission_cell=__webpack_require__("./ui/components/app/permission-cell/index.js");function SnapInstallWarning({onCancel,onSubmit,warnings,snapName}){const t=(0,useI18nContext.C)(),[userAgree,setUserAgree]=(0,react.useState)(!1),SnapInstallWarningFooter=()=>react.createElement(component_library.xu,{display:design_system.sS.Flex,justifyContent:design_system.E0.center,alignItems:design_system.g1.center,width:design_system.Sw.Full},react.createElement(component_library.zx,{type:"primary",disabled:!userAgree,onClick:onSubmit,width:design_system.Sw.Full,size:component_library.qE.Lg},t("confirm")));function constructWarningPermissionCell(permissionWarnings,permission){const warningElementComponentArray=function constructWarningElementComponentArray(permissionWarnings){if(1===permissionWarnings.length)return[react.createElement(component_library.xv,{fontWeight:design_system.U9.Medium,as:"span",key:"warningMessageSubject"},permissionWarnings[0].warningMessageSubject)];if(2===permissionWarnings.length){const firstWarningSubject=permissionWarnings[0].warningMessageSubject,secondWarningSubject=permissionWarnings[1].warningMessageSubject;return[react.createElement(component_library.xv,{fontWeight:design_system.U9.Normal,as:"span",key:"warningMessageSubject"},t("andForTwoItems",[react.createElement(component_library.xv,{fontWeight:design_system.U9.Medium,variant:design_system.rK.inherit,key:`${firstWarningSubject}_and_first`},firstWarningSubject),react.createElement(component_library.xv,{fontWeight:design_system.U9.Medium,variant:design_system.rK.inherit,key:`${secondWarningSubject}_and_second`},secondWarningSubject)]))]}return permissionWarnings.map(((warning,index)=>permissionWarnings.length-1===index?[]:permissionWarnings.length-2===index?[react.createElement(component_library.xv,{fontWeight:design_system.U9.Normal,as:"span",key:`${warning.permissionName}_and_${index}`},t("andForListItems",[react.createElement(component_library.xv,{fontWeight:design_system.U9.Medium,variant:design_system.rK.inherit,key:`${warning.permissionName}_and_first_${index}`},warning.warningMessageSubject),react.createElement(component_library.xv,{fontWeight:design_system.U9.Medium,variant:design_system.rK.inherit,key:`${warning.permissionName}_and_second_first_${index}`},permissionWarnings[permissionWarnings.length-1].warningMessageSubject)]))]:[react.createElement("span",{key:`${warning.permissionName}_${index}`},react.createElement(component_library.xv,{fontWeight:design_system.U9.Medium,as:"span"},warning.warningMessageSubject,", "))]))}(permissionWarnings);return react.createElement(component_library.xu,{as:"span",marginBottom:4},react.createElement(permission_cell.Z,{permissionName:react.createElement(component_library.xv,null,t(permission.name,[warningElementComponentArray])),title:react.createElement(component_library.xv,null,t(permission.title,[warningElementComponentArray])),description:t(permission.description,[react.createElement(component_library.xv,{color:design_system.d9.inherit,variant:design_system.rK.inherit,fontWeight:design_system.U9.Medium,key:"1"},snapName)]),weight:1,avatarIcon:component_library.uH.Key,key:`snapInstallWarningPermissionCellKeyEntropy_${permission.permissionName}`,hideStatus:!0}))}const criticalPermissions_publicKey={name:"snapInstallWarningPermissionNameForViewPublicKey",title:"snapInstallWarningPermissionNameForViewPublicKey",description:"snapInstallWarningPermissionDescriptionForBip32View"},criticalPermissions_entropy={name:"snapInstallWarningPermissionNameForEntropy",title:"snapInstallWarningPermissionNameForEntropy",description:"snapInstallWarningPermissionDescriptionForEntropy"},bip32PublicKeyPermissionWarnings=warnings.filter((warning=>"snap_getBip32PublicKey"===warning.permissionName)),bip32bip44EntropyPermissionWarnings=warnings.filter((warning=>"snap_getBip32Entropy"===warning.permissionName||"snap_getBip44Entropy"===warning.permissionName));return react.createElement(popover.Z,{className:"snap-install-warning",footer:react.createElement(SnapInstallWarningFooter,null),headerProps:{padding:[4,4,0]},contentProps:{paddingLeft:[4,4],paddingRight:[4,4],paddingTop:0,paddingBottom:[4,4]},footerProps:{padding:[4,4]},onClose:onCancel},react.createElement(component_library.xu,{display:design_system.sS.Flex,justifyContent:design_system.E0.center,marginBottom:4},react.createElement(component_library.fM,{iconName:component_library.uH.Danger,backgroundColor:design_system.lP.warningMuted,color:design_system.EY.warningDefault,size:component_library.dt.Xl})),react.createElement(component_library.xv,{paddingBottom:4,textAlign:design_system.PH.Center,variant:design_system.rK.headingMd,as:"h2"},t("snapInstallWarningHeading")),react.createElement(component_library.xv,{paddingBottom:4,textAlign:design_system.PH.Left},t("snapInstallWarningCheck",[react.createElement(component_library.xv,{key:"snapNameInWarningDescription",fontWeight:design_system.U9.Medium,as:"span"},snapName)])),bip32bip44EntropyPermissionWarnings.length>0&&constructWarningPermissionCell(bip32bip44EntropyPermissionWarnings,criticalPermissions_entropy),bip32PublicKeyPermissionWarnings.length>0&&constructWarningPermissionCell(bip32PublicKeyPermissionWarnings,criticalPermissions_publicKey),react.createElement(component_library.xu,{display:design_system.sS.Flex,justifyContent:design_system.E0.flexStart,alignItems:design_system.g1.center,padding:4,borderRadius:design_system.cM.SM,backgroundColor:userAgree?design_system.lP.infoMuted:design_system.lP.backgroundAlternative},react.createElement(component_library.XZ,{isRequired:!0,onChange:()=>setUserAgree((state=>!state)),isChecked:userAgree,label:react.createElement(component_library.xv,{as:"span"},"Install"," ",react.createElement(component_library.xv,{as:"span",fontWeight:design_system.U9.Medium},snapName))})))}SnapInstallWarning.propTypes={onCancel:prop_types_default().func,onSubmit:prop_types_default().func,warnings:prop_types_default().arrayOf({id:prop_types_default().string,permissionName:prop_types_default().string,warningMessageSubject:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element])}),snapName:prop_types_default().string.isRequired},SnapInstallWarning.__docgenInfo={description:"",methods:[],displayName:"SnapInstallWarning",props:{onCancel:{description:"onCancel handler",type:{name:"func"},required:!1},onSubmit:{description:"onSubmit handler",type:{name:"func"},required:!1},warnings:{description:"warnings list",type:{name:"arrayOf",value:{name:"custom",raw:"{\n  id: PropTypes.string,\n  permissionName: PropTypes.string,\n  warningMessageSubject: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]),\n}"}},required:!1},snapName:{description:"Snap name",type:{name:"string"},required:!0}}}},"./ui/helpers/utils/permission.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AH:()=>getWeightedPermissions,GA:()=>getRightIcon,d7:()=>getPermissionDescription});var deep_freeze_strict__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/deep-freeze-strict/index.js"),deep_freeze_strict__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(deep_freeze_strict__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_metamask_snaps_controllers__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/esm/snaps/endowments/rpc.js"),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/esm/derivation-paths.js"),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/esm/caveats.js"),_metamask_controller_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@metamask/controller-utils/dist/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__),_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/constants/permissions.ts"),_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_components_component_library__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/component-library/index.ts"),_constants_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/helpers/utils/util.js");const UNKNOWN_PERMISSION=Symbol("unknown"),RIGHT_INFO_ICON=react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Info,size:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.Jh.Sm,color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.EY.iconMuted});function getLeftIcon(iconName){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.fM,{iconName,size:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.dt.Sm,iconProps:{size:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.Jh.Xs}})}function getSnapNameComponent(targetSubjectMetadata){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit},(0,_util__WEBPACK_IMPORTED_MODULE_8__.NZ)(null==targetSubjectMetadata?void 0:targetSubjectMetadata.origin,targetSubjectMetadata))}const PERMISSION_DESCRIPTIONS=deep_freeze_strict__WEBPACK_IMPORTED_MODULE_0___default()({[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.eth_accounts]:({t})=>({label:t("permission_ethereumAccounts"),leftIcon:getLeftIcon(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Eye),rightIcon:null,weight:3}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_dialog]:({t,targetSubjectMetadata})=>({label:t("permission_dialog"),description:t("permission_dialogDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Messages,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_notify]:({t,targetSubjectMetadata})=>({label:t("permission_notifications"),description:t("permission_notificationsDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Notification,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_getBip32PublicKey]:({t,permissionValue,targetSubjectMetadata})=>permissionValue.caveats[0].value.map((({path,curve},i)=>{var _path$join;const baseDescription={leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.SecuritySearch,weight:2,id:`public-key-access-bip32-${null===(_path$join=path.join("-"))||void 0===_path$join?void 0:_path$join.replace(/'/gu,"h")}-${curve}-${i}`,warningMessageSubject:(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__.a1)(path,curve)??`${t("unknownNetworkForKeyEntropy")}  ${path.join("/")} (${curve})`},friendlyName=(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__.a1)(path,curve);return friendlyName?{...baseDescription,label:t("permission_viewNamedBip32PublicKeys",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:path.join("/")},friendlyName)]),description:t("permission_viewBip32PublicKeysDescription",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:`description-${path.join("/")}`},friendlyName)])}:{...baseDescription,label:t("permission_viewBip32PublicKeys",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:path.join("/")},`${t("unknownNetworkForKeyEntropy")} `," ",path.join("/")),curve]),description:t("permission_viewBip32PublicKeysDescription",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:`description-${path.join("/")}`},path.join("/")),getSnapNameComponent(targetSubjectMetadata)])}})),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_getBip32Entropy]:({t,permissionValue,targetSubjectMetadata})=>permissionValue.caveats[0].value.map((({path,curve},i)=>{var _path$join2;const baseDescription={leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Key,weight:1,id:`key-access-bip32-${null===(_path$join2=path.join("-"))||void 0===_path$join2?void 0:_path$join2.replace(/'/gu,"h")}-${curve}-${i}`,warningMessageSubject:(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__.a1)(path,curve)??`${t("unknownNetworkForKeyEntropy")} ${path.join("/")} (${curve})`},friendlyName=(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__.a1)(path,curve);return friendlyName?{...baseDescription,label:t("permission_manageBip32Keys",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:path.join("/")},friendlyName)]),description:t("permission_manageBip44AndBip32KeysDescription",[getSnapNameComponent(targetSubjectMetadata)])}:{...baseDescription,label:t("permission_manageBip32Keys",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:path.join("/")},`${t("unknownNetworkForKeyEntropy")} ${path.join("/")} (${curve})`)]),description:t("permission_manageBip44AndBip32KeysDescription",[getSnapNameComponent(targetSubjectMetadata)])}})),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_getBip44Entropy]:({t,permissionValue,targetSubjectMetadata})=>permissionValue.caveats[0].value.map((({coinType},i)=>({label:t("permission_manageBip44Keys",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:`coin-type-${coinType}`},(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__.C9)(coinType)??`${t("unknownNetworkForKeyEntropy")} m/44'/${coinType}'`)]),description:t("permission_manageBip44AndBip32KeysDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Key,weight:1,id:`key-access-bip44-${coinType}-${i}`,warningMessageSubject:(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_9__.C9)(coinType)??`${t("unknownNetworkForKeyEntropy")} m/44'/${coinType}'`}))),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_getEntropy]:({t,targetSubjectMetadata})=>({label:t("permission_getEntropy",[getSnapNameComponent(targetSubjectMetadata)]),description:t("permission_getEntropyDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.SecurityKey,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_manageState]:({t,targetSubjectMetadata})=>({label:t("permission_manageState"),description:t("permission_manageStateDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.AddSquare,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_getLocale]:({t,targetSubjectMetadata})=>({label:t("permission_getLocale"),description:t("permission_getLocaleDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Global,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.wallet_snap]:({t,permissionValue,targetSubjectMetadata})=>{const snaps=permissionValue.caveats[0].value,baseDescription={leftIcon:getLeftIcon(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Flash),rightIcon:RIGHT_INFO_ICON};return Object.keys(snaps).map((snapId=>{const friendlyName=(0,_util__WEBPACK_IMPORTED_MODULE_8__.NZ)(snapId,targetSubjectMetadata);return friendlyName?{...baseDescription,label:t("permission_accessNamedSnap",[react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:snapId},friendlyName)]),description:t("permission_accessSnapDescription",[friendlyName])}:{...baseDescription,label:t("permission_accessSnap",[snapId]),description:t("permission_accessSnapDescription",[snapId])}}))},[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:network-access"]]:({t,targetSubjectMetadata})=>({label:t("permission_accessNetwork"),description:t("permission_accessNetworkDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Wifi,weight:3}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:webassembly"]]:({t,targetSubjectMetadata})=>({label:t("permission_webAssembly"),description:t("permission_webAssemblyDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.DocumentCode,rightIcon:null,weight:3}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:transaction-insight"]]:({t,permissionValue,targetSubjectMetadata})=>{const baseDescription={leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Speedometer,weight:4},result=[{...baseDescription,label:t("permission_transactionInsight"),description:t("permission_transactionInsightDescription",[getSnapNameComponent(targetSubjectMetadata)])}];return(0,_metamask_controller_utils__WEBPACK_IMPORTED_MODULE_2__.isNonEmptyArray)(permissionValue.caveats)&&permissionValue.caveats[0].type===_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_10__.j.TransactionOrigin&&permissionValue.caveats[0].value&&result.push({...baseDescription,label:t("permission_transactionInsightOrigin"),description:t("permission_transactionInsightOriginDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Explore}),result},[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:cronjob"]]:({t,targetSubjectMetadata})=>({label:t("permission_cronjob"),description:t("permission_cronjobDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Clock,weight:3}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:ethereum-provider"]]:({t,targetSubjectMetadata})=>({label:t("permission_ethereumProvider"),description:t("permission_ethereumProviderDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Ethereum,weight:3,id:"ethereum-provider-access",message:t("ethereumProviderAccess",[getSnapNameComponent(targetSubjectMetadata)])}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:rpc"]]:({t,permissionValue,targetSubjectMetadata})=>{const baseDescription={leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Hierarchy,weight:3},{snaps,dapps,allowedOrigins}=(0,_metamask_snaps_controllers__WEBPACK_IMPORTED_MODULE_11__.sL)(permissionValue),results=[];if(snaps&&results.push({...baseDescription,label:t("permission_rpc",[t("otherSnaps"),getSnapNameComponent(targetSubjectMetadata)]),description:t("permission_rpcDescription",[t("otherSnaps"),getSnapNameComponent(targetSubjectMetadata)])}),dapps&&results.push({...baseDescription,label:t("permission_rpc",[t("websites"),getSnapNameComponent(targetSubjectMetadata)]),description:t("permission_rpcDescription",[t("websites"),getSnapNameComponent(targetSubjectMetadata)])}),(null==allowedOrigins?void 0:allowedOrigins.length)>0){let originsMessage;if(1===allowedOrigins.length)originsMessage=react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium},allowedOrigins[0]);else{const lastOrigin=allowedOrigins.slice(-1);originsMessage=t("permission_rpcDescriptionOriginList",[allowedOrigins.slice(0,-1).map((origin=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium},origin),", "))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.d9.inherit,variant:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,fontWeight:_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.U9.Medium,key:"2"},lastOrigin)])}results.push({...baseDescription,label:t("permission_rpc",[originsMessage,getSnapNameComponent(targetSubjectMetadata)]),description:t("permission_rpcDescription",[originsMessage,getSnapNameComponent(targetSubjectMetadata)])})}return results},[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:lifecycle-hooks"]]:({t,targetSubjectMetadata})=>({label:t("permission_lifecycleHooks"),description:t("permission_lifecycleHooksDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Hierarchy,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:page-home"]]:({t,targetSubjectMetadata})=>({label:t("permission_homePage"),description:t("permission_homePageDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Home,weight:4}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.Gz.snap_manageAccounts]:({t,targetSubjectMetadata})=>({label:t("permission_manageAccounts"),description:t("permission_manageAccountsDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:getLeftIcon(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.UserCircleAdd),rightIcon:null,weight:3}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:keyring"]]:({t,targetSubjectMetadata})=>({label:t("permission_keyring"),description:t("permission_keyringDescription",[getSnapNameComponent(targetSubjectMetadata)]),leftIcon:getLeftIcon(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.UserCircleAdd),rightIcon:null,weight:3}),[_shared_constants_permissions__WEBPACK_IMPORTED_MODULE_4__.TS["endowment:name-lookup"]]:({t})=>({label:t("permission_nameLookup"),description:t("permission_nameLookupDescription"),leftIcon:getLeftIcon(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Search),weight:4}),[UNKNOWN_PERMISSION]:({t,permissionName})=>({label:t("permission_unknown",[permissionName??"undefined"]),leftIcon:getLeftIcon(_components_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Question),rightIcon:null,weight:5})}),getPermissionDescription=({t,permissionName,permissionValue,targetSubjectMetadata})=>{let value=PERMISSION_DESCRIPTIONS[UNKNOWN_PERMISSION];Object.hasOwnProperty.call(PERMISSION_DESCRIPTIONS,permissionName)&&(value=PERMISSION_DESCRIPTIONS[permissionName]);const result=value({t,permissionName,permissionValue,targetSubjectMetadata});return Array.isArray(result)?result.map((item=>({...item,permissionName,permissionValue}))):[{...result,permissionName,permissionValue}]};function getWeightedPermissions(t,permissions,targetSubjectMetadata){return Object.entries(permissions).reduce(((target,[permissionName,permissionValue])=>target.concat(getPermissionDescription({t,permissionName,permissionValue,targetSubjectMetadata}))),[]).sort(((left,right)=>left.weight-right.weight))}function getRightIcon({rightIcon,description,weight}){return rightIcon&&description?react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{wrapperClassName:classnames__WEBPACK_IMPORTED_MODULE_3___default()("permission__tooltip-icon",1===weight&&"permission__tooltip-icon__warning"),html:react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,description),position:"bottom"},"string"==typeof rightIcon?react__WEBPACK_IMPORTED_MODULE_1__.createElement("i",{className:rightIcon}):rightIcon):rightIcon?"string"==typeof rightIcon?react__WEBPACK_IMPORTED_MODULE_1__.createElement("i",{className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(rightIcon,"permission__tooltip-icon")}):rightIcon:null}getRightIcon.__docgenInfo={description:"Get the right icon for a permission. If a description is provided, the icon\nwill be wrapped in a tooltip. Otherwise, the icon will be rendered as-is. If\nthere's no right icon, this function will return null.\n\nIf the weight is 1, the icon will be rendered with a warning color.\n\n@param {PermissionLabelObject} permission - The permission object.\n@param {JSX.Element | string} permission.rightIcon - The right icon.\n@param {string} permission.description - The description.\n@param {number} permission.weight - The weight.\n@returns {JSX.Element | null} The right icon, or null if there's no\nright icon.",methods:[],displayName:"getRightIcon"}},"./ui/hooks/useScrollRequired.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useScrollRequired});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/lodash.js");const useScrollRequired=(dependencies=[])=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),[isScrollableState,setIsScrollable]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[isScrolledToBottomState,setIsScrolledToBottom]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),update=()=>{if(!ref.current)return;const isScrollable=ref.current&&ref.current.scrollHeight>ref.current.clientHeight,isScrolledToBottom=isScrollable&&Math.round(ref.current.scrollTop)+ref.current.offsetHeight+16>=ref.current.scrollHeight;setIsScrollable(isScrollable),isScrollable&&!isScrolledToBottom||setIsScrolledToBottom(!0)};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(update,[ref,...dependencies]);return{isScrollable:isScrollableState,isScrolledToBottom:isScrolledToBottomState,scrollToBottom:()=>{setIsScrolledToBottom(!0),ref.current&&ref.current.scrollTo(0,ref.current.scrollHeight)},ref,onScroll:(0,lodash__WEBPACK_IMPORTED_MODULE_1__.debounce)(update,25)}}},"./ui/pages/permissions-connect/snaps/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>getSnapInstallWarnings});var _helpers_utils_permission__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/helpers/utils/permission.js");function getSnapInstallWarnings(permissions,targetSubjectMetadata,t){return Object.entries(permissions).reduce(((filteredWarnings,[permissionName,permissionValue])=>{const permissionDescription=(0,_helpers_utils_permission__WEBPACK_IMPORTED_MODULE_0__.d7)({t,permissionName,permissionValue,targetSubjectMetadata});return filteredWarnings.concat(permissionDescription.filter((description=>description.weight<=2)))}),[])}}}]);