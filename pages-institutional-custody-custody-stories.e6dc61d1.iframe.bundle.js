"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[2058],{"./ui/pages/institutional/custody/custody.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>custody_stories});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),store=__webpack_require__("./ui/store/store.ts"),test_data=__webpack_require__("./.storybook/test-data.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),institution_background=__webpack_require__("./ui/store/institutional/institution-background.ts"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),institutional_selectors=__webpack_require__("./ui/selectors/institutional/selectors.js"),institutional=__webpack_require__("./ui/ducks/institutional/institutional.js"),account_list=__webpack_require__("./ui/pages/institutional/connect-custody/account-list.js"),jwt_url_form=__webpack_require__("./ui/components/institutional/jwt-url-form/index.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts"),pulse_loader=__webpack_require__("./ui/components/ui/pulse-loader/pulse-loader.js"),confirm_connect_custodian_modal=__webpack_require__("./ui/pages/institutional/confirm-connect-custodian-modal/index.js"),find_by_custodian_name=__webpack_require__("./ui/helpers/utils/institutional/find-by-custodian-name.ts"),actions=__webpack_require__("./ui/store/actions.ts"),process=__webpack_require__("./node_modules/process/browser.js");const CustodyPage=()=>{const t=(0,useI18nContext.C)(),history=(0,react_router.k6)(),trackEvent=(0,react.useContext)(metametrics.Wd),dispatch=(0,es.I0)(),mmiActions=(0,institution_background.I6)(),currentChainId=(0,es.v9)(selectors.BVZ),{custodians}=(0,es.v9)(institutional_selectors.Hg),[loading,setLoading]=(0,react.useState)(!0),[isConfirmConnectCustodianModalVisible,setIsConfirmConnectCustodianModalVisible]=(0,react.useState)(!1),[selectedAccounts,setSelectedAccounts]=(0,react.useState)({}),[selectedCustodianName,setSelectedCustodianName]=(0,react.useState)(""),[selectedCustodianImage,setSelectedCustodianImage]=(0,react.useState)(null),[selectedCustodianDisplayName,setSelectedCustodianDisplayName]=(0,react.useState)(""),[matchedCustodian,setMatchedCustodian]=(0,react.useState)(null),[selectedCustodianType,setSelectedCustodianType]=(0,react.useState)(""),[connectError,setConnectError]=(0,react.useState)(""),[currentJwt,setCurrentJwt]=(0,react.useState)(""),[selectError,setSelectError]=(0,react.useState)(""),[jwtList,setJwtList]=(0,react.useState)([]),[apiUrl,setApiUrl]=(0,react.useState)(""),[addNewTokenClicked,setAddNewTokenClicked]=(0,react.useState)(!1),[chainId,setChainId]=(0,react.useState)(parseInt(currentChainId,16)),connectRequests=(0,es.v9)(institutional.A,lodash.isEqual),[accounts,setAccounts]=(0,react.useState)(),address=(0,es.v9)(selectors.GJg),connectRequest=connectRequests?connectRequests[0]:void 0,isCheckBoxSelected=accounts&&Object.keys(selectedAccounts).length===accounts.length,custodianButtons=(0,react.useMemo)((()=>{const custodianItems=[];return[...custodians].filter((item=>"Jupiter"!==item.type)).sort(((a,b)=>a.envName.toLowerCase().localeCompare(b.envName.toLowerCase()))).forEach((custodian=>{(function shouldShowInProduction(custodian){return"production"in custodian&&!custodian.production&&"production"===process.env.METAMASK_ENVIRONMENT})(custodian)||function isHidden(custodian){return"hidden"in custodian&&custodian.hidden}(custodian)||function isNotSelectedCustodian(custodian){return"envName"in custodian&&connectRequest&&Object.keys(connectRequest).length&&custodian.envName!==selectedCustodianName}(custodian)||custodianItems.push(react.createElement(component_library.xu,{key:custodian.envName,display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,justifyContent:design_system.E0.spaceBetween,alignItems:design_system.g1.center,borderColor:design_system.kf.borderDefault,borderRadius:design_system.cM.SM,padding:4,marginBottom:4},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center},custodian.iconUrl&&react.createElement("img",{width:32,height:32,src:custodian.iconUrl,alt:custodian.displayName}),react.createElement(component_library.xv,{marginLeft:2},custodian.displayName)),react.createElement(component_library.zx,{size:component_library.qE.Sm,"data-testid":"custody-connect-button",onClick:()=>async function handleButtonClick(custodian){try{var _custodianByDisplayNa;const custodianByDisplayName=(0,find_by_custodian_name.M)(custodian.displayName,custodians),jwtListValue=await dispatch(mmiActions.getCustodianJWTList(custodian.envName));setSelectedCustodianName(custodian.envName),setSelectedCustodianDisplayName(custodian.displayName),setSelectedCustodianImage(custodian.iconUrl),setApiUrl(custodian.apiUrl),setCurrentJwt(jwtListValue[0]||""),setJwtList(jwtListValue),"gk8"===(null==custodianByDisplayName||null===(_custodianByDisplayNa=custodianByDisplayName.displayName)||void 0===_custodianByDisplayNa?void 0:_custodianByDisplayNa.toLocaleLowerCase())?setSelectedCustodianType(custodian.type):(setMatchedCustodian(custodianByDisplayName),setIsConfirmConnectCustodianModalVisible(!0)),trackEvent({category:constants_metametrics.ci.MMI,event:constants_metametrics.AW.CustodianSelected,properties:{custodian:custodian.envName}})}catch(error){console.error("Error:",error)}}(custodian)},t("select"))))})),custodianItems}),[connectRequest,custodians,dispatch,mmiActions,selectedCustodianName,t,trackEvent]),handleConnectError=(0,react.useCallback)((e=>{const errorMessage=(error=>{const detailedError=error.message.split(":"),errorCode=parseInt(detailedError[0],10);return detailedError.length>1&&!isNaN(errorCode)?401===errorCode?"Authentication error. Please ensure you have entered the correct token":null:/Network Error/u.test(error.message)?"Network error. Please ensure you have entered the correct API URL":error.message})(e);setConnectError(`Something went wrong connecting your custodian account. Error details: ${errorMessage}`),trackEvent({category:constants_metametrics.ci.MMI,event:constants_metametrics.AW.CustodianConnectionFailed,properties:{custodian:selectedCustodianName}})}),[selectedCustodianName,trackEvent]);(0,react.useEffect)((()=>{setLoading(!0),(async()=>{try{if(connectRequest&&Object.keys(connectRequest).length){const{token,environment:custodianName,service:custodianType,apiUrl:custodianApiUrl}=connectRequest,custodianToken=token||await dispatch(mmiActions.getCustodianToken(address));setCurrentJwt(custodianToken),setSelectedCustodianType(custodianType),setSelectedCustodianName(custodianName||custodianType),setApiUrl(custodianApiUrl),setConnectError("");const accountsValue=await dispatch(mmiActions.getCustodianAccounts(custodianToken,custodianApiUrl,custodianType,!0));setAccounts(accountsValue),trackEvent({category:constants_metametrics.ci.MMI,event:constants_metametrics.AW.CustodianConnected,properties:{custodian:custodianName,apiUrl,rpc:Boolean(connectRequest)}})}}catch(error){console.error(error),handleConnectError(error)}})().finally((()=>setLoading(!1)))}),[]),(0,react.useEffect)((()=>{parseInt(chainId,16)!==chainId&&(setChainId(parseInt(currentChainId,16)),async function handleNetworkChange(){if(!isNaN(chainId)){const jwt=currentJwt||jwtList[0];jwt&&jwt.length&&setAccounts(await dispatch(mmiActions.getCustodianAccounts(jwt,apiUrl,selectedCustodianType,!0)))}}())}),[currentChainId]);const cancelConnectCustodianToken=()=>{setSelectedCustodianName(""),setSelectedCustodianType(""),setSelectedCustodianImage(null),setSelectedCustodianDisplayName(""),setApiUrl(""),setCurrentJwt(""),setConnectError(""),setSelectError(""),window.innerWidth>400?history.push(routes.Lc):__webpack_require__.g.platform.closeCurrentWindow()};return loading?react.createElement(pulse_loader.Z,null):react.createElement(component_library.xu,{className:"main-container",backgroundColor:design_system.lP.backgroundDefault},connectError&&react.createElement(component_library.xv,{"data-testid":"connect-error",textAlign:design_system.PH.Center,marginTop:3,padding:[2,7,5]},connectError),selectError&&react.createElement(component_library.xv,{textAlign:design_system.PH.Center,marginTop:3,padding:[2,7,5]},selectError),!accounts&&!selectedCustodianType&&react.createElement(component_library.xu,{"data-testid":"connect-custodial-account",padding:4,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,width:design_system.Sw.Full},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center,marginBottom:4,marginTop:4},react.createElement(component_library.Ei,{ariaLabel:t("back"),iconName:component_library.uH.ArrowLeft,size:component_library.Jh.Sm,color:design_system.Il.iconDefault,onClick:()=>history.push(routes.QO),display:design_system.sS.Flex}),react.createElement(component_library.xv,null,t("back"))),react.createElement(component_library.xv,{as:"h4",variant:design_system.rK.bodyLgMedium,marginTop:4},t("connectCustodialAccountTitle")),react.createElement(component_library.xv,{as:"h6",color:design_system.d9.textDefault,marginTop:2,marginBottom:5},t("connectCustodialAccountMsg")),react.createElement(component_library.xu,null,react.createElement("ul",{width:design_system.Sw.Full},custodianButtons))),!accounts&&selectedCustodianType&&react.createElement(react.Fragment,null,react.createElement(component_library.xu,{padding:4,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,className:"page-container__content",width:design_system.Sw.Full},window.innerWidth>400&&react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center,marginBottom:4,marginTop:4},react.createElement(component_library.Ei,{"data-testid":"custody-back-button",ariaLabel:t("back"),iconName:component_library.uH.ArrowLeft,size:component_library.Jh.Sm,color:design_system.Il.iconDefault,onClick:cancelConnectCustodianToken,display:[design_system.sS.Flex]}),react.createElement(component_library.xv,null,t("back"))),selectedCustodianImage&&react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center},react.createElement("img",{width:32,height:32,src:selectedCustodianImage,alt:selectedCustodianDisplayName}),react.createElement(component_library.xv,{as:"h4",marginLeft:2},selectedCustodianDisplayName)),react.createElement(component_library.xv,{marginTop:4},t("enterCustodianToken",[selectedCustodianDisplayName])),react.createElement(component_library.xu,{paddingBottom:7},react.createElement(jwt_url_form.Z,{jwtList,currentJwt,onJwtChange:jwt=>setCurrentJwt(jwt),jwtInputText:t("pasteJWTToken"),apiUrl,urlInputText:t("custodyApiUrl",[selectedCustodianDisplayName]),onUrlChange:url=>setApiUrl(url)}))),react.createElement(component_library.xu,{as:"footer",className:"page-container__footer",padding:4},loading?react.createElement(pulse_loader.Z,null):react.createElement(component_library.xu,{display:design_system.sS.Flex,gap:4},react.createElement(component_library.zx,{"data-testid":"custody-cancel-button",block:!0,variant:component_library.Wu.Secondary,size:component_library.qE.Lg,onClick:cancelConnectCustodianToken},t("cancel")),react.createElement(component_library.zx,{block:!0,"data-testid":"jwt-form-connect-button",size:component_library.qE.Lg,onClick:async()=>{try{setConnectError("");const accountsValue=await dispatch(mmiActions.getCustodianAccounts(currentJwt||jwtList[0],apiUrl,selectedCustodianType,!0));setAccounts(accountsValue),trackEvent({category:constants_metametrics.ci.MMI,event:constants_metametrics.AW.CustodianConnected,properties:{custodian:selectedCustodianName,apiUrl,rpc:Boolean(connectRequest)}})}catch(e){handleConnectError(e)}},disabled:!selectedCustodianName||addNewTokenClicked&&!currentJwt},t("connect"))))),accounts&&accounts.length>0&&react.createElement(account_list.Z,{custody:selectedCustodianName,accounts,onAccountChange:account=>{setSelectedAccounts((prevSelectedAccounts=>{const updatedSelectedAccounts={...prevSelectedAccounts};return updatedSelectedAccounts[account.address]?delete updatedSelectedAccounts[account.address]:updatedSelectedAccounts[account.address]={name:account.name,custodianDetails:account.custodianDetails,labels:account.labels,token:currentJwt,apiUrl,chainId:account.chainId,custodyType:selectedCustodianType,custodyName:selectedCustodianName},updatedSelectedAccounts}))},selectedAccounts,onAddAccounts:async()=>{try{const selectedCustodian=custodians.find((custodian=>custodian.envName===selectedCustodianName)),firstAccountKey=Object.keys(selectedAccounts).shift();await dispatch(mmiActions.connectCustodyAddresses(selectedCustodianType,selectedCustodianName,selectedAccounts)),dispatch((0,actions.l30)(firstAccountKey.toLowerCase())),trackEvent({category:constants_metametrics.ci.MMI,event:constants_metametrics.AW.CustodialAccountsConnected,properties:{custodian:selectedCustodianName,numberOfAccounts:Object.keys(selectedAccounts).length,chainId}}),history.push({pathname:routes.H8,state:{imgSrc:selectedCustodian&&selectedCustodian.iconUrl,title:t("custodianAccountAddedTitle",[selectedCustodian&&selectedCustodian.displayName||"Custodian"]),description:t("custodianAccountAddedDesc")}})}catch(e){setSelectError(e.message)}},onCancel:()=>{setAccounts(null),setSelectedCustodianName(null),setSelectedCustodianType(null),setSelectedAccounts({}),setCurrentJwt(""),setApiUrl(""),setAddNewTokenClicked(!1),history.push(routes.QO),trackEvent({category:constants_metametrics.ci.MMI,event:constants_metametrics.AW.CustodianConnectionCanceled,properties:{custodian:selectedCustodianName,numberOfAccounts:Object.keys(selectedAccounts).length,chainId}})}},react.createElement(component_library.xu,{paddingTop:4,paddingBottom:4,width:design_system.Sw.Full},react.createElement(component_library.xv,{as:"h4"},t("selectAnAccount")),react.createElement(component_library.xv,{marginTop:2,marginBottom:2},t("selectAnAccountHelp"))),react.createElement(component_library.xu,{paddingBottom:4,display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,justifyContent:design_system.E0.flexStart,alignItems:design_system.g1.center},react.createElement("input",{type:"checkbox",id:"selectAllAccounts","data-testid":`select-all-accounts-selected-${isCheckBoxSelected}`,name:"selectAllAccounts",marginLeft:2,value:{},onChange:e=>(e=>{const allAccounts={};e.currentTarget.checked?(accounts.forEach((account=>{allAccounts[account.address]={name:account.name,custodianDetails:account.custodianDetails,labels:account.labels,token:currentJwt,apiUrl,chainId:account.chainId,custodyType:selectedCustodianType,custodyName:selectedCustodianName}})),setSelectedAccounts(allAccounts)):setSelectedAccounts({})})(e),checked:isCheckBoxSelected}),react.createElement(component_library.__,{marginLeft:2,htmlFor:"selectAllAccounts"},t("selectAllAccounts")))),accounts&&0===accounts.length&&react.createElement(component_library.xu,{className:"page-container"},react.createElement(component_library.xu,{"data-testid":"custody-accounts-empty",padding:7,className:"page-container__content"},react.createElement(component_library.xv,{marginBottom:2,fontWeight:design_system.U9.Bold,color:design_system.d9.textDefault,variant:design_system.rK.bodyLgMedium},t("allCustodianAccountsConnectedTitle")),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("allCustodianAccountsConnectedSubtitle"))),react.createElement(component_library.xu,{as:"footer",className:"page-container__footer",padding:4},react.createElement(component_library.zx,{block:!0,size:component_library.qE.Lg,type:component_library.Wu.Secondary,onClick:()=>history.push(routes.QO)},t("close")))),isConfirmConnectCustodianModalVisible&&react.createElement(confirm_connect_custodian_modal.Z,{onModalClose:()=>setIsConfirmConnectCustodianModalVisible(!1),custodianName:selectedCustodianDisplayName,custodianURL:(null==matchedCustodian?void 0:matchedCustodian.onboardingUrl)||(null==matchedCustodian?void 0:matchedCustodian.website)}))};CustodyPage.__docgenInfo={description:"",methods:[],displayName:"CustodyPage"};const custody=CustodyPage;var _DefaultStory$paramet,_DefaultStory$paramet2;const customData={...test_data.default,metamask:{...test_data.default.metamask,mmiConfiguration:{portfolio:{enabled:!0,url:"https://portfolio.io"},custodians:[{type:"Saturn",name:"saturn",apiUrl:"https://saturn-custody.dev.metamask-institutional.io",iconUrl:"https://saturn-custody-ui.dev.metamask-institutional.io/saturn.svg",displayName:"Saturn Custody",production:!0,refreshTokenUrl:null,isNoteToTraderSupported:!1,version:1}]}}},custody_stories_store=(0,store.Z)(customData),custody_stories={title:"Pages/Institutional/CustodyPage",decorators:[story=>react.createElement(es.zt,{store:custody_stories_store},story())],component:custody,argTypes:{onClick:{action:"onClick"},onChange:{action:"onChange"}}},DefaultStory=args=>react.createElement(custody,args);DefaultStory.storyName="CustodyPage",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <CustodyPage {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/institutional/custody-labels/custody-labels.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_component_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts");const CustodyLabels=props=>{const{labels,index,background,hideNetwork}=props,filteredLabels=hideNetwork?labels.filter((item=>"network_name"!==item.key)):labels;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.__,{display:["flex"],flexDirection:["row"],htmlFor:`address-${index||0}`},filteredLabels.map((item=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.xv,{key:item.key,textTransform:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__._5.Capitalize,className:"custody-label",style:background?{background}:{},marginTop:1,marginRight:1,marginBottom:2,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.lP.backgroundAlternative,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.d9.textDefault,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.U9.Normal,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.cM.SM,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.rK.bodyXs},item.value))))};CustodyLabels.propTypes={labels:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,index:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,background:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,hideNetwork:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool},CustodyLabels.__docgenInfo={description:"",methods:[],displayName:"CustodyLabels",props:{labels:{description:"",type:{name:"array"},required:!1},index:{description:"",type:{name:"string"},required:!1},background:{description:"",type:{name:"string"},required:!1},hideNetwork:{description:"",type:{name:"bool"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=CustodyLabels},"./ui/components/institutional/custody-labels/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_custody_labels__WEBPACK_IMPORTED_MODULE_0__.Z});var _custody_labels__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/institutional/custody-labels/custody-labels.js")},"./ui/components/institutional/jwt-dropdown/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>jwt_dropdown});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dropdown=__webpack_require__("./ui/components/ui/dropdown/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js");const JwtDropdown=props=>{const t=(0,useI18nContext.C)(),{currentJwt,jwtList}=props;return react.createElement(component_library.xu,null,react.createElement(component_library.xv,{padding:1,color:design_system.Il.textDefault,className:"custody-search-jwt__select-title"},t("selectJWT")),react.createElement(dropdown.Z,{"data-testid":"jwt-dropdown",className:"custody-search-jwt__select",name:"jwt-select",selectedOption:currentJwt,options:[...jwtList.find((item=>item===currentJwt))?[]:[{value:currentJwt,name:currentJwt.length>9?`...${currentJwt.slice(-9)}`:currentJwt}],...jwtList.map((text=>({value:text,name:`...${null==text?void 0:text.slice(-9)}`})))],onChange:opt=>props.onChange(opt.value)}))};JwtDropdown.propTypes={jwtList:prop_types_default().array,currentJwt:prop_types_default().string,onChange:prop_types_default().func},JwtDropdown.__docgenInfo={description:"",methods:[],displayName:"JwtDropdown",props:{jwtList:{description:"",type:{name:"array"},required:!1},currentJwt:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}}};const jwt_dropdown=JwtDropdown},"./ui/components/institutional/jwt-url-form/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>jwt_url_form});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),ui_textarea=__webpack_require__("./ui/components/ui/textarea/index.js"),text_field=__webpack_require__("./ui/components/ui/text-field/index.js"),jwt_dropdown=__webpack_require__("./ui/components/institutional/jwt-dropdown/index.js");const JwtUrlForm=props=>{const t=(0,useI18nContext.C)(),[addNewTokenClicked,setAddNewTokenClicked]=(0,react.useState)(!1),showJwtDropdown=props.jwtList.length>=1;return react.createElement(component_library.xu,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.flexStart,marginBottom:8},react.createElement(component_library.xu,{width:design_system.Sw.Full,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,marginTop:4,alignItems:design_system.g1.center,marginBottom:4},showJwtDropdown&&react.createElement(jwt_dropdown.Z,{key:props.currentJwt,"data-testid":"jwt-dropdown",currentJwt:props.currentJwt?props.currentJwt:props.jwtList[0],jwtList:props.jwtList,onChange:value=>{props.onJwtChange(value)}}),showJwtDropdown&&!addNewTokenClicked&&react.createElement(component_library.xu,{width:design_system.Sw.Full,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.center,marginTop:2},react.createElement(component_library.xv,null,t("or")),react.createElement(component_library.zx,{"data-testid":"addNewToken-btn",variant:component_library.Wu.Secondary,onClick:()=>{props.onJwtChange(""),setAddNewTokenClicked(!0)}},t("addNewToken"))),(!showJwtDropdown||addNewTokenClicked)&&react.createElement(component_library.xu,{width:design_system.Sw.Full},react.createElement(component_library.xv,{display:design_system.sS.Block,variant:design_system.rK.bodyMd,marginBottom:4},props.jwtInputText),react.createElement(ui_textarea.Z,{"data-testid":"jwt-input",id:"jwt-box",onChange:e=>{props.onJwtChange(e.target.value)},value:props.currentJwt,autoFocus:!0,height:"154px",resize:"both",boxProps:{borderRadius:design_system.cM.SM,borderStyle:design_system.N4.solid,backgroundColor:design_system.lP.backgroundDefault,color:design_system.d9.textDefault,padding:2}}))),react.createElement(component_library.xu,{width:design_system.Sw.Full},react.createElement(component_library.xv,{display:design_system.sS.Block,variant:design_system.rK.bodyMd},props.urlInputText),react.createElement(component_library.xu,{marginTop:4},react.createElement(text_field.Z,{fullWidth:!0,id:"api-url-box","data-testid":"jwt-api-url-input",type:"text",onChange:e=>{props.onUrlChange(e.target.value)},value:props.apiUrl,inputProps:{backgroundColor:design_system.lP.backgroundDefault,color:design_system.d9.textDefault,padding:2}}))))};JwtUrlForm.propTypes={jwtList:prop_types_default().array.isRequired,onUrlChange:prop_types_default().func.isRequired,onJwtChange:prop_types_default().func.isRequired,currentJwt:prop_types_default().string,jwtInputText:prop_types_default().string,apiUrl:prop_types_default().string,urlInputText:prop_types_default().string},JwtUrlForm.__docgenInfo={description:"",methods:[],displayName:"JwtUrlForm",props:{jwtList:{description:"",type:{name:"array"},required:!0},onUrlChange:{description:"",type:{name:"func"},required:!0},onJwtChange:{description:"",type:{name:"func"},required:!0},currentJwt:{description:"",type:{name:"string"},required:!1},jwtInputText:{description:"",type:{name:"string"},required:!1},apiUrl:{description:"",type:{name:"string"},required:!1},urlInputText:{description:"",type:{name:"string"},required:!1}}};const jwt_url_form=JwtUrlForm},"./ui/components/ui/textarea/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_textarea__WEBPACK_IMPORTED_MODULE_0__.Z});var _textarea__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/textarea/textarea.js")},"./ui/ducks/institutional/institutional.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>getInstitutionalConnectRequests});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.development.js");const name="institutionalFeatures",slice=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({name,initialState:{}}),{reducer}=slice;const getInstitutionalConnectRequests=state=>{var _state$metamask$name;return null===(_state$metamask$name=state.metamask[name])||void 0===_state$metamask$name?void 0:_state$metamask$name.connectRequests}},"./ui/helpers/utils/institutional/find-by-custodian-name.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function findCustodianByDisplayName(displayName,custodians){const formatedDisplayName=displayName.toLowerCase();if(!custodians)return null;for(const custodian of custodians){const custodianName=custodian.name.toLowerCase();if(0!==custodianName.length&&formatedDisplayName.includes(custodianName))return custodian}return null}__webpack_require__.d(__webpack_exports__,{M:()=>findCustodianByDisplayName})},"./ui/pages/institutional/confirm-connect-custodian-modal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>confirm_connect_custodian_modal});var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),i18n=__webpack_require__("./ui/contexts/i18n.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),deprecated=__webpack_require__("./ui/components/component-library/modal-content/deprecated/index.ts"),modal_header_deprecated=__webpack_require__("./ui/components/component-library/modal-header/deprecated/index.ts");const ConfirmConnectCustodianModal=({onModalClose,custodianName,custodianURL})=>{const t=(0,react.useContext)(i18n.OO);return react.createElement(component_library.u_,{onClose:onModalClose,isOpen:!0,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar","data-testid":"confirm-connect-custodian-modal"},react.createElement(component_library.ZA,null),react.createElement(deprecated.h,null,react.createElement(modal_header_deprecated.x,{onClose:onModalClose},t("connectCustodianAccounts",[custodianName])),react.createElement(component_library.xu,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.center,paddingTop:5},react.createElement(component_library.xv,{paddingTop:3,paddingLeft:4,paddingRight:4,color:design_system.d9.textAlternative,textAlign:design_system.PH.Center},t("confirmConnectCustodianText",[custodianName])),react.createElement(component_library.xv,{paddingTop:3,paddingLeft:4,paddingRight:4,color:design_system.d9.textAlternative,textAlign:design_system.PH.Center},t("confirmConnectCustodianRedirect",[custodianURL])),react.createElement(component_library.xu,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.center,paddingTop:5,paddingBottom:5},react.createElement(component_library.zx,{onClick:()=>window.open(custodianURL,"_blank")},t("continue")),react.createElement(component_library.zx,{paddingTop:3,variant:component_library.Wu.Link,onClick:onModalClose},t("cancel"))))))};ConfirmConnectCustodianModal.__docgenInfo={description:"",methods:[],displayName:"ConfirmConnectCustodianModal",props:{onModalClose:{description:"",type:{name:"func"},required:!0},custodianName:{description:"",type:{name:"string"},required:!0},custodianURL:{description:"",type:{name:"string"},required:!1}}};const confirm_connect_custodian_modal=ConfirmConnectCustodianModal;ConfirmConnectCustodianModal.propTypes={onModalClose:prop_types_default().func.isRequired,custodianName:prop_types_default().string.isRequired,custodianURL:prop_types_default().string}},"./ui/pages/institutional/connect-custody/account-list.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CustodyAccountList});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_components_institutional_custody_labels__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/institutional/custody-labels/index.js"),_shared_constants_swaps__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/constants/swaps.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/constants/network.ts"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/utils/util.js"),_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/useI18nContext.js"),_components_component_library__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useCopyToClipboard__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/hooks/useCopyToClipboard.js");const getButtonLinkHref=account=>`${_shared_constants_swaps__WEBPACK_IMPORTED_MODULE_2__.k3[_shared_constants_network__WEBPACK_IMPORTED_MODULE_3__.vo.MAINNET]}address/${account.address}`;function CustodyAccountList({rawList,accounts,onAccountChange,selectedAccounts,onCancel,onAddAccounts,custody,children}){const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_7__.C)(),[copied,handleCopy]=(0,_hooks_useCopyToClipboard__WEBPACK_IMPORTED_MODULE_9__.m)(),tooltipText=t(copied?"copiedExclamation":"copyToClipboard"),disabled=!selectedAccounts||0===Object.keys(selectedAccounts).length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{className:"page-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{padding:4,className:"page-container__content"},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Qb.Column,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Sw.Full,className:"custody-account-list","data-testid":"custody-account-list"},accounts.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase()))).map(((account,idx)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,className:"custody-account-list__item",key:account.address},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.g1.flexStart,"data-testid":"custody-account-list-item-radio-button"},!rawList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"checkbox",name:"selectedAccount",id:`address-${idx}`,onChange:()=>onAccountChange({name:account.name,address:account.address,custodianDetails:account.custodianDetails,labels:account.labels,chainId:account.chainId}),checked:selectedAccounts[account.address]||!1})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Qb.Column,marginLeft:2,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Sw.Full},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.__,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,marginTop:2,htmlFor:`address-${idx}`,className:"custody-account-list__item__title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xv,{as:"span",variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.inherit,size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.bodySm,paddingRight:1,className:"custody-account-list__item__name"},account.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.__,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.bodySm,marginTop:2,marginLeft:2,marginRight:3,htmlFor:`address-${idx}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xv,{as:"span",variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.bodyMd,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,className:"custody-account-list__item"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.ZP,{href:getButtonLinkHref(account),target:"_blank",rel:"noopener noreferrer"},(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__.$Q)(account.address),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Jh.EXPORT,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.uH.SM,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.EY.primaryDefault,marginLeft:1})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{position:"bottom",title:tooltipText,style:{backgroundColor:"transparent"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"custody-account-list__item__clipboard",onClick:()=>handleCopy(account.address)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Jh.COPY,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.uH.XS,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.EY.iconMuted}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.E0.spaceBetween},account.labels&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_institutional_custody_labels__WEBPACK_IMPORTED_MODULE_1__.Z,{labels:account.labels,index:idx.toString(),hideNetwork:!0})))))))),!rawList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{as:"footer",className:"page-container__footer",padding:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,gap:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.zx,{"data-testid":"custody-account-cancel-button",block:!0,variant:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Wu.Secondary,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.qE.Lg,className:"custody-account-list__button",onClick:onCancel},t("cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.zx,{"data-testid":"custody-account-connect-button",block:!0,variant:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Wu.Primary,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.qE.Lg,className:"custody-account-list__button",disabled,onClick:()=>onAddAccounts(custody)},t("connect")))))}CustodyAccountList.propTypes={custody:prop_types__WEBPACK_IMPORTED_MODULE_10___default().string,accounts:prop_types__WEBPACK_IMPORTED_MODULE_10___default().array.isRequired,onAccountChange:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,selectedAccounts:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,onAddAccounts:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,onCancel:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,rawList:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,children:prop_types__WEBPACK_IMPORTED_MODULE_10___default().node},CustodyAccountList.__docgenInfo={description:"",methods:[],displayName:"CustodyAccountList",props:{custody:{description:"",type:{name:"string"},required:!1},accounts:{description:"",type:{name:"array"},required:!0},onAccountChange:{description:"",type:{name:"func"},required:!1},selectedAccounts:{description:"",type:{name:"object"},required:!1},onAddAccounts:{description:"",type:{name:"func"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},rawList:{description:"",type:{name:"bool"},required:!1},children:{description:"",type:{name:"node"},required:!1}}}}}]);