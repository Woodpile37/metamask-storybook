"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[1504],{"./ui/pages/keychains/reveal-seed.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>reveal_seed_stories});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),qrcode=__webpack_require__("./node_modules/qrcode-generator/qrcode.js"),qrcode_default=__webpack_require__.n(qrcode),actions=__webpack_require__("./ui/store/actions.ts"),export_text_container=__webpack_require__("./ui/components/ui/export-text-container/index.js"),history_history=__webpack_require__("./ui/ducks/history/history.js"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),box=__webpack_require__("./ui/components/ui/box/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),contexts_metametrics=__webpack_require__("./ui/contexts/metametrics.js"),zendesk_url=__webpack_require__("./ui/helpers/constants/zendesk-url.js"),tabs=__webpack_require__("./ui/components/ui/tabs/index.js");const RevealSeedPage=()=>{const history=(0,react_router.k6)(),dispatch=(0,es.I0)(),t=(0,useI18nContext.C)(),trackEvent=(0,react.useContext)(contexts_metametrics.Wd),[screen,setScreen]=(0,react.useState)("PASSWORD_PROMPT_SCREEN"),[password,setPassword]=(0,react.useState)(""),[seedWords,setSeedWords]=(0,react.useState)(null),[completedLongPress,setCompletedLongPress]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),mostRecentOverviewPage=(0,es.v9)(history_history.H7);(0,react.useEffect)((()=>{const passwordBox=document.getElementById("password-box");passwordBox&&passwordBox.focus()}),[]);const renderQR=()=>{const qrImage=qrcode_default()(0,"L");return qrImage.addData(seedWords),qrImage.make(),qrImage},handleSubmit=event=>{event.preventDefault(),setSeedWords(null),setCompletedLongPress(!1),setError(null),dispatch((0,actions.RrP)(password)).then((revealedSeedWords=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportRevealed,properties:{key_type:metametrics.Dv.Srp}}),setSeedWords(revealedSeedWords),dispatch((0,actions.K4b)({name:"HOLD_TO_REVEAL_SRP",onLongPressed:()=>{setCompletedLongPress(!0),setScreen("REVEAL_SEED_SCREEN")},holdToRevealType:"SRP"}))})).catch((e=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportFailed,properties:{key_type:metametrics.Dv.Srp,reason:e.message}}),setError(e.message)}))};return react.createElement(box.ZP,{className:"page-container",paddingTop:8,paddingBottom:8,paddingLeft:4,paddingRight:4,gap:4},react.createElement(component_library.xv,{variant:design_system.rK.headingLg},t("secretRecoveryPhrase")),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("revealSeedWordsDescription1",[react.createElement(component_library.zx,{key:"srp-learn-srp",variant:component_library.RN.LINK,size:component_library.Gt.INHERIT,as:"a",href:zendesk_url.Z.SECRET_RECOVERY_PHRASE,target:"_blank",rel:"noopener noreferrer"},t("revealSeedWordsSRPName")),react.createElement(component_library.xv,{key:"reveal-seed-word-part-3",variant:design_system.rK.bodyMdBold,as:"strong"},t("revealSeedWordsDescription3"))])),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("revealSeedWordsDescription2",[react.createElement(component_library.zx,{key:"srp-learn-more-non-custodial",variant:component_library.RN.LINK,size:component_library.Gt.INHERIT,as:"a",href:zendesk_url.Z.NON_CUSTODIAL_WALLET,target:"_blank",rel:"noopener noreferrer"},t("revealSeedWordsNonCustodialWallet"))])),react.createElement(component_library.wB,{severity:design_system.t3.DANGER},react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("revealSeedWordsWarning",[react.createElement(component_library.xv,{key:"reveal-seed-words-warning-2",variant:design_system.rK.bodyMdBold,as:"strong"},t("revealSeedWordsWarning2"))]))),"PASSWORD_PROMPT_SCREEN"!==screen&&completedLongPress?(trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpViewSrpText,properties:{key_type:metametrics.Dv.Srp}}),react.createElement("div",null,react.createElement(tabs.m,{defaultActiveTabName:t("revealSeedWordsText"),onTabClick:tabName=>{"text-seed"===tabName?trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpViewSrpText,properties:{key_type:metametrics.Dv.Srp}}):"qr-srp"===tabName&&trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpViewsSrpQR,properties:{key_type:metametrics.Dv.Srp}})}},react.createElement(tabs.O,{name:t("revealSeedWordsText"),className:"reveal-seed__tab",activeClassName:"reveal-seed__active-tab",tabKey:"text-seed"},react.createElement(component_library.__,{marginTop:4},t("yourPrivateSeedPhrase")),react.createElement(export_text_container.Z,{text:seedWords,onClickCopy:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportCopied,properties:{key_type:metametrics.Dv.Srp,copy_method:"clipboard"}}),trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpCopiedToClipboard,properties:{key_type:metametrics.Dv.Srp,copy_method:"clipboard"}})}})),react.createElement(tabs.O,{name:t("revealSeedWordsQR"),className:"reveal-seed__tab",activeClassName:"reveal-seed__active-tab",tabKey:"qr-srp"},react.createElement(box.ZP,{display:design_system.bA.FLEX,justifyContent:design_system.E0.center,alignItems:design_system.g1.center,paddingTop:4,"data-testid":"qr-srp"},react.createElement("div",{dangerouslySetInnerHTML:{__html:renderQR().createTableTag(5,15)}})))))):react.createElement("form",{onSubmit:event=>handleSubmit(event)},react.createElement(component_library.__,{htmlFor:"password-box"},t("enterPasswordContinue")),react.createElement(component_library.nv,{inputProps:{"data-testid":"input-password"},type:component_library.hk.PASSWORD,placeholder:t("makeSureNoOneWatching"),id:"password-box",size:component_library.SG.LG,value:password,onChange:event=>setPassword(event.target.value),error,width:design_system.D8.FULL}),error&&react.createElement(component_library.RU,{severity:design_system.t3.DANGER},error)),"PASSWORD_PROMPT_SCREEN"!==screen&&completedLongPress?react.createElement(box.ZP,{marginTop:"auto"},react.createElement(component_library.zx,{variant:component_library.RN.SECONDARY,width:design_system.D8.FULL,size:design_system.$u.LG,onClick:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpRevealCloseClicked,properties:{key_type:metametrics.Dv.Srp}}),history.push(mostRecentOverviewPage)}},t("close"))):react.createElement(box.ZP,{display:design_system.bA.FLEX,marginTop:"auto",gap:4},react.createElement(component_library.zx,{width:design_system.D8.FULL,size:design_system.$u.LG,variant:component_library.RN.SECONDARY,onClick:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportCanceled,properties:{key_type:metametrics.Dv.Srp}}),trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpRevealCancelled,properties:{key_type:metametrics.Dv.Srp}}),history.push(mostRecentOverviewPage)}},t("cancel")),react.createElement(component_library.zx,{width:design_system.D8.FULL,size:design_system.$u.LG,onClick:event=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportRequested,properties:{key_type:metametrics.Dv.Srp}}),trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpRevealNextClicked,properties:{key_type:metametrics.Dv.Srp}}),handleSubmit(event)},disabled:""===password},t("next"))))};RevealSeedPage.__docgenInfo={description:"",methods:[],displayName:"RevealSeedPage"};const reveal_seed=RevealSeedPage;var _DefaultStory$paramet,_DefaultStory$paramet2,_DefaultStory$paramet3;const reveal_seed_stories={title:"Pages/Keychains/RevealSeedPage",argTypes:{requestRevealSeedWords:{action:"requestRevealSeedWords"},history:{control:"object"},mostRecentOverviewPage:{control:"text"}}},DefaultStory=args=>react.createElement(reveal_seed,args);DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <RevealSeedPage {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet3=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet3?void 0:_DefaultStory$paramet3.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/ui/export-text-container/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>export_text_container});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),useCopyToClipboard=__webpack_require__("./ui/hooks/useCopyToClipboard.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),box=__webpack_require__("./ui/components/ui/box/box.js"),component_library=__webpack_require__("./ui/components/component-library/index.js");function ExportTextContainer({text="",onClickCopy=null}){const t=(0,useI18nContext.C)(),[copied,handleCopy]=(0,useCopyToClipboard.m)(6e4);return react.createElement(box.ZP,{display:design_system.bA.FLEX,justifyContent:design_system.E0.center,flexDirection:design_system.uM.COLUMN,alignItems:design_system.g1.center,borderColor:design_system.kf.borderDefault,borderRadius:design_system.cM.MD,padding:4,gap:4},react.createElement(component_library.xv,{display:design_system.bA.FLEX,justifyContent:design_system.E0.CENTER,className:"notranslate",variant:design_system.rK.bodyLgMedium,"data-testid":"srp_text"},text),react.createElement(component_library.PL,{className:"export-text-container__button",block:!0,onClick:()=>{onClickCopy&&onClickCopy(),handleCopy(text)}},t(copied?"copiedExclamation":"copyToClipboard")))}ExportTextContainer.propTypes={text:prop_types_default().string,onClickCopy:prop_types_default().func},ExportTextContainer.__docgenInfo={description:"",methods:[],displayName:"ExportTextContainer",props:{text:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},onClickCopy:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};const export_text_container=react.memo(ExportTextContainer)},"./ui/components/ui/tabs/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>tab,m:()=>tabs_component.Z});var tabs_component=__webpack_require__("./ui/components/ui/tabs/tabs.component.js");const tab=__webpack_require__("./ui/components/ui/tabs/tab/tab.component.js").Z},"./ui/components/ui/tabs/tab/tab.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_box__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/components/ui/box/index.js");const Tab=props=>{const{activeClassName,className,"data-testid":dataTestId,isActive,name,onClick,tabIndex,tabKey}=props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box__WEBPACK_IMPORTED_MODULE_3__.ZP,{as:"li",className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("tab",className,{"tab--active":isActive,[activeClassName]:activeClassName&&isActive}),"data-testid":dataTestId,onClick:event=>{event.preventDefault(),onClick(tabIndex)},key:tabKey},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box__WEBPACK_IMPORTED_MODULE_3__.ZP,{as:"button",padding:2,textAlign:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.PH.Center,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.bA.BLOCK,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.D8.FULL},name))};Tab.propTypes={activeClassName:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,"data-testid":prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,isActive:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,name:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string.isRequired,tabKey:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string.isRequired,onClick:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func,tabIndex:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number},Tab.defaultProps={activeClassName:void 0,className:void 0,onClick:void 0},Tab.__docgenInfo={description:"",methods:[],displayName:"Tab",props:{activeClassName:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},className:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"func"},required:!1},"data-testid":{description:"",type:{name:"string"},required:!1},isActive:{description:"",type:{name:"bool"},required:!1},name:{description:"",type:{name:"string"},required:!0},tabKey:{description:"",type:{name:"string"},required:!0},tabIndex:{description:"",type:{name:"number"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=Tab},"./ui/components/ui/tabs/tabs.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_box__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/ui/box/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts");const Tabs=({defaultActiveTabKey,onTabClick,children,tabsClassName,subHeader})=>{const _getValidChildren=()=>react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children).filter(Boolean),[activeTabIndex,setActiveTabIndex]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>{return Math.max((tabKey=defaultActiveTabKey,_getValidChildren().findIndex((c=>(null==c?void 0:c.props.tabKey)===tabKey))),0);var tabKey}));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box__WEBPACK_IMPORTED_MODULE_2__.ZP,{className:"tabs"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box__WEBPACK_IMPORTED_MODULE_2__.ZP,{as:"ul",display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.bA.FLEX,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.E0.flexStart,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.lP.backgroundDefault,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("tabs__list",tabsClassName),gap:1},(()=>{const numberOfTabs=react__WEBPACK_IMPORTED_MODULE_0__.Children.count(_getValidChildren());return react__WEBPACK_IMPORTED_MODULE_0__.Children.map(_getValidChildren(),((child,index)=>{const tabKey=null==child?void 0:child.props.tabKey;return child&&react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(child,{onClick:idx=>((tabIndex,tabKey)=>{tabIndex!==activeTabIndex&&(setActiveTabIndex(tabIndex),null==onTabClick||onTabClick(tabKey))})(idx,tabKey),tabIndex:index,isActive:numberOfTabs>1&&index===activeTabIndex})}))})()),subHeader,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box__WEBPACK_IMPORTED_MODULE_2__.ZP,{className:"tabs__content"},(()=>{const validChildren=_getValidChildren();if(Array.isArray(validChildren)&&!validChildren[activeTabIndex]||!Array.isArray(validChildren)&&0!==activeTabIndex)throw new Error(`Tab at index '${activeTabIndex}' does not exist`);return validChildren[activeTabIndex]?validChildren[activeTabIndex].props.children:validChildren.props.children})()))};Tabs.__docgenInfo={description:"",methods:[],displayName:"Tabs",props:{defaultActiveTabKey:{description:"",type:{name:"string"},required:!1},onTabClick:{description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"node"},required:!0},tabsClassName:{description:"",type:{name:"string"},required:!1},subHeader:{description:"",type:{name:"node"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=Tabs;Tabs.propTypes={defaultActiveTabKey:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,onTabClick:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func,children:prop_types__WEBPACK_IMPORTED_MODULE_4___default().node.isRequired,tabsClassName:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,subHeader:prop_types__WEBPACK_IMPORTED_MODULE_4___default().node}}}]);