"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[2589],{"./ui/components/app/approve-content-card/approve-content-card.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>approve_content_card_stories});var _DefaultStory$paramet,_DefaultStory$paramet2,react=__webpack_require__("./node_modules/react/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),box=__webpack_require__("./ui/components/ui/box/box.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),i18n=__webpack_require__("./ui/contexts/i18n.js"),confirm_gas_display=__webpack_require__("./ui/components/app/confirm-gas-display/index.js"),confirm_tx_util=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts");function ApproveContentCard({showHeader=!0,symbol,title,showEdit,showAdvanceGasFeeOptions=!1,onEditClick,footer,noBorder,supportsEIP1559,renderTransactionDetailsContent,renderDataContent,ethTransactionTotal,nativeCurrency,fiatTransactionTotal,currentCurrency,isSetApproveForAll,isApprovalOrRejection,data,userAcknowledgedGasMissing,renderSimulationFailureWarning,useCurrencyRateCheck}){const t=(0,react.useContext)(i18n.OO);return react.createElement(box.ZP,{className:classnames_default()({"approve-content-card-container__card":!noBorder,"approve-content-card-container__card--no-border":noBorder})},showHeader&&react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,alignItems:design_system.g1.center,justifyContent:design_system.E0.flexEnd,className:"approve-content-card-container__card-header"},supportsEIP1559&&title===t("transactionFee")?null:react.createElement(react.Fragment,null,react.createElement(box.ZP,{className:"approve-content-card-container__card-header__symbol"},symbol),react.createElement(box.ZP,{marginLeft:4,className:"approve-content-card-container__card-header__title"},react.createElement(component_library.xv,{variant:design_system.rK.bodySmBold,as:"h6"},title))),showEdit&&(!showAdvanceGasFeeOptions||!supportsEIP1559)&&react.createElement(box.ZP,{width:design_system.Sw.OneSixth},react.createElement(ui_button.Z,{type:"link",onClick:()=>onEditClick()},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.primaryDefault,as:"h6"},t("edit"))))),react.createElement(box.ZP,{marginTop:1,marginBottom:3,className:"approve-content-card-container__card-content"},renderTransactionDetailsContent&&(supportsEIP1559&&!renderSimulationFailureWarning?react.createElement(confirm_gas_display.D,{userAcknowledgedGasMissing}):react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,justifyContent:design_system.E0.spaceBetween},react.createElement(box.ZP,null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative,as:"h6"},t("feeAssociatedRequest"))),react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.flexEnd,textAlign:design_system.PH.Right},useCurrencyRateCheck&&react.createElement(box.ZP,null,react.createElement(component_library.xv,{variant:design_system.rK.headingSm,fontWeight:design_system.U9.Bold,color:design_system.d9.textDefault,as:"h4"},(0,confirm_tx_util.xG)(fiatTransactionTotal,currentCurrency))),react.createElement(box.ZP,null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,fontWeight:design_system.U9.Normal,color:design_system.d9.textMuted,as:"h6"},`${ethTransactionTotal} ${nativeCurrency}`))))),renderDataContent&&react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column},react.createElement(box.ZP,null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative,as:"h6"},t(isSetApproveForAll?"functionSetApprovalForAll":"functionApprove"))),isSetApproveForAll&&void 0!==isApprovalOrRejection?react.createElement(box.ZP,null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative,as:"h6"},`${t("parameters")}: ${isApprovalOrRejection}`)):null,react.createElement(box.ZP,{marginRight:4,className:"approve-content-card-container__data__data-block"},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative,as:"h6"},data)))),footer)}ApproveContentCard.propTypes={showHeader:prop_types_default().bool,symbol:prop_types_default().node,title:prop_types_default().string,showEdit:prop_types_default().bool,showAdvanceGasFeeOptions:prop_types_default().bool,onEditClick:prop_types_default().func,footer:prop_types_default().node,noBorder:prop_types_default().bool,supportsEIP1559:prop_types_default().bool,renderTransactionDetailsContent:prop_types_default().bool,renderDataContent:prop_types_default().bool,ethTransactionTotal:prop_types_default().string,nativeCurrency:prop_types_default().string,fiatTransactionTotal:prop_types_default().string,currentCurrency:prop_types_default().string,isSetApproveForAll:prop_types_default().bool,isApprovalOrRejection:prop_types_default().bool,data:prop_types_default().string,userAcknowledgedGasMissing:prop_types_default().bool,renderSimulationFailureWarning:prop_types_default().bool,useCurrencyRateCheck:prop_types_default().bool},ApproveContentCard.__docgenInfo={description:"",methods:[],displayName:"ApproveContentCard",props:{showHeader:{defaultValue:{value:"true",computed:!1},description:"Whether to show header including icon, transaction fee text and edit button",type:{name:"bool"},required:!1},showAdvanceGasFeeOptions:{defaultValue:{value:"false",computed:!1},description:"Whether to show advanced gas fee options or not",type:{name:"bool"},required:!1},symbol:{description:"Symbol icon",type:{name:"node"},required:!1},title:{description:"Title to be included in the header",type:{name:"string"},required:!1},showEdit:{description:"Whether to show edit button or not",type:{name:"bool"},required:!1},onEditClick:{description:"Should open customize gas modal when edit button is clicked",type:{name:"func"},required:!1},footer:{description:"Footer to be shown",type:{name:"node"},required:!1},noBorder:{description:"Whether to include border-bottom or not",type:{name:"bool"},required:!1},supportsEIP1559:{description:"Is enhanced gas fee enabled or not",type:{name:"bool"},required:!1},renderTransactionDetailsContent:{description:"Whether to render transaction details content or not",type:{name:"bool"},required:!1},renderDataContent:{description:"Whether to render data content or not",type:{name:"bool"},required:!1},ethTransactionTotal:{description:"Total sum of the transaction in native currency",type:{name:"string"},required:!1},nativeCurrency:{description:"Current native currency",type:{name:"string"},required:!1},fiatTransactionTotal:{description:"Total sum of the transaction in fiat currency",type:{name:"string"},required:!1},currentCurrency:{description:"Current fiat currency",type:{name:"string"},required:!1},isSetApproveForAll:{description:"Is set approve for all or not",type:{name:"bool"},required:!1},isApprovalOrRejection:{description:"Whether a current set approval for all transaction will approve or revoke access",type:{name:"bool"},required:!1},data:{description:"Current transaction data",type:{name:"string"},required:!1},userAcknowledgedGasMissing:{description:"User acknowledge gas is missing or not",type:{name:"bool"},required:!1},renderSimulationFailureWarning:{description:"Render simulation failure warning",type:{name:"bool"},required:!1},useCurrencyRateCheck:{description:"Fiat conversion control",type:{name:"bool"},required:!1}}};const approve_content_card_stories={title:"Components/App/ApproveContentCard",argTypes:{showHeader:{control:"boolean"},symbol:{control:"array"},title:{control:"text"},showEdit:{control:"boolean"},showAdvanceGasFeeOptions:{control:"boolean"},footer:{control:"array"},noBorder:{control:"boolean"},supportsEIP1559:{control:"boolean"},renderTransactionDetailsContent:{control:"boolean"},renderDataContent:{control:"boolean"},isMultiLayerFeeNetwork:{control:"boolean"},ethTransactionTotal:{control:"text"},nativeCurrency:{control:"text"},fullTxData:{control:"object"},hexTransactionTotal:{control:"text"},fiatTransactionTotal:{control:"text"},currentCurrency:{control:"text"},isSetApproveForAll:{control:"boolean"},isApprovalOrRejection:{control:"boolean"},data:{control:"text"},onEditClick:{control:"onEditClick"}},args:{showHeader:!0,symbol:react.createElement(component_library.JO,{name:component_library.uH.Tag}),title:"Transaction fee",showEdit:!0,showAdvanceGasFeeOptions:!0,noBorder:!0,supportsEIP1559:!1,renderTransactionDetailsContent:!0,renderDataContent:!1,isMultiLayerFeeNetwork:!1,ethTransactionTotal:"0.0012",nativeCurrency:"GoerliETH",hexTransactionTotal:"0x44364c5bb0000",fiatTransactionTotal:"1.54",currentCurrency:"usd",isSetApproveForAll:!1,isApprovalOrRejection:!1,data:"",fullTxData:{id:0xad590f2e974ef,time:1664449552289,status:"unapproved",originalGasEstimate:"0xea60",userEditedGasLimit:!1,chainId:"0x3",loadingDefaults:!1,dappSuggestedGasFees:{gasPrice:"0x4a817c800",gas:"0xea60"},sendFlowHistory:[],txParams:{from:"0xdd34b35ca1de17dfcdc07f79ff1f8f94868c40a1",to:"0x55797717b9947b31306f4aac7ad1365c6e3923bd",value:"0x0",data:"0x095ea7b30000000000000000000000009bc5baf874d2da8d216ae9f137804184ee5afef40000000000000000000000000000000000000000000000000000000000011170",gas:"0xea60",maxFeePerGas:"0x4a817c800",maxPriorityFeePerGas:"0x4a817c800"},origin:"https://metamask.github.io",type:"approve",history:[{id:0xad590f2e974ef,time:1664449552289,status:"unapproved",originalGasEstimate:"0xea60",userEditedGasLimit:!1,chainId:"0x3",loadingDefaults:!0,dappSuggestedGasFees:{gasPrice:"0x4a817c800",gas:"0xea60"},sendFlowHistory:[],txParams:{from:"0xdd34b35ca1de17dfcdc07f79ff1f8f94868c40a1",to:"0x55797717b9947b31306f4aac7ad1365c6e3923bd",value:"0x0",data:"0x095ea7b30000000000000000000000009bc5baf874d2da8d216ae9f137804184ee5afef40000000000000000000000000000000000000000000000000000000000011170",gas:"0xea60",gasPrice:"0x4a817c800"},origin:"https://metamask.github.io",type:"approve"},[{op:"remove",path:"/txParams/gasPrice",note:"Added new unapproved transaction.",timestamp:1664449553939},{op:"add",path:"/txParams/maxFeePerGas",value:"0x4a817c800"},{op:"add",path:"/txParams/maxPriorityFeePerGas",value:"0x4a817c800"},{op:"replace",path:"/loadingDefaults",value:!1},{op:"add",path:"/userFeeLevel",value:"custom"},{op:"add",path:"/defaultGasEstimates",value:{estimateType:"custom",gas:"0xea60",maxFeePerGas:"0x4a817c800",maxPriorityFeePerGas:"0x4a817c800"}}]],userFeeLevel:"custom",defaultGasEstimates:{estimateType:"custom",gas:"0xea60",maxFeePerGas:"0x4a817c800",maxPriorityFeePerGas:"0x4a817c800"}}}},DefaultStory=args=>react.createElement(ApproveContentCard,args);DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => {\n  return <ApproveContentCard {...args} />;\n}",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/app/confirm-gas-display/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>_confirm_gas_display__WEBPACK_IMPORTED_MODULE_0__.Z});var _confirm_gas_display__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/confirm-gas-display/confirm-gas-display.js")},"./ui/components/ui/loading-heartbeat/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>LoadingHeartBeat});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),gas=__webpack_require__("./ui/helpers/utils/gas.js"),app=__webpack_require__("./ui/ducks/app/app.ts"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),useGasFeeEstimates=__webpack_require__("./ui/hooks/useGasFeeEstimates.js");var process=__webpack_require__("./node_modules/process/browser.js");const LOADING_CLASS="loading-heartbeat--active";function LoadingHeartBeat({estimateUsed,backgroundColor="var(--color-background-default)"}){!function useShouldAnimateGasEstimations(){const{isGasEstimatesLoading,gasFeeEstimates}=(0,useGasFeeEstimates.a)(),dispatch=(0,es.I0)(),isGasLoadingAnimationActive=(0,es.v9)(app.Jl),lastGasEstimates=(0,react.useRef)(gasFeeEstimates),gasEstimatesChanged=!(0,lodash.isEqual)(lastGasEstimates.current,gasFeeEstimates),gasJustLoaded=(0,lodash.isEqual)(lastGasEstimates.current,{});gasEstimatesChanged&&(lastGasEstimates.current=gasFeeEstimates);const showLoadingAnimation=isGasEstimatesLoading||gasEstimatesChanged&&!gasJustLoaded;(0,react.useEffect)((()=>{!1===isGasLoadingAnimationActive&&!0===showLoadingAnimation&&dispatch((0,app.nh)(!0))}),[dispatch,isGasLoadingAnimationActive,showLoadingAnimation]),(0,react.useEffect)((()=>{let timer;return isGasLoadingAnimationActive&&!showLoadingAnimation&&(timer=setTimeout((()=>{dispatch((0,app.nh)(!1))}),2e3)),()=>{timer&&clearTimeout(timer)}}),[dispatch,isGasLoadingAnimationActive,showLoadingAnimation])}();const active=(0,es.v9)(app.Jl);return process.env.IN_TEST||estimateUsed&&!(0,gas.DW)(estimateUsed)?null:react.createElement("div",{className:classnames_default()("loading-heartbeat",{[LOADING_CLASS]:active}),onClick:e=>{e.preventDefault(),e.stopPropagation()},style:{backgroundColor}})}LoadingHeartBeat.propTypes={backgroundColor:prop_types_default().string,estimateUsed:prop_types_default().string},LoadingHeartBeat.__docgenInfo={description:"",methods:[],displayName:"LoadingHeartBeat",props:{backgroundColor:{defaultValue:{value:"'var(--color-background-default)'",computed:!1},description:"",type:{name:"string"},required:!1},estimateUsed:{description:"",type:{name:"string"},required:!1}}}}}]);