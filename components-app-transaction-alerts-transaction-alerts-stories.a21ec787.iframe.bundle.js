(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[4820],{"./ui/components/app/transaction-alerts/transaction-alerts.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BusyNetwork:()=>BusyNetwork,DefaultStory:()=>DefaultStory,LowPriority:()=>LowPriority,MultiplePendingTransactions:()=>MultiplePendingTransactions,SimulationError:()=>SimulationError,SinglePendingTransaction:()=>SinglePendingTransaction,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory$paramet,_DefaultStory$paramet2,_DefaultStory$paramet3,_SimulationError$para,_SimulationError$para2,_SimulationError$para3,_SinglePendingTransac,_SinglePendingTransac2,_SinglePendingTransac3,_MultiplePendingTrans,_MultiplePendingTrans2,_MultiplePendingTrans3,_LowPriority$paramete,_LowPriority$paramete2,_LowPriority$paramete3,_BusyNetwork$paramete,_BusyNetwork$paramete2,_BusyNetwork$paramete3,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),ethereumjs_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ethereumjs-util/dist.browser/index.js"),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash/lodash.js"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/contexts/gasFee.js"),_store_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/store/store.ts"),_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./.storybook/test-data.js"),___WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/components/app/transaction-alerts/index.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const customTransaction=({estimateUsed,hasSimulationError,i=0,...props}={})=>{var _testData$metamask,_testData$metamask2,_testData$metamask2$p,_testData$metamask3;const tx={simulationFails:Boolean(hasSimulationError),userFeeLevel:estimateUsed?"low":"medium",blockNumber:`${10902987+i}`,id:4678200543090545+i,metamaskNetworkId:null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask?void 0:_testData$metamask.networkId,chainId:null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask2=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask2||null===(_testData$metamask2$p=_testData$metamask2.providerConfig)||void 0===_testData$metamask2$p?void 0:_testData$metamask2$p.chainId,status:"confirmed",time:1600654021e3,txParams:{from:"0x64a845a5b02460acf8a3d84503b0d68d028b4bb4",gas:"0x5208",gasPrice:"0x147d357000",nonce:"0xf",to:null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask3=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask3?void 0:_testData$metamask3.selectedAddress,value:"0x63eb89da4ed00000",...null==props?void 0:props.txParams},transactionCategory:"incoming",...props};return null!=props&&props.hash||(tx.hash=`0x${(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_2__.keccak)(Buffer.from(JSON.stringify(tx))).toString("hex")}`),tx},customStore=({supportsEIP1559,isNetworkBusy,pendingCount=0}={})=>{var _testData$metamask4,_testData$metamask5,_testData$metamask6,_testData$metamask6$n,_testData$metamask7,_testData$metamask8;const data=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.cloneDeep)({..._storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default,metamask:{...null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default?void 0:_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask,gasFeeEstimates:{...null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask4=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask4?void 0:_testData$metamask4.gasFeeEstimates,networkCongestion:isNetworkBusy?1:.1},networkDetails:{...null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask5=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask5?void 0:_testData$metamask5.networkDetails,EIPS:{...null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask6=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask6||null===(_testData$metamask6$n=_testData$metamask6.networkDetails)||void 0===_testData$metamask6$n?void 0:_testData$metamask6$n.EIPS,1159:Boolean(supportsEIP1559)}},featureFlags:{...null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask7=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask7?void 0:_testData$metamask7.featureFlags,showIncomingTransactions:pendingCount>0},incomingTransactions:{...null===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||void 0===_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default||null===(_testData$metamask8=_storybook_test_data__WEBPACK_IMPORTED_MODULE_6__.default.metamask)||void 0===_testData$metamask8?void 0:_testData$metamask8.incomingTransactions,...Object.fromEntries(Array.from({length:pendingCount}).map(((_,i)=>{const transaction=customTransaction({i,status:"submitted"});return[null==transaction?void 0:transaction.hash,transaction]})))}}});return(0,_store_store__WEBPACK_IMPORTED_MODULE_5__.Z)(data)},__WEBPACK_DEFAULT_EXPORT__={title:"Components/App/TransactionAlerts",argTypes:{userAcknowledgedGasMissing:{control:"boolean"}},args:{userAcknowledgedGasMissing:!1}},DefaultStory=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:customStore({isNetworkBusy:!0,supportsEIP1559:!0,pendingCount:1})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.Po,{transaction:customTransaction({hasSimulationError:!0,estimateUsed:!0})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_7__.Z,args)));DefaultStory.storyName="Default";const SimulationError=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:customStore({supportsEIP1559:!0})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.Po,{transaction:customTransaction({hasSimulationError:!0})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_7__.Z,args)));SimulationError.storyName="SimulationError";const SinglePendingTransaction=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:customStore({supportsEIP1559:!0,pendingCount:1})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.Po,{transaction:customTransaction()},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_7__.Z,args)));SinglePendingTransaction.storyName="SinglePendingTransaction";const MultiplePendingTransactions=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:customStore({supportsEIP1559:!0,pendingCount:2})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.Po,{transaction:customTransaction()},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_7__.Z,args)));MultiplePendingTransactions.storyName="MultiplePendingTransactions";const LowPriority=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:customStore()},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.Po,{transaction:customTransaction({estimateUsed:!0})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_7__.Z,args)));LowPriority.storyName="LowPriority";const BusyNetwork=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:customStore({isNetworkBusy:!0})},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.Po,{transaction:customTransaction()},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_7__.Z,args)));BusyNetwork.storyName="BusyNetwork",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <Provider store={customStore({\n  isNetworkBusy: true,\n  supportsEIP1559: true,\n  pendingCount: 1\n})}>\n    <GasFeeContextProvider transaction={customTransaction({\n    hasSimulationError: true,\n    estimateUsed: true\n  })}>\n      <TransactionAlerts {...args} />\n    </GasFeeContextProvider>\n  </Provider>",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet3=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet3?void 0:_DefaultStory$paramet3.source}}},SimulationError.parameters={...SimulationError.parameters,docs:{...null===(_SimulationError$para=SimulationError.parameters)||void 0===_SimulationError$para?void 0:_SimulationError$para.docs,source:{originalSource:"args => <Provider store={customStore({\n  supportsEIP1559: true\n})}>\n    <GasFeeContextProvider transaction={customTransaction({\n    hasSimulationError: true\n  })}>\n      <TransactionAlerts {...args} />\n    </GasFeeContextProvider>\n  </Provider>",...null===(_SimulationError$para2=SimulationError.parameters)||void 0===_SimulationError$para2||null===(_SimulationError$para3=_SimulationError$para2.docs)||void 0===_SimulationError$para3?void 0:_SimulationError$para3.source}}},SinglePendingTransaction.parameters={...SinglePendingTransaction.parameters,docs:{...null===(_SinglePendingTransac=SinglePendingTransaction.parameters)||void 0===_SinglePendingTransac?void 0:_SinglePendingTransac.docs,source:{originalSource:"args => <Provider store={customStore({\n  supportsEIP1559: true,\n  pendingCount: 1\n})}>\n    <GasFeeContextProvider transaction={customTransaction()}>\n      <TransactionAlerts {...args} />\n    </GasFeeContextProvider>\n  </Provider>",...null===(_SinglePendingTransac2=SinglePendingTransaction.parameters)||void 0===_SinglePendingTransac2||null===(_SinglePendingTransac3=_SinglePendingTransac2.docs)||void 0===_SinglePendingTransac3?void 0:_SinglePendingTransac3.source}}},MultiplePendingTransactions.parameters={...MultiplePendingTransactions.parameters,docs:{...null===(_MultiplePendingTrans=MultiplePendingTransactions.parameters)||void 0===_MultiplePendingTrans?void 0:_MultiplePendingTrans.docs,source:{originalSource:"args => <Provider store={customStore({\n  supportsEIP1559: true,\n  pendingCount: 2\n})}>\n    <GasFeeContextProvider transaction={customTransaction()}>\n      <TransactionAlerts {...args} />\n    </GasFeeContextProvider>\n  </Provider>",...null===(_MultiplePendingTrans2=MultiplePendingTransactions.parameters)||void 0===_MultiplePendingTrans2||null===(_MultiplePendingTrans3=_MultiplePendingTrans2.docs)||void 0===_MultiplePendingTrans3?void 0:_MultiplePendingTrans3.source}}},LowPriority.parameters={...LowPriority.parameters,docs:{...null===(_LowPriority$paramete=LowPriority.parameters)||void 0===_LowPriority$paramete?void 0:_LowPriority$paramete.docs,source:{originalSource:"args => <Provider store={customStore()}>\n    <GasFeeContextProvider transaction={customTransaction({\n    estimateUsed: true\n  })}>\n      <TransactionAlerts {...args} />\n    </GasFeeContextProvider>\n  </Provider>",...null===(_LowPriority$paramete2=LowPriority.parameters)||void 0===_LowPriority$paramete2||null===(_LowPriority$paramete3=_LowPriority$paramete2.docs)||void 0===_LowPriority$paramete3?void 0:_LowPriority$paramete3.source}}},BusyNetwork.parameters={...BusyNetwork.parameters,docs:{...null===(_BusyNetwork$paramete=BusyNetwork.parameters)||void 0===_BusyNetwork$paramete?void 0:_BusyNetwork$paramete.docs,source:{originalSource:"args => <Provider store={customStore({\n  isNetworkBusy: true\n})}>\n    <GasFeeContextProvider transaction={customTransaction()}>\n      <TransactionAlerts {...args} />\n    </GasFeeContextProvider>\n  </Provider>",...null===(_BusyNetwork$paramete2=BusyNetwork.parameters)||void 0===_BusyNetwork$paramete2||null===(_BusyNetwork$paramete3=_BusyNetwork$paramete2.docs)||void 0===_BusyNetwork$paramete3?void 0:_BusyNetwork$paramete3.source}}};const __namedExportsOrder=["DefaultStory","SimulationError","SinglePendingTransaction","MultiplePendingTransactions","LowPriority","BusyNetwork"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"},SimulationError.__docgenInfo={description:"",methods:[],displayName:"SimulationError"},SinglePendingTransaction.__docgenInfo={description:"",methods:[],displayName:"SinglePendingTransaction"},MultiplePendingTransactions.__docgenInfo={description:"",methods:[],displayName:"MultiplePendingTransactions"},LowPriority.__docgenInfo={description:"",methods:[],displayName:"LowPriority"},BusyNetwork.__docgenInfo={description:"",methods:[],displayName:"BusyNetwork"}},"./ui/components/app/transaction-alerts/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>transaction_alerts});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),gas=__webpack_require__("./shared/constants/gas.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),simulation_error_message=__webpack_require__("./ui/components/ui/simulation-error-message/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),zendesk_url=__webpack_require__("./ui/helpers/constants/zendesk-url.js");const TransactionAlerts=({userAcknowledgedGasMissing,setUserAcknowledgedGasMissing})=>{const{estimateUsed,hasSimulationError,supportsEIP1559,isNetworkBusy}=(0,gasFee.YJ)(),pendingTransactions=(0,es.v9)(selectors.MBu),t=(0,useI18nContext.C)();return react.createElement("div",{className:"transaction-alerts"},supportsEIP1559&&hasSimulationError&&react.createElement(simulation_error_message.Z,{userAcknowledgedGasMissing,setUserAcknowledgedGasMissing}),supportsEIP1559&&(null==pendingTransactions?void 0:pendingTransactions.length)>0&&react.createElement(component_library.wB,{severity:design_system.t3.WARNING},react.createElement(component_library.xv,{as:"p"},react.createElement("strong",null,1===(null==pendingTransactions?void 0:pendingTransactions.length)?t("pendingTransactionSingle",[null==pendingTransactions?void 0:pendingTransactions.length]):t("pendingTransactionMultiple",[null==pendingTransactions?void 0:pendingTransactions.length]))," ",t("pendingTransactionInfo"),t("learnCancelSpeeedup",[react.createElement(component_library.ZP,{key:"cancelSpeedUpInfo",href:zendesk_url.Z.SPEEDUP_CANCEL,rel:"noopener noreferrer",target:"_blank"},t("cancelSpeedUp"))]))),estimateUsed===gas.o7.low&&react.createElement(component_library.wB,{"data-testid":"low-gas-fee-alert",severity:design_system.t3.WARNING},t("lowPriorityMessage")),supportsEIP1559&&isNetworkBusy?react.createElement(component_library.wB,{severity:design_system.t3.WARNING},t("networkIsBusy")):null)};TransactionAlerts.propTypes={userAcknowledgedGasMissing:prop_types_default().bool,setUserAcknowledgedGasMissing:prop_types_default().func},TransactionAlerts.__docgenInfo={description:"",methods:[],displayName:"TransactionAlerts",props:{userAcknowledgedGasMissing:{description:"",type:{name:"bool"},required:!1},setUserAcknowledgedGasMissing:{description:"",type:{name:"func"},required:!1}}};const transaction_alerts=TransactionAlerts},"./ui/components/ui/simulation-error-message/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>SimulationErrorMessage});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),component_library=__webpack_require__("./ui/components/component-library/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),i18n=__webpack_require__("./.storybook/i18n.js");function SimulationErrorMessage({userAcknowledgedGasMissing=!1,setUserAcknowledgedGasMissing}){const t=(0,react.useContext)(i18n.OO);return!0===userAcknowledgedGasMissing?react.createElement(component_library.wB,{severity:design_system.t3.DANGER},t("simulationErrorMessageV2")):react.createElement(component_library.wB,{severity:design_system.t3.DANGER,actionButtonLabel:t("proceedWithTransaction"),actionButtonOnClick:setUserAcknowledgedGasMissing},t("simulationErrorMessageV2"))}SimulationErrorMessage.propTypes={userAcknowledgedGasMissing:prop_types_default().bool,setUserAcknowledgedGasMissing:prop_types_default().func},SimulationErrorMessage.__docgenInfo={description:"",methods:[],displayName:"SimulationErrorMessage",props:{userAcknowledgedGasMissing:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},setUserAcknowledgedGasMissing:{description:"",type:{name:"func"},required:!1}}}},"./ui/contexts/gasFee.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Po:()=>GasFeeContextProvider,YJ:()=>useGasFeeContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_hooks_gasFeeInput_useGasFeeInputs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/hooks/gasFeeInput/useGasFeeInputs.js");const GasFeeContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}),GasFeeContextProvider=({children,defaultEstimateToUse,transaction,minimumGasLimit,editGasMode})=>{const gasFeeDetails=(0,_hooks_gasFeeInput_useGasFeeInputs__WEBPACK_IMPORTED_MODULE_1__.a)(defaultEstimateToUse,transaction,minimumGasLimit,editGasMode);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(GasFeeContext.Provider,{value:gasFeeDetails},children)};function useGasFeeContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(GasFeeContext)}GasFeeContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().node.isRequired,defaultEstimateToUse:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,transaction:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,minimumGasLimit:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,editGasMode:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string},GasFeeContextProvider.__docgenInfo={description:"",methods:[],displayName:"GasFeeContextProvider",props:{children:{description:"",type:{name:"node"},required:!0},defaultEstimateToUse:{description:"",type:{name:"string"},required:!1},transaction:{description:"",type:{name:"object"},required:!1},minimumGasLimit:{description:"",type:{name:"string"},required:!1},editGasMode:{description:"",type:{name:"string"},required:!1}}}},"./node_modules/lodash/isEqual.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsEqual=__webpack_require__("./node_modules/lodash/_baseIsEqual.js");module.exports=function isEqual(value,other){return baseIsEqual(value,other)}}}]);