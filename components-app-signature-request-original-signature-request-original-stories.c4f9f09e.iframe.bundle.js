(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[3040],{"./ui/components/app/signature-request-original/signature-request-original.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AccountMismatchStory:()=>AccountMismatchStory,DefaultStory:()=>DefaultStory,ETHSignStory:()=>ETHSignStory,ETHSignTypedStory:()=>ETHSignTypedStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>signature_request_original_stories});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),app=__webpack_require__("./shared/constants/app.ts"),test_data=__webpack_require__("./.storybook/test-data.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),lib=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),addon_docs_dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),redux=__webpack_require__("./node_modules/redux/es/redux.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),actions=__webpack_require__("./ui/store/actions.ts"),extension_dist=__webpack_require__("./node_modules/@metamask-institutional/extension/dist/index.js"),institution_background=__webpack_require__("./ui/store/institutional/institution-background.ts"),util=__webpack_require__("./app/scripts/lib/util.ts"),institution_actions=__webpack_require__("./ui/store/institutional/institution-actions.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),utils_util=__webpack_require__("./ui/helpers/utils/util.js"),confirm_transaction_duck=__webpack_require__("./ui/ducks/confirm-transaction/confirm-transaction.duck.js"),history_history=__webpack_require__("./ui/ducks/history/history.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react_inspector_dist=__webpack_require__("./node_modules/react-inspector/dist/index.mjs"),eth_rpc_errors_dist=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),permission_controller_dist=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),ledger_instruction_field=__webpack_require__("./ui/components/app/ledger-instruction-field/index.js"),hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),security_provider_utils=__webpack_require__("./shared/modules/security-provider.utils.ts"),site_origin=__webpack_require__("./ui/components/ui/site-origin/index.js"),typography=__webpack_require__("./ui/components/ui/typography/typography.js"),page_container=__webpack_require__("./ui/components/ui/page-container/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),blockaid_banner_alert=__webpack_require__("./ui/components/app/security-provider-banner-alert/blockaid-banner-alert/blockaid-banner-alert.js"),confirm_page_container_navigation=__webpack_require__("./ui/components/app/confirm-page-container/confirm-page-container-navigation/index.js"),security_provider_banner_message=__webpack_require__("./ui/components/app/security-provider-banner-message/security-provider-banner-message.js"),signature_request_header=__webpack_require__("./ui/components/app/signature-request-header/index.js"),snap_legacy_authorship_header=__webpack_require__("./ui/components/app/snaps/snap-legacy-authorship-header/snap-legacy-authorship-header.js"),signature_request_original_warning=__webpack_require__("./ui/components/app/signature-request-original/signature-request-original-warning/signature-request-original-warning.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class SignatureRequestOriginal extends react.Component{constructor(...args){super(...args),_defineProperty(this,"state",{showSignatureRequestWarning:!1}),_defineProperty(this,"msgHexToText",(hex=>{try{const stripped=(0,hexstring_utils.MT)(hex),buff=Buffer.from(stripped,"hex");return 32===buff.length?hex:buff.toString("utf8")}catch(e){return hex}})),_defineProperty(this,"renderTypedData",(data=>{const{t}=this.context,{domain,message}=JSON.parse(data);return react.createElement("div",{className:"request-signature__typed-container"},domain?react.createElement("div",null,react.createElement("h1",null,t("domain")),react.createElement(react_inspector_dist.vu,{data:domain,expandLevel:1,name:"domain"})):"",message?react.createElement("div",null,react.createElement("h1",null,t("message")),react.createElement(react_inspector_dist.vu,{data:message,expandLevel:1,name:"message"})):"")})),_defineProperty(this,"renderBody",(()=>{let rows;const notice=`${this.context.t("youSign")}:`,{txData,subjectMetadata}=this.props,{type,msgParams:{data}}=txData;type===app.C7.PERSONAL_SIGN?rows=[{name:this.context.t("message"),value:this.msgHexToText(data)}]:type===app.C7.ETH_SIGN_TYPED_DATA?rows=data:type===app.C7.ETH_SIGN&&(rows=[{name:this.context.t("message"),value:data}]);const targetSubjectMetadata=txData.msgParams.origin?null==subjectMetadata?void 0:subjectMetadata[txData.msgParams.origin]:null;return react.createElement("div",{className:"request-signature__body"},react.createElement(blockaid_banner_alert.Z,{txData,margin:4}),(0,security_provider_utils.D)(null==txData?void 0:txData.securityProviderResponse)&&react.createElement(security_provider_banner_message.Z,{securityProviderResponse:txData.securityProviderResponse}),this.props.selectedAccount.address===this.props.fromAccount.address?null:react.createElement(component_library.xu,{className:"request-signature__mismatch-info",Display:design_system.sS.Flex,width:design_system.Sw.Full,padding:4,marginBottom:4,backgroundColor:design_system.lP.primaryMuted},react.createElement(component_library.JO,{name:component_library.uH.Info,color:design_system.EY.infoDefault,marginRight:2}),react.createElement(component_library.xv,{variant:design_system.rK.bodyXs,color:design_system.d9.textDefault},this.context.t("mismatchAccount",[(0,utils_util.$Q)(this.props.selectedAccount.address),(0,utils_util.$Q)(this.props.fromAccount.address)]))),react.createElement("div",{className:"request-signature__origin"},(null==targetSubjectMetadata?void 0:targetSubjectMetadata.subjectType)===permission_controller_dist.SubjectType.Snap?react.createElement(snap_legacy_authorship_header.Z,{snapId:targetSubjectMetadata.origin,marginLeft:4,marginRight:4}):react.createElement(site_origin.Z,{title:txData.msgParams.origin,siteOrigin:txData.msgParams.origin,iconSrc:null==targetSubjectMetadata?void 0:targetSubjectMetadata.iconUrl,iconName:(0,utils_util.Cs)(null==targetSubjectMetadata?void 0:targetSubjectMetadata.origin)||(null==targetSubjectMetadata?void 0:targetSubjectMetadata.origin),chip:!0})),react.createElement(typography.ZP,{className:"request-signature__content__title",variant:design_system.TypographyVariant.H3,fontWeight:design_system.U9.Bold},this.context.t("sigRequest")),react.createElement(typography.ZP,{className:"request-signature__content__subtitle",variant:design_system.TypographyVariant.H7,color:design_system.d9.textAlternative,align:design_system.PH.Center,margin:12,marginTop:3},this.context.t("signatureRequestGuidance")),react.createElement("div",{className:classnames_default()("request-signature__notice")},notice),react.createElement("div",{className:"request-signature__rows"},rows.map((({name,value},index)=>("boolean"==typeof value&&(value=value.toString()),react.createElement("div",{className:"request-signature__row",key:`request-signature-row-${index}`},react.createElement("div",{className:"request-signature__row-title"},(0,utils_util.vJ)(`${name}:`)),react.createElement("div",{className:"request-signature__row-value"},(0,utils_util.vJ)(value))))))))})),_defineProperty(this,"onSubmit",(async()=>{const{resolvePendingApproval,completedTx,clearConfirmTransaction,history,mostRecentOverviewPage,txData}=this.props;this.props.mmiOnSignCallback?await this.props.mmiOnSignCallback(txData):(await resolvePendingApproval(txData.id),completedTx(txData.id),clearConfirmTransaction(),history.push(mostRecentOverviewPage))})),_defineProperty(this,"onCancel",(async()=>{const{clearConfirmTransaction,history,mostRecentOverviewPage,rejectPendingApproval,txData:{id}}=this.props;await rejectPendingApproval(id,(0,eth_rpc_errors_dist.Xy)(eth_rpc_errors_dist.Sy.provider.userRejectedRequest())),clearConfirmTransaction(),history.push(mostRecentOverviewPage)})),_defineProperty(this,"renderFooter",(()=>{const{clearConfirmTransaction,history,mostRecentOverviewPage,txData,hardwareWalletRequiresConnection,rejectPendingApproval,resolvePendingApproval}=this.props,{t}=this.context;return react.createElement(page_container.g$,{cancelText:t("reject"),submitText:t("sign"),onCancel:async()=>{await rejectPendingApproval(txData.id,(0,eth_rpc_errors_dist.Xy)(eth_rpc_errors_dist.Sy.provider.userRejectedRequest())),clearConfirmTransaction(),history.push(mostRecentOverviewPage)},onSubmit:async()=>{if(txData.type===app.C7.ETH_SIGN)this.setState({showSignatureRequestWarning:!0});else{if(this.props.mmiOnSignCallback)return void await this.props.mmiOnSignCallback(txData);await resolvePendingApproval(txData.id),clearConfirmTransaction(),history.push(mostRecentOverviewPage)}},disabled:Boolean(null==txData?void 0:txData.custodyId)||hardwareWalletRequiresConnection})})),_defineProperty(this,"handleCancelAll",(()=>{const{clearConfirmTransaction,history,mostRecentOverviewPage,showRejectTransactionsConfirmationModal,messagesCount,cancelAllApprovals}=this.props;showRejectTransactionsConfirmationModal({unapprovedTxCount:messagesCount,onSubmit:async()=>{await cancelAllApprovals(),clearConfirmTransaction(),history.push(mostRecentOverviewPage)}})})),_defineProperty(this,"render",(()=>{const{messagesCount,fromAccount:{address,name},txData}=this.props,{showSignatureRequestWarning}=this.state,{t}=this.context,rejectNText=t("rejectRequestsN",[messagesCount]);return react.createElement("div",{className:"request-signature__container"},react.createElement("div",{className:"request-signature__navigation"},react.createElement(confirm_page_container_navigation.Z,null)),react.createElement("div",{className:"request-signature__account"},react.createElement(signature_request_header.Z,{txData})),this.renderBody(),this.props.isLedgerWallet?react.createElement("div",{className:"confirm-approve-content__ledger-instruction-wrapper"},react.createElement(ledger_instruction_field.Z,{showDataInstruction:!0})):null,showSignatureRequestWarning&&react.createElement(signature_request_original_warning.Z,{senderAddress:address,name,onSubmit:async event=>await this.onSubmit(event),onCancel:async event=>await this.onCancel(event)}),this.renderFooter(),messagesCount>1?react.createElement(component_library.ZP,{size:design_system.$u.inherit,className:"request-signature__container__reject",onClick:()=>this.handleCancelAll()},rejectNText):null)}))}}_defineProperty(SignatureRequestOriginal,"contextTypes",{t:prop_types_default().func.isRequired,trackEvent:prop_types_default().func}),_defineProperty(SignatureRequestOriginal,"propTypes",{fromAccount:prop_types_default().shape({address:prop_types_default().string.isRequired,name:prop_types_default().string}).isRequired,txData:prop_types_default().object.isRequired,subjectMetadata:prop_types_default().object,hardwareWalletRequiresConnection:prop_types_default().bool,isLedgerWallet:prop_types_default().bool,messagesCount:prop_types_default().number,showRejectTransactionsConfirmationModal:prop_types_default().func.isRequired,cancelAllApprovals:prop_types_default().func.isRequired,rejectPendingApproval:prop_types_default().func.isRequired,clearConfirmTransaction:prop_types_default().func.isRequired,history:prop_types_default().object.isRequired,mostRecentOverviewPage:prop_types_default().string.isRequired,resolvePendingApproval:prop_types_default().func.isRequired,completedTx:prop_types_default().func.isRequired,selectedAccount:prop_types_default().object,mmiOnSignCallback:prop_types_default().func}),SignatureRequestOriginal.__docgenInfo={description:"",methods:[{name:"msgHexToText",docblock:null,modifiers:[],params:[{name:"hex",type:null}],returns:null},{name:"renderTypedData",docblock:null,modifiers:[],params:[{name:"data",type:null}],returns:null},{name:"renderBody",docblock:null,modifiers:[],params:[],returns:null},{name:"onSubmit",docblock:null,modifiers:["async"],params:[],returns:null},{name:"onCancel",docblock:null,modifiers:["async"],params:[],returns:null},{name:"renderFooter",docblock:null,modifiers:[],params:[],returns:null},{name:"handleCancelAll",docblock:null,modifiers:[],params:[],returns:null},{name:"render",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SignatureRequestOriginal",props:{fromAccount:{description:"",type:{name:"shape",value:{address:{name:"string",required:!0},name:{name:"string",required:!1}}},required:!0},txData:{description:"",type:{name:"object"},required:!0},subjectMetadata:{description:"",type:{name:"object"},required:!1},hardwareWalletRequiresConnection:{description:"",type:{name:"bool"},required:!1},isLedgerWallet:{description:"",type:{name:"bool"},required:!1},messagesCount:{description:"",type:{name:"number"},required:!1},showRejectTransactionsConfirmationModal:{description:"",type:{name:"func"},required:!0},cancelAllApprovals:{description:"",type:{name:"func"},required:!0},rejectPendingApproval:{description:"",type:{name:"func"},required:!0},clearConfirmTransaction:{description:"",type:{name:"func"},required:!0},history:{description:"",type:{name:"object"},required:!0},mostRecentOverviewPage:{description:"",type:{name:"string"},required:!0},resolvePendingApproval:{description:"",type:{name:"func"},required:!0},completedTx:{description:"",type:{name:"func"},required:!0},selectedAccount:{description:"",type:{name:"object"},required:!1},mmiOnSignCallback:{description:"",type:{name:"func"},required:!1}},context:{t:{type:{name:"func"},required:!0},trackEvent:{type:{name:"func"},required:!1}}};let mapDispatchToProps=null;mapDispatchToProps=function(dispatch){return{goHome:()=>dispatch((0,actions.YpM)()),clearConfirmTransaction:()=>dispatch((0,confirm_transaction_duck.vi)()),showRejectTransactionsConfirmationModal:({onSubmit,unapprovedTxCount:messagesCount})=>dispatch((0,actions.K4b)({name:"REJECT_TRANSACTIONS",onSubmit,unapprovedTxCount:messagesCount,isRequestType:!0})),completedTx:txId=>dispatch((0,actions.Ab9)(txId)),resolvePendingApproval:id=>{dispatch((0,actions.a__)(id))},rejectPendingApproval:(id,error)=>dispatch((0,actions.YCK)(id,error)),cancelAllApprovals:messagesList=>{dispatch((0,actions.tEJ)(messagesList))}}},mapDispatchToProps=function mmiMapDispatchToProps(dispatch){const mmiActions=(0,institution_background.I6)();return{setMsgInProgress:msgId=>dispatch((0,institution_background.PE)(msgId)),showCustodianDeepLink:({custodyId,fromAddress,closeNotification,onDeepLinkFetched,onDeepLinkShown})=>(0,extension_dist.kC)({dispatch,mmiActions,txId:void 0,fromAddress,custodyId,isSignature:!0,closeNotification,onDeepLinkFetched,onDeepLinkShown,showCustodyConfirmLink:institution_actions.TV}),showTransactionsFailedModal:({errorMessage,closeNotification,operationFailed})=>dispatch((0,actions.K4b)({name:"TRANSACTION_FAILED",errorMessage,closeNotification,operationFailed})),setWaitForConfirmDeepLinkDialog:wait=>dispatch(mmiActions.setWaitForConfirmDeepLinkDialog(wait)),clearConfirmTransaction:()=>dispatch((0,confirm_transaction_duck.vi)()),showRejectTransactionsConfirmationModal:({onSubmit,unapprovedTxCount:messagesCount})=>dispatch((0,actions.K4b)({name:"REJECT_TRANSACTIONS",onSubmit,unapprovedTxCount:messagesCount,isRequestType:!0})),completedTx:txId=>dispatch((0,actions.Ab9)(txId)),resolvePendingApproval:id=>{dispatch((0,actions.a__)(id))},rejectPendingApproval:(id,error)=>dispatch((0,actions.YCK)(id,error)),cancelAllApprovals:messagesList=>{dispatch((0,actions.tEJ)(messagesList))}}};const signature_request_original_container=(0,redux.compose)(react_router.EN,(0,es.$j)((function mapStateToProps(state,ownProps){const{msgParams:{from}}=ownProps.txData,envType=(0,util.kD)(),hardwareWalletRequiresConnection=(0,selectors.DnU)(state,from),isLedgerWallet=(0,metamask.Dc)(state,from),messagesList=(0,selectors.Mkt)(state),messagesCount=(0,selectors.eWO)(state);return{requester:null,requesterAddress:null,mostRecentOverviewPage:(0,history_history.H7)(state),hardwareWalletRequiresConnection,isLedgerWallet,allAccounts:(0,selectors.QT)(state),subjectMetadata:(0,selectors.YRT)(state),messagesList,messagesCount,accountType:(0,selectors.lxc)(state),isNotification:envType===app.vH,selectedAccount:(0,selectors.E7u)(state)}}),mapDispatchToProps,(function mergeProps(stateProps,dispatchProps,ownProps){const{txData}=ownProps,{allAccounts,messagesList,accountType,isNotification,...otherStateProps}=stateProps,{msgParams:{from}}=txData,fromAccount=(0,utils_util.t)(allAccounts,from),{cancelAllApprovals:dispatchCancelAllApprovals}=dispatchProps;return{...ownProps,...otherStateProps,...dispatchProps,fromAccount,txData,cancelAllApprovals:()=>dispatchCancelAllApprovals((0,utils_util.gs)(messagesList)),mmiOnSignCallback:async _msgData=>{if("custody"===accountType)try{await dispatchProps.resolvePendingApproval(_msgData.id),dispatchProps.completedTx(_msgData.id),dispatchProps.showCustodianDeepLink({custodyId:null,fromAddress:fromAccount.address,closeNotification:isNotification,onDeepLinkFetched:()=>{},onDeepLinkShown:()=>{}}),await dispatchProps.setWaitForConfirmDeepLinkDialog(!0)}catch(err){await dispatchProps.setWaitForConfirmDeepLinkDialog(!0),await dispatchProps.showTransactionsFailedModal({errorMessage:err.message,closeNotification:!0,operationFailed:!0})}else await dispatchProps.resolvePendingApproval(_msgData.id),dispatchProps.completedTx(_msgData.id)}}})))(SignatureRequestOriginal);function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",h2:"h2"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{id:"signature-request",children:"Signature Request"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"dApp requesting a signature from the user. This component appears for eth_signTypedData signatures are not v3 or v4. For other signatures, please see SignatureRequest."}),"\n",(0,jsx_runtime.jsx)(addon_docs_dist.Xz,{children:(0,jsx_runtime.jsx)(addon_docs_dist.oG,{id:"components-app-signaturerequestoriginal--default-story"})}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"props",children:"Props"}),"\n",(0,jsx_runtime.jsx)(addon_docs_dist.$4,{of:signature_request_original_container})]})}const README=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)};var _DefaultStory$paramet,_DefaultStory$paramet2,_ETHSignStory$paramet,_ETHSignStory$paramet2,_ETHSignTypedStory$pa,_ETHSignTypedStory$pa2,_AccountMismatchStory,_AccountMismatchStory2;const[MOCK_PRIMARY_IDENTITY,MOCK_SECONDARY_IDENTITY]=Object.values(test_data.default.metamask.identities),MOCK_SIGN_DATA=JSON.stringify({domain:{name:"happydapp.website"},message:{string:"haay wuurl",number:42},primaryType:"Mail",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]}}),signature_request_original_stories={title:"Components/App/SignatureRequestOriginal",component:SignatureRequestOriginal,parameters:{docs:{page:README}},argTypes:{fromAccount:{table:{address:{control:"text"},balance:{control:"text"},name:{control:"text"}}},hardwareWalletRequiresConnection:{control:"boolean"},isLedgerWallet:{control:"boolean"},nativeCurrency:{control:"text"},txData:{control:"object"},clearConfirmTransaction:{action:"Clean Confirm"},cancel:{action:"Cancel"},sign:{action:"Sign"}},args:{fromAccount:MOCK_PRIMARY_IDENTITY,history:{push:(0,dist.aD)("history.push()")},mostRecentOverviewPage:"/",nativeCurrency:"ETH",providerConfig:{name:"Goerli ETH"},selectedAccount:MOCK_PRIMARY_IDENTITY}},Template=args=>react.createElement(SignatureRequestOriginal,args),DefaultStory=Template.bind({});DefaultStory.storyName="personal_sign Type",DefaultStory.args={txData:{msgParams:{from:"0xb19ac54efa18cc3a14a5b821bfec73d284bf0c5e",data:MOCK_SIGN_DATA,origin:"https://happydapp.website/governance?futarchy=true"},type:app.C7.PERSONAL_SIGN}};const ETHSignStory=Template.bind({});ETHSignStory.storyName="eth_sign Type",ETHSignStory.args={txData:{msgParams:{from:"0xb19ac54efa18cc3a14a5b821bfec73d284bf0c5e",data:MOCK_SIGN_DATA,origin:"https://happydapp.website/governance?futarchy=true"},type:app.C7.ETH_SIGN}};const ETHSignTypedStory=Template.bind({});ETHSignTypedStory.storyName="eth_signTypedData Type",ETHSignTypedStory.args={txData:{msgParams:{from:"0xb19ac54efa18cc3a14a5b821bfec73d284bf0c5e",data:[{type:"string",name:"Message",value:"Hi, Alice!"},{type:"uint32",name:"A number",value:"1337"}],origin:"https://happydapp.website/governance?futarchy=true"},type:app.C7.ETH_SIGN_TYPED_DATA}};const AccountMismatchStory=Template.bind({});AccountMismatchStory.storyName="Account Mismatch warning",AccountMismatchStory.args={txData:{msgParams:{from:"0x64a845a5b02460acf8a3d84503b0d68d028b4bb4",data:MOCK_SIGN_DATA,origin:"https://happydapp.website/governance?futarchy=true"},type:app.C7.PERSONAL_SIGN},selectedAccount:MOCK_SECONDARY_IDENTITY},DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => {\n  return <SignatureRequestOriginal {...args} />;\n}",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}},ETHSignStory.parameters={...ETHSignStory.parameters,docs:{...null===(_ETHSignStory$paramet=ETHSignStory.parameters)||void 0===_ETHSignStory$paramet?void 0:_ETHSignStory$paramet.docs,source:{originalSource:"args => {\n  return <SignatureRequestOriginal {...args} />;\n}",...null===(_ETHSignStory$paramet2=ETHSignStory.parameters)||void 0===_ETHSignStory$paramet2||null===(_ETHSignStory$paramet2=_ETHSignStory$paramet2.docs)||void 0===_ETHSignStory$paramet2?void 0:_ETHSignStory$paramet2.source}}},ETHSignTypedStory.parameters={...ETHSignTypedStory.parameters,docs:{...null===(_ETHSignTypedStory$pa=ETHSignTypedStory.parameters)||void 0===_ETHSignTypedStory$pa?void 0:_ETHSignTypedStory$pa.docs,source:{originalSource:"args => {\n  return <SignatureRequestOriginal {...args} />;\n}",...null===(_ETHSignTypedStory$pa2=ETHSignTypedStory.parameters)||void 0===_ETHSignTypedStory$pa2||null===(_ETHSignTypedStory$pa2=_ETHSignTypedStory$pa2.docs)||void 0===_ETHSignTypedStory$pa2?void 0:_ETHSignTypedStory$pa2.source}}},AccountMismatchStory.parameters={...AccountMismatchStory.parameters,docs:{...null===(_AccountMismatchStory=AccountMismatchStory.parameters)||void 0===_AccountMismatchStory?void 0:_AccountMismatchStory.docs,source:{originalSource:"args => {\n  return <SignatureRequestOriginal {...args} />;\n}",...null===(_AccountMismatchStory2=AccountMismatchStory.parameters)||void 0===_AccountMismatchStory2||null===(_AccountMismatchStory2=_AccountMismatchStory2.docs)||void 0===_AccountMismatchStory2?void 0:_AccountMismatchStory2.source}}};const __namedExportsOrder=["DefaultStory","ETHSignStory","ETHSignTypedStory","AccountMismatchStory"]},"./shared/modules/security-provider.utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>isSuspiciousResponse});var _constants_security_provider__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./shared/constants/security-provider.ts");function isSuspiciousResponse(securityProviderResponse){if(!securityProviderResponse)return!1;const isFlagged=void 0!==securityProviderResponse.flagAsDangerous&&securityProviderResponse.flagAsDangerous!==_constants_security_provider__WEBPACK_IMPORTED_MODULE_0__.C_.NOT_MALICIOUS,isNotVerified=0===Object.keys(securityProviderResponse).length;return isFlagged||isNotVerified}},"./ui/components/app/signature-request-header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>_signature_request_header__WEBPACK_IMPORTED_MODULE_0__.Z});var _signature_request_header__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/signature-request-header/signature-request-header.js")},"./ui/components/app/signature-request-header/signature-request-header.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>signature_request_header});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),selectors=__webpack_require__("./ui/selectors/index.js"),confirm_tx_util=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),common=__webpack_require__("./shared/constants/common.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),Numeric=__webpack_require__("./shared/modules/Numeric.ts"),network_account_balance_header=__webpack_require__("./ui/components/app/network-account-balance-header/network-account-balance-header.js");const SignatureRequestHeader=({txData})=>{const t=(0,useI18nContext.C)(),{msgParams:{from}}=txData,allAccounts=(0,es.v9)(selectors.QT),fromAccount=(0,util.t)(allAccounts,from),nativeCurrency=(0,es.v9)(metamask.JK),currentCurrency=(0,es.v9)(selectors.TV3),currentChainId=(0,es.v9)(selectors.BVZ),providerConfig=(0,es.v9)(metamask.Vu),networkName=(0,util.Wf)(providerConfig.type),{useNativeCurrencyAsPrimaryCurrency}=(0,es.v9)(selectors.Izy),conversionRateFromSelector=(0,es.v9)(selectors.tOe),conversionRate=useNativeCurrencyAsPrimaryCurrency?null:conversionRateFromSelector,currentNetwork=""===networkName?providerConfig.nickname||t("unknownNetwork"):t(networkName),balanceInBaseAsset=conversionRate?(0,confirm_tx_util.xG)((0,conversion_utils.nu)({value:fromAccount.balance,fromCurrency:nativeCurrency,toCurrency:currentCurrency,conversionRate,numberOfDecimals:6,toDenomination:common.E.ETH}),currentCurrency):new Numeric.D(fromAccount.balance,16,common.E.WEI).toDenomination(common.E.ETH).round(6).toBase(10).toString();return react.createElement(network_account_balance_header.Z,{networkName:currentNetwork,accountName:fromAccount.name,accountBalance:balanceInBaseAsset,tokenName:conversionRate?null==currentCurrency?void 0:currentCurrency.toUpperCase():nativeCurrency,accountAddress:fromAccount.address,chainId:currentChainId})};SignatureRequestHeader.propTypes={txData:prop_types_default().object.isRequired},SignatureRequestHeader.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestHeader",props:{txData:{description:"The display content of transaction data",type:{name:"object"},required:!0}}};const signature_request_header=SignatureRequestHeader},"./ui/components/app/signature-request-original/signature-request-original-warning/signature-request-original-warning.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/hooks/useI18nContext.js"),_ui_popover__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/ui/popover/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_ui_identicon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/ui/identicon/index.js"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/utils/util.js"),_component_library__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/component-library/index.ts");const SignatureRequestOriginalWarning=({senderAddress,name,onSubmit,onCancel})=>{const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_1__.C)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_popover__WEBPACK_IMPORTED_MODULE_2__.Z,{className:"signature-request-warning__content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Row,padding:4,className:"signature-request-warning__content__header"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.JO,{name:_component_library__WEBPACK_IMPORTED_MODULE_6__.uH.Danger,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.EY.errorDefault,className:"signature-request-warning__content__header__warning-icon"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.headingSm,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.U9.Bold},t("yourFundsMayBeAtRisk"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,padding:4,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.E0.spaceBetween,className:"signature-request-warning__content__account"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_identicon__WEBPACK_IMPORTED_MODULE_4__.Z,{address:senderAddress,diameter:32}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodyMd,as:"h5",marginLeft:2,className:"signature-request-warning__content__account-name"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("b",null,name)," ",` (${(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_5__.$Q)(senderAddress)})`))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.d9.textAlternative,margin:4,marginTop:4,marginBottom:4,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,as:"h6"},t("signatureRequestWarning",[react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:"https://consensys.io/blog/the-seal-of-approval-know-what-youre-consenting-to-with-permissions-and-approvals-in-metamask",target:"_blank",type:"link",key:"non_custodial_link",rel:"noopener noreferrer",style:{color:"var(--color-primary-default)"}},t("learnMoreUpperCase"))])),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Column,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.E0.spaceBetween,padding:4,className:"signature-request-warning__footer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.zx,{className:"signature-request-warning__footer__sign-button",type:"danger-primary","data-testid":"signature-warning-sign-button",onClick:onSubmit},t("sign")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.zx,{className:"signature-request-warning__footer__reject-button",type:"secondary",onClick:onCancel},t("reject"))))};SignatureRequestOriginalWarning.propTypes={senderAddress:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,name:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_7___default().func,onCancel:prop_types__WEBPACK_IMPORTED_MODULE_7___default().func},SignatureRequestOriginalWarning.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestOriginalWarning",props:{senderAddress:{description:"",type:{name:"string"},required:!1},name:{description:"",type:{name:"string"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=SignatureRequestOriginalWarning},"./ui/components/app/snaps/snap-legacy-authorship-header/snap-legacy-authorship-header.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/esm/snaps.js"),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/utils/util.js"),_component_library__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/component-library/index.ts"),_selectors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/selectors/index.js"),_snap_avatar__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/components/app/snaps/snap-avatar/index.js");const SnapLegacyAuthorshipHeader=({snapId,className,marginLeft,marginRight})=>{const packageName=snapId&&(0,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_8__.d0)(snapId),subjectMetadata=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>(0,_selectors__WEBPACK_IMPORTED_MODULE_6__.h5U)(state,snapId))),friendlyName=snapId&&(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__.NZ)(snapId,subjectMetadata);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_5__.xu,{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("snap-legacy-authorship-header",className),backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.lP.backgroundDefault,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Sw.Full,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.center,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,padding:2,borderColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.kf.borderDefault,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.cM.pill,marginLeft,marginRight},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_5__.xu,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_snap_avatar__WEBPACK_IMPORTED_MODULE_7__.Z,{snapId})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_5__.xu,{marginLeft:4,marginRight:4,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Column,style:{overflow:"hidden"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_5__.xv,{ellipsis:!0,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.U9.Medium},friendlyName),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_5__.xv,{ellipsis:!0,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.d9.textAlternative},packageName)))};SnapLegacyAuthorshipHeader.propTypes={snapId:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,marginLeft:prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,marginRight:prop_types__WEBPACK_IMPORTED_MODULE_9___default().number},SnapLegacyAuthorshipHeader.__docgenInfo={description:"",methods:[],displayName:"SnapLegacyAuthorshipHeader",props:{snapId:{description:"The id of the snap",type:{name:"string"},required:!1},className:{description:"The className of the SnapLegacyAuthorshipHeader",type:{name:"string"},required:!1},marginLeft:{description:"",type:{name:"number"},required:!1},marginRight:{description:"",type:{name:"number"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=SnapLegacyAuthorshipHeader},"./ui/components/ui/disclosure/disclosure.constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>DisclosureVariant});let DisclosureVariant=function(DisclosureVariant){return DisclosureVariant.Default="default",DisclosureVariant.Arrow="arrow",DisclosureVariant}({})},"./ui/components/ui/disclosure/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>disclosure});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),disclosure_constants=__webpack_require__("./ui/components/ui/disclosure/disclosure.constants.ts");const Disclosure=({children,title,size,variant})=>{const disclosureFooterEl=(0,react.useRef)(null),[open,setOpen]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{open&&disclosureFooterEl&&disclosureFooterEl.current&&disclosureFooterEl.current.scrollIntoView({behavior:"smooth"})}),[open]),react.createElement("div",{className:"disclosure",onClick:()=>setOpen((state=>!state))},title?react.createElement("details",null,((variant,title,size)=>{if(variant===disclosure_constants.m.Arrow){const textVariant="small"===size?design_system.rK.bodySm:design_system.rK.bodyMd;return react.createElement("summary",{className:"disclosure__summary is-arrow"},react.createElement(component_library.xv,{color:design_system.Il.primaryDefault,variant:textVariant},title),react.createElement(component_library.JO,{className:"disclosure__summary--icon",color:design_system.Il.primaryDefault,name:component_library.uH.ArrowUp,size:component_library.Jh.Sm,marginInlineStart:2}))}return react.createElement("summary",{className:"disclosure__summary"},react.createElement(component_library.JO,{className:"disclosure__summary--icon",name:component_library.uH.Add,size:component_library.Jh.Sm,marginInlineEnd:2}),title)})(variant,title),react.createElement("div",{className:classnames_default()("disclosure__content",size)},children),react.createElement("div",{ref:disclosureFooterEl,className:"disclosure__footer"})):children)};Disclosure.propTypes={children:prop_types_default().node.isRequired,size:prop_types_default().string,title:prop_types_default().string,variant:prop_types_default().string},Disclosure.defaultProps={size:"normal",title:null,variant:disclosure_constants.m.Default},Disclosure.__docgenInfo={description:"",methods:[],displayName:"Disclosure",props:{size:{defaultValue:{value:"'normal'",computed:!1},description:"",type:{name:"string"},required:!1},title:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},variant:{defaultValue:{value:"DisclosureVariant.Default",computed:!0},description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"node"},required:!0}}};const disclosure=Disclosure},"./ui/components/ui/identicon/blockieIdenticon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>_blockieIdenticon_component__WEBPACK_IMPORTED_MODULE_0__.Z});var _blockieIdenticon_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/identicon/blockieIdenticon/blockieIdenticon.component.js")},"./ui/components/ui/identicon/identicon.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Identicon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js"),_jazzicon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/components/ui/jazzicon/index.js"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/utils/util.js"),_blockieIdenticon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/ui/identicon/blockieIdenticon/index.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const getStyles=diameter=>({height:diameter,width:diameter,borderRadius:diameter/2});class Identicon extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(...args){super(...args),_defineProperty(this,"state",{imageLoadingError:!1})}renderImage(){const{className,diameter,alt,imageBorder,ipfsGateway}=this.props;let{image}=this.props;return Array.isArray(image)&&image.length&&(image=image[0]),"string"==typeof image&&image.toLowerCase().startsWith("ipfs://")&&(image=(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__.MP)(image,ipfsGateway)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("identicon",className,{"identicon__image-border":imageBorder}),src:image,style:getStyles(diameter),alt,onError:()=>{this.setState({imageLoadingError:!0})}})}renderJazzicon(){const{address,className,diameter,alt,tokenList}=this.props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_jazzicon__WEBPACK_IMPORTED_MODULE_3__.Z,{address,diameter,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("identicon",className),style:getStyles(diameter),alt,tokenList})}renderBlockie(){const{address,className,diameter,alt}=this.props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("identicon",className),style:getStyles(diameter)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_blockieIdenticon__WEBPACK_IMPORTED_MODULE_5__.Z,{address,diameter,alt}))}renderBlockieOrJazzIcon(){const{useBlockie}=this.props;return useBlockie?this.renderBlockie():this.renderJazzicon()}shouldComponentUpdate(nextProps,nextState){return!(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isEqual)(nextProps,this.props)||!(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isEqual)(nextState,this.state)}render(){const{address,image,addBorder,diameter,tokenList}=this.props,{imageLoadingError}=this.state,size=diameter+8;return imageLoadingError?this.renderBlockieOrJazzIcon():image?this.renderImage():address?null!==(_tokenList$address$to=tokenList[address.toLowerCase()])&&void 0!==_tokenList$address$to&&_tokenList$address$to.iconUrl?this.renderJazzicon():react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({"identicon__address-wrapper":addBorder}),style:addBorder?getStyles(size):null},this.renderBlockieOrJazzIcon()):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:getStyles(diameter),className:"identicon__image-border"});var _tokenList$address$to}}_defineProperty(Identicon,"propTypes",{addBorder:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,address:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,diameter:prop_types__WEBPACK_IMPORTED_MODULE_6___default().number,image:prop_types__WEBPACK_IMPORTED_MODULE_6___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,prop_types__WEBPACK_IMPORTED_MODULE_6___default().array]),useBlockie:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,alt:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,imageBorder:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,tokenList:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,ipfsGateway:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string}),_defineProperty(Identicon,"defaultProps",{addBorder:!1,address:void 0,className:void 0,diameter:46,image:void 0,useBlockie:!1,alt:"",tokenList:{}}),Identicon.__docgenInfo={description:"",methods:[{name:"renderImage",docblock:null,modifiers:[],params:[],returns:null},{name:"renderJazzicon",docblock:null,modifiers:[],params:[],returns:null},{name:"renderBlockie",docblock:null,modifiers:[],params:[],returns:null},{name:"renderBlockieOrJazzIcon",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Identicon",props:{addBorder:{defaultValue:{value:"false",computed:!1},description:"Adds blue border around the Identicon used for selected account.\nIncreases the width and height of the Identicon by 8px",type:{name:"bool"},required:!1},address:{defaultValue:{value:"undefined",computed:!0},description:"Address used for generating random image",type:{name:"string"},required:!1},className:{defaultValue:{value:"undefined",computed:!0},description:"Add custom css class",type:{name:"string"},required:!1},diameter:{defaultValue:{value:"46",computed:!1},description:"Sets the width and height of the inner img element\nIf addBorder is true will increase components height and width by 8px",type:{name:"number"},required:!1},image:{defaultValue:{value:"undefined",computed:!0},description:"Used as the image source of the Identicon",type:{name:"union",value:[{name:"string"},{name:"array"}]},required:!1},useBlockie:{defaultValue:{value:"false",computed:!1},description:"Use the blockie type random image generator",type:{name:"bool"},required:!1},alt:{defaultValue:{value:"''",computed:!1},description:"The alt text of the image",type:{name:"string"},required:!1},tokenList:{defaultValue:{value:"{}",computed:!1},description:"Add list of token in object",type:{name:"object"},required:!1},imageBorder:{description:"Check if show image border",type:{name:"bool"},required:!1},ipfsGateway:{description:"User preferred IPFS gateway",type:{name:"string"},required:!1}}}},"./ui/components/ui/identicon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>identicon_container});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),identicon_component=__webpack_require__("./ui/components/ui/identicon/identicon.component.js");const identicon_container=(0,es.$j)((state=>{const{metamask:{useBlockie,ipfsGateway}}=state;return{useBlockie,tokenList:(0,selectors.HJ)(state),ipfsGateway}}))(identicon_component.Z)},"./ui/components/ui/jazzicon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>_jazzicon_component__WEBPACK_IMPORTED_MODULE_0__.Z});var _jazzicon_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/jazzicon/jazzicon.component.js")},"?a04e":()=>{},"?cbdd":()=>{},"?9581":()=>{},"?e2bf":()=>{},"?5316":()=>{},"?ed1b":()=>{},"?d17e":()=>{}}]);