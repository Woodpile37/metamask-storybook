"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[9772],{"./ui/components/institutional/confirm-remove-jwt-modal/confirm-remove-jwt-modal.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>confirm_remove_jwt_modal_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),account_list=__webpack_require__("./ui/pages/institutional/connect-custody/account-list.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),actions=__webpack_require__("./ui/store/actions.ts"),with_modal_props=__webpack_require__("./ui/helpers/higher-order-components/with-modal-props/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts");const ConfirmRemoveJWT=({custodyAccountDetails,accounts,token:propsToken,hideModal})=>{const t=(0,useI18nContext.C)(),dispatch=(0,es.I0)(),[showMore,setShowMore]=(0,react.useState)(!1),[tokenAccounts,setTokenAccounts]=(0,react.useState)([]);let token=null;propsToken&&(token="object"==typeof propsToken?propsToken.address:propsToken),(0,react.useEffect)((()=>{const lowercasedTokenAddress=token.toLowerCase(),tokens=custodyAccountDetails.filter((item=>{const addressLower=item.address.toLowerCase();return accounts.find((acc=>acc.address.toLowerCase()===addressLower))})).filter((({authDetails})=>{const getToken=(null==authDetails?void 0:authDetails.token)??(null==authDetails?void 0:authDetails.jwt)??(null==authDetails?void 0:authDetails.refreshToken);return(null==getToken?void 0:getToken.toLowerCase())===lowercasedTokenAddress})).map((({address,name,labels,authDetails})=>{const lowercasedAddress=address.toLowerCase(),account=accounts.find((({address:adressAcc})=>adressAcc.toLowerCase()===lowercasedAddress));return{address,name,labels,balance:null==account?void 0:account.balance,token:(null==authDetails?void 0:authDetails.token)??(null==authDetails?void 0:authDetails.jwt)??(null==authDetails?void 0:authDetails.refreshToken)}}));setTokenAccounts(tokens)}),[accounts,custodyAccountDetails,token]);return react.createElement(component_library.u_,{isOpen:!0,onClose:hideModal},react.createElement(component_library.ZA,null),react.createElement(component_library.hz,null,react.createElement(component_library.xB,{onClose:hideModal},t("removeJWT")),react.createElement(component_library.fe,null,react.createElement(component_library.xu,{display:design_system.sS.Flex,padding:2,borderRadius:design_system.cM.SM,className:"confirm-action-jwt__jwt"},react.createElement(component_library.xv,{ellipsis:!0},showMore&&token?token:`...${token.slice(-9)}`)),!showMore&&react.createElement(component_library.xv,{color:design_system.d9.goerli,marginLeft:2,className:"confirm-action-jwt__show-more"},react.createElement("a",{rel:"noopener noreferrer",onClick:()=>{setShowMore(!0)}},t("showMore"))),react.createElement(component_library.xv,{as:"h6",textAlign:design_system.PH.Center,variant:design_system.rK.bodySm,marginTop:2},t("removeJWTDescription")),react.createElement(component_library.xu,{className:"confirm-action-jwt__accounts-list"},react.createElement(account_list.Z,{accounts:tokenAccounts,rawList:!0}))),react.createElement(component_library.xu,{display:design_system.sS.Flex,padding:4},react.createElement(component_library.zx,{block:!0,variant:component_library.RN.PRIMARY,size:component_library.Gt.LG,onClick:async()=>{try{for(const account of tokenAccounts)await dispatch((0,actions.Zdn)(account.address.toLowerCase()));hideModal()}catch(error){console.error(error)}}},t("remove")))))};ConfirmRemoveJWT.propTypes={hideModal:prop_types_default().func.isRequired,token:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]).isRequired,custodyAccountDetails:prop_types_default().array.isRequired,accounts:prop_types_default().array.isRequired},ConfirmRemoveJWT.__docgenInfo={description:"",methods:[],displayName:"ConfirmRemoveJWT",props:{hideModal:{description:"",type:{name:"func"},required:!0},token:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!0},custodyAccountDetails:{description:"",type:{name:"array"},required:!0},accounts:{description:"",type:{name:"array"},required:!0}}};const confirm_remove_jwt_modal=(0,with_modal_props.Z)((0,react.memo)(ConfirmRemoveJWT));var _DefaultStory$paramet,_DefaultStory$paramet2;const confirm_remove_jwt_modal_stories={title:"Components/Institutional/ConfirmRemoveJWT",component:confirm_remove_jwt_modal,args:{hideModal:()=>{},removeAccount:()=>{},token:"0xaD6D458402F60fD3Bd25163575031ACDce07538D",custodyAccountDetails:[{address:"0xaD6D458402F60fD3Bd25163575031ACDce07538D",name:"Test name account",labels:[],authDetails:{token:"0xaD6D458402F60fD3Bd25163575031ACDce07538D"}}],accounts:[{address:"0xaD6D458402F60fD3Bd25163575031ACDce07538D",balance:"0x0"}]}},DefaultStory=args=>react.createElement(confirm_remove_jwt_modal,args);DefaultStory.storyName="ConfirmRemoveJWT",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <ConfirmRemoveJWT {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/institutional/custody-labels/custody-labels.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_component_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts");const CustodyLabels=props=>{const{labels,index,background,hideNetwork}=props,filteredLabels=hideNetwork?labels.filter((item=>"network_name"!==item.key)):labels;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.__,{display:["flex"],flexDirection:["row"],htmlFor:`address-${index||0}`},filteredLabels.map((item=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.xv,{key:item.key,textTransform:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__._5.Capitalize,className:"custody-label",style:background?{background}:{},marginTop:1,marginRight:1,marginBottom:2,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.lP.backgroundAlternative,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.d9.textDefault,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.U9.Normal,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.cM.SM,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.rK.bodyXs},item.value))))};CustodyLabels.propTypes={labels:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,index:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,background:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,hideNetwork:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool},CustodyLabels.__docgenInfo={description:"",methods:[],displayName:"CustodyLabels",props:{labels:{description:"",type:{name:"array"},required:!1},index:{description:"",type:{name:"string"},required:!1},background:{description:"",type:{name:"string"},required:!1},hideNetwork:{description:"",type:{name:"bool"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=CustodyLabels},"./ui/components/institutional/custody-labels/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_custody_labels__WEBPACK_IMPORTED_MODULE_0__.Z});var _custody_labels__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/institutional/custody-labels/custody-labels.js")},"./ui/helpers/higher-order-components/with-modal-props/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>withModalProps});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),actions=__webpack_require__("./ui/store/actions.ts");const mapStateToProps=state=>{const{appState}=state,{props:modalProps}=appState.modal.modalState;return{...modalProps}},mapDispatchToProps=dispatch=>({hideModal:()=>dispatch((0,actions.VGc)())});function withModalProps(Component){return(0,es.$j)(mapStateToProps,mapDispatchToProps)(Component)}},"./ui/pages/institutional/connect-custody/account-list.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CustodyAccountList});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_components_institutional_custody_labels__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/institutional/custody-labels/index.js"),_shared_constants_swaps__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/constants/swaps.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/constants/network.ts"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/utils/util.js"),_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/useI18nContext.js"),_components_component_library__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useCopyToClipboard__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/hooks/useCopyToClipboard.js");const getButtonLinkHref=account=>`${_shared_constants_swaps__WEBPACK_IMPORTED_MODULE_2__.k3[_shared_constants_network__WEBPACK_IMPORTED_MODULE_3__.vo.MAINNET]}address/${account.address}`;function CustodyAccountList({rawList,accounts,onAccountChange,selectedAccounts,onCancel,onAddAccounts,custody,children}){const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_7__.C)(),[copied,handleCopy]=(0,_hooks_useCopyToClipboard__WEBPACK_IMPORTED_MODULE_9__.m)(),tooltipText=t(copied?"copiedExclamation":"copyToClipboard"),disabled=!selectedAccounts||0===Object.keys(selectedAccounts).length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{className:"page-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{padding:4,className:"page-container__content"},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Qb.Column,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Sw.Full,className:"custody-account-list","data-testid":"custody-account-list"},accounts.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase()))).map(((account,idx)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,className:"custody-account-list__item",key:account.address},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.g1.flexStart,"data-testid":"custody-account-list-item-radio-button"},!rawList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"checkbox",name:"selectedAccount",id:`address-${idx}`,onChange:()=>onAccountChange({name:account.name,address:account.address,custodianDetails:account.custodianDetails,labels:account.labels,chainId:account.chainId}),checked:selectedAccounts[account.address]||!1})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Qb.Column,marginLeft:2,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.Sw.Full},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.__,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,marginTop:2,htmlFor:`address-${idx}`,className:"custody-account-list__item__title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xv,{as:"span",variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.inherit,size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.bodySm,paddingRight:1,className:"custody-account-list__item__name"},account.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.__,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.bodySm,marginTop:2,marginLeft:2,marginRight:3,htmlFor:`address-${idx}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xv,{as:"span",variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.rK.bodyMd,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,className:"custody-account-list__item"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.ZP,{href:getButtonLinkHref(account),target:"_blank",rel:"noopener noreferrer"},(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_4__.$Q)(account.address),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Jh.EXPORT,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.uH.SM,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.EY.primaryDefault,marginLeft:1})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{position:"bottom",title:tooltipText,style:{backgroundColor:"transparent"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"custody-account-list__item__clipboard",onClick:()=>handleCopy(account.address)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Jh.COPY,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.uH.XS,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.EY.iconMuted}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.E0.spaceBetween},account.labels&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_institutional_custody_labels__WEBPACK_IMPORTED_MODULE_1__.Z,{labels:account.labels,index:idx.toString(),hideNetwork:!0})))))))),!rawList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{as:"footer",className:"page-container__footer",padding:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.sS.Flex,gap:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.zx,{"data-testid":"custody-account-cancel-button",block:!0,variant:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Wu.Secondary,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.qE.Lg,className:"custody-account-list__button",onClick:onCancel},t("cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_8__.zx,{"data-testid":"custody-account-connect-button",block:!0,variant:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.Wu.Primary,size:_components_component_library__WEBPACK_IMPORTED_MODULE_8__.qE.Lg,className:"custody-account-list__button",disabled,onClick:()=>onAddAccounts(custody)},t("connect")))))}CustodyAccountList.propTypes={custody:prop_types__WEBPACK_IMPORTED_MODULE_10___default().string,accounts:prop_types__WEBPACK_IMPORTED_MODULE_10___default().array.isRequired,onAccountChange:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,selectedAccounts:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,onAddAccounts:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,onCancel:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,rawList:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,children:prop_types__WEBPACK_IMPORTED_MODULE_10___default().node},CustodyAccountList.__docgenInfo={description:"",methods:[],displayName:"CustodyAccountList",props:{custody:{description:"",type:{name:"string"},required:!1},accounts:{description:"",type:{name:"array"},required:!0},onAccountChange:{description:"",type:{name:"func"},required:!1},selectedAccounts:{description:"",type:{name:"object"},required:!1},onAddAccounts:{description:"",type:{name:"func"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},rawList:{description:"",type:{name:"bool"},required:!1},children:{description:"",type:{name:"node"},required:!1}}}}}]);