"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[1504],{"./ui/pages/keychains/reveal-seed.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>reveal_seed_stories});var react=__webpack_require__("./node_modules/react/index.js"),qrcode=__webpack_require__("./node_modules/qrcode-generator/qrcode.js"),qrcode_default=__webpack_require__.n(qrcode),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),hold_to_reveal_modal=__webpack_require__("./ui/components/app/modals/hold-to-reveal-modal/hold-to-reveal-modal.tsx"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),box=__webpack_require__("./ui/components/ui/box/index.js"),export_text_container=__webpack_require__("./ui/components/ui/export-text-container/index.js"),tabs=__webpack_require__("./ui/components/ui/tabs/index.js"),contexts_metametrics=__webpack_require__("./ui/contexts/metametrics.js"),history_history=__webpack_require__("./ui/ducks/history/history.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),zendesk_url=__webpack_require__("./ui/helpers/constants/zendesk-url.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),actions=__webpack_require__("./ui/store/actions.ts");function RevealSeedPage(){const history=(0,react_router.k6)(),dispatch=(0,es.I0)(),t=(0,useI18nContext.C)(),trackEvent=(0,react.useContext)(contexts_metametrics.Wd),[screen,setScreen]=(0,react.useState)("PASSWORD_PROMPT_SCREEN"),[password,setPassword]=(0,react.useState)(""),[seedWords,setSeedWords]=(0,react.useState)(null),[completedLongPress,setCompletedLongPress]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),mostRecentOverviewPage=(0,es.v9)(history_history.H7),[isShowingHoldModal,setIsShowingHoldModal]=(0,react.useState)(!1);(0,react.useEffect)((()=>{const passwordBox=document.getElementById("password-box");passwordBox&&passwordBox.focus()}),[]);const renderQR=()=>{const qrImage=qrcode_default()(0,"L");return qrImage.addData(seedWords),qrImage.make(),qrImage},handleSubmit=event=>{event.preventDefault(),setSeedWords(null),setCompletedLongPress(!1),setError(null),dispatch((0,actions.RrP)(password)).then((revealedSeedWords=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportRevealed,properties:{key_type:metametrics.Dv.Srp}}),setSeedWords(revealedSeedWords),setIsShowingHoldModal(!0)})).catch((e=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportFailed,properties:{key_type:metametrics.Dv.Srp,reason:e.message}}),setError(e.message)}))};return react.createElement(box.ZP,{className:"page-container",paddingTop:8,paddingBottom:8,paddingLeft:4,paddingRight:4,gap:4},react.createElement(component_library.xv,{variant:design_system.rK.headingLg},t("secretRecoveryPhrase")),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("revealSeedWordsDescription1",[react.createElement(component_library.zx,{key:"srp-learn-srp",variant:component_library.RN.LINK,size:component_library.Gt.INHERIT,as:"a",href:zendesk_url.Z.SECRET_RECOVERY_PHRASE,target:"_blank",rel:"noopener noreferrer"},t("revealSeedWordsSRPName")),react.createElement(component_library.xv,{key:"reveal-seed-word-part-3",variant:design_system.rK.bodyMdBold,as:"strong"},t("revealSeedWordsDescription3"))])),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("revealSeedWordsDescription2",[react.createElement(component_library.zx,{key:"srp-learn-more-non-custodial",variant:component_library.RN.LINK,size:component_library.Gt.INHERIT,as:"a",href:zendesk_url.Z.NON_CUSTODIAL_WALLET,target:"_blank",rel:"noopener noreferrer"},t("revealSeedWordsNonCustodialWallet"))])),react.createElement(component_library.wB,{severity:design_system.zb.Danger},react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("revealSeedWordsWarning",[react.createElement(component_library.xv,{key:"reveal-seed-words-warning-2",variant:design_system.rK.bodyMdBold,as:"strong"},t("revealSeedWordsWarning2"))]))),"PASSWORD_PROMPT_SCREEN"!==screen&&completedLongPress?(trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpViewSrpText,properties:{key_type:metametrics.Dv.Srp}}),react.createElement("div",null,react.createElement(tabs.m,{defaultActiveTabName:t("revealSeedWordsText"),onTabClick:tabName=>{"text-seed"===tabName?trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpViewSrpText,properties:{key_type:metametrics.Dv.Srp}}):"qr-srp"===tabName&&trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpViewsSrpQR,properties:{key_type:metametrics.Dv.Srp}})}},react.createElement(tabs.O,{name:t("revealSeedWordsText"),className:"reveal-seed__tab",activeClassName:"reveal-seed__active-tab",tabKey:"text-seed"},react.createElement(component_library.__,{marginTop:4},t("yourPrivateSeedPhrase")),react.createElement(export_text_container.Z,{text:seedWords,onClickCopy:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportCopied,properties:{key_type:metametrics.Dv.Srp,copy_method:"clipboard"}}),trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpCopiedToClipboard,properties:{key_type:metametrics.Dv.Srp,copy_method:"clipboard"}})}})),react.createElement(tabs.O,{name:t("revealSeedWordsQR"),className:"reveal-seed__tab",activeClassName:"reveal-seed__active-tab",tabKey:"qr-srp"},react.createElement(box.ZP,{display:design_system.sS.Flex,justifyContent:design_system.E0.center,alignItems:design_system.g1.center,paddingTop:4,"data-testid":"qr-srp"},react.createElement("div",{dangerouslySetInnerHTML:{__html:renderQR().createTableTag(5,15)}})))))):react.createElement("form",{onSubmit:handleSubmit},react.createElement(component_library.__,{htmlFor:"password-box"},t("enterPasswordContinue")),react.createElement(component_library.nv,{inputProps:{"data-testid":"input-password"},type:component_library.T3.Password,placeholder:t("makeSureNoOneWatching"),id:"password-box",size:component_library.J9.Large,value:password,onChange:event=>setPassword(event.target.value),error:Boolean(error),width:design_system.Sw.Full}),error&&react.createElement(component_library.RU,{severity:component_library.TQ.Danger},error)),"PASSWORD_PROMPT_SCREEN"!==screen&&completedLongPress?react.createElement(box.ZP,{marginTop:"auto"},react.createElement(component_library.zx,{variant:component_library.RN.SECONDARY,width:design_system.Sw.Full,size:design_system.$u.LG,onClick:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpRevealCloseClicked,properties:{key_type:metametrics.Dv.Srp}}),history.push(mostRecentOverviewPage)}},t("close"))):react.createElement(box.ZP,{display:design_system.sS.Flex,marginTop:"auto",gap:4},react.createElement(component_library.zx,{width:design_system.Sw.Full,size:design_system.$u.LG,variant:component_library.RN.SECONDARY,onClick:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportCanceled,properties:{key_type:metametrics.Dv.Srp}}),trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpRevealCancelled,properties:{key_type:metametrics.Dv.Srp}}),history.push(mostRecentOverviewPage)}},t("cancel")),react.createElement(component_library.zx,{width:design_system.Sw.Full,size:design_system.$u.LG,onClick:event=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.KeyExportRequested,properties:{key_type:metametrics.Dv.Srp}}),trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpRevealNextClicked,properties:{key_type:metametrics.Dv.Srp}}),handleSubmit(event)},disabled:""===password},t("next"))),react.createElement(hold_to_reveal_modal.Z,{isOpen:isShowingHoldModal,onClose:()=>{trackEvent({category:metametrics.ci.Keys,event:metametrics.AW.SrpHoldToRevealCloseClicked,properties:{key_type:metametrics.Dv.Srp}}),setIsShowingHoldModal(!1)},onLongPressed:()=>{setCompletedLongPress(!0),setIsShowingHoldModal(!1),setScreen("REVEAL_SEED_SCREEN")},holdToRevealType:"SRP"}))}var _DefaultStory$paramet,_DefaultStory$paramet2;RevealSeedPage.__docgenInfo={description:"",methods:[],displayName:"RevealSeedPage"};const reveal_seed_stories={title:"Pages/Keychains/RevealSeedPage",argTypes:{requestRevealSeedWords:{action:"requestRevealSeedWords"},history:{control:"object"},mostRecentOverviewPage:{control:"text"}}},DefaultStory=args=>react.createElement(RevealSeedPage,args);DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <RevealSeedPage {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/ui/export-text-container/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>export_text_container});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),useCopyToClipboard=__webpack_require__("./ui/hooks/useCopyToClipboard.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts");function ExportTextContainer({text="",onClickCopy=null}){const t=(0,useI18nContext.C)(),[copied,handleCopy]=(0,useCopyToClipboard.m)(6e4);return react.createElement(component_library.xu,{display:design_system.sS.Flex,justifyContent:design_system.E0.center,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.center,borderColor:design_system.kf.borderDefault,borderRadius:design_system.cM.MD,padding:4,gap:4},react.createElement(component_library.xv,{display:design_system.sS.Flex,justifyContent:design_system.E0.center,className:"notranslate",variant:design_system.rK.bodyLgMedium,"data-testid":"srp_text"},text),react.createElement(component_library.PL,{className:"export-text-container__button",block:!0,onClick:()=>{onClickCopy&&onClickCopy(),handleCopy(text)}},t(copied?"copiedExclamation":"copyToClipboard")))}ExportTextContainer.propTypes={text:prop_types_default().string,onClickCopy:prop_types_default().func},ExportTextContainer.__docgenInfo={description:"",methods:[],displayName:"ExportTextContainer",props:{text:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},onClickCopy:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};const export_text_container=react.memo(ExportTextContainer)}}]);