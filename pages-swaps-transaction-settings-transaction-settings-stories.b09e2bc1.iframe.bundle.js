"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[6005],{"./ui/pages/swaps/transaction-settings/transaction-settings.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>transaction_settings_stories});var _DefaultStory$paramet,_DefaultStory$paramet2,react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),i18n=__webpack_require__("./ui/contexts/i18n.js"),button_group=__webpack_require__("./ui/components/ui/button-group/index.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),info_tooltip=__webpack_require__("./ui/components/ui/info-tooltip/index.js"),toggle_button=__webpack_require__("./ui/components/ui/toggle-button/index.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),typography=__webpack_require__("./ui/components/ui/typography/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),swaps_util=__webpack_require__("./ui/pages/swaps/swaps.util.ts"),swaps=__webpack_require__("./shared/constants/swaps.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),deprecated=__webpack_require__("./ui/components/component-library/modal-content/deprecated/index.ts"),modal_header_deprecated=__webpack_require__("./ui/components/component-library/modal-header/deprecated/index.ts"),actions=__webpack_require__("./ui/store/actions.ts"),swaps_swaps=__webpack_require__("./ui/ducks/swaps/swaps.js");function TransactionSettings({onSelect,onModalClose,maxAllowedSlippage,currentSlippage,smartTransactionsEnabled,smartTransactionsOptInStatus,setSmartTransactionsOptInStatus,currentSmartTransactionsError,isDirectWrappingEnabled}){const t=(0,react.useContext)(i18n.OO),dispatch=(0,es.I0)(),swapsErrorKey=(0,es.v9)(swaps_swaps.N3),[customValue,setCustomValue]=(0,react.useState)((()=>"number"!=typeof currentSlippage||Object.values(swaps.p6).includes(currentSlippage)?"":currentSlippage.toString())),[enteringCustomValue,setEnteringCustomValue]=(0,react.useState)(!1),[activeButtonIndex,setActiveButtonIndex]=(0,react.useState)((()=>currentSlippage===swaps.p6.high?1:currentSlippage===swaps.p6.default?0:"number"==typeof currentSlippage?2:0)),[inputRef,setInputRef]=(0,react.useState)(null),[newSlippage,setNewSlippage]=(0,react.useState)(currentSlippage),[newSmartTransactionsOptInStatus,setNewSmartTransactionsOptInStatus]=(0,react.useState)(smartTransactionsOptInStatus),didFormChange=newSlippage!==currentSlippage||newSmartTransactionsOptInStatus!==smartTransactionsOptInStatus;let notificationText="",notificationTitle="",notificationSeverity=design_system.t3.INFO;customValue&&(Number(customValue)<0?(notificationSeverity=design_system.t3.DANGER,notificationText=t("swapSlippageNegativeDescription"),notificationTitle=t("swapSlippageNegativeTitle"),dispatch((0,actions.coq)(swaps.nG))):Number(customValue)>0&&Number(customValue)<=1?(notificationSeverity=design_system.t3.WARNING,notificationText=t("swapSlippageLowDescription",[newSlippage]),notificationTitle=t("swapSlippageLowTitle")):Number(customValue)>=5&&Number(customValue)<=maxAllowedSlippage?(notificationSeverity=design_system.t3.WARNING,notificationText=t("swapSlippageHighDescription",[newSlippage]),notificationTitle=t("swapSlippageHighTitle")):Number(customValue)>maxAllowedSlippage?(notificationSeverity=design_system.t3.DANGER,notificationText=t("swapSlippageOverLimitDescription"),notificationTitle=t("swapSlippageOverLimitTitle"),dispatch((0,actions.coq)(swaps.WS))):0===Number(customValue)?(notificationSeverity=design_system.t3.INFO,notificationText=t("swapSlippageZeroDescription"),notificationTitle=t("swapSlippageZeroTitle")):swapsErrorKey&&dispatch((0,actions.coq)("")));const isDangerSeverity=notificationSeverity===design_system.t3.DANGER,customValueText=customValue||t("swapCustom");return(0,react.useEffect)((()=>{inputRef&&enteringCustomValue&&window.document.activeElement!==inputRef&&inputRef.focus()}),[inputRef,enteringCustomValue]),(0,react.useEffect)((()=>{2!==activeButtonIndex&&dispatch((0,actions.coq)(""))}),[dispatch,activeButtonIndex]),(0,react.useEffect)((()=>{void 0===newSmartTransactionsOptInStatus&&setNewSmartTransactionsOptInStatus(smartTransactionsOptInStatus)}),[smartTransactionsOptInStatus,newSmartTransactionsOptInStatus]),react.createElement(component_library.u_,{onClose:onModalClose,isOpen:!0,isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},react.createElement(component_library.ZA,null),react.createElement(deprecated.h,null,react.createElement(modal_header_deprecated.x,{onClose:onModalClose},t("transactionSettings")),react.createElement(box.ZP,{display:design_system.bA.FLEX,flexDirection:design_system.Qb.Column,justifyContent:design_system.E0.spaceBetween,alignItems:design_system.g1.stretch,className:"transaction-settings__content"},react.createElement(box.ZP,{marginTop:7,marginBottom:5},react.createElement(react.Fragment,null,smartTransactionsEnabled&&react.createElement(box.ZP,{marginTop:2,marginBottom:6,display:design_system.bA.FLEX,justifyContent:design_system.E0.spaceBetween},react.createElement(box.ZP,{display:design_system.bA.FLEX,alignItems:design_system.g1.center,paddingRight:3},react.createElement(typography.Z,{variant:design_system.TypographyVariant.H6,boxProps:{paddingRight:2}},t("smartSwaps")),currentSmartTransactionsError?react.createElement(info_tooltip.Z,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,swaps_util.gq)(currentSmartTransactionsError,t)}):react.createElement(info_tooltip.Z,{position:"top",contentText:t("smartSwapsTooltip",[react.createElement(component_library.ZP,{key:"smart-swaps-faq-and-risk-disclosures",size:component_library.o3.Inherit,href:swaps.yS,externalLink:!0,display:design_system.sS.Inline},t("faqAndRiskDisclosures"))]),iconFillColor:"var(--color-icon-muted)"})),react.createElement(toggle_button.Z,{value:newSmartTransactionsOptInStatus,onToggle:value=>{setNewSmartTransactionsOptInStatus(!value,value)},offLabel:t("off"),onLabel:t("on"),disabled:Boolean(currentSmartTransactionsError)})),!isDirectWrappingEnabled&&react.createElement(react.Fragment,null,react.createElement(box.ZP,{display:design_system.bA.FLEX,alignItems:design_system.g1.center},react.createElement(typography.Z,{variant:design_system.TypographyVariant.H6,boxProps:{paddingRight:2}},t("swapsMaxSlippage")),currentSmartTransactionsError?react.createElement(info_tooltip.Z,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,swaps_util.gq)(currentSmartTransactionsError,t)}):react.createElement(info_tooltip.Z,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:t("swapSlippageTooltip")})),react.createElement(box.ZP,{display:design_system.bA.FLEX},react.createElement(button_group.Z,{defaultActiveButtonIndex:2!==activeButtonIndex||customValue?activeButtonIndex:1,variant:"radiogroup",newActiveButtonIndex:activeButtonIndex,className:classnames_default()("button-group","transaction-settings__button-group")},react.createElement(ui_button.Z,{onClick:()=>{setCustomValue(""),setEnteringCustomValue(!1),setActiveButtonIndex(0),setNewSlippage(swaps.p6.default)}},t("swapSlippagePercent",[swaps.p6.default])),react.createElement(ui_button.Z,{onClick:()=>{setCustomValue(""),setEnteringCustomValue(!1),setActiveButtonIndex(1),setNewSlippage(swaps.p6.high)}},t("swapSlippagePercent",[swaps.p6.high])),react.createElement(ui_button.Z,{className:classnames_default()("transaction-settings__button-group-custom-button",{"radio-button--danger":isDangerSeverity}),onClick:()=>{setActiveButtonIndex(2),setEnteringCustomValue(!0)}},enteringCustomValue?react.createElement("div",{className:classnames_default()("transaction-settings__custom-input",{"transaction-settings__custom-input--danger":isDangerSeverity})},react.createElement("input",{"data-testid":"transaction-settings-custom-slippage",onChange:event=>{const{value}=event.target;!isNaN(Number(value))&&(setCustomValue(value),setNewSlippage(Number(value)))},type:"text",maxLength:"4",ref:setInputRef,onBlur:()=>{setEnteringCustomValue(!1)},onKeyDown:event=>{"Enter"===event.key&&setEnteringCustomValue(!1)},value:customValue||""})):customValueText,(customValue||enteringCustomValue)&&react.createElement("div",{className:"transaction-settings__percentage-suffix"},"%")))))),notificationText&&react.createElement(box.ZP,{marginTop:5},react.createElement(component_library.wB,{severity:notificationSeverity,title:notificationTitle,titleProps:{"data-testid":"swaps-banner-title"}},react.createElement(typography.Z,{variant:design_system.TypographyVariant.H6,testId:"mm-banner-alert-notification-text"},notificationText)))),react.createElement(box.ZP,{marginTop:5},react.createElement(component_library.DF,{onClick:()=>{newSlippage!==currentSlippage&&onSelect(newSlippage),newSmartTransactionsOptInStatus!==smartTransactionsOptInStatus&&setSmartTransactionsOptInStatus(newSmartTransactionsOptInStatus),onModalClose()},block:!0,disabled:!didFormChange,"data-testid":"update-transaction-settings-button"},t("update"))))))}TransactionSettings.propTypes={onSelect:prop_types_default().func.isRequired,onModalClose:prop_types_default().func.isRequired,maxAllowedSlippage:prop_types_default().number.isRequired,currentSlippage:prop_types_default().number,smartTransactionsEnabled:prop_types_default().bool.isRequired,smartTransactionsOptInStatus:prop_types_default().bool,setSmartTransactionsOptInStatus:prop_types_default().func,currentSmartTransactionsError:prop_types_default().string,isDirectWrappingEnabled:prop_types_default().bool},TransactionSettings.__docgenInfo={description:"",methods:[],displayName:"TransactionSettings",props:{onSelect:{description:"",type:{name:"func"},required:!0},onModalClose:{description:"",type:{name:"func"},required:!0},maxAllowedSlippage:{description:"",type:{name:"number"},required:!0},currentSlippage:{description:"",type:{name:"number"},required:!1},smartTransactionsEnabled:{description:"",type:{name:"bool"},required:!0},smartTransactionsOptInStatus:{description:"",type:{name:"bool"},required:!1},setSmartTransactionsOptInStatus:{description:"",type:{name:"func"},required:!1},currentSmartTransactionsError:{description:"",type:{name:"string"},required:!1},isDirectWrappingEnabled:{description:"",type:{name:"bool"},required:!1}}};const transaction_settings_stories={title:"Pages/Swaps/TransactionSettings"},DefaultStory=()=>react.createElement("div",{style:{height:"200px",marginTop:"160px"}},react.createElement(TransactionSettings,{onSelect:(0,dist.aD)("slippage")}));DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"() => <div style={{\n  height: '200px',\n  marginTop: '160px'\n}}>\n    <TransactionSettings onSelect={action('slippage')} />\n  </div>",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/ui/button-group/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ButtonGroup});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ButtonGroup extends react.PureComponent{constructor(...args){super(...args),_defineProperty(this,"state",{activeButtonIndex:this.props.noButtonActiveByDefault?null:this.props.defaultActiveButtonIndex})}componentDidUpdate(_,prevState){"number"==typeof this.props.newActiveButtonIndex&&prevState.activeButtonIndex!==this.props.newActiveButtonIndex&&this.setState({activeButtonIndex:this.props.newActiveButtonIndex})}handleButtonClick(activeButtonIndex){this.setState({activeButtonIndex})}renderButtons(){const{children,disabled,variant}=this.props;return react.Children.map(children,((child,index)=>child&&react.createElement("button",{role:"radiogroup"===variant?"radio":void 0,"aria-checked":index===this.state.activeButtonIndex,className:classnames_default()("button-group__button",child.props.className,{"radio-button":"radiogroup"===variant,"button-group__button--active":index===this.state.activeButtonIndex,"radio-button--active":"radiogroup"===variant&&index===this.state.activeButtonIndex}),"data-testid":`button-group__button${index}`,onClick:()=>{var _child$props$onClick,_child$props;this.handleButtonClick(index),null===(_child$props$onClick=(_child$props=child.props).onClick)||void 0===_child$props$onClick||_child$props$onClick.call(_child$props)},disabled:disabled||child.props.disabled,key:index},child.props.children)))}render(){const{className,style,variant}=this.props;return react.createElement("div",{className:classnames_default()(className,{"radio-button-group":"radiogroup"===variant}),role:"radiogroup"===variant?"radiogroup":void 0,style},this.renderButtons())}}_defineProperty(ButtonGroup,"propTypes",{defaultActiveButtonIndex:prop_types_default().number,noButtonActiveByDefault:prop_types_default().bool,disabled:prop_types_default().bool,children:prop_types_default().array,className:prop_types_default().string,style:prop_types_default().object,newActiveButtonIndex:prop_types_default().number,variant:prop_types_default().oneOf(["radiogroup","default"])}),_defineProperty(ButtonGroup,"defaultProps",{className:"button-group",defaultActiveButtonIndex:0,variant:"default"}),ButtonGroup.__docgenInfo={description:"",methods:[{name:"handleButtonClick",docblock:null,modifiers:[],params:[{name:"activeButtonIndex",type:null}],returns:null},{name:"renderButtons",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ButtonGroup",props:{className:{defaultValue:{value:"'button-group'",computed:!1},description:"Adds a className to the root div of the of the ButtonGroup component",type:{name:"string"},required:!1},defaultActiveButtonIndex:{defaultValue:{value:"0",computed:!1},description:"change button active order",type:{name:"number"},required:!1},variant:{defaultValue:{value:"'default'",computed:!1},description:"options for rendering type of button, consist of 'default' and 'radiogroup'",type:{name:"enum",value:[{value:"'radiogroup'",computed:!1},{value:"'default'",computed:!1}]},required:!1},noButtonActiveByDefault:{description:"no button are active before clicked by the user",type:{name:"bool"},required:!1},disabled:{description:"disabling every button inside button group",type:{name:"bool"},required:!1},children:{description:"Children must be an array of button components",type:{name:"array"},required:!1},style:{description:"adding style for button group component",type:{name:"object"},required:!1},newActiveButtonIndex:{description:"updating value of active button in button group component",type:{name:"number"},required:!1}}}}}]);