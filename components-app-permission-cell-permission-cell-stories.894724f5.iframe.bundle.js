"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[4291],{"./ui/components/app/permission-cell/permission-cell.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory$paramet,_DefaultStory$paramet2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/app/permission-cell/index.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/App/PermissionCell",component:___WEBPACK_IMPORTED_MODULE_1__.Z},DefaultStory=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_1__.Z,args);DefaultStory.storyName="Default",DefaultStory.args={title:"Access the Ethereum provider.",description:"Allow the snap to communicate with MetaMask directâ€¦blockchain and suggest messages and transactions.",weight:1,avatarIcon:"ethereum",dateApproved:1680185432326,revoked:!1},DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <PermissionCell {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/app/permission-cell/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>permission_cell});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),box=__webpack_require__("./ui/components/ui/box/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),menu=__webpack_require__("./ui/components/ui/menu/index.js"),popover_component=__webpack_require__("./ui/components/ui/popover/popover.component.js"),permissions=__webpack_require__("./shared/constants/snaps/permissions.ts"),actions=__webpack_require__("./ui/store/actions.ts");const PermissionCellOptions=({snapId,permissionName,description})=>{const t=(0,useI18nContext.C)(),dispatch=(0,es.I0)(),ref=(0,react.useRef)(!1),[showOptions,setShowOptions]=(0,react.useState)(!1),[showDetails,setShowDetails]=(0,react.useState)(!1),isRevokable=permissions.X5.includes(permissionName);return react.createElement(box.ZP,{ref},react.createElement(component_library.Ei,{iconName:component_library.uH.MoreVertical,ariaLabel:t("options"),onClick:()=>{setShowOptions(!0)},"data-testid":permissionName}),showOptions&&react.createElement(menu.v,{anchorElement:ref.current,onHide:()=>{setShowOptions(!1)}},react.createElement(menu.s,{onClick:()=>{setShowOptions(!1),setShowDetails(!0)}},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,style:{whiteSpace:"nowrap"}},t("details"))),isRevokable&&react.createElement(menu.s,{onClick:()=>{setShowOptions(!1),dispatch((0,actions.nCB)(snapId,[permissionName]))}},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.errorDefault,style:{whiteSpace:"nowrap"}},t("revokePermission")))),showDetails&&react.createElement(popover_component.Z,{title:t("details"),onClose:()=>{setShowOptions(!1),setShowDetails(!1)}},react.createElement(box.ZP,{marginLeft:4,marginRight:4,marginBottom:4},react.createElement(component_library.xv,null,description))))};PermissionCellOptions.propTypes={snapId:prop_types_default().string.isRequired,permissionName:prop_types_default().string.isRequired,description:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object])},PermissionCellOptions.__docgenInfo={description:"",methods:[],displayName:"PermissionCellOptions",props:{snapId:{description:"",type:{name:"string"},required:!0},permissionName:{description:"",type:{name:"string"},required:!0},description:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1}}};const PermissionCell=({snapId,permissionName,title,description,weight,avatarIcon,dateApproved,revoked,showOptions,hideStatus})=>{var _avatarIcon$props;const t=(0,useI18nContext.C)(),infoIcon=component_library.uH.Info;let infoIconColor=design_system.EY.iconMuted,iconColor=design_system.EY.primaryDefault,iconBackgroundColor=design_system.Il.primaryMuted;!revoked&&weight<=2&&(iconColor=design_system.EY.warningDefault,iconBackgroundColor=design_system.Il.warningMuted,infoIconColor=design_system.EY.warningDefault),dateApproved&&(iconColor=design_system.EY.iconMuted,iconBackgroundColor=design_system.Il.backgroundAlternative),revoked&&(iconColor=design_system.EY.iconMuted,iconBackgroundColor=design_system.Il.backgroundAlternative);let permissionIcon=avatarIcon;return"string"!=typeof avatarIcon&&null!=avatarIcon&&null!==(_avatarIcon$props=avatarIcon.props)&&void 0!==_avatarIcon$props&&_avatarIcon$props.iconName&&(permissionIcon=avatarIcon.props.iconName),react.createElement(box.ZP,{className:"permission-cell",justifyContent:design_system.E0.center,alignItems:design_system.g1.flexStart,marginLeft:4,marginRight:4,paddingTop:2,paddingBottom:2},react.createElement(box.ZP,null,"string"==typeof permissionIcon?react.createElement(component_library.fM,{iconName:permissionIcon,size:component_library.dt.Md,iconProps:{size:component_library.Jh.Sm},color:iconColor,backgroundColor:iconBackgroundColor}):permissionIcon),react.createElement(box.ZP,{width:"full",marginLeft:4,marginRight:4},react.createElement(component_library.xv,{size:design_system.$u.MD,variant:design_system.rK.bodyMd,className:classnames_default()("permission-cell__title",{"permission-cell__title-revoked":revoked})},title),!hideStatus&&react.createElement(component_library.xv,{className:"permission-cell__status",variant:design_system.rK.bodySm,color:design_system.d9.textAlternative},!revoked&&(dateApproved?t("approvedOn",[(0,util.p6)(dateApproved,"yyyy-MM-dd")]):t("permissionRequested")),revoked?t("permissionRevoked"):"")),react.createElement(box.ZP,null,showOptions&&snapId?react.createElement(PermissionCellOptions,{snapId,permissionName,description}):react.createElement(tooltip.Z,{html:react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative},description),position:"bottom"},react.createElement(component_library.JO,{color:infoIconColor,name:infoIcon,size:component_library.Jh.Sm}))))};PermissionCell.propTypes={snapId:prop_types_default().string,permissionName:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().element]).isRequired,title:prop_types_default().oneOfType([prop_types_default().string.isRequired,prop_types_default().object.isRequired]),description:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().object]),weight:prop_types_default().number,avatarIcon:prop_types_default().any.isRequired,dateApproved:prop_types_default().number,revoked:prop_types_default().bool,showOptions:prop_types_default().bool,hideStatus:prop_types_default().bool},PermissionCell.__docgenInfo={description:"",methods:[],displayName:"PermissionCell",props:{snapId:{description:"",type:{name:"string"},required:!1},permissionName:{description:"",type:{name:"union",value:[{name:"string"},{name:"element"}]},required:!0},title:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1},description:{description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1},weight:{description:"",type:{name:"number"},required:!1},avatarIcon:{description:"",type:{name:"any"},required:!0},dateApproved:{description:"",type:{name:"number"},required:!1},revoked:{description:"",type:{name:"bool"},required:!1},showOptions:{description:"",type:{name:"bool"},required:!1},hideStatus:{description:"",type:{name:"bool"},required:!1}}};const permission_cell=PermissionCell}}]);