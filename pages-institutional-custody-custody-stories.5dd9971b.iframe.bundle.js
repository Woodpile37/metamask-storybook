"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[2058],{"./ui/pages/institutional/custody/custody.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>custody_stories});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),store=__webpack_require__("./ui/store/store.ts"),test_data=__webpack_require__("./.storybook/test-data.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),institution_background=__webpack_require__("./ui/store/institutional/institution-background.ts"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),institutional_selectors=__webpack_require__("./ui/selectors/institutional/selectors.js"),account_list=__webpack_require__("./ui/pages/institutional/connect-custody/account-list.js"),jwt_url_form=__webpack_require__("./ui/components/institutional/jwt-url-form/index.js"),pulse_loader=__webpack_require__("./ui/components/ui/pulse-loader/pulse-loader.js"),process=__webpack_require__("./node_modules/process/browser.js");const CustodyPage=()=>{const t=(0,useI18nContext.C)(),history=(0,react_router.k6)(),trackEvent=(0,react.useContext)(metametrics.Wd),dispatch=(0,es.I0)(),mmiActions=(0,institution_background.I6)(),currentChainId=(0,es.v9)(selectors.BVZ),{custodians}=(0,es.v9)(institutional_selectors.Hg),[loading,setLoading]=(0,react.useState)(!0),[selectedAccounts,setSelectedAccounts]=(0,react.useState)({}),[selectedCustodianName,setSelectedCustodianName]=(0,react.useState)(""),[selectedCustodianImage,setSelectedCustodianImage]=(0,react.useState)(null),[selectedCustodianDisplayName,setSelectedCustodianDisplayName]=(0,react.useState)(""),[selectedCustodianType,setSelectedCustodianType]=(0,react.useState)(""),[connectError,setConnectError]=(0,react.useState)(""),[currentJwt,setCurrentJwt]=(0,react.useState)(""),[selectError,setSelectError]=(0,react.useState)(""),[jwtList,setJwtList]=(0,react.useState)([]),[apiUrl,setApiUrl]=(0,react.useState)(""),[addNewTokenClicked,setAddNewTokenClicked]=(0,react.useState)(!1),[chainId,setChainId]=(0,react.useState)(0),[connectRequest,setConnectRequest]=(0,react.useState)(void 0),[accounts,setAccounts]=(0,react.useState)(),custodianButtons=(0,react.useMemo)((()=>{const custodianItems=[];return custodians.sort((function(a,b){const nameA=a.name.toLowerCase(),nameB=b.name.toLowerCase();return nameA<nameB?-1:nameA>nameB?1:0})).forEach((custodian=>{!custodian.production&&"production"===process.env.METAMASK_ENVIRONMENT||custodian.hidden||connectRequest&&Object.keys(connectRequest).length&&custodian.name!==selectedCustodianName||custodianItems.push(react.createElement(component_library.xu,{key:(0,v4.Z)(),display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,justifyContent:design_system.E0.spaceBetween,alignItems:design_system.g1.center,borderColor:design_system.kf.borderDefault,borderRadius:design_system.cM.SM,padding:4,marginBottom:4},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center},custodian.iconUrl&&react.createElement("img",{width:32,height:32,src:custodian.iconUrl,alt:custodian.displayName}),react.createElement(component_library.xv,{marginLeft:2},custodian.displayName)),react.createElement(component_library.zx,{size:component_library.Gt.SM,"data-testid":"custody-connect-button",onClick:async _=>{const jwtListValue=await dispatch(mmiActions.getCustodianJWTList(custodian.name));setSelectedCustodianName(custodian.name),setSelectedCustodianType(custodian.type),setSelectedCustodianImage(custodian.iconUrl),setSelectedCustodianDisplayName(custodian.displayName),setApiUrl(custodian.apiUrl),setCurrentJwt(jwtListValue[0]||""),setJwtList(jwtListValue),trackEvent({category:"MMI",event:"Custodian Selected",properties:{custodian:custodian.name}})}},t("select"))))})),custodianItems}),[connectRequest,custodians,dispatch,mmiActions,selectedCustodianName,t,trackEvent]),handleConnectError=(0,react.useCallback)((e=>{let errorMessage;const detailedError=e.message.split(":");detailedError.length>1&&!isNaN(parseInt(detailedError[0],10))&&401===parseInt(detailedError[0],10)&&(errorMessage="Authentication error. Please ensure you have entered the correct token"),/Network Error/u.test(e.message)&&(errorMessage="Network error. Please ensure you have entered the correct API URL"),errorMessage||(errorMessage=e.message),setConnectError(`Something went wrong connecting your custodian account. Error details: ${errorMessage}`),trackEvent({category:"MMI",event:"Connect to custodian error",properties:{custodian:selectedCustodianName}})}),[selectedCustodianName,trackEvent]),getCustodianAccounts=(0,react.useCallback)((async(token,getNonImportedAccounts)=>await dispatch(mmiActions.getCustodianAccounts(token,apiUrl,selectedCustodianType,getNonImportedAccounts))),[dispatch,mmiActions,apiUrl,selectedCustodianType]),connect=(0,react.useCallback)((async()=>{try{const jwt=currentJwt||jwtList[0];setConnectError("");const accountsValue=await getCustodianAccounts(jwt,!0);setAccounts(accountsValue),trackEvent({category:"MMI",event:"Connect to custodian",properties:{custodian:selectedCustodianName,apiUrl,rpc:Boolean(connectRequest)}})}catch(e){handleConnectError(e)}}),[apiUrl,connectRequest,currentJwt,getCustodianAccounts,handleConnectError,jwtList,selectedCustodianName,trackEvent]);(0,react.useEffect)((()=>{setLoading(!0);(async()=>{try{await(async()=>{const connectRequestValue=await dispatch(mmiActions.getCustodianConnectRequest());setChainId(parseInt(currentChainId,16)),Object.keys(connectRequestValue).length&&(setConnectRequest(connectRequestValue),setCurrentJwt(connectRequestValue.token||await dispatch(mmiActions.getCustodianToken())),setSelectedCustodianType(connectRequestValue.custodianType),setSelectedCustodianName(connectRequestValue.custodianName),setApiUrl(connectRequestValue.apiUrl))})(),setLoading(!1)}catch(error){console.error(error),setLoading(!1)}})()}),[]),(0,react.useEffect)((()=>{parseInt(chainId,16)!==chainId&&(setChainId(parseInt(currentChainId,16)),(async()=>{if(!isNaN(chainId)){const jwt=currentJwt||jwtList[0];jwt&&jwt.length&&setAccounts(await getCustodianAccounts(jwt,!0))}})())}),[getCustodianAccounts,apiUrl,currentJwt,jwtList,selectedCustodianType,currentChainId,chainId]);const cancelConnectCustodianToken=()=>{setSelectedCustodianName(""),setSelectedCustodianType(""),setSelectedCustodianImage(null),setSelectedCustodianDisplayName(""),setApiUrl(""),setCurrentJwt(""),setConnectError(""),setSelectError("")};return loading?react.createElement(pulse_loader.Z,null):react.createElement(react.Fragment,null,connectError&&react.createElement(component_library.xv,{textAlign:design_system.PH.Center,marginTop:3,padding:[2,7,5]},connectError),selectError&&react.createElement(component_library.xv,{textAlign:design_system.PH.Center,marginTop:3,padding:[2,7,5]},selectError),accounts||selectedCustodianType?null:react.createElement(component_library.xu,{padding:4,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,backgroundColor:design_system.Il.backgroundDefault,style:{boxShadow:"var(--shadow-size-xs) var(--color-shadow-default)"}},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center,marginBottom:4,marginTop:4},react.createElement(component_library.Ei,{ariaLabel:t("back"),iconName:component_library.uH.ArrowLeft,size:component_library.Jh.Sm,color:design_system.Il.iconDefault,onClick:()=>history.push(routes.QO),display:design_system.sS.Flex}),react.createElement(component_library.xv,null,t("back"))),react.createElement(component_library.xv,{as:"h4",variant:design_system.rK.bodyLgMedium,marginTop:4},t("connectCustodialAccountTitle")),react.createElement(component_library.xv,{as:"h6",color:design_system.d9.textDefault,marginTop:2,marginBottom:5},t("connectCustodialAccountMsg")),react.createElement(component_library.xu,null,react.createElement("ul",{width:design_system.Sw.Full},custodianButtons))),!accounts&&selectedCustodianType&&react.createElement(react.Fragment,null,react.createElement(component_library.xu,{padding:4,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,backgroundColor:design_system.Il.backgroundDefault,style:{boxShadow:"var(--shadow-size-xs) var(--color-shadow-default)"}},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center,marginBottom:4,marginTop:4},react.createElement(component_library.Ei,{ariaLabel:t("back"),iconName:component_library.uH.ArrowLeft,size:component_library.Jh.Sm,color:design_system.Il.iconDefault,onClick:()=>cancelConnectCustodianToken(),display:[design_system.sS.Flex]}),react.createElement(component_library.xv,null,t("back"))),react.createElement(component_library.xv,{as:"h4"},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center},selectedCustodianImage&&react.createElement("img",{width:32,height:32,src:selectedCustodianImage,alt:selectedCustodianDisplayName}),react.createElement(component_library.xv,{marginLeft:2},selectedCustodianDisplayName))),react.createElement(component_library.xv,{marginTop:4},t("enterCustodianToken",[selectedCustodianDisplayName])),react.createElement(component_library.xu,{paddingBottom:7},react.createElement(jwt_url_form.Z,{jwtList,currentJwt,onJwtChange:jwt=>setCurrentJwt(jwt),jwtInputText:t("pasteJWTToken"),apiUrl,urlInputText:t("custodyApiUrl",[selectedCustodianDisplayName]),onUrlChange:url=>setApiUrl(url)}),react.createElement(component_library.xu,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,justifyContent:design_system.E0.center,padding:0},react.createElement(component_library.zx,{variant:component_library.RN.SECONDARY,marginRight:4,onClick:()=>{cancelConnectCustodianToken()},block:!0},t("cancel")),react.createElement(component_library.zx,{"data-testid":"jwt-form-connect-button",onClick:connect,disabled:!selectedCustodianName||addNewTokenClicked&&!currentJwt,block:!0},t("connect")))))),accounts&&accounts.length>0&&react.createElement(react.Fragment,null,react.createElement(component_library.xu,{borderColor:design_system.kf.borderDefault,padding:[5,7,2],width:design_system.Sw.Full},react.createElement(component_library.xv,{as:"h4"},t("selectAnAccount")),react.createElement(component_library.xv,{marginTop:2,marginBottom:5},t("selectAnAccountHelp"))),react.createElement(component_library.xu,{padding:[5,7,0],display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,justifyContent:design_system.E0.flexStart,alignItems:design_system.g1.center},react.createElement("input",{type:"checkbox",id:"selectAllAccounts",name:"selectAllAccounts",marginRight:2,marginLeft:2,value:{},onChange:e=>(e=>{const allAccounts={};e.currentTarget.checked?(accounts.forEach((account=>{allAccounts[account.address]={name:account.name,custodianDetails:account.custodianDetails,labels:account.labels,token:currentJwt,apiUrl,chainId:account.chainId,custodyType:selectedCustodianType,custodyName:selectedCustodianName}})),setSelectedAccounts(allAccounts)):setSelectedAccounts({})})(e),checked:Object.keys(selectedAccounts).length===accounts.length}),react.createElement(component_library.__,{htmlFor:"selectAllAccounts"},t("selectAllAccounts"))),react.createElement(account_list.Z,{custody:selectedCustodianName,accounts,onAccountChange:account=>{selectedAccounts[account.address]?delete selectedAccounts[account.address]:selectedAccounts[account.address]={name:account.name,custodianDetails:account.custodianDetails,labels:account.labels,token:currentJwt,apiUrl,chainId:account.chainId,custodyType:selectedCustodianType,custodyName:selectedCustodianName},setSelectedAccounts(selectedAccounts)},selectedAccounts,onAddAccounts:async()=>{try{const selectedCustodian=custodians.find((custodian=>custodian.name===selectedCustodianName));await dispatch(mmiActions.connectCustodyAddresses(selectedCustodianType,selectedCustodianName,selectedAccounts)),trackEvent({category:"MMI",event:"Custodial accounts connected",properties:{custodian:selectedCustodianName,numberOfAccounts:Object.keys(selectedAccounts).length,chainId}}),history.push({pathname:routes.H8,state:{imgSrc:selectedCustodian.iconUrl,title:t("custodianAccountAddedTitle"),description:t("custodianAccountAddedDesc")}})}catch(e){setSelectError(e.message)}},onCancel:()=>{setAccounts(null),setSelectedCustodianName(null),setSelectedCustodianType(null),setSelectedAccounts({}),setCurrentJwt(""),setApiUrl(""),setAddNewTokenClicked(!1),Object.keys(connectRequest).length&&history.push(routes.QO),trackEvent({category:"MMI",event:"Connect to custodian cancel",properties:{custodian:selectedCustodianName,numberOfAccounts:Object.keys(selectedAccounts).length,chainId}})}})),accounts&&0===accounts.length&&react.createElement(component_library.xu,{"data-testid":"custody-accounts-empty",padding:[6,7,2],className:"custody-accounts-empty"},react.createElement(component_library.xv,{marginBottom:2,fontWeight:design_system.U9.Bold,color:design_system.d9.textDefault,variant:design_system.rK.bodyLgMedium},t("allCustodianAccountsConnectedTitle")),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd},t("allCustodianAccountsConnectedSubtitle")),react.createElement(component_library.xu,{padding:[5,7],width:design_system.Sw.Full,className:"custody-accounts-empty__footer"},react.createElement(component_library.zx,{size:component_library.Gt.LG,type:component_library.RN.SECONDARY,onClick:()=>history.push(routes.QO)},t("close")))))};CustodyPage.__docgenInfo={description:"",methods:[],displayName:"CustodyPage"};const custody=CustodyPage;var _DefaultStory$paramet,_DefaultStory$paramet2,_DefaultStory$paramet3;const customData={...test_data.default,metamask:{...test_data.default.metamask,mmiConfiguration:{portfolio:{enabled:!0,url:"https://portfolio.io"},custodians:[{type:"Saturn",name:"saturn",apiUrl:"https://saturn-custody.dev.metamask-institutional.io",iconUrl:"https://saturn-custody-ui.dev.metamask-institutional.io/saturn.svg",displayName:"Saturn Custody",production:!0,refreshTokenUrl:null,isNoteToTraderSupported:!1,version:1}]}}},custody_stories_store=(0,store.Z)(customData),custody_stories={title:"Pages/Institutional/CustodyPage",decorators:[story=>react.createElement(es.zt,{store:custody_stories_store},story())],component:custody,argTypes:{onClick:{action:"onClick"},onChange:{action:"onChange"}}},DefaultStory=args=>react.createElement(custody,args);DefaultStory.storyName="CustodyPage",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <CustodyPage {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet3=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet3?void 0:_DefaultStory$paramet3.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/institutional/custody-labels/custody-labels.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_component_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/component-library/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts");const CustodyLabels=props=>{const{labels,index,background,hideNetwork}=props,filteredLabels=hideNetwork?labels.filter((item=>"network_name"!==item.key)):labels;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.__,{display:["flex"],flexDirection:["row"],htmlFor:`address-${index||0}`},filteredLabels.map((item=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.xv,{key:item.key,textTransform:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__._5.Uppercase,className:"custody-label",style:background?{background}:{},marginTop:1,marginRight:1,marginBottom:2,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.lP.backgroundAlternative,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.d9.textMuted,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.U9.Normal,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.cM.SM,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.TypographyVariant.H9},item.value))))};CustodyLabels.propTypes={labels:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,index:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,background:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,hideNetwork:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool},CustodyLabels.__docgenInfo={description:"",methods:[],displayName:"CustodyLabels",props:{labels:{description:"",type:{name:"array"},required:!1},index:{description:"",type:{name:"string"},required:!1},background:{description:"",type:{name:"string"},required:!1},hideNetwork:{description:"",type:{name:"bool"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=CustodyLabels},"./ui/components/institutional/custody-labels/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_custody_labels__WEBPACK_IMPORTED_MODULE_0__.Z});var _custody_labels__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/institutional/custody-labels/custody-labels.js")},"./ui/components/institutional/jwt-dropdown/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>jwt_dropdown});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dropdown=__webpack_require__("./ui/components/ui/dropdown/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js");const JwtDropdown=props=>{const t=(0,useI18nContext.C)(),{currentJwt,jwtList}=props;return react.createElement(component_library.xu,null,react.createElement(component_library.xv,{padding:1,color:design_system.Il.textDefault,className:"custody-search-jwt__select-title"},t("selectJWT")),react.createElement(dropdown.Z,{"data-testid":"jwt-dropdown",className:"custody-search-jwt__select",name:"jwt-select",selectedOption:currentJwt,options:[...jwtList.find((item=>item===currentJwt))?[]:[{value:currentJwt,name:currentJwt.length>9?`...${currentJwt.slice(-9)}`:currentJwt}],...jwtList.map((text=>({value:text,name:`...${null==text?void 0:text.slice(-9)}`})))],onChange:opt=>props.onChange(opt.value)}))};JwtDropdown.propTypes={jwtList:prop_types_default().array,currentJwt:prop_types_default().string,onChange:prop_types_default().func},JwtDropdown.__docgenInfo={description:"",methods:[],displayName:"JwtDropdown",props:{jwtList:{description:"",type:{name:"array"},required:!1},currentJwt:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}}};const jwt_dropdown=JwtDropdown},"./ui/components/institutional/jwt-url-form/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>jwt_url_form});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.js"),jwt_dropdown=__webpack_require__("./ui/components/institutional/jwt-dropdown/index.js");const JwtUrlForm=props=>{const t=(0,useI18nContext.C)(),inputRef=(0,react.useRef)(),[addNewTokenClicked,setAddNewTokenClicked]=(0,react.useState)(!1),[fileTooBigError,setFileTooBigError]=(0,react.useState)();return react.createElement(component_library.xu,{className:"jwt-url-form",display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.flexStart,marginBottom:8},(()=>{const showAddNewToken=addNewTokenClicked,showJwtDropdown=props.jwtList.length>=1;return react.createElement(component_library.xu,{width:design_system.Sw.Full,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,marginTop:4,alignItems:design_system.g1.center,className:"jwt-url-form__jwt-container",marginBottom:4},showJwtDropdown&&react.createElement(jwt_dropdown.Z,{"data-testid":"jwt-dropdown",currentJwt:props.currentJwt?props.currentJwt:props.jwtList[0],jwtList:props.jwtList,onChange:value=>{props.onJwtChange(value),setFileTooBigError(!1)}}),showJwtDropdown&&!showAddNewToken&&react.createElement(component_library.xu,{width:design_system.Sw.Full,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,alignItems:design_system.g1.center,marginTop:2},react.createElement(component_library.xv,null,t("or")),react.createElement(component_library.zx,{"data-testid":"addNewToken-btn",type:"secondary",medium:"true",onClick:()=>{props.onJwtChange(""),setAddNewTokenClicked(!0)}},react.createElement(component_library.xv,null,t("addNewToken")))),(!showJwtDropdown||showAddNewToken)&&react.createElement(component_library.xu,{width:design_system.Sw.Full},react.createElement(component_library.xv,{className:"jwt-url-form__instruction",display:design_system.sS.Block,variant:design_system.rK.bodyMd,marginBottom:4},props.jwtInputText),fileTooBigError&&react.createElement("span",{className:"error"},react.createElement(component_library.xv,null,t("fileTooBig"))),react.createElement("textarea",{className:"jwt-url-form__input-jwt","data-testid":"jwt-input",id:"jwt-box",onChange:e=>{props.onJwtChange(e.target.value),setFileTooBigError(!1)},ref:inputRef.current,value:props.currentJwt,autoFocus:!0})))})(),react.createElement(component_library.xu,{width:design_system.Sw.Full},react.createElement(component_library.xv,{className:"jwt-url-form__instruction",display:design_system.sS.Block,variant:design_system.rK.bodyMd},props.urlInputText),react.createElement(component_library.xu,{marginTop:4},react.createElement("input",{className:"jwt-url-form__input",id:"api-url-box","data-testid":"jwt-api-url-input",onChange:e=>{props.onUrlChange(e.target.value)},value:props.apiUrl}))))};JwtUrlForm.propTypes={jwtList:prop_types_default().array,currentJwt:prop_types_default().string,onJwtChange:prop_types_default().func,jwtInputText:prop_types_default().string,apiUrl:prop_types_default().string,urlInputText:prop_types_default().string,onUrlChange:prop_types_default().func},JwtUrlForm.__docgenInfo={description:"",methods:[],displayName:"JwtUrlForm",props:{jwtList:{description:"",type:{name:"array"},required:!1},currentJwt:{description:"",type:{name:"string"},required:!1},onJwtChange:{description:"",type:{name:"func"},required:!1},jwtInputText:{description:"",type:{name:"string"},required:!1},apiUrl:{description:"",type:{name:"string"},required:!1},urlInputText:{description:"",type:{name:"string"},required:!1},onUrlChange:{description:"",type:{name:"func"},required:!1}}};const jwt_url_form=JwtUrlForm},"./ui/components/ui/dropdown/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>dropdown});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),component_library=__webpack_require__("./ui/components/component-library/index.js");const Dropdown=({className,disabled=!1,onChange,options,selectedOption="",style,title,"data-testid":dataTestId})=>{const _onChange=(0,react.useCallback)((event=>{event.preventDefault(),event.stopPropagation(),onChange(event.target.value)}),[onChange]);return react.createElement("div",{className:classnames_default()("dropdown",className)},react.createElement("select",{className:"dropdown__select","data-testid":dataTestId,disabled,title,onChange:_onChange,style,value:selectedOption},options.map((option=>react.createElement("option",{key:option.value,value:option.value},option.name||option.value)))),react.createElement(component_library.JO,{name:component_library.uH.ArrowDown,size:component_library.Jh.Sm,className:"dropdown__icon-caret-down"}))};Dropdown.propTypes={className:prop_types_default().string,disabled:prop_types_default().bool,title:prop_types_default().string,onChange:prop_types_default().func.isRequired,options:prop_types_default().arrayOf(prop_types_default().exact({name:prop_types_default().string,value:prop_types_default().string.isRequired})).isRequired,selectedOption:prop_types_default().string,style:prop_types_default().object,"data-testid":prop_types_default().string},Dropdown.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"Disable dropdown by setting to true",type:{name:"bool"},required:!1},selectedOption:{defaultValue:{value:"''",computed:!1},description:"Selected options of dropdown",type:{name:"string"},required:!1},className:{description:"Additional css className to add to root of Dropdown component",type:{name:"string"},required:!1},title:{description:"Title of the dropdown",type:{name:"string"},required:!1},onChange:{description:"On options change handler",type:{name:"func"},required:!0},options:{description:"Predefined options for component",type:{name:"arrayOf",value:{name:"exact",value:{name:{name:"string",required:!1},value:{name:"string",required:!0}}}},required:!0},style:{description:"Add inline style for the component",type:{name:"object"},required:!1},"data-testid":{description:"Unit testing test id",type:{name:"string"},required:!1}}};const dropdown=Dropdown},"./ui/components/ui/pulse-loader/pulse-loader.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>PulseLoader});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function PulseLoader(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"pulse-loader"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"pulse-loader__loading-dot-one"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"pulse-loader__loading-dot-two"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"pulse-loader__loading-dot-three"}))}PulseLoader.__docgenInfo={description:"",methods:[],displayName:"PulseLoader"}},"./ui/pages/institutional/connect-custody/account-list.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CustodyAccountList});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__),_components_ui_button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/ui/button/index.js"),_components_institutional_custody_labels__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/institutional/custody-labels/index.js"),_shared_constants_swaps__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/constants/swaps.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/constants/network.ts"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/utils/util.js"),_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/hooks/useI18nContext.js"),_components_ui_box__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/components/ui/box/index.js"),_components_component_library__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ui/components/component-library/index.js"),_hooks_useCopyToClipboard__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./ui/hooks/useCopyToClipboard.js");const getButtonLinkHref=account=>`${_shared_constants_swaps__WEBPACK_IMPORTED_MODULE_3__.k3[_shared_constants_network__WEBPACK_IMPORTED_MODULE_4__.vo.MAINNET]}address/${account.address}`;function CustodyAccountList({rawList,accounts,onAccountChange,selectedAccounts={},onCancel,onAddAccounts,custody}){const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_8__.C)(),[copied,handleCopy]=(0,_hooks_useCopyToClipboard__WEBPACK_IMPORTED_MODULE_11__.m)(),tooltipText=t(copied?"copiedExclamation":"copyToClipboard"),disabled=0===Object.keys(selectedAccounts).length;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{paddingTop:4,paddingRight:7,paddingBottom:7,paddingLeft:7},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,flexDirection:["column"],width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.D8.FULL,className:"custody-account-list","data-testid":"custody-account-list"},accounts.map(((account,idx)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,className:"custody-account-list__item",key:account.address},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,alignItems:["flex-start"],"data-testid":"custody-account-list-item-radio-button"},!rawList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"checkbox",name:"selectedAccount",id:`address-${idx}`,value:account.address,onChange:e=>onAccountChange({name:account.name,address:e.target.value,custodianDetails:account.custodianDetails,labels:account.labels,chainId:account.chainId}),checked:selectedAccounts&&selectedAccounts[account.address]})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,flexDirection:["column"],marginLeft:2,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.D8.FULL},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.__,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,marginTop:2,marginLeft:2,htmlFor:`address-${idx}`,className:"custody-account-list__item__title"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.xv,{as:"span",variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.inherit,size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.bodySm,paddingRight:1,className:"custody-account-list__item__name"},account.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.__,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.bodySm,marginTop:2,marginLeft:2,marginRight:3,htmlFor:`address-${idx}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.xv,{as:"span",variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.rK.bodyMd,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,className:"custody-account-list__item"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.ZP,{href:getButtonLinkHref(account),target:"_blank",rel:"noopener noreferrer"},(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_5__.$Q)(account.address),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_10__.Jh.EXPORT,size:_components_component_library__WEBPACK_IMPORTED_MODULE_10__.uH.SM,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.EY.primaryDefault,marginLeft:1})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_6__.Z,{position:"bottom",title:tooltipText,style:{backgroundColor:"transparent"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:"custody-account-list__item__clipboard",onClick:()=>handleCopy(account.address)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_10__.JO,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_10__.Jh.COPY,size:_components_component_library__WEBPACK_IMPORTED_MODULE_10__.uH.XS,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.EY.iconMuted}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.E0.spaceBetween},account.labels&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_institutional_custody_labels__WEBPACK_IMPORTED_MODULE_2__.Z,{labels:account.labels,index:idx.toString(),hideNetwork:!0})))))))),!rawList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_box__WEBPACK_IMPORTED_MODULE_9__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.bA.FLEX,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.D8.FULL,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_7__.E0.spaceBetween,paddingTop:5,paddingRight:7,paddingBottom:7,paddingLeft:7,className:"custody-account-list__buttons"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_button__WEBPACK_IMPORTED_MODULE_1__.Z,{"data-testid":"custody-account-cancel-button",type:"default",large:!0,className:"custody-account-list__button",onClick:onCancel},t("cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_button__WEBPACK_IMPORTED_MODULE_1__.Z,{"data-testid":"custody-account-connect-button",type:"primary",large:!0,className:"custody-account-list__button",disabled,onClick:()=>onAddAccounts(custody)},t("connect"))))}CustodyAccountList.propTypes={custody:prop_types__WEBPACK_IMPORTED_MODULE_12___default().string,accounts:prop_types__WEBPACK_IMPORTED_MODULE_12___default().array.isRequired,onAccountChange:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func,selectedAccounts:prop_types__WEBPACK_IMPORTED_MODULE_12___default().object,onAddAccounts:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func,onCancel:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func,rawList:prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool},CustodyAccountList.__docgenInfo={description:"",methods:[],displayName:"CustodyAccountList",props:{selectedAccounts:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},custody:{description:"",type:{name:"string"},required:!1},accounts:{description:"",type:{name:"array"},required:!0},onAccountChange:{description:"",type:{name:"func"},required:!1},onAddAccounts:{description:"",type:{name:"func"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},rawList:{description:"",type:{name:"bool"},required:!1}}}},"./ui/selectors/institutional/selectors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>getCustodianIconForAddress,GZ:()=>getIsNoteToTraderSupported,Hg:()=>getMMIConfiguration,L8:()=>getTransactionStatusMap,LL:()=>getMmiPortfolioEnabled,kl:()=>getMmiPortfolioUrl,q9:()=>getCustodyAccountDetails,rE:()=>getMMIAddressFromModalOrAddress,vG:()=>getInteractiveReplacementToken,xL:()=>getIsCustodianSupportedChain});var ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ethereumjs-util/dist.browser/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/selectors/selectors.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/conversion.utils.ts");function getTransactionStatusMap(state){return state.metamask.custodyStatusMaps}function getCustodyAccountDetails(state){return state.metamask.custodyAccountDetails}function getMmiPortfolioEnabled(state){var _state$metamask$mmiCo,_state$metamask$mmiCo2;return null===(_state$metamask$mmiCo=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo||null===(_state$metamask$mmiCo2=_state$metamask$mmiCo.portfolio)||void 0===_state$metamask$mmiCo2?void 0:_state$metamask$mmiCo2.enabled}function getMmiPortfolioUrl(state){var _state$metamask$mmiCo3,_state$metamask$mmiCo4;return null===(_state$metamask$mmiCo3=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo3||null===(_state$metamask$mmiCo4=_state$metamask$mmiCo3.portfolio)||void 0===_state$metamask$mmiCo4?void 0:_state$metamask$mmiCo4.url}function getCustodianIconForAddress(state,address){var _state$metamask$custo;let custodianIcon;const checksummedAddress=address&&(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(address);if(checksummedAddress&&null!==(_state$metamask$custo=state.metamask.custodyAccountDetails)&&void 0!==_state$metamask$custo&&_state$metamask$custo[checksummedAddress]){var _state$metamask$mmiCo6,_state$metamask$mmiCo7,_state$metamask$mmiCo8;const{custodianName}=state.metamask.custodyAccountDetails[checksummedAddress];custodianIcon=null===(_state$metamask$mmiCo6=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo6||null===(_state$metamask$mmiCo7=_state$metamask$mmiCo6.custodians)||void 0===_state$metamask$mmiCo7||null===(_state$metamask$mmiCo8=_state$metamask$mmiCo7.find((custodian=>custodian.name===custodianName)))||void 0===_state$metamask$mmiCo8?void 0:_state$metamask$mmiCo8.iconUrl}return custodianIcon}function getIsCustodianSupportedChain(state){const selectedIdentity=(0,_selectors__WEBPACK_IMPORTED_MODULE_1__.Sv)(state),accountType=(0,_selectors__WEBPACK_IMPORTED_MODULE_1__.lx)(state),providerConfig=(0,_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__.Vu)(state),supportedChains="custody"===accountType?function getCustodyAccountSupportedChains(state,address){return state.metamask.custodianSupportedChains?state.metamask.custodianSupportedChains[(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(address)]:[]}(state,selectedIdentity.address):null;return null==supportedChains||!supportedChains.supportedChains||supportedChains.supportedChains.includes((0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__.Z8)(providerConfig.chainId))}function getMMIAddressFromModalOrAddress(state){return state.appState.modal.modalState.props.address||state.metamask.selectedAddress}function getMMIConfiguration(state){return state.metamask.mmiConfiguration||[]}function getInteractiveReplacementToken(state){return state.metamask.interactiveReplacementToken||{}}function getIsNoteToTraderSupported(state,fromChecksumHexAddress){var _state$metamask$custo2;let isNoteToTraderSupported=!1;if(null!==(_state$metamask$custo2=state.metamask.custodyAccountDetails)&&void 0!==_state$metamask$custo2&&_state$metamask$custo2[fromChecksumHexAddress]){var _state$metamask$mmiCo9,_state$metamask$mmiCo10,_state$metamask$mmiCo11;const{custodianName}=state.metamask.custodyAccountDetails[fromChecksumHexAddress];isNoteToTraderSupported=null===(_state$metamask$mmiCo9=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo9||null===(_state$metamask$mmiCo10=_state$metamask$mmiCo9.custodians)||void 0===_state$metamask$mmiCo10||null===(_state$metamask$mmiCo11=_state$metamask$mmiCo10.find((custodian=>custodian.name===custodianName)))||void 0===_state$metamask$mmiCo11?void 0:_state$metamask$mmiCo11.isNoteToTraderSupported}return isNoteToTraderSupported}},"./ui/store/institutional/institution-background.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I6:()=>mmiActionsFactory,Lx:()=>setTypedMessageInProgress,Y0:()=>showInteractiveReplacementTokenBanner});var loglevel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/loglevel/lib/loglevel.js"),loglevel__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__),_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/store/actions.ts"),_action_queue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/store/action-queue/index.ts"),_shared_modules_error__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/error.ts");function showInteractiveReplacementTokenBanner({url,oldRefreshToken}){return async dispatch=>{try{await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)("showInteractiveReplacementTokenBanner",[url,oldRefreshToken])}catch(err){if(err)throw dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(err.message)),new Error(err.message)}}}function setTypedMessageInProgress(msgId){return async dispatch=>{dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.Nbs)());try{await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)("setTypedMessageInProgress",[msgId])}catch(error){loglevel__WEBPACK_IMPORTED_MODULE_0___default().error(error),dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(error.message))}finally{await(0,_actions__WEBPACK_IMPORTED_MODULE_1__.Skm)(dispatch),dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.awJ)())}}}function mmiActionsFactory(){function createAsyncAction(name,params,useForceUpdateMetamaskState,loadingText){return loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(`background.${name}`),async dispatch=>{let result;loadingText&&dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.Nbs)(loadingText));try{result=await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)(name,[...params])}catch(error){throw dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(error)),(0,_shared_modules_error__WEBPACK_IMPORTED_MODULE_3__.M)(error)?new Error(error.message):error}return loadingText&&dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.awJ)()),useForceUpdateMetamaskState&&await(0,_actions__WEBPACK_IMPORTED_MODULE_1__.Skm)(dispatch),result}}function createAction(name,payload){return new Promise(((resolve,reject)=>{(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.BW)(name,[payload],(error=>{error?reject(error):resolve()}))}))}return{connectCustodyAddresses:(custodianType,custodianName,newAccounts)=>createAsyncAction("connectCustodyAddresses",[custodianType,custodianName,newAccounts],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Looking for your custodian account..."),getCustodianAccounts:(token,apiUrl,custody,getNonImportedAccounts)=>createAsyncAction("getCustodianAccounts",[token,apiUrl,custody,getNonImportedAccounts],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Getting custodian accounts..."),getCustodianAccountsByAddress:(jwt,apiUrl,address,custody)=>createAsyncAction("getCustodianAccountsByAddress",[jwt,apiUrl,address,custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Getting custodian accounts..."),getCustodianTransactionDeepLink:(address,txId)=>createAsyncAction("getCustodianTransactionDeepLink",[address,txId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianConfirmDeepLink:txId=>createAsyncAction("getCustodianConfirmDeepLink",[txId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianSignMessageDeepLink:(from,custodyTxId)=>createAsyncAction("getCustodianSignMessageDeepLink",[from,custodyTxId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianToken:custody=>createAsyncAction("getCustodianToken",[custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianJWTList:custody=>createAsyncAction("getCustodianJWTList",[custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),setWaitForConfirmDeepLinkDialog:waitForConfirmDeepLinkDialog=>createAction("setWaitForConfirmDeepLinkDialog",waitForConfirmDeepLinkDialog),setComplianceAuthData:(clientId,projectId)=>createAsyncAction("setComplianceAuthData",[{clientId,projectId}]),deleteComplianceAuthData:()=>createAsyncAction("deleteComplianceAuthData",[]),generateComplianceReport:address=>createAction("generateComplianceReport",address),getComplianceHistoricalReportsByAddress:(address,projectId)=>createAsyncAction("getComplianceHistoricalReportsByAddress",[address,projectId]),syncReportsInProgress:(address,historicalReports)=>createAction("syncReportsInProgress",{address,historicalReports}),removeConnectInstitutionalFeature:(origin,projectId)=>createAction("removeConnectInstitutionalFeature",{origin,projectId}),removeAddTokenConnectRequest:({origin,apiUrl,token})=>createAction("removeAddTokenConnectRequest",{origin,apiUrl,token}),setCustodianConnectRequest:({token,apiUrl,custodianType,custodianName})=>createAsyncAction("setCustodianConnectRequest",[{token,apiUrl,custodianType,custodianName}]),getCustodianConnectRequest:()=>createAsyncAction("getCustodianConnectRequest",[]),getMmiConfiguration:()=>createAsyncAction("getMmiConfiguration",[]),getAllCustodianAccountsWithToken:(custodyType,token)=>createAsyncAction("getAllCustodianAccountsWithToken",[custodyType,token]),setCustodianNewRefreshToken:(address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl)=>createAsyncAction("setCustodianNewRefreshToken",[address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl])}}}}]);