/*! For license information please see components-app-signature-request-signature-request-stories.2856c640.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[3757],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{NF:()=>withMDXComponents,Zo:()=>MDXProvider,ah:()=>useMDXComponents,pC:()=>MDXContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return function boundMDXComponent(props){const allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components}),[contextComponents,components])}const emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}},"./node_modules/@storybook/addon-docs/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$4:()=>_storybook_blocks__WEBPACK_IMPORTED_MODULE_1__.$4,Xz:()=>_storybook_blocks__WEBPACK_IMPORTED_MODULE_1__.Xz,h_:()=>_storybook_blocks__WEBPACK_IMPORTED_MODULE_1__.h_,oG:()=>_storybook_blocks__WEBPACK_IMPORTED_MODULE_1__.oG});__webpack_require__("./node_modules/@storybook/addon-docs/dist/chunk-PCJTTTQV.mjs");var _storybook_blocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs")},"./ui/components/app/signature-request/signature-request.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AccountMismatchStory:()=>AccountMismatchStory,DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>signature_request_stories});var react=__webpack_require__("./node_modules/react/index.js"),test_data=__webpack_require__("./.storybook/test-data.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),lib=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),extension_dist=__webpack_require__("./node_modules/@metamask-institutional/extension/dist/index.js"),institution_background=__webpack_require__("./ui/store/institutional/institution-background.ts"),lib_util=__webpack_require__("./app/scripts/lib/util.ts"),institution_actions=__webpack_require__("./ui/store/institutional/institution-actions.ts"),app=__webpack_require__("./shared/constants/app.ts"),actions=__webpack_require__("./ui/store/actions.ts"),history_history=__webpack_require__("./ui/ducks/history/history.js"),confirm_transaction_duck=__webpack_require__("./ui/ducks/confirm-transaction/confirm-transaction.duck.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),eth_rpc_errors_dist=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),ledger_instruction_field=__webpack_require__("./ui/components/app/ledger-instruction-field/index.js"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),site_origin=__webpack_require__("./ui/components/ui/site-origin/index.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),contract_details_modal=__webpack_require__("./ui/components/app/modals/contract-details-modal/contract-details-modal.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),network_account_balance_header=__webpack_require__("./ui/components/app/network-account-balance-header/index.js"),Numeric=__webpack_require__("./shared/modules/Numeric.ts"),security_provider_utils=__webpack_require__("./shared/modules/security-provider.utils.ts"),common=__webpack_require__("./shared/constants/common.ts"),confirm_page_container_navigation=__webpack_require__("./ui/components/app/confirm-page-container/confirm-page-container-navigation/index.js"),security_provider_banner_message=__webpack_require__("./ui/components/app/security-provider-banner-message/security-provider-banner-message.js"),confirm_tx_util=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),component_library=__webpack_require__("./ui/components/component-library/index.js"),page_container=__webpack_require__("./ui/components/ui/page-container/index.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class SignatureRequestFooter extends react.PureComponent{render(){const{cancelAction,signAction,disabled=!1}=this.props;return react.createElement(page_container.g$,{cancelText:this.context.t("reject"),submitText:this.context.t("sign"),onCancel:cancelAction,onSubmit:signAction,disabled})}}_defineProperty(SignatureRequestFooter,"propTypes",{cancelAction:prop_types_default().func.isRequired,signAction:prop_types_default().func.isRequired,disabled:prop_types_default().bool}),_defineProperty(SignatureRequestFooter,"contextTypes",{t:prop_types_default().func}),SignatureRequestFooter.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestFooter",props:{cancelAction:{description:"",type:{name:"func"},required:!0},signAction:{description:"",type:{name:"func"},required:!0},disabled:{description:"",type:{name:"bool"},required:!1}},context:{t:{type:{name:"func"},required:!1}}};var signature_request_message=__webpack_require__("./ui/components/app/signature-request/signature-request-message/signature-request-message.js");function signature_request_component_defineProperty(obj,key,value){return(key=function signature_request_component_toPropertyKey(arg){var key=function signature_request_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class SignatureRequest extends react.PureComponent{constructor(...args){super(...args),signature_request_component_defineProperty(this,"state",{hasScrolledMessage:!1,showContractDetails:!1}),signature_request_component_defineProperty(this,"memoizedParseMessage",(0,lodash.memoize)((data=>{const{message,domain={},primaryType,types}=JSON.parse(data);return{sanitizedMessage:(0,util.Z$)(message,primaryType,types),domain,primaryType}}))),signature_request_component_defineProperty(this,"handleCancelAll",(()=>{const{clearConfirmTransaction,history,mostRecentOverviewPage,showRejectTransactionsConfirmationModal,unapprovedMessagesCount,cancelAllApprovals}=this.props;showRejectTransactionsConfirmationModal({unapprovedTxCount:unapprovedMessagesCount,onSubmit:async()=>{await cancelAllApprovals(),clearConfirmTransaction(),history.push(mostRecentOverviewPage)}})}))}componentDidMount(){this.props.txData.custodyId&&this.props.showCustodianDeepLink({custodyId:this.props.txData.custodyId,fromAddress:this.props.fromAccount.address,closeNotification:this.props.isNotification,onDeepLinkFetched:()=>{},onDeepLinkShown:()=>{this.context.trackEvent({category:"MMI",event:"Show deeplink for signature"})}})}setMessageRootRef(ref){this.messageRootRef=ref}formatWallet(wallet){return`${wallet.slice(0,8)}...${wallet.slice(wallet.length-8,wallet.length)}`}render(){var _this$messageRootRef,_this$messageRootRef2,_this$props$txData;const{providerConfig,txData:{msgParams:{data,origin,version},type,id},fromAccount:{address,balance,name},isLedgerWallet,hardwareWalletRequiresConnection,chainId,rpcPrefs,txData,subjectMetadata,nativeCurrency,currentCurrency,conversionRate,unapprovedMessagesCount,resolvePendingApproval,rejectPendingApproval,completedTx}=this.props,{t,trackEvent}=this.context,{sanitizedMessage,domain:{verifyingContract},primaryType}=this.memoizedParseMessage(data),rejectNText=t("rejectRequestsN",[unapprovedMessagesCount]),networkName=(0,util.Wf)(providerConfig.type),currentNetwork=""===networkName?providerConfig.nickname||t("unknownNetwork"):t(networkName),balanceInBaseAsset=conversionRate?(0,confirm_tx_util.xG)((0,conversion_utils.nu)({value:balance,fromCurrency:nativeCurrency,toCurrency:currentCurrency,conversionRate,numberOfDecimals:6,toDenomination:common.E.ETH}),currentCurrency):new Numeric.D(balance,16,common.E.WEI).toDenomination(common.E.ETH).round(6).toBase(10).toString(),messageIsScrollable=(null===(_this$messageRootRef=this.messageRootRef)||void 0===_this$messageRootRef?void 0:_this$messageRootRef.scrollHeight)>(null===(_this$messageRootRef2=this.messageRootRef)||void 0===_this$messageRootRef2?void 0:_this$messageRootRef2.clientHeight),targetSubjectMetadata=txData.msgParams.origin?null==subjectMetadata?void 0:subjectMetadata[txData.msgParams.origin]:null;return react.createElement("div",{className:"signature-request"},react.createElement(confirm_page_container_navigation.Z,null),react.createElement("div",{className:"request-signature__account","data-testid":"request-signature-account"},react.createElement(network_account_balance_header.Z,{networkName:currentNetwork,accountName:name,accountBalance:balanceInBaseAsset,tokenName:conversionRate?null==currentCurrency?void 0:currentCurrency.toUpperCase():nativeCurrency,accountAddress:address})),react.createElement("div",{className:"signature-request-content"},(0,security_provider_utils.D)(null==txData?void 0:txData.securityProviderResponse)&&react.createElement(security_provider_banner_message.Z,{securityProviderResponse:txData.securityProviderResponse}),this.props.selectedAccount.address===address?null:react.createElement(component_library.xu,{className:"request-signature__mismatch-info",display:design_system.sS.Flex,width:design_system.Sw.Full,padding:4,marginBottom:4,backgroundColor:design_system.lP.primaryMuted},react.createElement(component_library.JO,{name:component_library.uH.Info,color:design_system.EY.infoDefault,marginRight:2}),react.createElement(component_library.xv,{variant:design_system.rK.bodyXs,color:design_system.d9.textDefault},this.context.t("mismatchAccount",[(0,util.$Q)(this.props.selectedAccount.address),(0,util.$Q)(address)]))),react.createElement("div",{className:"signature-request__origin"},react.createElement(site_origin.Z,{siteOrigin:origin,iconSrc:null==targetSubjectMetadata?void 0:targetSubjectMetadata.iconUrl,iconName:(0,util.Cs)(origin)||origin,chip:!0})),react.createElement(component_library.xv,{className:"signature-request__content__title",variant:design_system.rK.headingMd,as:"h3",marginTop:4},this.context.t("sigRequest")),react.createElement(component_library.xv,{className:"request-signature__content__subtitle",variant:design_system.rK.bodySm,as:"h6",color:design_system.d9.textAlternative,align:design_system.PH.Center,margin:12,marginTop:3},this.context.t("signatureRequestGuidance")),verifyingContract?react.createElement("div",null,react.createElement(ui_button.Z,{type:"link",onClick:()=>this.setState({showContractDetails:!0}),className:"signature-request-content__verify-contract-details","data-testid":"verify-contract-details"},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",color:design_system.d9.primaryDefault},this.context.t("verifyContractDetails")))):null),isLedgerWallet?react.createElement("div",{className:"confirm-approve-content__ledger-instruction-wrapper"},react.createElement(ledger_instruction_field.Z,{showDataInstruction:!0})):null,react.createElement(signature_request_message.Z,{data:sanitizedMessage,onMessageScrolled:()=>this.setState({hasScrolledMessage:!0}),setMessageRootRef:this.setMessageRootRef.bind(this),messageRootRef:this.messageRootRef,messageIsScrollable,primaryType}),react.createElement(SignatureRequestFooter,{cancelAction:async()=>{await rejectPendingApproval(id,(0,eth_rpc_errors_dist.serializeError)(eth_rpc_errors_dist.ethErrors.provider.userRejectedRequest())),trackEvent({category:metametrics.ci.Transactions,event:"Cancel",properties:{action:"Sign Request",legacy_event:!0,type,version}})},signAction:async()=>{await resolvePendingApproval(id),completedTx(id),this.props.mmiOnSignCallback&&await this.props.mmiOnSignCallback(txData),trackEvent({category:metametrics.ci.Transactions,event:"Confirm",properties:{action:"Sign Request",legacy_event:!0,type,version}})},disabled:Boolean(null===(_this$props$txData=this.props.txData)||void 0===_this$props$txData?void 0:_this$props$txData.custodyId)||hardwareWalletRequiresConnection||messageIsScrollable&&!this.state.hasScrolledMessage}),this.state.showContractDetails&&react.createElement(contract_details_modal.Z,{toAddress:verifyingContract,chainId,rpcPrefs,onClose:()=>this.setState({showContractDetails:!1}),isContractRequestingSignature:!0}),unapprovedMessagesCount>1?react.createElement(ui_button.Z,{type:"link",className:"signature-request__reject-all-button","data-testid":"signature-request-reject-all",onClick:e=>{e.preventDefault(),this.handleCancelAll()}},rejectNText):null)}}signature_request_component_defineProperty(SignatureRequest,"propTypes",{txData:prop_types_default().object.isRequired,fromAccount:prop_types_default().shape({address:prop_types_default().string.isRequired,balance:prop_types_default().string,name:prop_types_default().string}).isRequired,isLedgerWallet:prop_types_default().bool,hardwareWalletRequiresConnection:prop_types_default().bool.isRequired,chainId:prop_types_default().string,rpcPrefs:prop_types_default().object,nativeCurrency:prop_types_default().string,currentCurrency:prop_types_default().string.isRequired,conversionRate:prop_types_default().number,providerConfig:prop_types_default().object,subjectMetadata:prop_types_default().object,unapprovedMessagesCount:prop_types_default().number,clearConfirmTransaction:prop_types_default().func.isRequired,history:prop_types_default().object,mostRecentOverviewPage:prop_types_default().string,showRejectTransactionsConfirmationModal:prop_types_default().func.isRequired,cancelAllApprovals:prop_types_default().func.isRequired,resolvePendingApproval:prop_types_default().func.isRequired,rejectPendingApproval:prop_types_default().func.isRequired,completedTx:prop_types_default().func.isRequired,showCustodianDeepLink:prop_types_default().func,isNotification:prop_types_default().bool,mmiOnSignCallback:prop_types_default().func,selectedAccount:prop_types_default().object}),signature_request_component_defineProperty(SignatureRequest,"contextTypes",{t:prop_types_default().func,trackEvent:prop_types_default().func}),SignatureRequest.__docgenInfo={description:"",methods:[{name:"setMessageRootRef",docblock:null,modifiers:[],params:[{name:"ref",type:null}],returns:null},{name:"formatWallet",docblock:null,modifiers:[],params:[{name:"wallet",type:null}],returns:null},{name:"handleCancelAll",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SignatureRequest",props:{txData:{description:"The display content of transaction data",type:{name:"object"},required:!0},fromAccount:{description:"The display content of sender account",type:{name:"shape",value:{address:{name:"string",required:!0},balance:{name:"string",required:!1},name:{name:"string",required:!1}}},required:!0},isLedgerWallet:{description:"Check if the wallet is ledget wallet or not",type:{name:"bool"},required:!1},hardwareWalletRequiresConnection:{description:"Whether the hardware wallet requires a connection disables the sign button if true.",type:{name:"bool"},required:!0},chainId:{description:"Current network chainId",type:{name:"string"},required:!1},rpcPrefs:{description:"RPC prefs of the current network",type:{name:"object"},required:!1},nativeCurrency:{description:"",type:{name:"string"},required:!1},currentCurrency:{description:"",type:{name:"string"},required:!0},conversionRate:{description:"",type:{name:"number"},required:!1},providerConfig:{description:"",type:{name:"object"},required:!1},subjectMetadata:{description:"",type:{name:"object"},required:!1},unapprovedMessagesCount:{description:"",type:{name:"number"},required:!1},clearConfirmTransaction:{description:"",type:{name:"func"},required:!0},history:{description:"",type:{name:"object"},required:!1},mostRecentOverviewPage:{description:"",type:{name:"string"},required:!1},showRejectTransactionsConfirmationModal:{description:"",type:{name:"func"},required:!0},cancelAllApprovals:{description:"",type:{name:"func"},required:!0},resolvePendingApproval:{description:"",type:{name:"func"},required:!0},rejectPendingApproval:{description:"",type:{name:"func"},required:!0},completedTx:{description:"",type:{name:"func"},required:!0},showCustodianDeepLink:{description:"",type:{name:"func"},required:!1},isNotification:{description:"",type:{name:"bool"},required:!1},mmiOnSignCallback:{description:"",type:{name:"func"},required:!1},selectedAccount:{description:"",type:{name:"object"},required:!1}},context:{t:{type:{name:"func"},required:!1},trackEvent:{type:{name:"func"},required:!1}}};let mapDispatchToProps=null;mapDispatchToProps=function mmiMapDispatchToProps(dispatch){const mmiActions=(0,institution_background.I6)();return{clearConfirmTransaction:()=>dispatch((0,confirm_transaction_duck.vi)()),setMsgInProgress:msgId=>dispatch((0,institution_background.Lx)(msgId)),showCustodianDeepLink:({custodyId,fromAddress,closeNotification,onDeepLinkFetched,onDeepLinkShown})=>(0,extension_dist.kC)({dispatch,mmiActions,txId:void 0,fromAddress,custodyId,isSignature:!0,closeNotification,onDeepLinkFetched,onDeepLinkShown}),showTransactionsFailedModal:({errorMessage,closeNotification,operationFailed})=>dispatch((0,actions.K4b)({name:"TRANSACTION_FAILED",errorMessage,closeNotification,operationFailed})),setWaitForConfirmDeepLinkDialog:wait=>dispatch(mmiActions.setWaitForConfirmDeepLinkDialog(wait)),goHome:()=>dispatch((0,actions.YpM)())}},mapDispatchToProps=function(dispatch){return{resolvePendingApproval:id=>dispatch((0,actions.a__)(id)),completedTx:id=>dispatch((0,actions.Ab9)(id)),rejectPendingApproval:(id,error)=>dispatch((0,actions.YCK)(id,error)),clearConfirmTransaction:()=>dispatch((0,confirm_transaction_duck.vi)()),showRejectTransactionsConfirmationModal:({onSubmit,unapprovedTxCount:unapprovedMessagesCount})=>dispatch((0,actions.K4b)({name:"REJECT_TRANSACTIONS",onSubmit,unapprovedTxCount:unapprovedMessagesCount,isRequestType:!0})),cancelAllApprovals:unconfirmedMessagesList=>{dispatch((0,actions.tEJ)(unconfirmedMessagesList))}}};const signature_request_container=(0,es.$j)((function mapStateToProps(state,ownProps){const{txData}=ownProps,envType=(0,lib_util.kD)(),{msgParams:{from}}=txData,providerConfig=(0,metamask.Vu)(state),hardwareWalletRequiresConnection=(0,selectors.DnU)(state,from),isLedgerWallet=(0,metamask.Dc)(state,from),chainId=(0,selectors.BVZ)(state),rpcPrefs=(0,selectors.Kzx)(state),unconfirmedMessagesList=(0,selectors.Mkt)(state),unapprovedMessagesCount=(0,selectors.eWO)(state),{useNativeCurrencyAsPrimaryCurrency}=(0,selectors.Izy)(state);return{providerConfig,isLedgerWallet,hardwareWalletRequiresConnection,chainId,rpcPrefs,unconfirmedMessagesList,unapprovedMessagesCount,mostRecentOverviewPage:(0,history_history.H7)(state),nativeCurrency:(0,metamask.JK)(state),currentCurrency:(0,selectors.TV3)(state),conversionRate:useNativeCurrencyAsPrimaryCurrency?null:(0,selectors.tOe)(state),subjectMetadata:(0,selectors.YRT)(state),allAccounts:(0,selectors.QT)(state),accountType:(0,selectors.lxc)(state),isNotification:envType===app.vH,selectedAccount:(0,selectors.uWD)(state),unapprovedTypedMessages:(0,selectors.scV)(state)}}),mapDispatchToProps,(function mergeProps(stateProps,dispatchProps,ownProps){const{allAccounts,isLedgerWallet,hardwareWalletRequiresConnection,chainId,rpcPrefs,nativeCurrency,currentCurrency,conversionRate,providerConfig,subjectMetadata,unconfirmedMessagesList,unapprovedMessagesCount,mostRecentOverviewPage,accountType,isNotification,unapprovedTypedMessages}=stateProps,{txData}=ownProps,{cancelAll:dispatchCancelAll,cancelAllApprovals:dispatchCancelAllApprovals}=dispatchProps,{msgParams:{from}}=txData,fromAccount=(0,util.t)(allAccounts,from);return{...ownProps,...dispatchProps,fromAccount,txData,isLedgerWallet,hardwareWalletRequiresConnection,chainId,rpcPrefs,nativeCurrency,currentCurrency,conversionRate,providerConfig,subjectMetadata,unapprovedMessagesCount,mostRecentOverviewPage,cancelAll:()=>dispatchCancelAll((0,util.gs)(unconfirmedMessagesList)),cancelAllApprovals:()=>dispatchCancelAllApprovals((0,util.gs)(unconfirmedMessagesList)),mmiOnSignCallback:async _msgData=>{if("custody"===accountType)try{let msgData=_msgData,id=_msgData.custodyId;_msgData.custodyId||(msgData=(0,institution_actions.UB)(_msgData,unapprovedTypedMessages),id=msgData.custodyId),dispatchProps.showCustodianDeepLink({custodyId:id,fromAddress:fromAccount.address,closeNotification:isNotification,onDeepLinkFetched:()=>{},onDeepLinkShown:()=>{}}),await dispatchProps.setMsgInProgress(msgData.metamaskId),await dispatchProps.setWaitForConfirmDeepLinkDialog(!0),await(0,actions.YpM)()}catch(err){await dispatchProps.setWaitForConfirmDeepLinkDialog(!0),await dispatchProps.showTransactionsFailedModal({errorMessage:err.message,closeNotification:!0,operationFailed:!0})}}}}))(SignatureRequest);function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",h2:"h2"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{id:"signature-request",children:"Signature Request"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"dApp requesting a signature from the user."}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{id:"components-app-signaturerequest--default-story"})}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"props",children:"Props"}),"\n",(0,jsx_runtime.jsx)(dist.$4,{of:signature_request_container})]})}const README=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)};var _DefaultStory$paramet,_DefaultStory$paramet2,_DefaultStory$paramet3,_AccountMismatchStory,_AccountMismatchStory2,_AccountMismatchStory3;const[MOCK_PRIMARY_IDENTITY,MOCK_SECONDARY_IDENTITY]=Object.values(test_data.default.metamask.identities),signature_request_stories={title:"Components/App/SignatureRequest",component:SignatureRequest,parameters:{docs:{page:README}},argTypes:{txData:{control:"object"},fromAccount:{table:{address:{control:"text"},balance:{control:"text"},name:{control:"text"}}},hardwareWalletRequiresConnection:{control:"boolean"},isLedgerWallet:{control:"boolean"},clearConfirmTransaction:{action:"Clean Confirm"},cancel:{action:"Cancel"},sign:{action:"Sign"},showRejectTransactionsConfirmationModal:{action:"showRejectTransactionsConfirmationModal"},cancelAll:{action:"cancelAll"}}},DefaultStory=args=>react.createElement(SignatureRequest,args);DefaultStory.storyName="Default",DefaultStory.args={txData:{msgParams:{data:JSON.stringify({domain:{name:"happydapp.website"},message:{string:"haay wuurl",number:42},primaryType:"Mail",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]}}),origin:"https://happydapp.website/"}},fromAccount:MOCK_PRIMARY_IDENTITY,providerConfig:{name:"Goerli ETH"},selectedAccount:MOCK_PRIMARY_IDENTITY,hardwareWalletRequiresConnection:!1,currentCurrency:"usd"};const AccountMismatchStory=args=>react.createElement(SignatureRequest,args);AccountMismatchStory.storyName="AccountMismatch",AccountMismatchStory.args={...DefaultStory.args,selectedAccount:MOCK_SECONDARY_IDENTITY},DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => {\n  return <SignatureRequest {...args} />;\n}",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet3=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet3?void 0:_DefaultStory$paramet3.source}}},AccountMismatchStory.parameters={...AccountMismatchStory.parameters,docs:{...null===(_AccountMismatchStory=AccountMismatchStory.parameters)||void 0===_AccountMismatchStory?void 0:_AccountMismatchStory.docs,source:{originalSource:"args => {\n  return <SignatureRequest {...args} />;\n}",...null===(_AccountMismatchStory2=AccountMismatchStory.parameters)||void 0===_AccountMismatchStory2||null===(_AccountMismatchStory3=_AccountMismatchStory2.docs)||void 0===_AccountMismatchStory3?void 0:_AccountMismatchStory3.source}}};const __namedExportsOrder=["DefaultStory","AccountMismatchStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"},AccountMismatchStory.__docgenInfo={description:"",methods:[],displayName:"AccountMismatchStory"}},"./ui/components/app/confirm-page-container/confirm-page-container-navigation/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>confirm_page_container_navigation_component});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),selectors=__webpack_require__("./ui/selectors/index.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),confirm_transaction_duck=__webpack_require__("./ui/ducks/confirm-transaction/confirm-transaction.duck.js");const ConfirmPageContainerNavigation=()=>{const t=(0,react.useContext)(i18n.OO),dispatch=(0,es.I0)(),history=(0,react_router.k6)(),{id}=(0,react_router.UO)(),unapprovedDecryptMsgs=(0,es.v9)(selectors.TPv),unapprovedEncryptionPublicKeyMsgs=(0,es.v9)(selectors.qBU),unconfirmedTransactions=(0,es.v9)(selectors.MsA),enumDecryptAndEncryptMsgs=[...Object.keys(unapprovedDecryptMsgs||{}),...Object.keys(unapprovedEncryptionPublicKeyMsgs||{})],enumUnapprovedTxs=Object.keys(unconfirmedTransactions).filter((key=>!1===enumDecryptAndEncryptMsgs.includes(key))),currentPosition=enumUnapprovedTxs.indexOf(id),totalTx=enumUnapprovedTxs.length,positionOfCurrentTx=currentPosition+1,nextTxId=enumUnapprovedTxs[currentPosition+1],prevTxId=enumUnapprovedTxs[currentPosition-1],showNavigation=enumUnapprovedTxs.length>1,firstTx=enumUnapprovedTxs[0],lastTx=enumUnapprovedTxs[enumUnapprovedTxs.length-1],onNextTx=txId=>{var _unconfirmedTransacti;txId&&(dispatch((0,confirm_transaction_duck.vi)()),history.push(null!==(_unconfirmedTransacti=unconfirmedTransactions[txId])&&void 0!==_unconfirmedTransacti&&_unconfirmedTransacti.msgParams?`${routes.zq}/${txId}${routes.tD}`:`${routes.zq}/${txId}`))};return react.createElement("div",{className:"confirm-page-container-navigation",style:{display:showNavigation?"flex":"none"}},react.createElement("div",{className:"confirm-page-container-navigation__container","data-testid":"navigation-container",style:{visibility:prevTxId?"initial":"hidden"}},react.createElement("button",{className:"confirm-page-container-navigation__arrow","data-testid":"first-page",onClick:()=>onNextTx(firstTx)},react.createElement("i",{className:"fa fa-angle-double-left fa-2x"})),react.createElement("button",{className:"confirm-page-container-navigation__arrow","data-testid":"previous-page",onClick:()=>onNextTx(prevTxId)},react.createElement("i",{className:"fa fa-angle-left fa-2x"}))),react.createElement("div",{className:"confirm-page-container-navigation__textcontainer"},react.createElement("div",{className:"confirm-page-container-navigation__navtext"},positionOfCurrentTx," ",t("ofTextNofM")," ",totalTx),react.createElement("div",{className:"confirm-page-container-navigation__longtext"},t("requestsAwaitingAcknowledgement"))),react.createElement("div",{className:"confirm-page-container-navigation__container",style:{visibility:nextTxId?"initial":"hidden"}},react.createElement("button",{className:"confirm-page-container-navigation__arrow","data-testid":"next-page",onClick:()=>onNextTx(nextTxId)},react.createElement("i",{className:"fa fa-angle-right fa-2x"})),react.createElement("button",{className:"confirm-page-container-navigation__arrow","data-testid":"last-page",onClick:()=>onNextTx(lastTx)},react.createElement("i",{className:"fa fa-angle-double-right fa-2x"}))))};ConfirmPageContainerNavigation.__docgenInfo={description:"",methods:[],displayName:"ConfirmPageContainerNavigation"};const confirm_page_container_navigation_component=ConfirmPageContainerNavigation},"./ui/components/app/network-account-balance-header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>_network_account_balance_header__WEBPACK_IMPORTED_MODULE_0__.Z});var _network_account_balance_header__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/network-account-balance-header/network-account-balance-header.js")},"./ui/components/app/network-account-balance-header/network-account-balance-header.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>NetworkAccountBalanceHeader});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_ui_icon_with_fallback__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/ui/icon-with-fallback/index.js"),_ui_identicon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/ui/identicon/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_ui_box_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/ui/box/box.js"),_contexts_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/contexts/i18n.js"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./shared/constants/network.ts"),_component_library__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/components/component-library/index.js");function NetworkAccountBalanceHeader({networkName,accountName,accountBalance,tokenName,accountAddress,chainId}){const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_i18n__WEBPACK_IMPORTED_MODULE_5__.OO),networkIcon=_shared_constants_network__WEBPACK_IMPORTED_MODULE_6__.uM[chainId],networkIconWrapperClass=networkIcon?"network-account-balance-header__network-account__ident-icon-ethereum":"network-account-balance-header__network-account__ident-icon-ethereum--gray";return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Row,padding:4,className:"network-account-balance-header",alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.center,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.E0.spaceBetween},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Row,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.center,gap:2},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Row,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.center},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_identicon__WEBPACK_IMPORTED_MODULE_2__.Z,{address:accountAddress,diameter:32}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_icon_with_fallback__WEBPACK_IMPORTED_MODULE_1__.Z,{name:networkName,size:16,icon:networkIcon,wrapperClassName:networkIconWrapperClass})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.flexStart,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Column},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_7__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,as:"h6",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.d9.textAlternative},networkName),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_7__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,as:"h6",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.d9.textDefault,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.U9.Bold},accountName))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.flexEnd,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Column},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_7__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,as:"h6",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.d9.textAlternative},t("balance")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_7__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,as:"h6",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.d9.textDefault,fontWeight:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.U9.Bold,align:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.PH.End},accountBalance," ",tokenName)))}NetworkAccountBalanceHeader.propTypes={networkName:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,accountName:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,accountBalance:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,tokenName:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,accountAddress:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,chainId:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string},NetworkAccountBalanceHeader.__docgenInfo={description:"",methods:[],displayName:"NetworkAccountBalanceHeader",props:{networkName:{description:"",type:{name:"string"},required:!1},accountName:{description:"",type:{name:"string"},required:!1},accountBalance:{description:"",type:{name:"string"},required:!1},tokenName:{description:"",type:{name:"string"},required:!1},accountAddress:{description:"",type:{name:"string"},required:!1},chainId:{description:"",type:{name:"string"},required:!1}}}},"./ui/components/app/signature-request/signature-request-data/signature-request-data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/index.js"),_transaction_decoding_components_decoding_address__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/app/transaction-decoding/components/decoding/address/index.js"),_shared_modules_hexstring_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/modules/hexstring-utils.ts"),_ui_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/ui/box/index.js"),_ui_typography__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/components/ui/typography/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/helpers/utils/util.js");function SignatureRequestData({data}){const identities=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_3__.RlE);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_6__.ZP,{className:"signature-request-data__node"},Object.entries(data).map((([label,{value,type}],i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_6__.ZP,{className:"signature-request-data__node",key:`${label}-${i}`,paddingLeft:2,display:"object"!=typeof value||null===value?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.bA.FLEX:null},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_typography__WEBPACK_IMPORTED_MODULE_7__.Z,{as:"span",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.d9.textDefault,marginLeft:4,fontWeight:"object"==typeof value?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.m5.BOLD:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.m5.NORMAL},(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_9__.vJ)(label.charAt(0).toUpperCase()+label.slice(1)),":"," "),"object"==typeof value&&null!==value?react__WEBPACK_IMPORTED_MODULE_0__.createElement(SignatureRequestData,{data:value}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_typography__WEBPACK_IMPORTED_MODULE_7__.Z,{as:"span",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.d9.textDefault,marginLeft:4,className:"signature-request-data__node__value"},"address"===type&&(0,_shared_modules_hexstring_utils__WEBPACK_IMPORTED_MODULE_5__.Pv)(value,{mixedCaseUseChecksum:!0})?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_typography__WEBPACK_IMPORTED_MODULE_7__.Z,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.TypographyVariant.H7,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_8__.d9.infoDefault,className:"signature-request-data__node__value__address"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_transaction_decoding_components_decoding_address__WEBPACK_IMPORTED_MODULE_4__.Z,{addressOnly:!0,checksummedRecipientAddress:(0,_shared_modules_hexstring_utils__WEBPACK_IMPORTED_MODULE_5__.QG)(value),recipientName:(0,_selectors__WEBPACK_IMPORTED_MODULE_3__.PyB)(identities,value)})):(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_9__.vJ)(`${value}`))))))}SignatureRequestData.propTypes={data:prop_types__WEBPACK_IMPORTED_MODULE_10___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,prop_types__WEBPACK_IMPORTED_MODULE_10___default().array]).isRequired},SignatureRequestData.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestData",props:{data:{description:"",type:{name:"union",value:[{name:"object"},{name:"array"}]},required:!0}}};const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SignatureRequestData,((prevProps,nextProps)=>(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isEqual)(prevProps.data,nextProps.data)))},"./ui/components/app/signature-request/signature-request-message/signature-request-message.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>SignatureRequestMessage});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),signature_request_data=__webpack_require__("./ui/components/app/signature-request/signature-request-data/signature-request-data.js");function SignatureRequestMessage({data,onMessageScrolled,setMessageRootRef,messageRootRef,messageIsScrollable,primaryType}){const t=(0,react.useContext)(i18n.OO),[messageIsScrolled,setMessageIsScrolled]=(0,react.useState)(!1);return react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,onScroll:(0,lodash.debounce)((()=>{if(!messageRootRef||messageIsScrolled)return;const{scrollTop,offsetHeight,scrollHeight}=messageRootRef;Math.round(scrollTop)+offsetHeight>=scrollHeight&&(setMessageIsScrolled(!0),onMessageScrolled())}),25),className:"signature-request-message"},messageIsScrollable?react.createElement(box.ZP,{display:design_system.sS.Flex,alignItems:design_system.g1.center,justifyContent:design_system.E0.center,borderColor:design_system.kf.borderDefault,backgroundColor:design_system.lP.backgroundDefault,color:design_system.Il.iconDefault,onClick:()=>{setMessageIsScrolled(!0),onMessageScrolled(),null==messageRootRef||messageRootRef.scrollTo(0,null==messageRootRef?void 0:messageRootRef.scrollHeight)},className:"signature-request-message__scroll-button","data-testid":"signature-request-scroll-button"},react.createElement("i",{className:"fa fa-arrow-down","aria-label":t("scrollDown")})):null,react.createElement(box.ZP,{backgroundColor:design_system.lP.backgroundDefault,paddingBottom:3,paddingTop:3,paddingRight:3,margin:2,borderRadius:design_system.cM.XL,borderColor:design_system.kf.borderMuted,className:"signature-request-message__root",ref:setMessageRootRef},react.createElement(component_library.xv,{fontWeight:design_system.U9.Bold,color:design_system.d9.textDefault,marginLeft:4},primaryType),react.createElement(signature_request_data.Z,{data:data.value})))}SignatureRequestMessage.propTypes={data:prop_types_default().object.isRequired,onMessageScrolled:prop_types_default().func,setMessageRootRef:prop_types_default().func,messageRootRef:prop_types_default().object,messageIsScrollable:prop_types_default().bool,primaryType:prop_types_default().string},SignatureRequestMessage.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestMessage",props:{data:{description:"",type:{name:"object"},required:!0},onMessageScrolled:{description:"",type:{name:"func"},required:!1},setMessageRootRef:{description:"",type:{name:"func"},required:!1},messageRootRef:{description:"",type:{name:"object"},required:!1},messageIsScrollable:{description:"",type:{name:"bool"},required:!1},primaryType:{description:"",type:{name:"string"},required:!1}}}},"./ui/components/app/transaction-decoding/components/decoding/address/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>address_component});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),copy_to_clipboard=__webpack_require__("./node_modules/copy-to-clipboard/index.js"),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard),util=__webpack_require__("./ui/helpers/utils/util.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),selectors=__webpack_require__("./ui/selectors/index.js"),nickname_popovers=__webpack_require__("./ui/components/app/modals/nickname-popovers/index.js");const Address=({checksummedRecipientAddress,onRecipientClick,addressOnly,recipientEns,recipientName})=>{const t=(0,useI18nContext.C)(),[showNicknamePopovers,setShowNicknamePopovers]=(0,react.useState)(!1),addressBookEntryObject=(0,es.v9)(selectors.FuL).find((entry=>entry.address.toLowerCase()===checksummedRecipientAddress.toLowerCase())),recipientNickname=null==addressBookEntryObject?void 0:addressBookEntryObject.name,recipientMetadataName=(0,es.v9)((state=>(0,selectors._87)(state,checksummedRecipientAddress))),recipientToRender=addressOnly?recipientName||recipientNickname||recipientMetadataName||recipientEns||(0,util.$Q)(checksummedRecipientAddress):recipientName||recipientNickname||recipientMetadataName||recipientEns||t("newContract");return react.createElement("div",{className:"tx-insight tx-insight-component tx-insight-component-address",onClick:()=>{copy_to_clipboard_default()(checksummedRecipientAddress),onRecipientClick&&onRecipientClick()}},react.createElement("div",{className:"tx-insight-component-address__sender-icon"},react.createElement(identicon.Z,{address:checksummedRecipientAddress,diameter:18})),react.createElement("div",{className:"tx-insight-component-address__name",onClick:()=>setShowNicknamePopovers(!0)},recipientToRender),showNicknamePopovers?react.createElement(nickname_popovers.Z,{onClose:()=>setShowNicknamePopovers(!1),address:checksummedRecipientAddress}):null)};Address.propTypes={checksummedRecipientAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientEns:prop_types_default().string,addressOnly:prop_types_default().bool,onRecipientClick:prop_types_default().func},Address.__docgenInfo={description:"",methods:[],displayName:"Address",props:{checksummedRecipientAddress:{description:"",type:{name:"string"},required:!1},recipientName:{description:"",type:{name:"string"},required:!1},recipientEns:{description:"",type:{name:"string"},required:!1},addressOnly:{description:"",type:{name:"bool"},required:!1},onRecipientClick:{description:"",type:{name:"func"},required:!1}}};const address_component=Address},"./ui/hooks/usePrevious.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>usePrevious});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function usePrevious(value){const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current=value}),[value]),ref.current}},"./ui/store/institutional/institution-background.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I6:()=>mmiActionsFactory,Lx:()=>setTypedMessageInProgress,Y0:()=>showInteractiveReplacementTokenBanner});var loglevel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/loglevel/lib/loglevel.js"),loglevel__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__),_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/store/actions.ts"),_action_queue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/store/action-queue/index.ts"),_shared_modules_error__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/error.ts");function showInteractiveReplacementTokenBanner({url,oldRefreshToken}){return async dispatch=>{try{await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)("showInteractiveReplacementTokenBanner",[url,oldRefreshToken])}catch(err){if(err)throw dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(err.message)),new Error(err.message)}}}function setTypedMessageInProgress(msgId){return async dispatch=>{dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.Nbs)());try{await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)("setTypedMessageInProgress",[msgId])}catch(error){loglevel__WEBPACK_IMPORTED_MODULE_0___default().error(error),dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(error.message))}finally{await(0,_actions__WEBPACK_IMPORTED_MODULE_1__.Skm)(dispatch),dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.awJ)())}}}function mmiActionsFactory(){function createAsyncAction(name,params,useForceUpdateMetamaskState,loadingText){return loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(`background.${name}`),async dispatch=>{let result;loadingText&&dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.Nbs)(loadingText));try{result=await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)(name,[...params])}catch(error){throw dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(error)),(0,_shared_modules_error__WEBPACK_IMPORTED_MODULE_3__.M)(error)?new Error(error.message):error}return loadingText&&dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.awJ)()),useForceUpdateMetamaskState&&await(0,_actions__WEBPACK_IMPORTED_MODULE_1__.Skm)(dispatch),result}}function createAction(name,payload){return new Promise(((resolve,reject)=>{(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.BW)(name,[payload],(error=>{error?reject(error):resolve()}))}))}return{connectCustodyAddresses:(custodianType,custodianName,newAccounts)=>createAsyncAction("connectCustodyAddresses",[custodianType,custodianName,newAccounts],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Looking for your custodian account..."),getCustodianAccounts:(token,apiUrl,custody,getNonImportedAccounts)=>createAsyncAction("getCustodianAccounts",[token,apiUrl,custody,getNonImportedAccounts],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Getting custodian accounts..."),getCustodianAccountsByAddress:(jwt,apiUrl,address,custody)=>createAsyncAction("getCustodianAccountsByAddress",[jwt,apiUrl,address,custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Getting custodian accounts..."),getCustodianTransactionDeepLink:(address,txId)=>createAsyncAction("getCustodianTransactionDeepLink",[address,txId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianConfirmDeepLink:txId=>createAsyncAction("getCustodianConfirmDeepLink",[txId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianSignMessageDeepLink:(from,custodyTxId)=>createAsyncAction("getCustodianSignMessageDeepLink",[from,custodyTxId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianToken:custody=>createAsyncAction("getCustodianToken",[custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianJWTList:custody=>createAsyncAction("getCustodianJWTList",[custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),setWaitForConfirmDeepLinkDialog:waitForConfirmDeepLinkDialog=>createAction("setWaitForConfirmDeepLinkDialog",waitForConfirmDeepLinkDialog),setComplianceAuthData:(clientId,projectId)=>createAsyncAction("setComplianceAuthData",[{clientId,projectId}]),deleteComplianceAuthData:()=>createAsyncAction("deleteComplianceAuthData",[]),generateComplianceReport:address=>createAction("generateComplianceReport",address),getComplianceHistoricalReportsByAddress:(address,projectId)=>createAsyncAction("getComplianceHistoricalReportsByAddress",[address,projectId]),syncReportsInProgress:(address,historicalReports)=>createAction("syncReportsInProgress",{address,historicalReports}),removeConnectInstitutionalFeature:(origin,projectId)=>createAction("removeConnectInstitutionalFeature",{origin,projectId}),removeAddTokenConnectRequest:({origin,apiUrl,token})=>createAction("removeAddTokenConnectRequest",{origin,apiUrl,token}),setCustodianConnectRequest:({token,apiUrl,custodianType,custodianName})=>createAsyncAction("setCustodianConnectRequest",[{token,apiUrl,custodianType,custodianName}]),getCustodianConnectRequest:()=>createAsyncAction("getCustodianConnectRequest",[]),getMmiConfiguration:()=>createAsyncAction("getMmiConfiguration",[]),getAllCustodianAccountsWithToken:(custodyType,token)=>createAsyncAction("getAllCustodianAccountsWithToken",[custodyType,token]),setCustodianNewRefreshToken:(address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl)=>createAsyncAction("setCustodianNewRefreshToken",[address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl])}}},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var f=__webpack_require__("./node_modules/react/index.js"),g=60103;if(exports.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var h=Symbol.for;g=h("react.element"),exports.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,k){var b,d={},e=null,l=null;for(b in void 0!==k&&(e=""+k),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(l=a.ref),a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"?8158":()=>{},"?9581":()=>{},"?e2bf":()=>{},"?5316":()=>{},"?ed1b":()=>{},"?d17e":()=>{}}]);