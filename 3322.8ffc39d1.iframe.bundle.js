(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[3322],{"./node_modules/@metamask/snaps-controllers/dist/esm/snaps/endowments/enum.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var SnapEndowments;__webpack_require__.d(__webpack_exports__,{p:()=>SnapEndowments}),function(SnapEndowments){SnapEndowments.NetworkAccess="endowment:network-access",SnapEndowments.TransactionInsight="endowment:transaction-insight",SnapEndowments.Cronjob="endowment:cronjob",SnapEndowments.EthereumProvider="endowment:ethereum-provider",SnapEndowments.Rpc="endowment:rpc",SnapEndowments.WebAssemblyAccess="endowment:webassembly",SnapEndowments.NameLookup="endowment:name-lookup",SnapEndowments.LifecycleHooks="endowment:lifecycle-hooks",SnapEndowments.Keyring="endowment:keyring",SnapEndowments.HomePage="endowment:page-home"}(SnapEndowments||(SnapEndowments={}))},"./shared/lib/token-util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{bn:()=>fetchTokenBalance});var _metamask_metamask_eth_abis__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@metamask/metamask-eth-abis/dist/index.js"),_ethersproject_contracts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@ethersproject/contracts/lib.esm/index.js"),_ethersproject_providers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/web3-provider.js");async function fetchTokenBalance(address,userAddress,provider){const ethersProvider=new _ethersproject_providers__WEBPACK_IMPORTED_MODULE_1__.Q(provider),tokenContract=new _ethersproject_contracts__WEBPACK_IMPORTED_MODULE_2__.Contract(address,_metamask_metamask_eth_abis__WEBPACK_IMPORTED_MODULE_0__.abiERC20,ethersProvider),tokenBalancePromise=tokenContract?tokenContract.balanceOf(userAddress):Promise.resolve();return await tokenBalancePromise}},"./ui/components/app/confirm-page-container/confirm-detail-row/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>confirm_detail_row_component});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),user_preferenced_currency_display=__webpack_require__("./ui/components/app/user-preferenced-currency-display/index.js"),common=__webpack_require__("./ui/helpers/constants/common.ts");const ConfirmDetailRow=props=>{const{label,primaryText,secondaryText,onHeaderClick,primaryValueTextColor,headerText,headerTextClassName,value}=props;return react.createElement("div",{className:"confirm-detail-row"},react.createElement("div",{className:"confirm-detail-row__label"},label),react.createElement("div",{className:"confirm-detail-row__details"},headerText&&react.createElement("div",{className:classnames_default()("confirm-detail-row__header-text",headerTextClassName),onClick:()=>null==onHeaderClick?void 0:onHeaderClick()},headerText),primaryText?react.createElement("div",{className:"confirm-detail-row__primary",style:{color:primaryValueTextColor}},primaryText):react.createElement(user_preferenced_currency_display.Z,{className:"confirm-detail-row__primary",type:common._8,value,showEthLogo:!0,ethLogoHeight:18,style:{color:primaryValueTextColor},hideLabel:!0}),secondaryText?react.createElement("div",{className:"confirm-detail-row__secondary"},secondaryText):react.createElement(user_preferenced_currency_display.Z,{className:"confirm-detail-row__secondary",type:common.Vb,value,showEthLogo:!0,hideLabel:!0})))};ConfirmDetailRow.propTypes={headerText:prop_types_default().string,headerTextClassName:prop_types_default().string,label:prop_types_default().string,onHeaderClick:prop_types_default().func,primaryValueTextColor:prop_types_default().string,primaryText:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node]),secondaryText:prop_types_default().string,value:prop_types_default().string},ConfirmDetailRow.__docgenInfo={description:"",methods:[],displayName:"ConfirmDetailRow",props:{headerText:{description:"",type:{name:"string"},required:!1},headerTextClassName:{description:"",type:{name:"string"},required:!1},label:{description:"",type:{name:"string"},required:!1},onHeaderClick:{description:"",type:{name:"func"},required:!1},primaryValueTextColor:{description:"",type:{name:"string"},required:!1},primaryText:{description:"",type:{name:"union",value:[{name:"string"},{name:"node"}]},required:!1},secondaryText:{description:"",type:{name:"string"},required:!1},value:{description:"",type:{name:"string"},required:!1}}};const confirm_detail_row_component=ConfirmDetailRow},"./ui/components/app/confirm-page-container/confirm-page-container-header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>ConfirmPageContainerHeader});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),app=__webpack_require__("./shared/constants/app.ts"),util=__webpack_require__("./app/scripts/lib/util.ts"),network_display=__webpack_require__("./ui/components/app/network-display/index.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),utils_util=__webpack_require__("./ui/helpers/utils/util.js"),account_mismatch_warning_component=__webpack_require__("./ui/components/ui/account-mismatch-warning/account-mismatch-warning.component.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts");function ConfirmPageContainerHeader({onEdit,showEdit,accountAddress,showAccountInHeader,children}){const t=(0,useI18nContext.C)(),windowType=(0,util.kD)(),isFullScreen=windowType!==app.vH&&windowType!==app.bE;return!showEdit&&isFullScreen?children:react.createElement("div",{className:"confirm-page-container-header","data-testid":"header-container"},react.createElement("div",{className:"confirm-page-container-header__row"},showAccountInHeader?react.createElement("div",{className:"confirm-page-container-header__address-container"},react.createElement("div",{className:"confirm-page-container-header__address-identicon"},react.createElement(identicon.Z,{address:accountAddress,diameter:24})),react.createElement("div",{className:"confirm-page-container-header__address","data-testid":"header-address"},(0,utils_util.$Q)(accountAddress)),react.createElement(account_mismatch_warning_component.Z,{address:accountAddress})):react.createElement("div",{className:"confirm-page-container-header__back-button-container",style:{visibility:showEdit?"initial":"hidden"}},react.createElement(component_library.JO,{name:component_library.uH.ArrowLeft}),react.createElement("span",{"data-testid":"confirm-page-back-edit-button",className:"confirm-page-container-header__back-button",onClick:()=>onEdit()},t("edit"))),isFullScreen?null:react.createElement(network_display.Z,null)),children)}ConfirmPageContainerHeader.propTypes={accountAddress:prop_types_default().string,showAccountInHeader:prop_types_default().bool,showEdit:prop_types_default().bool,onEdit:prop_types_default().func,children:prop_types_default().node},ConfirmPageContainerHeader.__docgenInfo={description:"",methods:[],displayName:"ConfirmPageContainerHeader",props:{accountAddress:{description:"",type:{name:"string"},required:!1},showAccountInHeader:{description:"",type:{name:"bool"},required:!1},showEdit:{description:"",type:{name:"bool"},required:!1},onEdit:{description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"node"},required:!1}}}},"./ui/components/app/confirm-page-container/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{nJ:()=>confirm_page_container_content.ZP,os:()=>confirm_page_container_header.Z,oN:()=>confirm_page_container_navigation.Z,ZP:()=>confirm_page_container_component});var SeverityLevel,react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),dist=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),gas=__webpack_require__("./shared/constants/gas.ts"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),transaction=__webpack_require__("./shared/constants/transaction.ts"),network=__webpack_require__("./shared/constants/network.ts"),page_container=__webpack_require__("./ui/components/ui/page-container/index.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),actionable_message=__webpack_require__("./ui/components/ui/actionable-message/actionable-message.js"),sender_to_recipient=__webpack_require__("./ui/components/ui/sender-to-recipient/index.js"),advanced_gas_fee_popover=__webpack_require__("./ui/components/app/advanced-gas-fee-popover/index.js"),edit_gas_fee_popover=__webpack_require__("./ui/components/app/edit-gas-fee-popover/edit-gas-fee-popover.js"),edit_gas_popover=__webpack_require__("./ui/components/app/edit-gas-popover/index.js"),error_message=__webpack_require__("./ui/components/ui/error-message/index.js"),error_keys=__webpack_require__("./ui/helpers/constants/error-keys.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),network_account_balance_header=__webpack_require__("./ui/components/app/network-account-balance-header/network-account-balance-header.js"),token_util=__webpack_require__("./shared/lib/token-util.ts"),set_approval_for_all_warning=__webpack_require__("./ui/components/app/set-approval-for-all-warning/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js");!function(SeverityLevel){SeverityLevel.Critical="critical"}(SeverityLevel||(SeverityLevel={}));var hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),tabs=__webpack_require__("./ui/components/ui/tabs/index.js"),dropdown_tab=__webpack_require__("./ui/components/ui/tabs/snaps/dropdown-tab/index.js"),box=__webpack_require__("./ui/components/ui/box/box.js"),snap_ui_renderer=__webpack_require__("./ui/components/app/snaps/snap-ui-renderer/index.js"),snap_delineator=__webpack_require__("./ui/components/app/snaps/snap-delineator/index.js"),snaps=__webpack_require__("./ui/helpers/constants/snaps/index.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),copyable=__webpack_require__("./ui/components/app/snaps/copyable/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),actions=__webpack_require__("./ui/store/actions.ts"),permission_controller_dist=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),rpc_errors_dist=__webpack_require__("./node_modules/@metamask/rpc-errors/dist/index.js"),esm_caveats=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/esm/caveats.js"),chunk_H4YFDLB7=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-H4YFDLB7.mjs"),chunk_74DGVJVE=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-74DGVJVE.mjs");const permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/esm/snaps/endowments/enum.js").p.TransactionInsight;Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_dist.PermissionType.Endowment,targetName:permissionName,allowedCaveats:[esm_caveats.j.TransactionOrigin],endowmentGetter:_getterOptions=>{},validator:({caveats})=>{if(null!==caveats&&caveats?.length>1||1===caveats?.length&&caveats[0].type!==esm_caveats.j.TransactionOrigin)throw rpc_errors_dist.rpcErrors.invalidParams({message:`Expected a single "${esm_caveats.j.TransactionOrigin}" caveat.`})},subjectTypes:[permission_controller_dist.SubjectType.Snap]})});esm_caveats.j.TransactionOrigin,Object.freeze({type:esm_caveats.j.TransactionOrigin,validator:caveat=>function validateCaveat(caveat){if(!(0,chunk_H4YFDLB7.l$)(caveat,"value")||!(0,chunk_H4YFDLB7.PO)(caveat))throw rpc_errors_dist.rpcErrors.invalidParams({message:"Expected a plain object."});const{value}=caveat;(0,chunk_74DGVJVE.hu)("boolean"==typeof value,'Expected caveat value to have type "boolean"')}(caveat)});function useTransactionInsightSnaps({transaction,chainId,origin,insightSnaps,eagerFetching=!0,insightSnapId=""}){const subjects=(0,es.v9)(selectors.UjX),[loading,setLoading]=(0,react.useState)(!0),[data,setData]=(0,react.useState)(void 0),[hasFetchedV2Insight,setHasFetchedV2Insight]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{let cancelled=!1;return transaction&&async function fetchInsight(){if(hasFetchedV2Insight)return void setLoading(!1);if(!eagerFetching)return void setLoading(!1);setLoading(!0);const snapIds=insightSnapId.length>0?[insightSnapId]:insightSnaps,reformattedData=(await Promise.allSettled(snapIds.map((snapId=>{var _subjects$snapId;const permission=null===(_subjects$snapId=subjects[snapId])||void 0===_subjects$snapId?void 0:_subjects$snapId.permissions["endowment:transaction-insight"];if(!permission)return Promise.reject(new Error("This Snap does not have the transaction insight endowment."));const hasTransactionOriginCaveat=function getTransactionOriginCaveat(permission){return permission?.caveats?((0,chunk_74DGVJVE.hu)(1===permission.caveats.length),(0,chunk_74DGVJVE.hu)(permission.caveats[0].type===esm_caveats.j.TransactionOrigin),permission.caveats[0].value??null):null}(permission),transactionOrigin=hasTransactionOriginCaveat?origin:null;return(0,actions.fcw)({snapId,origin:"",handler:"onTransaction",request:{jsonrpc:"2.0",method:"",params:{transaction,chainId,transactionOrigin}}})})))).map(((promise,idx)=>{const snapId=snapIds[idx];return"rejected"===promise.status?{error:promise.reason,snapId}:{snapId,response:promise.value}}));cancelled||(setData(reformattedData),setLoading(!1),setHasFetchedV2Insight(!0))}(),()=>{cancelled=!0}}),[transaction,eagerFetching,chainId,origin,subjects,JSON.stringify(insightSnaps),insightSnapId,hasFetchedV2Insight]),{data,loading}}const SnapInsight=({snapId,data,loading,insightHookParams})=>{var _data$response,_insights$data,_insights$data2;const t=(0,useI18nContext.C)();let error,content,isLoading=loading;error=null==data?void 0:data.error,content=null==data||null===(_data$response=data.response)||void 0===_data$response?void 0:_data$response.content;const dispatch=(0,es.I0)();(0,react.useEffect)((()=>{(async()=>{try{await dispatch((0,actions.z$A)(snapId))}catch{}})()}),[snapId,dispatch]);const insights=useTransactionInsightSnaps(insightHookParams);error=null===(_insights$data=insights.data)||void 0===_insights$data||null===(_insights$data=_insights$data[0])||void 0===_insights$data?void 0:_insights$data.error,content=null===(_insights$data2=insights.data)||void 0===_insights$data2||null===(_insights$data2=_insights$data2[0])||void 0===_insights$data2||null===(_insights$data2=_insights$data2.response)||void 0===_insights$data2?void 0:_insights$data2.content,isLoading=insights.loading;const targetSubjectMetadata=(0,es.v9)((state=>(0,selectors.h5U)(state,snapId))),snapName=(0,util.NZ)(snapId,targetSubjectMetadata),hasNoData=!error&&!isLoading&&!content;return react.createElement(box.ZP,{flexDirection:design_system.uM.COLUMN,height:"full",marginTop:hasNoData&&12,marginBottom:hasNoData&&12,alignItems:hasNoData&&design_system.g1.center,justifyContent:hasNoData&&design_system.E0.center,textAlign:hasNoData&&design_system.PH.Center,className:"snap-insight"},!error&&react.createElement(box.ZP,{height:"full",width:"full",flexDirection:design_system.uM.COLUMN,className:"snap-insight__container"},isLoading||content?react.createElement(snap_ui_renderer.V,{snapId,data:content,delineatorType:snaps.P.Insights,isLoading}):react.createElement(component_library.xv,{color:design_system.d9.textAlternative,variant:design_system.rK.bodySm,as:"h6"},t("snapsNoInsight"))),!isLoading&&error&&react.createElement(box.ZP,{padding:4,className:"snap-insight__container__error"},react.createElement(snap_delineator.Z,{snapName,type:snaps.P.Error},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,marginBottom:4},t("snapsUIError",[react.createElement("b",{key:"0"},snapName)])),react.createElement(copyable.C,{text:error.message}))))};SnapInsight.propTypes={snapId:prop_types_default().string,data:prop_types_default().object,loading:prop_types_default().bool,insightHookParams:prop_types_default().object},SnapInsight.__docgenInfo={description:"",methods:[],displayName:"SnapInsight",props:{snapId:{description:"",type:{name:"string"},required:!1},data:{description:"",type:{name:"object"},required:!1},loading:{description:"",type:{name:"bool"},required:!1},insightHookParams:{description:"Params object for the useTransactionInsightSnaps hook",type:{name:"object"},required:!1}}};const hooks_useTransactionInsights=({txData})=>{var _insightSnaps$;const{txParams,chainId,origin}=txData,caip2ChainId=`eip155:${(0,hexstring_utils.MT)(chainId)}`,insightSnaps=(0,es.v9)(selectors.AuR),subjectMetadata=(0,es.v9)(selectors.wUP),insightSnapIds=(0,es.v9)(selectors.c2i),[selectedInsightSnapId,setSelectedInsightSnapId]=(0,react.useState)(null===(_insightSnaps$=insightSnaps[0])||void 0===_insightSnaps$?void 0:_insightSnaps$.id),insightHookParams={transaction:txParams,chainId:caip2ChainId,origin,insightSnaps:insightSnapIds,insightSnapId:selectedInsightSnapId},{data,loading}=useTransactionInsightSnaps({...insightHookParams,eagerFetching:!1});if((0,react.useEffect)((()=>{insightSnapIds.length>0&&!selectedInsightSnapId&&setSelectedInsightSnapId(insightSnapIds[0])}),[insightSnapIds,selectedInsightSnapId,setSelectedInsightSnapId]),(transactionType=txData.type)!==dist.TransactionType.contractInteraction&&transactionType!==dist.TransactionType.simpleSend&&transactionType!==dist.TransactionType.tokenMethodSafeTransferFrom&&transactionType!==dist.TransactionType.tokenMethodTransferFrom&&transactionType!==dist.TransactionType.tokenMethodTransfer||!insightSnaps.length)return null;var transactionType;const selectedSnap=insightSnaps.find((({id})=>id===selectedInsightSnapId));let insightComponent;if(1===insightSnaps.length)insightComponent=react.createElement(tabs.O,{className:"confirm-page-container-content__tab",name:(0,util.NZ)(null==selectedSnap?void 0:selectedSnap.id,subjectMetadata[null==selectedSnap?void 0:selectedSnap.id])},react.createElement(SnapInsight,{snapId:selectedInsightSnapId,data:null==data?void 0:data[0],loading,insightHookParams}));else if(insightSnaps.length>1){const dropdownOptions=null==insightSnaps?void 0:insightSnaps.map((({id})=>({value:id,name:(0,util.NZ)(id,subjectMetadata[id])}))),selectedSnapData=null==data?void 0:data.find((promise=>(null==promise?void 0:promise.snapId)===selectedInsightSnapId));insightComponent=react.createElement(dropdown_tab.Z,{className:"confirm-page-container-content__tab",options:dropdownOptions,selectedOption:selectedInsightSnapId,onChange:snapId=>setSelectedInsightSnapId(snapId)},react.createElement(SnapInsight,{snapId:selectedInsightSnapId,loading,data:selectedSnapData,insightHookParams}))}return{insightComponent,warnings:null==data?void 0:data.reduce(((warningsArr,promise)=>{var _promise$response;if((null===(_promise$response=promise.response)||void 0===_promise$response?void 0:_promise$response.severity)===SeverityLevel.Critical){const{snapId,response:{content}}=promise;warningsArr.push({snapId,content})}return warningsArr}),[])}};var deprecated=__webpack_require__("./ui/components/component-library/modal-content/deprecated/index.ts"),modal_header_deprecated=__webpack_require__("./ui/components/component-library/modal-header/deprecated/index.ts");function TxInsightWarnings({warnings,type="confirming",origin,onCancel,onSubmit}){const t=(0,useI18nContext.C)(),defaultWarningState=warnings.reduce(((warningState,warning,idx)=>(warningState[warning.snapId]=0!==idx,warningState)),{}),[warningState,setWarningState]=(0,react.useState)(defaultWarningState),[isChecked,setIsChecked]=(0,react.useState)(!1),Warnings=()=>{const lastWarningIdx=warnings.length-1;return react.createElement(component_library.xu,{className:"tx-insights-warnings-modal__content"},warnings.map(((warning,idx)=>{const{snapId,content}=warning;return react.createElement(snap_ui_renderer.V,{key:`${snapId}-${idx}`,snapId,data:content,delineatorType:snaps.P.Warning,onClick:()=>(snapId=>{let newState={...warningState};const nextSnapState=!warningState[snapId],willClose=nextSnapState;newState[snapId]=nextSnapState,willClose||(newState={...defaultWarningState},newState[snapId]=!1,newState[warnings[0].snapId]=snapId!==warnings[0].snapId),setWarningState(newState)})(snapId),isCollapsable:!0,isCollapsed:warningState[snapId],boxProps:{marginBottom:idx===lastWarningIdx?0:4}})})))},results={confirming:{noun:"confirmation",imperative:"confirm"},signing:{noun:"signature",imperative:"sign"}};return react.createElement(component_library.u_,{isOpen:!0,isClosedOnEscapeKey:!1,isClosedOnOutsideClick:!1,className:"tx-insights-warnings-modal"},react.createElement(component_library.ZA,null),react.createElement(deprecated.h,null,react.createElement(modal_header_deprecated.x,{justifyContent:design_system.E0.center,childrenWrapperProps:{alignItems:design_system.g1.center,display:design_system.sS.Flex,flexDirection:design_system.Qb.Column}},react.createElement(component_library.fM,{iconName:component_library.uH.Warning,size:component_library.dt.Lg,color:design_system.EY.errorDefault,backgroundColor:design_system.lP.errorMuted}),react.createElement(component_library.xv,{variant:design_system.rK.headingMd,paddingTop:4,paddingBottom:4},t("transactionInsightWarningHeader"))),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd,paddingBottom:4},1===warnings.length?t("transactionInsightWarningContentSingular",[type,results[type].noun]):t("transactionInsightWarningContentPlural",[warnings.length,type,results[type].noun])),react.createElement(Warnings,null),react.createElement(component_library.xu,{display:design_system.sS.Flex,justifyContent:design_system.E0.flexStart,alignItems:design_system.g1.center,marginTop:4,marginBottom:4,padding:4,borderRadius:design_system.cM.SM,style:{backgroundColor:isChecked?"var(--color-info-muted)":"var(--color-background-default-hover)"}},react.createElement(component_library.XZ,{variant:design_system.rK.bodySm,isChecked,onChange:()=>setIsChecked((state=>!state)),label:t("transactionInsightWarningCheckboxMessage",[t(results[type].imperative),(0,util.qS)(origin)])})),react.createElement(component_library.xu,{display:design_system.sS.Flex,justifyContent:design_system.E0.spaceBetween},react.createElement(component_library.zx,{size:component_library.El.Lg,width:design_system.Sw.Half,variant:component_library.Wu.Secondary,onClick:onCancel,marginRight:4},t("cancel")),react.createElement(component_library.zx,{size:component_library.mY.Lg,width:design_system.Sw.Half,danger:!0,onClick:onSubmit,disabled:!isChecked},t(results[type].imperative)))))}TxInsightWarnings.propTypes={warnings:prop_types_default().arrayOf(prop_types_default().object),type:prop_types_default().oneOf(["confirming","signing"]),origin:prop_types_default().string.isRequired,onCancel:prop_types_default().func.isRequired,onSubmit:prop_types_default().func.isRequired},TxInsightWarnings.__docgenInfo={description:"",methods:[],displayName:"TxInsightWarnings",props:{type:{defaultValue:{value:"'confirming'",computed:!1},description:"A limited set of actions defining the type of transaction",type:{name:"enum",value:[{value:"'confirming'",computed:!1},{value:"'signing'",computed:!1}]},required:!1},warnings:{description:"An array of warnings returned from tx-insight snaps that deem their content 'critical'",type:{name:"arrayOf",value:{name:"object"}},required:!1},origin:{description:"Origin initiating the transaction",type:{name:"string"},required:!0},onCancel:{description:"Cancel function",type:{name:"func"},required:!0},onSubmit:{description:"Submit function",type:{name:"func"},required:!0}}};var useRamps=__webpack_require__("./ui/hooks/experiences/useRamps.ts"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts");const ConfirmPageContainer=props=>{const{showEdit,onEdit,fromName,fromAddress,toEns,toNickname,toAddress,disabled,errorKey,errorMessage,contentComponent,action,title,image,titleComponent,subtitleComponent,detailsComponent,dataHexComponent,onCancelAll,onCancel,onSubmit,onSetApprovalForAll,showWarningModal,tokenAddress,nonce,unapprovedTxCount,warning,hideSenderToRecipient,showAccountInHeader,origin,ethGasPriceWarning,editingGas,handleCloseEditGas,currentTransaction,supportsEIP1559,nativeCurrency,txData,assetStandard,isApprovalOrRejection,displayAccountBalanceHeader,noteComponent}=props,t=(0,useI18nContext.C)(),trackEvent=(0,react.useContext)(metametrics.Wd),[collectionBalance,setCollectionBalance]=(0,react.useState)("0"),[isShowingTxInsightWarnings,setIsShowingTxInsightWarnings]=(0,react.useState)(!1),isBuyableChain=(0,es.v9)(selectors.R9W),contact=(0,es.v9)((state=>(0,selectors.e5t)(state,toAddress))),networkIdentifier=(0,es.v9)(selectors.ZCT),accountBalance=(0,es.v9)(selectors.gpy).string,identities=(0,es.v9)(selectors.OxS),ownedAccountName=(0,selectors.PyB)(identities,toAddress),toName=ownedAccountName||(null==contact?void 0:contact.name),recipientIsOwnedAccount=Boolean(ownedAccountName),toMetadataName=(0,es.v9)((state=>(0,selectors.lxl)(state,toAddress))),{openBuyCryptoInPdapp}=(0,useRamps.Z)(),isSetApproveForAll=currentTransaction.type===dist.TransactionType.tokenMethodSetApprovalForAll,shouldDisplayWarning=contentComponent&&disabled&&(errorKey||errorMessage),networkName=network.kW[currentTransaction.chainId]||networkIdentifier,fetchCollectionBalance=(0,react.useCallback)((async()=>{const tokenBalance=await(0,token_util.bn)(tokenAddress,fromAddress,__webpack_require__.g.ethereumProvider);setCollectionBalance(tokenBalance.toString()||"0")}),[fromAddress,tokenAddress]),insightObject=hooks_useTransactionInsights({txData}),insightComponent=null==insightObject?void 0:insightObject.insightComponent,handleSubmit=()=>isSetApproveForAll&&isApprovalOrRejection?onSetApprovalForAll():onSubmit(),topLevelHandleSubmit=()=>{var _insightObject$warnin;return(null==insightObject||null===(_insightObject$warnin=insightObject.warnings)||void 0===_insightObject$warnin?void 0:_insightObject$warnin.length)>0?setIsShowingTxInsightWarnings(!0):handleSubmit()};return(0,react.useEffect)((()=>{isSetApproveForAll&&assetStandard===transaction.Yn.ERC721&&fetchCollectionBalance()}),[currentTransaction,assetStandard,isSetApproveForAll,fetchCollectionBalance,collectionBalance]),react.createElement(gasFee.Po,{transaction:currentTransaction},react.createElement("div",{className:"page-container","data-testid":"page-container"},react.createElement(confirm_page_container_navigation.Z,null),displayAccountBalanceHeader?react.createElement(network_account_balance_header.Z,{accountName:fromName,accountBalance,tokenName:nativeCurrency,accountAddress:fromAddress,networkName,chainId:currentTransaction.chainId}):react.createElement(confirm_page_container_header.Z,{showEdit,onEdit:()=>onEdit(),showAccountInHeader,accountAddress:fromAddress},hideSenderToRecipient?null:react.createElement(sender_to_recipient.Z,{senderName:fromName,senderAddress:fromAddress,recipientName:toName,recipientMetadataName:toMetadataName,recipientAddress:toAddress,recipientEns:toEns,recipientNickname:toNickname,recipientIsOwnedAccount})),contentComponent||react.createElement(confirm_page_container_content.ZP,{action,title,image,titleComponent,subtitleComponent,detailsComponent,dataHexComponent,insightComponent,errorMessage,errorKey,tokenAddress,nonce,warning,onCancelAll,onCancel,cancelText:t("reject"),onSubmit:topLevelHandleSubmit,submitText:t("confirm"),disabled,unapprovedTxCount,rejectNText:t("rejectTxsN",[unapprovedTxCount]),origin,ethGasPriceWarning,supportsEIP1559,currentTransaction,nativeCurrency,networkName,toAddress,transactionType:currentTransaction.type,isBuyableChain,openBuyCryptoInPdapp,txData,noteComponent}),shouldDisplayWarning&&errorKey===error_keys.Xr&&react.createElement("div",{className:"confirm-approve-content__warning"},react.createElement(actionable_message.Z,{message:isBuyableChain?react.createElement(component_library.xv,{variant:design_system.rK.bodySm,textAlign:design_system.PH.Left,as:"h6"},t("insufficientCurrencyBuyOrDeposit",[nativeCurrency,networkName,react.createElement(ui_button.Z,{type:"inline",className:"confirm-page-container-content__link",onClick:()=>{openBuyCryptoInPdapp(),trackEvent({event:constants_metametrics.AW.NavBuyButtonClicked,category:constants_metametrics.ci.Navigation,properties:{location:"Transaction Confirmation",text:"Buy"}})},key:`${nativeCurrency}-buy-button`},t("buyAsset",[nativeCurrency]))])):react.createElement(component_library.xv,{variant:design_system.rK.bodySm,textAlign:design_system.PH.Left,as:"h6"},t("insufficientCurrencyDeposit",[nativeCurrency,networkName])),useIcon:!0,iconFillColor:"var(--color-error-default)",type:"danger"})),shouldDisplayWarning&&errorKey!==error_keys.Xr&&react.createElement("div",{className:"confirm-approve-content__warning"},react.createElement(error_message.Z,{errorKey})),showWarningModal&&react.createElement(set_approval_for_all_warning.Z,{collectionName:title,senderAddress:fromAddress,name:fromName,isERC721:assetStandard===transaction.Yn.ERC721,total:collectionBalance,onSubmit,onCancel}),contentComponent&&react.createElement(page_container.g$,{onCancel,cancelText:t("reject"),onSubmit:topLevelHandleSubmit,submitText:t("confirm"),submitButtonType:isSetApproveForAll&&isApprovalOrRejection?"danger-primary":"primary",disabled},unapprovedTxCount>1&&react.createElement("a",{onClick:onCancelAll},t("rejectTxsN",[unapprovedTxCount]))),editingGas&&!supportsEIP1559&&react.createElement(edit_gas_popover.Z,{mode:gas.G_.modifyInPlace,onClose:handleCloseEditGas,transaction:currentTransaction}),supportsEIP1559&&react.createElement(react.Fragment,null,react.createElement(edit_gas_fee_popover.Z,null),react.createElement(advanced_gas_fee_popover.Z,null)),isShowingTxInsightWarnings&&react.createElement(TxInsightWarnings,{warnings:insightObject.warnings,origin,onCancel:()=>setIsShowingTxInsightWarnings(!1),onSubmit:()=>{handleSubmit(),setIsShowingTxInsightWarnings(!1)}})))};ConfirmPageContainer.propTypes={action:prop_types_default().string,onEdit:prop_types_default().func,showEdit:prop_types_default().bool,subtitleComponent:prop_types_default().node,title:prop_types_default().string,image:prop_types_default().string,titleComponent:prop_types_default().node,hideSenderToRecipient:prop_types_default().bool,showAccountInHeader:prop_types_default().bool,assetStandard:prop_types_default().string,fromAddress:prop_types_default().string,fromName:prop_types_default().string,toAddress:prop_types_default().string,toEns:prop_types_default().string,toNickname:prop_types_default().string,contentComponent:prop_types_default().node,errorKey:prop_types_default().string,errorMessage:prop_types_default().string,dataHexComponent:prop_types_default().node,detailsComponent:prop_types_default().node,txData:prop_types_default().object,tokenAddress:prop_types_default().string,nonce:prop_types_default().string,warning:prop_types_default().string,unapprovedTxCount:prop_types_default().number,origin:prop_types_default().string.isRequired,ethGasPriceWarning:prop_types_default().string,onCancelAll:prop_types_default().func,onCancel:prop_types_default().func,onSubmit:prop_types_default().func,onSetApprovalForAll:prop_types_default().func,showWarningModal:prop_types_default().bool,disabled:prop_types_default().bool,editingGas:prop_types_default().bool,handleCloseEditGas:prop_types_default().func,currentTransaction:prop_types_default().object.isRequired,supportsEIP1559:prop_types_default().bool,nativeCurrency:prop_types_default().string,isApprovalOrRejection:prop_types_default().bool,displayAccountBalanceHeader:prop_types_default().bool,noteComponent:prop_types_default().node},ConfirmPageContainer.__docgenInfo={description:"",methods:[],displayName:"ConfirmPageContainer",props:{action:{description:"",type:{name:"string"},required:!1},onEdit:{description:"",type:{name:"func"},required:!1},showEdit:{description:"",type:{name:"bool"},required:!1},subtitleComponent:{description:"",type:{name:"node"},required:!1},title:{description:"",type:{name:"string"},required:!1},image:{description:"",type:{name:"string"},required:!1},titleComponent:{description:"",type:{name:"node"},required:!1},hideSenderToRecipient:{description:"",type:{name:"bool"},required:!1},showAccountInHeader:{description:"",type:{name:"bool"},required:!1},assetStandard:{description:"",type:{name:"string"},required:!1},fromAddress:{description:"",type:{name:"string"},required:!1},fromName:{description:"",type:{name:"string"},required:!1},toAddress:{description:"",type:{name:"string"},required:!1},toEns:{description:"",type:{name:"string"},required:!1},toNickname:{description:"",type:{name:"string"},required:!1},contentComponent:{description:"",type:{name:"node"},required:!1},errorKey:{description:"",type:{name:"string"},required:!1},errorMessage:{description:"",type:{name:"string"},required:!1},dataHexComponent:{description:"",type:{name:"node"},required:!1},detailsComponent:{description:"",type:{name:"node"},required:!1},txData:{description:"",type:{name:"object"},required:!1},tokenAddress:{description:"",type:{name:"string"},required:!1},nonce:{description:"",type:{name:"string"},required:!1},warning:{description:"",type:{name:"string"},required:!1},unapprovedTxCount:{description:"",type:{name:"number"},required:!1},origin:{description:"",type:{name:"string"},required:!0},ethGasPriceWarning:{description:"",type:{name:"string"},required:!1},onCancelAll:{description:"",type:{name:"func"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},onSetApprovalForAll:{description:"",type:{name:"func"},required:!1},showWarningModal:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},editingGas:{description:"",type:{name:"bool"},required:!1},handleCloseEditGas:{description:"",type:{name:"func"},required:!1},currentTransaction:{description:"",type:{name:"object"},required:!0},supportsEIP1559:{description:"",type:{name:"bool"},required:!1},nativeCurrency:{description:"",type:{name:"string"},required:!1},isApprovalOrRejection:{description:"",type:{name:"bool"},required:!1},displayAccountBalanceHeader:{description:"",type:{name:"bool"},required:!1},noteComponent:{description:"",type:{name:"node"},required:!1}}};const confirm_page_container_component=ConfirmPageContainer;var confirm_page_container_header=__webpack_require__("./ui/components/app/confirm-page-container/confirm-page-container-header/index.js"),confirm_page_container_navigation=(__webpack_require__("./ui/components/app/confirm-page-container/confirm-detail-row/index.js"),__webpack_require__("./ui/components/app/confirm-page-container/confirm-page-container-navigation/index.js")),confirm_page_container_content=__webpack_require__("./ui/components/app/confirm-page-container/confirm-page-container-content/index.js")},"./ui/components/app/set-approval-for-all-warning/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>set_approval_for_all_warning});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts");const SetApproveForAllWarning=({collectionName,senderAddress,name,total,isERC721,onSubmit,onCancel})=>{const t=(0,useI18nContext.C)(),footer=react.createElement(box.ZP,{display:design_system.bA.FLEX,flexDirection:design_system.uM.COLUMN,justifyContent:design_system.E0.SPACE_BETWEEN,className:"set-approval-for-all-warning__footer",gap:4},react.createElement(component_library.zx,{className:"set-approval-for-all-warning__footer__approve-button",variant:component_library.RN.PRIMARY,danger:!0,onClick:onSubmit},t("approveButtonText")),react.createElement(component_library.zx,{className:"set-approval-for-all-warning__footer__cancel-button",variant:component_library.RN.SECONDARY,onClick:onCancel},t("reject")));return react.createElement(popover.Z,{className:"set-approval-for-all-warning__content",footer},react.createElement(box.ZP,{display:design_system.bA.FLEX,flexDirection:design_system.uM.ROW,padding:4,className:"set-approval-for-all-warning__content__header"},react.createElement(component_library.JO,{name:component_library.uH.Danger,className:"set-approval-for-all-warning__content__header__warning-icon"}),react.createElement(component_library.xv,{variant:design_system.rK.headingSm,as:"h4"},t("yourNFTmayBeAtRisk"))),react.createElement(box.ZP,{display:design_system.bA.FLEX,padding:4,justifyContent:design_system.E0.spaceBetween,className:"set-approval-for-all-warning__content__account"},react.createElement(box.ZP,{display:design_system.bA.FLEX},react.createElement(identicon.Z,{address:senderAddress,diameter:32}),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd,as:"h5",marginLeft:2,className:"set-approval-for-all-warning__content__account-name"},react.createElement("strong",null,name)," ",` (${(0,util.$Q)(senderAddress)})`)),isERC721&&total&&react.createElement(component_library.xv,null,`${t("total")}: ${total}`)),react.createElement(component_library.xv,{margin:4,marginTop:4,marginBottom:4,variant:design_system.rK.bodySm,as:"h6"},t("nftWarningContent",[react.createElement("strong",{key:"non_custodial_bold"},t("nftWarningContentBold",[collectionName||""])),react.createElement("strong",{key:"non_custodial_grey"},t("nftWarningContentGrey"))])))};SetApproveForAllWarning.propTypes={collectionName:prop_types_default().string,senderAddress:prop_types_default().string,name:prop_types_default().string,total:prop_types_default().string,isERC721:prop_types_default().bool,onSubmit:prop_types_default().func,onCancel:prop_types_default().func},SetApproveForAllWarning.__docgenInfo={description:"",methods:[],displayName:"SetApproveForAllWarning",props:{collectionName:{description:"NFT collection name that is being approved",type:{name:"string"},required:!1},senderAddress:{description:"Address of a current user that is approving collection",type:{name:"string"},required:!1},name:{description:"Name of a current user that is approving collection",type:{name:"string"},required:!1},total:{description:"Total number of items that are being approved",type:{name:"string"},required:!1},isERC721:{description:"Is asset standard ERC721",type:{name:"bool"},required:!1},onSubmit:{description:"Function that approves collection",type:{name:"func"},required:!1},onCancel:{description:"Function that rejects collection",type:{name:"func"},required:!1}}};const set_approval_for_all_warning=SetApproveForAllWarning},"./ui/components/ui/tabs/snaps/dropdown-tab/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>dropdown_tab});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),dropdown=__webpack_require__("./ui/components/ui/dropdown/index.js");const DropdownTab=({activeClassName,className,"data-testid":dataTestId,isActive,onClick,onChange,tabIndex,options,selectedOption})=>{var _options$find;const[isOpen,setIsOpen]=(0,react.useState)(!1),dropdownRef=(0,react.useRef)(null),selectOption=(0,react.useCallback)((option=>{onChange(option)}),[onChange]),selectedOptionName=null===(_options$find=options.find((option=>option.value===selectedOption)))||void 0===_options$find?void 0:_options$find.name;return(0,react.useEffect)((()=>{function handleClickOutside(event){dropdownRef.current&&!dropdownRef.current.contains(event.target)&&isOpen&&setIsOpen(!1)}return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[dropdownRef,isOpen]),react.createElement(component_library.xu,{as:"li",className:classnames_default()("tab",className,"transaction-insight-dropdown-wrapper",{"tab--active":isActive,[activeClassName]:activeClassName&&isActive}),"data-testid":dataTestId,onClick:event=>{event.preventDefault(),onClick(tabIndex)},dataTestId,flexDirection:design_system.Qb.Row,flexWrap:design_system.gP.NoWrap,height:design_system.Sw.Full,style:{cursor:"pointer",position:"relative",overflow:"visible"},title:selectedOptionName},react.createElement(dropdown.Z,{className:"transaction-insight-dropdown",onChange:option=>selectOption(option),options,selectedOption,title:"Transaction Insights",style:{pointerEvents:isActive?"auto":"none"}}))};DropdownTab.propTypes={activeClassName:prop_types_default().string,className:prop_types_default().string,"data-testid":prop_types_default().string,isActive:prop_types_default().bool,options:prop_types_default().arrayOf(prop_types_default().exact({name:prop_types_default().string,value:prop_types_default().string.isRequired})).isRequired,selectedOption:prop_types_default().string,onChange:prop_types_default().func,onClick:prop_types_default().func,tabIndex:prop_types_default().number},DropdownTab.defaultProps={activeClassName:void 0,className:void 0,onChange:void 0,onClick:void 0,selectedOption:void 0},DropdownTab.__docgenInfo={description:"",methods:[],displayName:"DropdownTab",props:{activeClassName:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},className:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},onChange:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"func"},required:!1},onClick:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"func"},required:!1},selectedOption:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},"data-testid":{description:"",type:{name:"string"},required:!1},isActive:{description:"",type:{name:"bool"},required:!1},options:{description:"",type:{name:"arrayOf",value:{name:"exact",value:{name:{name:"string",required:!1},value:{name:"string",required:!0}}}},required:!0},tabIndex:{description:"",type:{name:"number"},required:!1}}};const dropdown_tab=DropdownTab},"?a04e":()=>{},"?cbdd":()=>{},"?9581":()=>{},"?e2bf":()=>{},"?5316":()=>{},"?ed1b":()=>{},"?d17e":()=>{}}]);