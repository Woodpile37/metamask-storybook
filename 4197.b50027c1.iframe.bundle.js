"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[4197],{"./ui/components/app/contact-list/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ContactList});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),recipient_group_component=__webpack_require__("./ui/components/app/contact-list/recipient-group/recipient-group.component.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ContactList extends react.PureComponent{constructor(...args){super(...args),_defineProperty(this,"state",{isShowingAllRecent:!1})}renderRecents(){const{t}=this.context,{isShowingAllRecent}=this.state,nonContacts=this.props.searchForRecents(),showLoadMore=!isShowingAllRecent&&nonContacts.length>2;return react.createElement("div",{className:"send__select-recipient-wrapper__recent-group-wrapper"},showLoadMore&&react.createElement(ui_button.Z,{type:"link",className:"send__select-recipient-wrapper__recent-group-wrapper__load-more",onClick:()=>this.setState({isShowingAllRecent:!0})},t("loadMore")))}renderAddressBook(){const unsortedContactsByLetter=this.props.searchForContacts().reduce(((obj,contact)=>{const firstLetter=contact.name[0].toUpperCase();return{...obj,[firstLetter]:[...obj[firstLetter]||[],contact]}}),{});return Object.keys(unsortedContactsByLetter).sort().map((letter=>[letter,(0,lodash.sortBy)(unsortedContactsByLetter[letter],(contact=>contact.name.toLowerCase()))])).map((([letter,groupItems])=>react.createElement(recipient_group_component.Z,{key:`${letter}-contact-group`,label:letter,items:groupItems,onSelect:this.props.selectRecipient,selectedAddress:this.props.selectedAddress})))}renderMyAccounts(){const myAccounts=this.props.searchForMyAccounts();return react.createElement(recipient_group_component.Z,{items:myAccounts,onSelect:this.props.selectRecipient,selectedAddress:this.props.selectedAddress})}render(){const{children,searchForRecents,searchForContacts,searchForMyAccounts}=this.props;return react.createElement("div",{className:"send__select-recipient-wrapper__list"},children||null,searchForRecents?this.renderRecents():null,searchForContacts?this.renderAddressBook():null,searchForMyAccounts?this.renderMyAccounts():null)}}_defineProperty(ContactList,"propTypes",{searchForContacts:prop_types_default().func,searchForRecents:prop_types_default().func,searchForMyAccounts:prop_types_default().func,selectRecipient:prop_types_default().func,children:prop_types_default().node,selectedAddress:prop_types_default().string}),_defineProperty(ContactList,"contextTypes",{t:prop_types_default().func}),ContactList.__docgenInfo={description:"",methods:[{name:"renderRecents",docblock:null,modifiers:[],params:[],returns:null},{name:"renderAddressBook",docblock:null,modifiers:[],params:[],returns:null},{name:"renderMyAccounts",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ContactList",props:{searchForContacts:{description:"",type:{name:"func"},required:!1},searchForRecents:{description:"",type:{name:"func"},required:!1},searchForMyAccounts:{description:"",type:{name:"func"},required:!1},selectRecipient:{description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"node"},required:!1},selectedAddress:{description:"",type:{name:"string"},required:!1}},context:{t:{type:{name:"func"},required:!1}}}},"./ui/components/app/contact-list/recipient-group/recipient-group.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RecipientGroup});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_ui_identicon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/ui/identicon/index.js"),_pages_send_send_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/pages/send/send.utils.js"),_ui_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/ui/box/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_component_library__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/component-library/index.ts"),_multichain__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/components/multichain/index.js"),process=__webpack_require__("./node_modules/process/browser.js");function addressesEqual(address1,address2){return String(address1).toLowerCase()===String(address2).toLowerCase()}function RecipientGroup({label,items,onSelect,selectedAddress}){return items&&items.length?process.env.MULTICHAIN?items.map((({address,name})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_multichain__WEBPACK_IMPORTED_MODULE_7__.zS,{address,label:name,onClick:()=>onSelect(address,name),key:address}))):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{className:"send__select-recipient-wrapper__group","data-testid":"recipient-group"},label&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{className:"send__select-recipient-wrapper__group-label",marginTop:2,marginBottom:2,marginLeft:4,marginRight:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.rK.bodyMd},label)),items.map((({address,name})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{key:address,onClick:()=>onSelect(address,name),className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({"send__select-recipient-wrapper__group-item":!addressesEqual(address,selectedAddress),"send__select-recipient-wrapper__group-item--selected":addressesEqual(address,selectedAddress)}),padding:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_identicon__WEBPACK_IMPORTED_MODULE_2__.Z,{address,diameter:28}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_4__.ZP,{className:"send__select-recipient-wrapper__group-item__content","data-testid":"recipient"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.rK.bodyLgMedium,className:"send__select-recipient-wrapper__group-item__title"},name||(0,_pages_send_send_utils__WEBPACK_IMPORTED_MODULE_3__.ZB)(address)),name&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_6__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.rK.bodyMd,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.d9.textAlternative,className:"send__select-recipient-wrapper__group-item__subtitle"},(0,_pages_send_send_utils__WEBPACK_IMPORTED_MODULE_3__.ZB)(address))))))):null}RecipientGroup.propTypes={label:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,items:prop_types__WEBPACK_IMPORTED_MODULE_8___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_8___default().shape({address:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string.isRequired,name:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string})),onSelect:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func.isRequired,selectedAddress:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string},RecipientGroup.__docgenInfo={description:"",methods:[],displayName:"RecipientGroup",props:{label:{description:"",type:{name:"string"},required:!1},items:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{address:{name:"string",required:!0},name:{name:"string",required:!1}}}},required:!1},onSelect:{description:"",type:{name:"func"},required:!0},selectedAddress:{description:"",type:{name:"string"},required:!1}}}},"./ui/components/ui/page-container/page-container-footer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>PageContainerFooter});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),ui_button=__webpack_require__("./ui/components/ui/button/index.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class PageContainerFooter extends react.Component{render(){const{children,onCancel,cancelText,onSubmit,submitText,disabled,submitButtonType,hideCancel,cancelButtonType,buttonSizeLarge=!1,footerClassName,footerButtonClassName}=this.props;return react.createElement("div",{className:classnames_default()("page-container__footer",footerClassName)},react.createElement("footer",null,!hideCancel&&react.createElement(ui_button.Z,{type:cancelButtonType||"secondary",large:buttonSizeLarge,className:classnames_default()("page-container__footer-button","page-container__footer-button__cancel",footerButtonClassName),onClick:e=>onCancel(e),"data-testid":"page-container-footer-cancel"},cancelText||this.context.t("cancel")),react.createElement(ui_button.Z,{type:submitButtonType||"primary",large:buttonSizeLarge,className:classnames_default()("page-container__footer-button",footerButtonClassName),disabled,onClick:e=>onSubmit(e),"data-testid":"page-container-footer-next"},submitText||this.context.t("next"))),children&&react.createElement("div",{className:"page-container__footer-secondary"},children))}}_defineProperty(PageContainerFooter,"propTypes",{children:prop_types_default().node,onCancel:prop_types_default().func,cancelText:prop_types_default().string,cancelButtonType:prop_types_default().string,onSubmit:prop_types_default().func,submitText:prop_types_default().string,disabled:prop_types_default().bool,submitButtonType:prop_types_default().string,hideCancel:prop_types_default().bool,buttonSizeLarge:prop_types_default().bool,footerClassName:prop_types_default().string,footerButtonClassName:prop_types_default().string}),_defineProperty(PageContainerFooter,"contextTypes",{t:prop_types_default().func}),PageContainerFooter.__docgenInfo={description:"",methods:[],displayName:"PageContainerFooter",props:{children:{description:"",type:{name:"node"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},cancelText:{description:"",type:{name:"string"},required:!1},cancelButtonType:{description:"",type:{name:"string"},required:!1},onSubmit:{description:"",type:{name:"func"},required:!1},submitText:{description:"",type:{name:"string"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},submitButtonType:{description:"",type:{name:"string"},required:!1},hideCancel:{description:"",type:{name:"bool"},required:!1},buttonSizeLarge:{description:"",type:{name:"bool"},required:!1},footerClassName:{description:"",type:{name:"string"},required:!1},footerButtonClassName:{description:"",type:{name:"string"},required:!1}},context:{t:{type:{name:"func"},required:!1}}}},"./ui/pages/settings/contact-list-tab/contact-list-tab.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ContactListTab});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),contact_list=__webpack_require__("./ui/components/app/contact-list/index.js"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),settings_search=__webpack_require__("./ui/helpers/utils/settings-search.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),redux=__webpack_require__("./node_modules/redux/es/redux.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),selectors=__webpack_require__("./ui/selectors/index.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),actions=__webpack_require__("./ui/store/actions.ts"),button_component=__webpack_require__("./ui/components/ui/button/button.component.js"),text_field=__webpack_require__("./ui/components/ui/text-field/index.js"),page_container_footer=__webpack_require__("./ui/components/ui/page-container/page-container-footer/index.js"),hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class EditContact extends react.PureComponent{constructor(...args){super(...args),_defineProperty(this,"state",{newName:this.props.name,newAddress:this.props.address,newMemo:this.props.memo,error:""})}render(){const{t}=this.context,{address,addToAddressBook,chainId,history,listRoute,memo,name,removeFromAddressBook,viewRoute}=this.props;return address?react.createElement("div",{className:"settings-page__content-row address-book__edit-contact"},react.createElement(component_library.xu,{className:"settings-page__header address-book__header--edit",paddingLeft:6,paddingRight:6},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center},react.createElement(component_library.pw,{size:component_library.qi.Lg,address}),react.createElement(component_library.xv,{className:"address-book__header__name",variant:design_system.rK.bodyLgMedium,marginInlineStart:4},name||address)),react.createElement(button_component.Z,{type:"link",className:"settings-page__address-book-button",onClick:async()=>{await removeFromAddressBook(chainId,address),history.push(listRoute)}},t("deleteContact"))),react.createElement("div",{className:"address-book__edit-contact__content"},react.createElement("div",{className:"address-book__view-contact__group"},react.createElement("div",{className:"address-book__view-contact__group__label"},t("userName")),react.createElement(text_field.Z,{type:"text",id:"nickname",placeholder:this.context.t("addAlias"),value:this.state.newName,onChange:e=>this.setState({newName:e.target.value}),fullWidth:!0,margin:"dense"})),react.createElement("div",{className:"address-book__view-contact__group"},react.createElement("div",{className:"address-book__view-contact__group__label"},t("ethereumPublicAddress")),react.createElement(text_field.Z,{type:"text",id:"address",value:this.state.newAddress,error:this.state.error,onChange:e=>this.setState({newAddress:e.target.value}),fullWidth:!0,multiline:!0,rows:4,margin:"dense",classes:{inputMultiline:"address-book__view-contact__address__text-area",inputRoot:"address-book__view-contact__address"}})),react.createElement("div",{className:"address-book__view-contact__group"},react.createElement("div",{className:"address-book__view-contact__group__label--capitalized"},t("memo")),react.createElement(text_field.Z,{type:"text",id:"memo",placeholder:memo,value:this.state.newMemo,onChange:e=>this.setState({newMemo:e.target.value}),fullWidth:!0,margin:"dense",multiline:!0,rows:3,classes:{inputMultiline:"address-book__view-contact__text-area",inputRoot:"address-book__view-contact__text-area-wrapper"}}))),react.createElement(page_container_footer.Z,{cancelText:this.context.t("cancel"),onSubmit:async()=>{""!==this.state.newAddress&&this.state.newAddress!==address?!(0,hexstring_utils.MN)(this.state.newAddress)&&(0,hexstring_utils.Pv)(this.state.newAddress,{mixedCaseUseChecksum:!0})?(await removeFromAddressBook(chainId,address),await addToAddressBook(this.state.newAddress,this.state.newName||name,this.state.newMemo||memo),history.push(listRoute)):this.setState({error:this.context.t("invalidAddress")}):(await addToAddressBook(address,this.state.newName||name,this.state.newMemo||memo),history.push(listRoute))},onCancel:()=>{history.push(`${viewRoute}/${address}`)},submitText:this.context.t("save"),disabled:this.state.newName===name&&this.state.newAddress===address&&this.state.newMemo===memo||!this.state.newName.trim()})):react.createElement(react_router.l_,{to:{pathname:listRoute}})}}_defineProperty(EditContact,"contextTypes",{t:prop_types_default().func}),_defineProperty(EditContact,"propTypes",{addToAddressBook:prop_types_default().func,removeFromAddressBook:prop_types_default().func,history:prop_types_default().object,name:prop_types_default().string,address:prop_types_default().string,chainId:prop_types_default().string,memo:prop_types_default().string,viewRoute:prop_types_default().string,listRoute:prop_types_default().string}),_defineProperty(EditContact,"defaultProps",{name:"",memo:""}),EditContact.__docgenInfo={description:"",methods:[],displayName:"EditContact",props:{name:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},memo:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},addToAddressBook:{description:"",type:{name:"func"},required:!1},removeFromAddressBook:{description:"",type:{name:"func"},required:!1},history:{description:"",type:{name:"object"},required:!1},address:{description:"",type:{name:"string"},required:!1},chainId:{description:"",type:{name:"string"},required:!1},viewRoute:{description:"",type:{name:"string"},required:!1},listRoute:{description:"",type:{name:"string"},required:!1}},context:{t:{type:{name:"func"},required:!1}}};const edit_contact_container=(0,redux.compose)(react_router.EN,(0,es.$j)(((state,ownProps)=>{const{location}=ownProps,{pathname}=location,pathNameTail=pathname.match(/[^/]+$/u)[0],address=pathNameTail.includes("0x")?pathNameTail.toLowerCase():ownProps.match.params.id,contact=(0,selectors.e5t)(state,address)||state.metamask.identities[address],{memo,name}=contact||{},{chainId}=(0,metamask.Vu)(state);return{address:contact?address:null,chainId,name,memo,viewRoute:routes.T$,listRoute:routes.Ip}}),(dispatch=>({addToAddressBook:(recipient,nickname,memo)=>dispatch((0,actions.Wbu)(recipient,nickname,memo)),removeFromAddressBook:(chainId,addressToRemove)=>dispatch((0,actions.Dcx)(chainId,addressToRemove))}))))(EditContact);var app=__webpack_require__("./ui/ducks/app/app.ts"),domains=__webpack_require__("./ui/ducks/domains.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),chunk_VA2DRBDE=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-VA2DRBDE.mjs"),lib_util=__webpack_require__("./app/scripts/lib/util.ts");function domain_input_component_defineProperty(obj,key,value){return(key=function domain_input_component_toPropertyKey(arg){var key=function domain_input_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class DomainInput extends react.Component{constructor(...args){super(...args),domain_input_component_defineProperty(this,"onPaste",(event=>{var _event$clipboardData$;if(null!==(_event$clipboardData$=event.clipboardData.items)&&void 0!==_event$clipboardData$&&_event$clipboardData$.length){const clipboardItem=event.clipboardData.items[0];null==clipboardItem||clipboardItem.getAsString((text=>{const input=text.trim();!(0,hexstring_utils.MN)(input)&&(0,hexstring_utils.Pv)(input,{mixedCaseUseChecksum:!0})&&this.props.onPaste((0,lib_util.L_)(input))}))}})),domain_input_component_defineProperty(this,"onChange",(({target:{value}})=>{const{onValidAddressTyped,internalSearch,onChange,lookupDomainName,resetDomainResolution}=this.props,input=value.trim();if(onChange(input),internalSearch)return null;let isFlask=!1;return isFlask=!0,!(0,chunk_VA2DRBDE.A7)(input)||(0,util.X1)(input)?lookupDomainName(input):(resetDomainResolution(),onValidAddressTyped&&!(0,hexstring_utils.MN)(input)&&(0,hexstring_utils.Pv)(input,{mixedCaseUseChecksum:!0})&&onValidAddressTyped((0,lib_util.L_)(input))),null}))}componentDidMount(){this.props.initializeDomainSlice()}render(){const{t}=this.context,{className,selectedAddress,selectedName,userInput}=this.props,hasSelectedAddress=Boolean(selectedAddress);return react.createElement("div",{className:classnames_default()("ens-input",className)},react.createElement("div",{className:classnames_default()("ens-input__wrapper",{"ens-input__wrapper__status-icon--error":!1,"ens-input__wrapper__status-icon--valid":!1,"ens-input__wrapper--valid":hasSelectedAddress})},hasSelectedAddress?react.createElement(react.Fragment,null,react.createElement("div",{className:"ens-input__wrapper__input ens-input__wrapper__input--selected"},react.createElement("div",{className:"ens-input__selected-input__title"},selectedName||selectedAddress),selectedName!==selectedAddress&&react.createElement("div",{className:"ens-input__selected-input__subtitle"},selectedAddress)),react.createElement(component_library.Ei,{iconName:component_library.uH.Close,ariaLabel:t("close"),onClick:this.props.onReset,className:"ens-input__wrapper__action-icon-button",size:component_library.Jh.Sm})):react.createElement(react.Fragment,null,react.createElement("input",{className:"ens-input__wrapper__input",type:"text",dir:"auto",placeholder:t("recipientAddressPlaceholder"),onChange:this.onChange,onPaste:this.onPaste,spellCheck:"false",value:selectedAddress||userInput,autoFocus:!0,"data-testid":"ens-input"}),react.createElement(component_library.Ei,{className:"ens-input__wrapper__action-icon-button",onClick:()=>{userInput?this.props.onReset():this.props.scanQrCode()},iconName:userInput?component_library.uH.Close:component_library.uH.Scan,ariaLabel:t(userInput?"close":"scanQrCode"),color:userInput?design_system.EY.iconDefault:design_system.EY.primaryDefault,"data-testid":"ens-qr-scan-button"}))))}}domain_input_component_defineProperty(DomainInput,"contextTypes",{t:prop_types_default().func,metricsEvent:prop_types_default().func}),domain_input_component_defineProperty(DomainInput,"propTypes",{className:prop_types_default().string,selectedAddress:prop_types_default().string,selectedName:prop_types_default().string,scanQrCode:prop_types_default().func,onPaste:prop_types_default().func,onValidAddressTyped:prop_types_default().func,internalSearch:prop_types_default().bool,userInput:prop_types_default().string,onChange:prop_types_default().func.isRequired,onReset:prop_types_default().func.isRequired,lookupDomainName:prop_types_default().func.isRequired,initializeDomainSlice:prop_types_default().func.isRequired,resetDomainResolution:prop_types_default().func.isRequired}),DomainInput.__docgenInfo={description:"",methods:[{name:"onPaste",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"{ target: { value } }",type:null}],returns:null}],displayName:"DomainInput",props:{className:{description:"",type:{name:"string"},required:!1},selectedAddress:{description:"",type:{name:"string"},required:!1},selectedName:{description:"",type:{name:"string"},required:!1},scanQrCode:{description:"",type:{name:"func"},required:!1},onPaste:{description:"",type:{name:"func"},required:!1},onValidAddressTyped:{description:"",type:{name:"func"},required:!1},internalSearch:{description:"",type:{name:"bool"},required:!1},userInput:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!0},onReset:{description:"",type:{name:"func"},required:!0},lookupDomainName:{description:"",type:{name:"func"},required:!0},initializeDomainSlice:{description:"",type:{name:"func"},required:!0},resetDomainResolution:{description:"",type:{name:"func"},required:!0}},context:{t:{type:{name:"func"},required:!1},metricsEvent:{type:{name:"func"},required:!1}}};const domain_input_container=(0,es.$j)(null,(function domain_input_container_mapDispatchToProps(dispatch){return{lookupDomainName:(0,lodash.debounce)((domainName=>dispatch((0,domains.iP)(domainName))),150),initializeDomainSlice:()=>dispatch((0,domains.hr)()),resetDomainResolution:(0,lodash.debounce)((()=>dispatch((0,domains.cU)())),300)}}))(DomainInput);var send_constants=__webpack_require__("./ui/pages/send/send.constants.js");function add_contact_component_defineProperty(obj,key,value){return(key=function add_contact_component_toPropertyKey(arg){var key=function add_contact_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class AddContact extends react.PureComponent{constructor(props){super(props),add_contact_component_defineProperty(this,"state",{newName:"",ethAddress:"",error:"",input:""}),add_contact_component_defineProperty(this,"validate",(address=>{const valid=!(0,hexstring_utils.MN)(address)&&(0,hexstring_utils.Pv)(address,{mixedCaseUseChecksum:!0}),validEnsAddress=(0,util.X1)(address);valid||validEnsAddress||""===address?this.setState({error:"",ethAddress:address}):this.setState({error:send_constants.yJ})})),add_contact_component_defineProperty(this,"onChange",(input=>{this.setState({input}),this.dValidate(input)})),this.dValidate=(0,lodash.debounce)(this.validate,500)}UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.qrCodeData&&"address"===nextProps.qrCodeData.type){const{domainResolution}=this.props,scannedAddress=nextProps.qrCodeData.values.address.toLowerCase();(domainResolution||this.state.ethAddress).toLowerCase()!==scannedAddress&&(this.setState({input:scannedAddress}),this.validate(scannedAddress),this.props.qrCodeDetected(null))}}renderInput(){return react.createElement(domain_input_container,{scanQrCode:_=>{this.props.scanQrCode()},onChange:this.onChange,onPaste:text=>{this.setState({input:text}),this.validate(text)},onReset:()=>{this.props.resetDomainResolution(),this.setState({ethAddress:"",input:""})},userInput:this.state.input})}render(){const{t}=this.context,{history,addToAddressBook,domainError,domainResolution}=this.props,errorToRender=domainError||this.state.error;return react.createElement("div",{className:"settings-page__content-row address-book__add-contact"},domainResolution&&react.createElement("div",{className:"address-book__view-contact__group"},react.createElement(identicon.Z,{address:domainResolution,diameter:60}),react.createElement("div",{className:"address-book__view-contact__group__value"},domainResolution)),react.createElement("div",{className:"address-book__add-contact__content"},react.createElement("div",{className:"address-book__view-contact__group address-book__add-contact__content__username"},react.createElement("div",{className:"address-book__view-contact__group__label"},t("userName")),react.createElement(text_field.Z,{type:"text",id:"nickname",value:this.state.newName,onChange:e=>this.setState({newName:e.target.value}),fullWidth:!0,margin:"dense"})),react.createElement("div",{className:"address-book__view-contact__group"},react.createElement("div",{className:"address-book__view-contact__group__label"},t("ethereumPublicAddress")),this.renderInput(),errorToRender&&react.createElement("div",{className:"address-book__add-contact__error"},t(errorToRender)))),react.createElement(page_container_footer.Z,{cancelText:this.context.t("cancel"),disabled:Boolean(this.state.error||!this.state.ethAddress||!this.state.newName.trim()),onSubmit:async()=>{await addToAddressBook(domainResolution||this.state.ethAddress,this.state.newName),history.push(routes.Ip)},onCancel:()=>{history.push(routes.Ip)},submitText:this.context.t("save")}))}}add_contact_component_defineProperty(AddContact,"contextTypes",{t:prop_types_default().func}),add_contact_component_defineProperty(AddContact,"propTypes",{addToAddressBook:prop_types_default().func,history:prop_types_default().object,scanQrCode:prop_types_default().func,qrCodeData:prop_types_default().object,qrCodeDetected:prop_types_default().func,domainResolution:prop_types_default().string,domainError:prop_types_default().string,resetDomainResolution:prop_types_default().func}),AddContact.__docgenInfo={description:"",methods:[{name:"validate",docblock:null,modifiers:[],params:[{name:"address",type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"input",type:null}],returns:null},{name:"renderInput",docblock:null,modifiers:[],params:[],returns:null}],displayName:"AddContact",props:{addToAddressBook:{description:"",type:{name:"func"},required:!1},history:{description:"",type:{name:"object"},required:!1},scanQrCode:{description:"",type:{name:"func"},required:!1},qrCodeData:{description:"",type:{name:"object"},required:!1},qrCodeDetected:{description:"",type:{name:"func"},required:!1},domainResolution:{description:"",type:{name:"string"},required:!1},domainError:{description:"",type:{name:"string"},required:!1},resetDomainResolution:{description:"",type:{name:"func"},required:!1}},context:{t:{type:{name:"func"},required:!1}}};const add_contact_container=(0,redux.compose)(react_router.EN,(0,es.$j)((state=>({qrCodeData:(0,app.vd)(state),domainError:(0,domains._1)(state),domainResolution:(0,domains.xW)(state)})),(dispatch=>({addToAddressBook:(recipient,nickname)=>dispatch((0,actions.Wbu)(recipient,nickname)),scanQrCode:()=>dispatch((0,actions.Si)()),qrCodeDetected:data=>dispatch((0,actions.IQ0)(data)),resetDomainResolution:()=>dispatch((0,domains.cU)())}))))(AddContact);var tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),useCopyToClipboard=__webpack_require__("./ui/hooks/useCopyToClipboard.js");function ViewContact({history,name,address,checkSummedAddress,memo,editRoute,listRoute}){const t=(0,useI18nContext.C)(),[copied,handleCopy]=(0,useCopyToClipboard.m)();return address?react.createElement("div",{className:"settings-page__content-row"},react.createElement("div",{className:"settings-page__content-item"},react.createElement(component_library.xu,{className:"settings-page__header address-book__header",paddingLeft:6},react.createElement(component_library.pw,{size:component_library.qi.Lg,address}),react.createElement(component_library.xv,{className:"address-book__header__name",variant:design_system.rK.bodyLgMedium,marginInlineStart:4},name||address)),react.createElement("div",{className:"address-book__view-contact__group"},react.createElement(button_component.Z,{type:"secondary",onClick:()=>{history.push(`${editRoute}/${address}`)}},t("edit"))),react.createElement("div",{className:"address-book__view-contact__group"},react.createElement("div",{className:"address-book__view-contact__group__label"},t("ethereumPublicAddress")),react.createElement("div",{className:"address-book__view-contact__group__value"},react.createElement("div",{className:"address-book__view-contact__group__static-address"},function quadSplit(address){return`0x${address.slice(2).match(/.{1,4}/gu).join("")}`}(checkSummedAddress)),react.createElement(tooltip.Z,{position:"bottom",title:t(copied?"copiedExclamation":"copyToClipboard")},react.createElement(component_library.Ei,{ariaLabel:"copy",className:"address-book__view-contact__group__static-address--copy-icon",onClick:()=>{handleCopy(checkSummedAddress)},iconName:copied?component_library.uH.CopySuccess:component_library.uH.Copy,size:component_library.hp.Lg,color:design_system.EY.primaryDefault})))),memo.length>0?react.createElement("div",{className:"address-book__view-contact__group"},react.createElement("div",{className:"address-book__view-contact__group__label--capitalized"},t("memo")),react.createElement("div",{className:"address-book__view-contact__group__static-address"},memo)):null)):react.createElement(react_router.l_,{to:{pathname:listRoute}})}ViewContact.propTypes={name:prop_types_default().string,address:prop_types_default().string,history:prop_types_default().object,checkSummedAddress:prop_types_default().string,memo:prop_types_default().string,editRoute:prop_types_default().string,listRoute:prop_types_default().string.isRequired},ViewContact.__docgenInfo={description:"",methods:[],displayName:"ViewContact",props:{name:{description:"",type:{name:"string"},required:!1},address:{description:"",type:{name:"string"},required:!1},history:{description:"",type:{name:"object"},required:!1},checkSummedAddress:{description:"",type:{name:"string"},required:!1},memo:{description:"",type:{name:"string"},required:!1},editRoute:{description:"",type:{name:"string"},required:!1},listRoute:{description:"",type:{name:"string"},required:!0}}};const view_contact_component=react.memo(ViewContact),view_contact_container=(0,redux.compose)(react_router.EN,(0,es.$j)(((state,ownProps)=>{const{location}=ownProps,{pathname}=location,pathNameTail=pathname.match(/[^/]+$/u)[0],address=pathNameTail.includes("0x")?pathNameTail.toLowerCase():ownProps.match.params.id,contact=(0,selectors.e5t)(state,address)||state.metamask.identities[address],{memo,name}=contact||{};return{name,address:contact?address:null,checkSummedAddress:(0,hexstring_utils.QG)(address),memo,editRoute:routes.lH,listRoute:routes.Ip}})))(view_contact_component);function contact_list_tab_component_defineProperty(obj,key,value){return(key=function contact_list_tab_component_toPropertyKey(arg){var key=function contact_list_tab_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class ContactListTab extends react.Component{constructor(...args){super(...args),contact_list_tab_component_defineProperty(this,"settingsRefs",Array((0,settings_search.Oc)(this.context.t,this.context.t("contacts"))).fill(void 0).map((()=>react.createRef())))}componentDidUpdate(){const{t}=this.context;(0,settings_search.n4)(t,t("contacts"),this.settingsRefs)}componentDidMount(){const{t}=this.context;(0,settings_search.n4)(t,t("contacts"),this.settingsRefs)}renderAddresses(){const{addressBook,history,selectedAddress}=this.props,contacts=addressBook.filter((({name})=>Boolean(name))),nonContacts=addressBook.filter((({name})=>!name)),{t}=this.context;return addressBook.length?react.createElement("div",null,react.createElement(contact_list.Z,{searchForContacts:()=>contacts,searchForRecents:()=>nonContacts,selectRecipient:address=>{history.push(`${routes.T$}/${address}`)},selectedAddress})):react.createElement("div",{className:"address-book__container"},react.createElement("div",null,react.createElement(component_library.JO,{name:component_library.uH.Book,color:design_system.EY.iconMuted,className:"address-book__icon",size:component_library.Jh.Xl}),react.createElement("h4",{className:"address-book__title"},t("buildContactList")),react.createElement("p",{className:"address-book__sub-title"},t("addFriendsAndAddresses")),react.createElement("button",{className:"address-book__link",onClick:()=>{history.push(routes.tT)}},"+ ",t("addContact"))))}renderAddButton(){const{history,viewingContact,editingContact}=this.props;return react.createElement(component_library.DF,{className:classnames_default()("address-book-add-button__button",{"address-book-add-button__button--hidden":viewingContact||editingContact}),onClick:()=>{history.push(routes.tT)},margin:4,size:design_system.$u.LG},this.context.t("addContact"))}renderContactContent(){const{viewingContact,editingContact,addingContact}=this.props;let ContactContentComponent=null;return viewingContact?ContactContentComponent=view_contact_container:editingContact?ContactContentComponent=edit_contact_container:addingContact&&(ContactContentComponent=add_contact_container),ContactContentComponent&&react.createElement("div",{className:"address-book-contact-content"},react.createElement(ContactContentComponent,null))}renderAddressBookContent(){const{hideAddressBook}=this.props;return hideAddressBook?null:react.createElement("div",{ref:this.settingsRefs[0],className:"address-book"},this.renderAddresses())}render(){const{addingContact,addressBook,currentPath}=this.props;return react.createElement("div",{className:"address-book-wrapper"},this.renderAddressBookContent(),this.renderContactContent(),currentPath===routes.Ip&&!addingContact&&addressBook.length>0?this.renderAddButton():null)}}contact_list_tab_component_defineProperty(ContactListTab,"contextTypes",{t:prop_types_default().func}),contact_list_tab_component_defineProperty(ContactListTab,"propTypes",{addressBook:prop_types_default().array,history:prop_types_default().object,selectedAddress:prop_types_default().string,viewingContact:prop_types_default().bool,editingContact:prop_types_default().bool,addingContact:prop_types_default().bool,hideAddressBook:prop_types_default().bool,currentPath:prop_types_default().string}),ContactListTab.__docgenInfo={description:"",methods:[{name:"renderAddresses",docblock:null,modifiers:[],params:[],returns:null},{name:"renderAddButton",docblock:null,modifiers:[],params:[],returns:null},{name:"renderContactContent",docblock:null,modifiers:[],params:[],returns:null},{name:"renderAddressBookContent",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ContactListTab",props:{addressBook:{description:"",type:{name:"array"},required:!1},history:{description:"",type:{name:"object"},required:!1},selectedAddress:{description:"",type:{name:"string"},required:!1},viewingContact:{description:"",type:{name:"bool"},required:!1},editingContact:{description:"",type:{name:"bool"},required:!1},addingContact:{description:"",type:{name:"bool"},required:!1},hideAddressBook:{description:"",type:{name:"bool"},required:!1},currentPath:{description:"",type:{name:"string"},required:!1}},context:{t:{type:{name:"func"},required:!1}}}}}]);