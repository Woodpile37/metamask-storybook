"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[9288],{"./ui/components/ui/form-combo-field/form-combo-field.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,NoOptionsStory:()=>NoOptionsStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory$paramet,_DefaultStory$paramet2,_NoOptionsStory$param,_NoOptionsStory$param2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_form_combo_field__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/ui/form-combo-field/form-combo-field.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const __WEBPACK_DEFAULT_EXPORT__={title:"Components/UI/FormComboField",component:_form_combo_field__WEBPACK_IMPORTED_MODULE_1__.Z,argTypes:{value:{control:"text",description:"The value to display in the field."},options:{control:"object",description:"The options to display in the dropdown.<br/><br/>\n        Must be an array of objects with a `primaryLabel` and optionally a `secondaryLabel` property."},placeholder:{control:"text",description:"The placeholder text to display in the field when the value is empty."},noOptionsText:{control:"text",description:"The text to display in the dropdown when there are no options to display.",table:{defaultValue:{summary:"No options found"}}},maxDropdownHeight:{control:"number",description:"The maximum height of the dropdown in pixels.",table:{defaultValue:{summary:179}}},onChange:{description:"Optional callback function to invoke when the value changes."},onOptionClick:{description:"Optional callback function to invoke when a dropdown option is clicked."}},args:{value:void 0,options:[{primaryLabel:"Berlin",secondaryLabel:"Germany"},{primaryLabel:"London",secondaryLabel:"United Kingdom"},{primaryLabel:"Lisbon",secondaryLabel:"Portugal"},{primaryLabel:"Paris",secondaryLabel:"France"}],placeholder:"Specify a city...",noOptionsText:void 0,maxDropdownHeight:void 0,onChange:void 0,onOptionClick:void 0},parameters:{docs:{description:{component:"A form field that supports free text entry or the selection of a value from an attached dropdown list."}}}},DefaultStory=args=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),handleChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((newValue=>{setValue(newValue)}),[setValue]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{height:300}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_combo_field__WEBPACK_IMPORTED_MODULE_1__.Z,_extends({},args,{onChange:handleChange,value})))};DefaultStory.storyName="With Options";const NoOptionsStory=()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),handleChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((newValue=>{setValue(newValue)}),[setValue]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{height:300}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_combo_field__WEBPACK_IMPORTED_MODULE_1__.Z,{value,options:[],placeholder:"Specify a city...",noOptionsText:"No cities found",onChange:handleChange}))};NoOptionsStory.storyName="No Options",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => {\n  const [value, setValue] = useState('');\n  const handleChange = useCallback((newValue: string) => {\n    setValue(newValue);\n  }, [setValue]);\n  return <div style={{\n    height: 300\n  }}>\n      <FormComboField {...args} onChange={handleChange} value={value} />\n    </div>;\n}",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}},NoOptionsStory.parameters={...NoOptionsStory.parameters,docs:{...null===(_NoOptionsStory$param=NoOptionsStory.parameters)||void 0===_NoOptionsStory$param?void 0:_NoOptionsStory$param.docs,source:{originalSource:'() => {\n  const [value, setValue] = useState(\'\');\n  const handleChange = useCallback((newValue: string) => {\n    setValue(newValue);\n  }, [setValue]);\n  return <div style={{\n    height: 300\n  }}>\n      <FormComboField value={value} options={[]} placeholder="Specify a city..." noOptionsText="No cities found" onChange={handleChange} />\n    </div>;\n}',...null===(_NoOptionsStory$param2=NoOptionsStory.parameters)||void 0===_NoOptionsStory$param2||null===(_NoOptionsStory$param2=_NoOptionsStory$param2.docs)||void 0===_NoOptionsStory$param2?void 0:_NoOptionsStory$param2.source}}};const __namedExportsOrder=["DefaultStory","NoOptionsStory"];try{formcombofieldstories.displayName="formcombofieldstories",formcombofieldstories.__docgenInfo={description:"A form field that supports free text entry or the selection of a value from an attached dropdown list.",displayName:"formcombofieldstories",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/ui/form-combo-field/form-combo-field.stories.tsx#formcombofieldstories"]={docgenInfo:formcombofieldstories.__docgenInfo,name:"formcombofieldstories",path:"ui/components/ui/form-combo-field/form-combo-field.stories.tsx#formcombofieldstories"})}catch(__react_docgen_typescript_loader_error){}try{DefaultStory.displayName="DefaultStory",DefaultStory.__docgenInfo={description:"",displayName:"DefaultStory",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/ui/form-combo-field/form-combo-field.stories.tsx#DefaultStory"]={docgenInfo:DefaultStory.__docgenInfo,name:"DefaultStory",path:"ui/components/ui/form-combo-field/form-combo-field.stories.tsx#DefaultStory"})}catch(__react_docgen_typescript_loader_error){}},"./ui/components/ui/form-combo-field/form-combo-field.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>FormComboField});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_component_library_form_text_field_deprecated__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/components/component-library/form-text-field/deprecated/index.js"),_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/contexts/i18n.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/constants/design-system.ts");function Option({option,onClick}){const handleClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),onClick(option)}),[onClick,option]),{primaryLabel,secondaryLabel}=option;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{tabIndex:0,className:"form-combo-field__option",onClick:handleClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"form-combo-field__option-primary"},primaryLabel),secondaryLabel?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"form-combo-field__option-secondary"},secondaryLabel):null)}function Dropdown({hideDropdownIfNoOptions,maxDropdownHeight,noOptionsText,onOptionClick,options,width}){const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__.OO),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),maxHeight=maxDropdownHeight??179,[dropdownHeight,setDropdownHeight]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{var _ref$current;setDropdownHeight((null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.scrollHeight)??0)})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref,style:{width,maxHeight},className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({"form-combo-field__dropdown":!0,"form-combo-field__dropdown__scroll":dropdownHeight>maxHeight})},0===options.length&&!hideDropdownIfNoOptions&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Option,{option:{primaryLabel:noOptionsText??t("comboNoOptions")},onClick:()=>onOptionClick(void 0)}),options.map(((option,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Option,{key:index,option,onClick:()=>{onOptionClick(option)}}))))}function FormComboField({hideDropdownIfNoOptions=!1,maxDropdownHeight,noOptionsText,onChange,onOptionClick,options,placeholder,value}){const[dropdownVisible,setDropdownVisible]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),valueRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),[valueWidth,setValueWidth]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__.OO);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{var _valueRef$current;setValueWidth(null===(_valueRef$current=valueRef.current)||void 0===_valueRef$current?void 0:_valueRef$current.offsetWidth)}));const handleBlur=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{var _e$relatedTarget;"form-combo-field__option"!==(null==e||null===(_e$relatedTarget=e.relatedTarget)||void 0===_e$relatedTarget?void 0:_e$relatedTarget.className)&&setDropdownVisible(!1)}),[setDropdownVisible]),handleChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{null==onChange||onChange(e.target.value)}),[onChange]),handleOptionClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((option=>{var _inputRef$current;setDropdownVisible(!1),option&&(handleChange({target:{value:option.primaryLabel}}),null==onOptionClick||onOptionClick(option)),null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.focus()}),[setDropdownVisible,handleChange]),handleClearClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{var _inputRef$current2;handleChange({target:{value:""}}),null===(_inputRef$current2=inputRef.current)||void 0===_inputRef$current2||_inputRef$current2.focus()}),[handleChange]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-combo-field",ref:valueRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{onClick:()=>{setDropdownVisible(!0)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library_form_text_field_deprecated__WEBPACK_IMPORTED_MODULE_3__.X,{autoFocus:!0,inputRef,placeholder,onBlur:handleBlur,onKeyUp:e=>{"Enter"===e.key&&handleBlur()},value,onChange:handleChange,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({"form-combo-field__value":!0,"form-combo-field__value-dropdown-visible":dropdownVisible}),endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.Ei,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.sS.Flex,iconName:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Close,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.hp.Sm,onClick:()=>handleClearClick(),color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.EY.iconMuted,ariaLabel:t("clear")})})),dropdownVisible&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Dropdown,{hideDropdownIfNoOptions,maxDropdownHeight,noOptionsText,onOptionClick:handleOptionClick,options,width:valueWidth}))}try{formcombofield.displayName="formcombofield",formcombofield.__docgenInfo={description:"",displayName:"formcombofield",props:{hideDropdownIfNoOptions:{defaultValue:{value:"false"},description:"Whether to hide the 'no option' when there are no options to display.",name:"hideDropdownIfNoOptions",required:!1,type:{name:"boolean"}},maxDropdownHeight:{defaultValue:null,description:"The maximum height of the dropdown in pixels.",name:"maxDropdownHeight",required:!1,type:{name:"number"}},noOptionsText:{defaultValue:null,description:"The text to display in the dropdown when there are no options to display.",name:"noOptionsText",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback function to invoke when the value changes.",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onOptionClick:{defaultValue:null,description:"Callback function to invoke when a dropdown option is clicked.",name:"onOptionClick",required:!1,type:{name:"((option: FormComboFieldOption) => void)"}},options:{defaultValue:null,description:"The options to display in the dropdown.\nAn array of objects with a 'primaryLabel' and optionally a 'secondaryLabel' property.`",name:"options",required:!0,type:{name:"FormComboFieldOption[]"}},placeholder:{defaultValue:null,description:"The placeholder text to display in the field when the value is empty.",name:"placeholder",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"The value to display in the field.",name:"value",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/ui/form-combo-field/form-combo-field.tsx#formcombofield"]={docgenInfo:formcombofield.__docgenInfo,name:"formcombofield",path:"ui/components/ui/form-combo-field/form-combo-field.tsx#formcombofield"})}catch(__react_docgen_typescript_loader_error){}}}]);