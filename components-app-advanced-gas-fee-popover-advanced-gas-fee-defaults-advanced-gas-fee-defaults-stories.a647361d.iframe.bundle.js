"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[9754],{"./ui/components/app/advanced-gas-fee-popover/advanced-gas-fee-defaults/advanced-gas-fee-defaults.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory$paramet,_DefaultStory$paramet2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_test_data_mock_estimates_json__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./test/data/mock-estimates.json"),_test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./test/data/mock-state.json"),_store_store__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/store/store.ts"),_context__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/app/advanced-gas-fee-popover/context/index.js"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/contexts/gasFee.js"),_shared_constants_gas__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./shared/constants/gas.ts"),_advanced_gas_fee_defaults__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/components/app/advanced-gas-fee-popover/advanced-gas-fee-defaults/advanced-gas-fee-defaults.js");const store=(0,_store_store__WEBPACK_IMPORTED_MODULE_4__.Z)({..._test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__,metamask:{..._test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__.metamask,accounts:{[_test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__.metamask.selectedAddress]:{address:_test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__.metamask.selectedAddress,balance:"0x1F4"}},featureFlags:{advancedInlineGas:!0},gasFeeEstimates:_test_data_mock_estimates_json__WEBPACK_IMPORTED_MODULE_2__[_shared_constants_gas__WEBPACK_IMPORTED_MODULE_7__.gB.feeMarket].gasFeeEstimates}}),__WEBPACK_DEFAULT_EXPORT__={title:"Components/App/AdvancedGasFeePopover/AdvancedGasFeeDefaults",decorators:[story=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_gasFee__WEBPACK_IMPORTED_MODULE_6__.Po,{transaction:{userFeeLevel:"medium"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context__WEBPACK_IMPORTED_MODULE_5__.D1,null,story())))]},DefaultStory=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_advanced_gas_fee_defaults__WEBPACK_IMPORTED_MODULE_8__.Z,null);DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"() => <AdvancedGasFeeDefaults />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/app/advanced-gas-fee-popover/advanced-gas-fee-defaults/advanced-gas-fee-defaults.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js"),_hooks_useTransactionEventFragment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/hooks/useTransactionEventFragment.js"),_shared_constants_gas__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/constants/gas.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_selectors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/selectors/index.js"),_store_actions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/store/actions.ts"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/contexts/gasFee.js"),_context__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/components/app/advanced-gas-fee-popover/context/index.js"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ui/hooks/useI18nContext.js"),_component_library__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./ui/components/component-library/index.ts");const AdvancedGasFeeDefaults=()=>{const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_10__.C)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.I0)(),{gasErrors,maxBaseFee,maxPriorityFeePerGas}=(0,_context__WEBPACK_IMPORTED_MODULE_9__._9)(),advancedGasFeeValues=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_6__.QVH),chainId=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_6__.BVZ),networkIdentifier=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_6__.ZCT),{updateTransactionEventFragment}=(0,_hooks_useTransactionEventFragment__WEBPACK_IMPORTED_MODULE_3__.s)(),{editGasMode}=(0,_contexts_gasFee__WEBPACK_IMPORTED_MODULE_8__.YJ)(),[isDefaultSettingsSelected,setDefaultSettingsSelected]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(Boolean(advancedGasFeeValues)&&advancedGasFeeValues.maxBaseFee===maxBaseFee&&advancedGasFeeValues.priorityFee===maxPriorityFeePerGas);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{setDefaultSettingsSelected(Boolean(advancedGasFeeValues)&&advancedGasFeeValues.maxBaseFee===maxBaseFee&&advancedGasFeeValues.priorityFee===maxPriorityFeePerGas)}),[advancedGasFeeValues,maxBaseFee,maxPriorityFeePerGas]);return editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_4__.G_.swaps?null:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_11__.xu,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.sS.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.Qb.Row,marginTop:4,marginLeft:2,marginRight:2,paddingTop:4,paddingBottom:4,className:"advanced-gas-fee-defaults"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_11__.XZ,{isChecked:isDefaultSettingsSelected,onChange:()=>{isDefaultSettingsSelected?(dispatch((0,_store_actions__WEBPACK_IMPORTED_MODULE_7__.kqE)({chainId,gasFeePreferences:void 0})),setDefaultSettingsSelected(!1),updateTransactionEventFragment({properties:{advanced_gas_defaults_updated_maxbasefee:null,advanced_gas_defaults_updated_priorityfee:null}})):(dispatch((0,_store_actions__WEBPACK_IMPORTED_MODULE_7__.kqE)({chainId,gasFeePreferences:{maxBaseFee,priorityFee:maxPriorityFeePerGas}})),updateTransactionEventFragment({properties:{advanced_gas_defaults_updated_maxbasefee:maxBaseFee,advanced_gas_defaults_updated_priorityfee:maxPriorityFeePerGas}}))},isDisabled:gasErrors.maxFeePerGas||gasErrors.maxPriorityFeePerGas,label:t("advancedGasFeeDefaultOptIn",[(0,lodash__WEBPACK_IMPORTED_MODULE_2__.capitalize)(networkIdentifier)])}))};AdvancedGasFeeDefaults.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeeDefaults"};const __WEBPACK_DEFAULT_EXPORT__=AdvancedGasFeeDefaults},"./ui/components/app/advanced-gas-fee-popover/context/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D1:()=>AdvancedGasFeePopoverContextProvider,_9:()=>useAdvancedGasFeePopoverContext});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);const AdvancedGasFeePopoverContext=(0,react.createContext)({}),AdvancedGasFeePopoverContextProvider=({children})=>{const[gasLimit,setGasLimit]=(0,react.useState)(),[maxFeePerGas,setMaxFeePerGas]=(0,react.useState)(),[maxPriorityFeePerGas,setMaxPriorityFeePerGas]=(0,react.useState)(),[errors,setErrors]=(0,react.useState)({maxFeePerGas:!1,maxPriorityFeePerGas:!1,gasLimit:!1}),setErrorValue=(0,react.useCallback)(((field,value)=>{errors[field]!==value&&setErrors({...errors,[field]:value})}),[errors,setErrors]),[maxBaseFee,setMaxBaseFee]=(0,react.useState)();return react.createElement(AdvancedGasFeePopoverContext.Provider,{value:{gasLimit,hasErrors:errors.maxFeePerGas||errors.maxPriorityFeePerGas||errors.gasLimit,gasErrors:errors,maxFeePerGas,maxPriorityFeePerGas,setErrorValue,maxBaseFee,setGasLimit,setMaxPriorityFeePerGas,setMaxFeePerGas,setMaxBaseFee}},children)};function useAdvancedGasFeePopoverContext(){return(0,react.useContext)(AdvancedGasFeePopoverContext)}AdvancedGasFeePopoverContextProvider.propTypes={children:prop_types_default().node.isRequired},AdvancedGasFeePopoverContextProvider.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeePopoverContextProvider",props:{children:{description:"",type:{name:"node"},required:!0}}}},"./ui/contexts/gasFee.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Po:()=>GasFeeContextProvider,YJ:()=>useGasFeeContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_hooks_gasFeeInput_useGasFeeInputs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/hooks/gasFeeInput/useGasFeeInputs.js");const GasFeeContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}),GasFeeContextProvider=({children,defaultEstimateToUse,transaction,minimumGasLimit,editGasMode})=>{const gasFeeDetails=(0,_hooks_gasFeeInput_useGasFeeInputs__WEBPACK_IMPORTED_MODULE_1__.a)(defaultEstimateToUse,transaction,minimumGasLimit,editGasMode);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(GasFeeContext.Provider,{value:gasFeeDetails},children)};function useGasFeeContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(GasFeeContext)}GasFeeContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().node.isRequired,defaultEstimateToUse:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,transaction:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,minimumGasLimit:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,editGasMode:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string},GasFeeContextProvider.__docgenInfo={description:"",methods:[],displayName:"GasFeeContextProvider",props:{children:{description:"",type:{name:"node"},required:!0},defaultEstimateToUse:{description:"",type:{name:"string"},required:!1},transaction:{description:"",type:{name:"object"},required:!1},minimumGasLimit:{description:"",type:{name:"string"},required:!1},editGasMode:{description:"",type:{name:"string"},required:!1}}}},"./ui/hooks/useTransactionEventFragment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useTransactionEventFragment});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/contexts/gasFee.js"),_store_actions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/store/actions.ts"),_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/selectors/index.js");const useTransactionEventFragment=()=>{const{transaction}=(0,_contexts_gasFee__WEBPACK_IMPORTED_MODULE_2__.YJ)(),fragment=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)((state=>(0,_selectors__WEBPACK_IMPORTED_MODULE_4__.kmh)(state,{fragmentOptions:{},existingId:`transaction-added-${null==transaction?void 0:transaction.id}`})));return{updateTransactionEventFragment:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((async params=>{transaction&&transaction.id&&(fragment||await(0,_store_actions__WEBPACK_IMPORTED_MODULE_3__.j9l)(transaction.id),(0,_store_actions__WEBPACK_IMPORTED_MODULE_3__.XCZ)(`transaction-added-${transaction.id}`,params))}),[fragment,transaction])}}},"./test/data/mock-estimates.json":module=>{module.exports=JSON.parse('{"fee-market":{"gasEstimateType":"fee-market","gasFeeEstimates":{"low":{"minWaitTimeEstimate":180000,"maxWaitTimeEstimate":300000,"suggestedMaxPriorityFeePerGas":"3","suggestedMaxFeePerGas":"53"},"medium":{"minWaitTimeEstimate":15000,"maxWaitTimeEstimate":60000,"suggestedMaxPriorityFeePerGas":"7","suggestedMaxFeePerGas":"70"},"high":{"minWaitTimeEstimate":0,"maxWaitTimeEstimate":15000,"suggestedMaxPriorityFeePerGas":"10","suggestedMaxFeePerGas":"100"},"estimatedBaseFee":"50","networkCongestion":0.5184,"latestPriorityFeeRange":["1","20"],"historicalPriorityFeeRange":["2","125"],"historicalBaseFeeRange":["50","100"],"priorityFeeTrend":"up","baseFeeTrend":"down"},"estimatedGasFeeTimeBounds":{}}}')}}]);