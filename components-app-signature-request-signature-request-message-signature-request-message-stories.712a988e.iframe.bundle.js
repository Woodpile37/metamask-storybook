"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[9183],{"./ui/components/app/signature-request/signature-request-message/signature-request-message.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory$paramet,_DefaultStory$paramet2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/helpers/utils/util.js"),_signature_request_message__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/app/signature-request/signature-request-message/signature-request-message.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/App/SignatureRequestMessage",component:_signature_request_message__WEBPACK_IMPORTED_MODULE_2__.Z,argTypes:{data:{control:"object"},onMessageScrolled:{action:"onMessageScrolled"},setMessageRootRef:{action:"setMessageRootRef"},messageRootRef:{control:"object"},messageIsScrollable:{control:"boolean"}}},DefaultStory=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_signature_request_message__WEBPACK_IMPORTED_MODULE_2__.Z,args);DefaultStory.storyName="Default";const rawMessage_message={contents:"Hello, Bob!",from:{name:"Cow",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF","0x06195827297c7A80a443b6894d3BDB8824b43896"]},to:[{name:"Bob",wallets:["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"]}]},rawMessage_primaryType="Mail",rawMessage_types={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]};DefaultStory.args={data:(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_1__.Z$)(rawMessage_message,rawMessage_primaryType,rawMessage_types),messageIsScrollable:!0},DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => {\n  return <SignatureRequestMessage {...args} />;\n}",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet2=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet2?void 0:_DefaultStory$paramet2.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./ui/components/app/signature-request/signature-request-data/signature-request-data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>signature_request_data});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dist=__webpack_require__("./node_modules/@metamask/name-controller/dist/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),copy_to_clipboard=__webpack_require__("./node_modules/copy-to-clipboard/index.js"),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard),util=__webpack_require__("./ui/helpers/utils/util.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),nickname_popovers=__webpack_require__("./ui/components/app/modals/nickname-popovers/index.js"),copy=__webpack_require__("./shared/constants/copy.ts");const Address=({checksummedRecipientAddress,onRecipientClick,addressOnly,recipientEns,recipientName})=>{const t=(0,useI18nContext.C)(),[showNicknamePopovers,setShowNicknamePopovers]=(0,react.useState)(!1),addressBookEntryObject=(0,es.v9)(selectors.FuL).find((entry=>entry.address.toLowerCase()===checksummedRecipientAddress.toLowerCase())),recipientNickname=null==addressBookEntryObject?void 0:addressBookEntryObject.name,recipientMetadataName=(0,es.v9)((state=>(0,selectors._87)(state,checksummedRecipientAddress))),recipientToRender=addressOnly?recipientName||recipientNickname||recipientMetadataName||recipientEns||(0,util.$Q)(checksummedRecipientAddress):recipientName||recipientNickname||recipientMetadataName||recipientEns||t("newContract");return react.createElement("div",{className:"tx-insight tx-insight-component tx-insight-component-address",onClick:()=>{copy_to_clipboard_default()(checksummedRecipientAddress,copy.K),onRecipientClick&&onRecipientClick()}},react.createElement("div",{className:"tx-insight-component-address__sender-icon"},react.createElement(identicon.Z,{address:checksummedRecipientAddress,diameter:18})),react.createElement("div",{className:"tx-insight-component-address__name",onClick:()=>setShowNicknamePopovers(!0)},recipientToRender),showNicknamePopovers?react.createElement(nickname_popovers.Z,{onClose:()=>setShowNicknamePopovers(!1),address:checksummedRecipientAddress}):null)};Address.propTypes={checksummedRecipientAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientEns:prop_types_default().string,addressOnly:prop_types_default().bool,onRecipientClick:prop_types_default().func},Address.__docgenInfo={description:"",methods:[],displayName:"Address",props:{checksummedRecipientAddress:{description:"",type:{name:"string"},required:!1},recipientName:{description:"",type:{name:"string"},required:!1},recipientEns:{description:"",type:{name:"string"},required:!1},addressOnly:{description:"",type:{name:"bool"},required:!1},onRecipientClick:{description:"",type:{name:"func"},required:!1}}};const address_component=Address;var hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),usePetnamesEnabled=__webpack_require__("./ui/hooks/usePetnamesEnabled.ts"),name_name=__webpack_require__("./ui/components/app/name/name.tsx");function SignatureRequestData({data}){const identities=(0,es.v9)(selectors.RlE),petnamesEnabled=(0,usePetnamesEnabled.A)();return react.createElement(component_library.xu,{as:"ul",className:"signature-request-data__node"},Object.entries(data).map((([label,{value,type}],i)=>react.createElement(component_library.xu,{as:"li",className:"signature-request-data__node",marginBottom:2,key:`${label}-${i}`,paddingLeft:2,display:"object"!=typeof value||null===value?design_system.sS.Flex:null},react.createElement(component_library.xv,{as:"div",color:design_system.d9.textDefault,marginLeft:4,fontWeight:"object"==typeof value?design_system.U9.Bold:design_system.U9.Normal},(0,util.vJ)(label.charAt(0).toUpperCase()+label.slice(1)),":"," "),"object"==typeof value&&null!==value?react.createElement(SignatureRequestData,{data:value}):react.createElement(component_library.xv,{as:"div",color:design_system.d9.textDefault,marginLeft:4,className:"signature-request-data__node__value"},"address"===type&&(0,hexstring_utils.Pv)(value,{mixedCaseUseChecksum:!0})?react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"div",color:design_system.d9.infoDefault,className:"signature-request-data__node__value__address"},petnamesEnabled?react.createElement(name_name.Z,{value,type:dist.NameType.ETHEREUM_ADDRESS}):react.createElement(address_component,{addressOnly:!0,checksummedRecipientAddress:(0,hexstring_utils.QG)(value),recipientName:(0,selectors.PyB)(identities,value)})):(0,util.vJ)(`${value}`))))))}SignatureRequestData.propTypes={data:prop_types_default().oneOfType([prop_types_default().object,prop_types_default().array]).isRequired},SignatureRequestData.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestData",props:{data:{description:"",type:{name:"union",value:[{name:"object"},{name:"array"}]},required:!0}}};const signature_request_data=(0,react.memo)(SignatureRequestData,((prevProps,nextProps)=>(0,lodash.isEqual)(prevProps.data,nextProps.data)))},"./ui/components/app/signature-request/signature-request-message/signature-request-message.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>SignatureRequestMessage});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),signature_request_data=__webpack_require__("./ui/components/app/signature-request/signature-request-data/signature-request-data.js");function SignatureRequestMessage({data,onMessageScrolled,setMessageRootRef,messageRootRef,messageIsScrollable,primaryType}){const t=(0,react.useContext)(i18n.OO),[messageIsScrolled,setMessageIsScrolled]=(0,react.useState)(!1);return react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,onScroll:(0,lodash.debounce)((()=>{if(!messageRootRef||messageIsScrolled)return;const{scrollTop,offsetHeight,scrollHeight}=messageRootRef;Math.round(scrollTop)+offsetHeight>=scrollHeight&&(setMessageIsScrolled(!0),onMessageScrolled())}),25),className:"signature-request-message"},messageIsScrollable?react.createElement(box.ZP,{display:design_system.sS.Flex,alignItems:design_system.g1.center,justifyContent:design_system.E0.center,borderColor:design_system.kf.borderDefault,backgroundColor:design_system.lP.backgroundDefault,color:design_system.Il.iconDefault,onClick:()=>{setMessageIsScrolled(!0),onMessageScrolled(),null==messageRootRef||messageRootRef.scrollTo(0,null==messageRootRef?void 0:messageRootRef.scrollHeight)},className:"signature-request-message__scroll-button","data-testid":"signature-request-scroll-button"},react.createElement("i",{className:"fa fa-arrow-down","aria-label":t("scrollDown")})):null,react.createElement(box.ZP,{backgroundColor:design_system.lP.backgroundDefault,paddingBottom:3,paddingTop:3,paddingRight:3,margin:2,borderRadius:design_system.cM.XL,borderColor:design_system.kf.borderMuted,className:"signature-request-message__root",ref:setMessageRootRef},react.createElement(component_library.xv,{fontWeight:design_system.U9.Bold,color:design_system.d9.textDefault,marginLeft:4},primaryType),react.createElement(signature_request_data.Z,{data:data.value})))}SignatureRequestMessage.propTypes={data:prop_types_default().object.isRequired,onMessageScrolled:prop_types_default().func,setMessageRootRef:prop_types_default().func,messageRootRef:prop_types_default().object,messageIsScrollable:prop_types_default().bool,primaryType:prop_types_default().string},SignatureRequestMessage.__docgenInfo={description:"",methods:[],displayName:"SignatureRequestMessage",props:{data:{description:"",type:{name:"object"},required:!0},onMessageScrolled:{description:"",type:{name:"func"},required:!1},setMessageRootRef:{description:"",type:{name:"func"},required:!1},messageRootRef:{description:"",type:{name:"object"},required:!1},messageIsScrollable:{description:"",type:{name:"bool"},required:!1},primaryType:{description:"",type:{name:"string"},required:!1}}}},"./ui/hooks/usePetnamesEnabled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function usePetnamesEnabled(){let enabled=!1;return enabled=!0,true}__webpack_require__.d(__webpack_exports__,{A:()=>usePetnamesEnabled})}}]);