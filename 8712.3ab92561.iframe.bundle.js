(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[8712],{"./node_modules/@metamask-institutional/configuration-client/dist/ConfigurationClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConfigurationClient=void 0;const constants_1=__webpack_require__("./node_modules/@metamask-institutional/configuration-client/dist/constants.js");exports.ConfigurationClient=class ConfigurationClient{constructor(configurationApiUrl=constants_1.MMI_CONFIGURATION_API_URL){this.configurationApiUrl=configurationApiUrl}async getConfiguration(){console.log(`Fetching MMI configuration from ${this.configurationApiUrl}`);try{const response=await fetch(this.configurationApiUrl,{method:"GET"});return await response.json()}catch(e){throw console.log("Error fetching MMI configuration"),new Error(e)}}async getCustodianConfigurationForApiUrl(apiUrl){const{custodians}=await this.getConfiguration(),custodian=custodians.find((c=>c.apiBaseUrl===apiUrl));if(!custodian)throw new Error(`Could not find custodian with URL: ${apiUrl} - please contact support`);return{refreshTokenUrl:custodian.refreshTokenUrl,websocketApiUrl:custodian.websocketApiUrl}}}},"./node_modules/@metamask-institutional/configuration-client/dist/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MMI_CONFIGURATION_API_URL=void 0,exports.MMI_CONFIGURATION_API_URL="https://mmi-configuration-api.codefi.network/v1/configuration/default"},"./node_modules/@metamask-institutional/configuration-client/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConfigurationClient=void 0;var ConfigurationClient_1=__webpack_require__("./node_modules/@metamask-institutional/configuration-client/dist/ConfigurationClient.js");Object.defineProperty(exports,"ConfigurationClient",{enumerable:!0,get:function(){return ConfigurationClient_1.ConfigurationClient}})},"./node_modules/@metamask-institutional/custody-controller/dist/custody.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustodyController=void 0;const custody_keyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/index.js"),obs_store_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/index.js"),utils_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/utils.js");exports.CustodyController=class CustodyController{constructor(opts={}){const{initState}=opts;this.store=new obs_store_1.ObservableStore({custodyAccountDetails:{},custodianConnectRequest:{},...initState})}storeCustodyStatusMap(custody,custodyStatusMap){const{custodyStatusMaps}=this.store.getState();this.store.updateState({custodyStatusMaps:{...custodyStatusMaps,[custody.toLowerCase()]:custodyStatusMap}})}storeSupportedChainsForAddress(address,supportedChains,custodianName){const{custodianSupportedChains}=this.store.getState();this.store.updateState({custodianSupportedChains:{...custodianSupportedChains,[address]:{supportedChains:supportedChains.map((chain=>Number(chain).toString())),custodianName}}})}setAccountDetails(newAccountDetails){const{custodyAccountDetails}=this.store.getState(),accountsToAdd={};newAccountDetails.forEach((item=>{custodyAccountDetails[(0,utils_1.toChecksumHexAddress)(item.address)]||(accountsToAdd[(0,utils_1.toChecksumHexAddress)(item.address)]=item)})),this.store.updateState({custodyAccountDetails:{...custodyAccountDetails,...accountsToAdd}})}removeAccount(address){const{custodyAccountDetails}=this.store.getState();delete custodyAccountDetails[(0,utils_1.toChecksumHexAddress)(address)],this.store.updateState({custodyAccountDetails})}setWaitForConfirmDeepLinkDialog(waitForConfirmDeepLinkDialog){this.store.updateState({waitForConfirmDeepLinkDialog})}getAccountDetails(address){const{custodyAccountDetails}=this.store.getState();return custodyAccountDetails[(0,utils_1.toChecksumHexAddress)(address)]}getCustodyTypeByAddress(address){var _a;const{custodyAccountDetails}=this.store.getState();return null===(_a=custodyAccountDetails[address])||void 0===_a?void 0:_a.custodyType}getAllCustodyTypes(){var _a;const custodyTypes=new Set,{custodyAccountDetails}=this.store.getState();for(const address of Object.keys(custodyAccountDetails))custodyTypes.add(null===(_a=custodyAccountDetails[address])||void 0===_a?void 0:_a.custodyType);return custodyTypes}setCustodianConnectRequest({token,apiUrl,custodianName,custodianType}){this.store.updateState({custodianConnectRequest:{token,apiUrl,custodianName,custodianType}})}getCustodianConnectRequest(){const{custodianConnectRequest}=this.store.getState();return this.store.updateState({custodianConnectRequest:{}}),custodianConnectRequest}handleMmiCustodianInUse(req){var _a;if(!req.params.custodianName)throw new Error("Missing parameter: custodianName");const custodian=custody_keyring_1.CUSTODIAN_TYPES[req.params.custodianName.toUpperCase()];let allowed=!1;if(custodian)for(const origin of custodian.origins)origin.test(req.origin)&&(allowed=!0);if(!allowed)throw new Error("Forbidden");const{custodyAccountDetails}=this.store.getState();for(const address of Object.keys(custodyAccountDetails))if((null===(_a=custodyAccountDetails[address])||void 0===_a?void 0:_a.custodyType)===`Custody - ${custodian.name}`)return!0;return!1}async handleMmiCheckIfTokenIsPresent({token,apiUrl,keyring}){const accounts=await keyring.getAccounts();for(const address of accounts){const accountDetails=keyring.getAccountDetails(address);if(accountDetails.apiUrl===apiUrl&&accountDetails.authDetails.refreshToken===token)return!0}return!1}}},"./node_modules/@metamask-institutional/custody-controller/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toChecksumHexAddress=exports.CustodyController=void 0;var custody_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/custody.js");Object.defineProperty(exports,"CustodyController",{enumerable:!0,get:function(){return custody_1.CustodyController}});var utils_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/utils.js");Object.defineProperty(exports,"toChecksumHexAddress",{enumerable:!0,get:function(){return utils_1.toChecksumHexAddress}})},"./node_modules/@metamask-institutional/custody-controller/dist/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toChecksumHexAddress=void 0;const util_1=__webpack_require__("./node_modules/@ethereumjs/util/dist/index.js");exports.toChecksumHexAddress=function toChecksumHexAddress(address){if(!address)return"";const hexPrefixed=(0,util_1.addHexPrefix)(address);return(0,util_1.isHexString)(hexPrefixed)?(0,util_1.toChecksumAddress)((0,util_1.addHexPrefix)(address)):hexPrefixed}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustodyKeyring=void 0;const util_1=__webpack_require__("./node_modules/@ethereumjs/util/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),crypto_1=__importDefault(__webpack_require__("?8158")),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/constants/index.js"),migrations_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/index.js"),migrator_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/migrator.js");class CustodyKeyring extends events_1.EventEmitter{constructor(opts={}){super(),this.trackingActiveByCredentials={},this.accounts=[],this.selectedAddresses=[],this.accountsDetails=[],this.sdkList=[],this.meta={},this.mmiConfigurationController=opts.mmiConfigurationController}getUniqueAccountDetails(account){return this.hashAuthDetails(account.authDetails,account.apiUrl)}serialize(){return console.log("Serializing custody keyring"),Promise.resolve({accounts:this.accounts,selectedAddresses:this.selectedAddresses,accountsDetails:this.accountsDetails,meta:this.meta})}deserialize(opts={}){return new Promise((resolve=>{const migratedOpts=new migrator_1.Migrator({migrations:migrations_1.migrations}).migrateData({custodianType:this.custodianType,type:this.type,authType:this.authType,...opts});this.accounts=migratedOpts.accounts||[],this.selectedAddresses=migratedOpts.selectedAddresses||[],this.accountsDetails=migratedOpts.accountsDetails||[],this.meta=migratedOpts.meta||{};this.accountsDetails.reduce(((result,details)=>{const hash=this.getUniqueAccountDetails(details);return result.find((account=>hash===account.hash))||result.push({hash,authDetails:details.authDetails,apiUrl:details.apiUrl}),result}),[]).forEach((item=>this.getSDK(item.authDetails,item.apiUrl))),resolve()}))}convertExtensionCustodianAccountToSDKCustodianAccount(account){const{token,...accountWithoutToken}=account;return{...accountWithoutToken,address:account.address.toLowerCase(),authDetails:this.createAuthDetails(account.token)}}setSelectedAddresses(addresses){this.selectedAddresses=addresses.map(this.convertExtensionCustodianAccountToSDKCustodianAccount.bind(this))}addAccounts(n){return new Promise((resolve=>{this.accounts||(this.accounts=[]);for(let i=0;i<n;i++){const selectedAccountDetails=this.selectedAddresses.shift(),address=null==selectedAccountDetails?void 0:selectedAccountDetails.address;address&&!this.accounts.includes(address)&&(selectedAccountDetails.meta={version:migrations_1.migrations.length},this.accountsDetails.push(selectedAccountDetails),this.accounts.push(address),this.getSDK(selectedAccountDetails.authDetails,selectedAccountDetails.apiUrl))}resolve(this.accounts)}))}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(address){this.accounts=this.accounts.filter((a=>a.toLowerCase()!==address.toLowerCase())),this.accountsDetails=this.accountsDetails.filter((a=>a.address.toLowerCase()!==address.toLowerCase()))}hashAuthDetails(authDetails,apiUrl){let identifier;return authDetails.jwt?identifier=authDetails.jwt+apiUrl:authDetails.refreshToken&&(identifier=authDetails.refreshToken+apiUrl),crypto_1.default.createHash("sha256").update(identifier).digest("hex")}replaceRefreshTokenAuthDetails(address,newAuthDetails){const{authDetails,apiUrl}=this.getAccountDetails(address);this.getSDK(authDetails,apiUrl).changeRefreshTokenAuthDetails(newAuthDetails)}updateAccountsDetailsWithNewRefreshToken(oldRefreshToken,newRefreshToken,oldApiUrl){for(const account of this.accountsDetails){const authDetails=account.authDetails;authDetails.refreshToken===oldRefreshToken&&account.apiUrl===oldApiUrl&&(authDetails.refreshToken=newRefreshToken)}}handleRefreshTokenChangeEvent(event,apiUrl){this.updateAccountsDetailsWithNewRefreshToken(event.oldRefreshToken,event.newRefreshToken,apiUrl);const payload={oldRefreshToken:event.oldRefreshToken,newRefreshToken:event.newRefreshToken};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}handleInteractiveRefreshTokenChangeEvent(event){this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)}createAuthDetails(token){let authDetails;return this.authType===types_1.AuthTypes.TOKEN?authDetails={jwt:token}:this.authType===types_1.AuthTypes.REFRESH_TOKEN&&(authDetails={refreshToken:token}),authDetails}getSDK(authDetails,apiUrl){const hash=this.hashAuthDetails(authDetails,apiUrl),found=this.sdkList.find((item=>item.hash===hash));if(found)return found.sdk;const sdk=this.sdkFactory(authDetails,apiUrl);return sdk.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,(event=>this.handleRefreshTokenChangeEvent(event,apiUrl))),sdk.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,(event=>this.handleInteractiveRefreshTokenChangeEvent(event))),this.sdkList.push({sdk,hash}),sdk}async getCustodianAccounts(token,apiUrl,searchText,getNonImportedAccounts=!0){const authDetails=this.createAuthDetails(token),sdk=this.getSDK(authDetails,apiUrl);let accounts;return accounts=searchText?searchText.startsWith("0x")?await sdk.getEthereumAccountsByAddress(searchText,constants_1.DEFAULT_MAX_CACHE_AGE):await sdk.getEthereumAccountsByLabelOrAddressName(searchText,constants_1.DEFAULT_MAX_CACHE_AGE):await sdk.getEthereumAccounts(constants_1.DEFAULT_MAX_CACHE_AGE),getNonImportedAccounts?accounts.filter((account=>-1===this.accounts.map((addr=>addr.toLowerCase())).indexOf(account.address.toLowerCase()))):accounts.filter((account=>-1!==this.accounts.map((addr=>addr.toLowerCase())).indexOf(account.address.toLowerCase())))}getTransactionNote(txMeta){var _a;const readableCategory={contractInteraction:"Contract Interaction",contractDeployment:"Contract Deployment",transfer:"ETH Transfer",swap:"Metamask Swap",approve:"Token Approval"}[txMeta.type]||txMeta.type;return(null===(_a=null==txMeta?void 0:txMeta.metadata)||void 0===_a?void 0:_a.note)||`${readableCategory} - initiated on ${txMeta.origin}`}async signTransaction(fromAddress,ethTx,txMeta){const note=this.getTransactionNote(txMeta);let data;"string"==typeof ethTx.data?data=ethTx.data:ethTx.data instanceof Uint8Array&&(data=ethTx.data.toString("hex")),(null==data?void 0:data.length)?(null==data?void 0:data.startsWith("0x"))||(data="0x"+data):data=void 0;const{authDetails,apiUrl}=this.getAccountDetails(fromAddress),sdk=this.getSDK(authDetails,apiUrl),noGasPayload={from:(0,util_1.toChecksumAddress)(fromAddress),value:BigInt(txMeta.txParams.value).toString(),gasLimit:BigInt(txMeta.txParams.gas).toString(),data};txMeta.txParams.to&&(noGasPayload.to=(0,util_1.toChecksumAddress)(txMeta.txParams.to));const eip1559=txMeta.txParams.maxFeePerGas,chainId=Number(txMeta.chainId).toString(10),normalisedSupportedChainIds=(await sdk.getSupportedChains(fromAddress)).map((chainId=>Number(chainId).toString()));if(!normalisedSupportedChainIds.includes(chainId))throw new Error(`This network ${chainId} is not supported by ${this.custodianType.name}`);let payload;payload=eip1559?{...noGasPayload,maxFeePerGas:BigInt(txMeta.txParams.maxFeePerGas).toString(),maxPriorityFeePerGas:BigInt(txMeta.txParams.maxPriorityFeePerGas).toString(),type:"2"}:{...noGasPayload,gasPrice:BigInt(txMeta.txParams.gasPrice).toString(),type:"0"};return await sdk.createTransaction(payload,{chainId,note,transactionCategory:txMeta.type,origin:txMeta.origin})}getAllAccountsWithToken(token){return this.accountsDetails.filter((item=>{var _a,_b;return(null===(_a=item.authDetails)||void 0===_a?void 0:_a.jwt)===token||(null===(_b=item.authDetails)||void 0===_b?void 0:_b.refreshToken)===token}))}async getTransaction(from,txCustodyId){if(void 0===from||void 0===txCustodyId)return null;const{authDetails,apiUrl}=this.getAccountDetails(from),sdk=this.getSDK(authDetails,apiUrl);return await sdk.getTransaction((0,util_1.toChecksumAddress)(from),txCustodyId)}async getTransactionDeepLink(address,txId){return this.txDeepLink(address,txId)}getAccountDetails(address){return this.accountsDetails.find((account=>account.address.toLowerCase()===address.toLowerCase()))}async getSignature(address,signatureId){if(void 0===signatureId)return null;const{authDetails,apiUrl}=this.getAccountDetails(address),sdk=this.getSDK(authDetails,apiUrl);return await sdk.getSignature((0,util_1.toChecksumAddress)(address),signatureId)}async signPersonalMessage(address,message,_opts={}){const{authDetails,apiUrl}=this.getAccountDetails(address);return this.getSDK(authDetails,apiUrl).signPersonalMessage(address,message)}signMessage(){throw new Error("Not supported on this custodian")}exportAccount(){throw new Error("Not supported on this custodian")}async getErc20Tokens(){let tokenContracts={};for(const{sdk}of this.sdkList){const tokens=await sdk.getErc20Tokens();tokenContracts={...tokenContracts,tokens}}return tokenContracts}async getCustomerProof(address){const{authDetails,apiUrl}=this.getAccountDetails(address);return this.getSDK(authDetails,apiUrl).getCustomerProof()}async signTypedData(address,data,opts){"V4"!==opts.version&&"V3"!==opts.version&&this.emit("error","Only signedTypedData_v4 and signedTypedData_v3 is supported");const{authDetails,apiUrl}=this.getAccountDetails(address);return this.getSDK(authDetails,apiUrl).signedTypedData_v4(address,data,opts.version)}getSupportedChains(address){const{authDetails,apiUrl}=this.getAccountDetails(address);return this.getSDK(authDetails,apiUrl).getSupportedChains(address)}}exports.CustodyKeyring=CustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/MmiConfiguration.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MmiConfigurationController=void 0;const configuration_client_1=__webpack_require__("./node_modules/@metamask-institutional/configuration-client/dist/index.js"),obs_store_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/index.js"),custodianTypes_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/index.js");exports.MmiConfigurationController=class MmiConfigurationController{constructor(opts={}){var _a;console.log("MMI Configuration controller constructor");const initState=(null===(_a=opts.initState)||void 0===_a?void 0:_a.mmiConfiguration)?opts.initState:{mmiConfiguration:{portfolio:{enabled:!1,url:"",cookieSetUrls:[]},features:{websocketApi:!1},custodians:[]}};this.configurationClient=new configuration_client_1.ConfigurationClient(opts.mmiConfigurationServiceUrl),this.store=new obs_store_1.ObservableStore({mmiConfiguration:{portfolio:{...initState.mmiConfiguration.portfolio},features:{...initState.mmiConfiguration.features},custodians:initState.mmiConfiguration.custodians}})}async storeConfiguration(){const configuration=await this.getConfiguration(),{portfolio,features}=configuration,{mmiConfiguration}=this.store.getState(),configuredCustodians=configuration.custodians,custodians=[...Object.values(custodianTypes_1.CUSTODIAN_TYPES).filter((custodian=>!1===custodian.hidden)).map((custodian=>({type:custodian.name,name:custodian.name.toLowerCase(),apiUrl:custodian.apiUrl,iconUrl:custodian.imgSrc,displayName:custodian.displayName,websocketApiUrl:null,production:custodian.production,refreshTokenUrl:null,isNoteToTraderSupported:!1,version:1})))];for(const custodian of configuredCustodians)if(custodian.apiBaseUrl)custodians.push({type:"JSONRPC",name:custodian.name,apiUrl:custodian.apiBaseUrl,iconUrl:custodian.iconUrl,displayName:custodian.displayName,production:custodian.enabled,refreshTokenUrl:custodian.refreshTokenUrl,websocketApiUrl:custodian.websocketApiUrl,isNoteToTraderSupported:custodian.isNoteToTraderSupported,version:2});else{const legacyCustodian=custodians.find((legacyCustodian=>legacyCustodian.name.toLowerCase()==custodian.name));legacyCustodian?legacyCustodian.isNoteToTraderSupported=custodian.isNoteToTraderSupported:console.warn(`Missing legacy custodian ${custodian.name}`)}this.store.updateState({mmiConfiguration:{...mmiConfiguration,portfolio:{...mmiConfiguration.portfolio,enabled:portfolio.enabled,url:portfolio.url,cookieSetUrls:portfolio.cookieSetUrls},features:{websocketApi:features.websocketApi},custodians}})}getConfiguration(){return this.configurationClient.getConfiguration()}getWebsocketApiUrl(){const{mmiConfiguration}=this.store.getState();console.log("mmiConfiguration",mmiConfiguration);const custodian=mmiConfiguration.custodians.find((custodian=>custodian.websocketApiUrl));return null==custodian?void 0:custodian.websocketApiUrl}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/constants/index.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT=exports.REFRESH_TOKEN_CHANGE_EVENT=exports.DEFAULT_MAX_CACHE_AGE=void 0,exports.DEFAULT_MAX_CACHE_AGE=60,exports.REFRESH_TOKEN_CHANGE_EVENT="refresh_token_change",exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT="interactive_replacement_token_change"},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoCustodyKeyring=void 0;const sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),BitgoStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoStatusMap.js");class BitgoCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Bitgo",this.authType=types_1.AuthTypes.TOKEN,this.custodianType={name:"Bitgo",displayName:"BitGo",apiUrl:"https://app.bitgo.com/defi/v2",imgSrc:"images/bitgo.svg",icon:"images/bitgo.svg",keyringClass:BitgoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo-test.com/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},this.sdkFactory=(authDetails,apiUrl)=>(0,sdk_1.mmiSDKFactory)(sdk_1.BitgoCustodianApi,authDetails,this.authType,apiUrl),this.txDeepLink=async(_custodianDetails,_txId)=>({text:"Approve and sign the transaction in BitGo. Once all required approvals have been performed, the transaction will complete. Check your BitGo wallet for the latest status.",url:null})}getStatusMap(){return BitgoStatusMap_1.BitgoStatusMap}}BitgoCustodyKeyring.type="Custody - Bitgo",exports.BitgoCustodyKeyring=BitgoCustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoStatusMap=void 0;const types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.BitgoStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!1},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusCustodyKeyring=void 0;const sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),CactusStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusStatusMap.js");class CactusCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Cactus",this.custodianType={name:"Cactus",displayName:"Cactus Custody",apiUrl:"https://api.mycactus.com/custody/v1/mmi-api",imgSrc:"images/cactus.svg",icon:"images/cactus.svg",keyringClass:CactusCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.mycactus.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.sdkFactory=(authDetails,apiUrl)=>(0,sdk_1.mmiSDKFactory)(sdk_1.CactusCustodianApi,authDetails,this.authType,apiUrl),this.txDeepLink=async(_custodianDetails,_txId)=>({text:null,url:"https://www.mycactus.com/cactus/login"})}getStatusMap(){return CactusStatusMap_1.CactusStatusMap}}CactusCustodyKeyring.type="Custody - Cactus",exports.CactusCustodyKeyring=CactusCustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusStatusMap=void 0;const types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.CactusStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},approved:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Completed",longText:"Completed",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Rejected",longText:"Rejected",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},overriden:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Overriden",longText:"Overriden",finished:!0}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/curv/CurvCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CurvCustodyKeyring=void 0;const sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js");class CurvCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{handleLegacyAccountDetails(detailsArray){return detailsArray.map((details=>{let authDetails;return authDetails=details.jwt?{jwt:details.jwt}:details.authDetails,{name:details.name,address:details.address,custodianDetails:details.custodianDetails,labels:details.labels,apiUrl:details.apiUrl,chainId:details.chainId,custodyType:details.custodyType,authDetails}}))}deserialize(opts={}){return super.deserialize({accounts:opts.accounts||[],selectedAddresses:opts.selectedAddresses?this.handleLegacyAccountDetails(opts.selectedAddresses):[],accountsDetails:opts.accountsDetails?this.handleLegacyAccountDetails(opts.accountsDetails):[],meta:opts.meta||{}})}constructor(opts={}){super(opts),this.custodianType={name:"Curv",displayName:"Curv",apiUrl:"https://app.curv.co",imgSrc:"images/curv-logo-horizontal-black.svg",icon:"images/curv-logo.svg",keyringClass:CurvCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},this.authType=types_1.AuthTypes.TOKEN,this.type="Custody - Curv",this.apiUrlKey="curvApiUrl",this.sdkFactory=(authDetails,apiUrl)=>(0,sdk_1.mmiSDKFactory)(sdk_1.CurvCustodianApi,authDetails,this.authType,apiUrl),this.txDeepLink=(custodianDetails,txId)=>null}getStatusMap(){return null}}CurvCustodyKeyring.type="Custody - Curv",exports.CurvCustodyKeyring=CurvCustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CUSTODIAN_TYPES=void 0;const BitgoCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoCustodyKeyring.js"),CactusCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusCustodyKeyring.js"),CurvCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/curv/CurvCustodyKeyring.js"),JsonRpcCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcCustodyKeyring.js"),JupiterCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterCustodyKeyring.js"),QredoCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoCustodyKeyring.js");exports.CUSTODIAN_TYPES={JUPITER:{name:"Jupiter",displayName:"Jupiter Custody",apiUrl:"https://jupiter-custody.codefi.network",imgSrc:"images/jupiter.svg",icon:"images/jupiter.svg",keyringClass:JupiterCustodyKeyring_1.JupiterCustodyKeyring,production:!0,hidden:!1,origins:[/^https:\/\/jupiter-custody-ui.codefi.network\//],environmentMapping:[{pattern:/^http:\/\/test-pattern/,mmiApiUrl:"http://test-url"},{pattern:/^http:\/\/localhost.*$/,mmiApiUrl:"http://localhost:3000/v1"}]},QREDO:{name:"Qredo",displayName:"Qredo",apiUrl:"https://api.qredo.network",imgSrc:"images/qredo.svg",icon:"images/qredo.svg",keyringClass:QredoCustodyKeyring_1.QredoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.qredo.network/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},CACTUS:{name:"Cactus",displayName:"Cactus Custody",apiUrl:"https://api.mycactus.com/custody/v1/mmi-api",imgSrc:"images/cactus.svg",icon:"images/cactus.svg",keyringClass:CactusCustodyKeyring_1.CactusCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.mycactus.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},BITGO:{name:"Bitgo",displayName:"BitGo",apiUrl:"https://app.bitgo.com/defi/v2",imgSrc:"images/bitgo.svg",icon:"images/bitgo.svg",keyringClass:BitgoCustodyKeyring_1.BitgoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo-test.com/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},JSONRPC:{name:"JSONRPC",displayName:"JSON-RPC",apiUrl:"https://saturn-custody.codefi.network/eth",imgSrc:"images/json-rpc.svg",icon:"images/json-rpc.svg",keyringClass:JsonRpcCustodyKeyring_1.JsonRpcCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},CURV:{name:"Curv",displayName:"Curv",apiUrl:"https://app.curv.co",imgSrc:"images/curv-logo-horizontal-black.svg",icon:"images/curv-logo.svg",keyringClass:CurvCustodyKeyring_1.CurvCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcCustodyKeyring=void 0;const sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),JsonRpcStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcStatusMap.js");class JsonRpcCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - JSONRPC",this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.custodianType={name:"JSONRPC",displayName:"JSON-RPC",apiUrl:"https://saturn-custody.codefi.network/eth",imgSrc:"images/json-rpc.svg",icon:"images/json-rpc.svg",keyringClass:JsonRpcCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},this.sdkFactory=(authDetails,apiUrl)=>{const store=this.mmiConfigurationController.store.getState(),{custodians}=store.mmiConfiguration,custodian=custodians.find((c=>c.apiUrl===apiUrl));if(!custodian)throw new Error(`Could not find custodian with URL: ${apiUrl} - please contact support`);return authDetails.refreshTokenUrl=custodian.refreshTokenUrl,(0,sdk_1.mmiSDKFactory)(sdk_1.JsonRpcCustodianApi,authDetails,this.authType,apiUrl)},this.txDeepLink=async(address,txId)=>{const{authDetails,apiUrl}=this.getAccountDetails(address),sdk=this.getSDK(authDetails,apiUrl);try{return await sdk.getTransactionLink(txId)}catch(e){return console.log(`Unable to get transction link for ${txId}`),console.log(e),null}}}getStatusMap(){return JsonRpcStatusMap_1.JsonRpcStatusMap}}JsonRpcCustodyKeyring.type="Custody - JSONRPC",exports.JsonRpcCustodyKeyring=JsonRpcCustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcStatusMap=void 0;const types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.JsonRpcStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterCustodyKeyring=void 0;const sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),JupiterStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterStatusMap.js");class JupiterCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Jupiter",this.authType=types_1.AuthTypes.TOKEN,this.custodianType={name:"Jupiter",displayName:"Jupiter Custody",apiUrl:"https://jupiter-custody.codefi.network",imgSrc:"images/jupiter.svg",icon:"images/jupiter.svg",keyringClass:JupiterCustodyKeyring,production:!0,hidden:!1,origins:[/^https:\/\/jupiter-custody-ui.codefi.network\//],environmentMapping:[{pattern:/^http:\/\/test-pattern/,mmiApiUrl:"http://test-url"},{pattern:/^http:\/\/localhost.*$/,mmiApiUrl:"http://localhost:3000/v1"}]},this.sdkFactory=(authDetails,apiUrl)=>(0,sdk_1.mmiSDKFactory)(sdk_1.JupiterCustodianApi,authDetails,this.authType,apiUrl),this.txDeepLink=async(address,txId)=>{const{apiUrl}=this.getAccountDetails(address),transactionLink={text:"Approve the transaction in the Jupiter Custody app. Once all required custody approvals have been performed the transaction will complete. Check your Jupiter Custody app for status.",url:null};return apiUrl&&apiUrl.includes("-demo")&&(transactionLink.url=`https://jupiter-custody-ui-demo.codefi.network/${txId}`),transactionLink}}getStatusMap(){return JupiterStatusMap_1.JupiterStatusMap}}JupiterCustodyKeyring.type="Custody - Jupiter",exports.JupiterCustodyKeyring=JupiterCustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterStatusMap=void 0;const types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.JupiterStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!1},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoCustodyKeyring=void 0;const sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),QredoStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoStatusMap.js");class QredoCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Qredo",this.custodianType={name:"Qredo",displayName:"Qredo",apiUrl:"https://api.qredo.network",imgSrc:"images/qredo.svg",icon:"images/qredo.svg",keyringClass:QredoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.qredo.network/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.sdkFactory=(authDetails,apiUrl)=>(0,sdk_1.mmiSDKFactory)(sdk_1.QredoCustodianApi,authDetails,this.authType,apiUrl),this.txDeepLink=async(_address,_txId)=>null}getStatusMap(){return QredoStatusMap_1.QredoStatusMap}}QredoCustodyKeyring.type="Custody - Qredo",exports.QredoCustodyKeyring=QredoCustodyKeyring},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoStatusMap=void 0;const types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.QredoStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},pending:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Pending",longText:"Pending",finished:!1},approved:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Authorized",longText:"Authorized",finished:!1},authorized:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Authorized",longText:"Authorized",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},scheduled:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Submitted",longText:"Waiting for block",finished:!1},pushed:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},confirmed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},cancelled:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},expired:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrations=exports.Migrator=exports.JupiterCustodyKeyring=exports.IMmiConfigurationControllerOptions=exports.MmiConfigurationController=exports.CustodyKeyring=exports.CUSTODIAN_TYPES=void 0;var custodianTypes_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/index.js");Object.defineProperty(exports,"CUSTODIAN_TYPES",{enumerable:!0,get:function(){return custodianTypes_1.CUSTODIAN_TYPES}});var CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js");Object.defineProperty(exports,"CustodyKeyring",{enumerable:!0,get:function(){return CustodyKeyring_1.CustodyKeyring}});var MmiConfiguration_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/MmiConfiguration.js");Object.defineProperty(exports,"MmiConfigurationController",{enumerable:!0,get:function(){return MmiConfiguration_1.MmiConfigurationController}});var IMmiConfigurationControllerOptions_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/interfaces/IMmiConfigurationControllerOptions.js");Object.defineProperty(exports,"IMmiConfigurationControllerOptions",{enumerable:!0,get:function(){return IMmiConfigurationControllerOptions_1.IMmiConfigurationControllerOptions}});var JupiterCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterCustodyKeyring.js");Object.defineProperty(exports,"JupiterCustodyKeyring",{enumerable:!0,get:function(){return JupiterCustodyKeyring_1.JupiterCustodyKeyring}});var migrator_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/migrator.js");Object.defineProperty(exports,"Migrator",{enumerable:!0,get:function(){return migrator_1.Migrator}});var migrations_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/index.js");Object.defineProperty(exports,"migrations",{enumerable:!0,get:function(){return migrations_1.migrations}})},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/interfaces/IMmiConfigurationControllerOptions.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMmiConfigurationControllerOptions=void 0;exports.IMmiConfigurationControllerOptions=class IMmiConfigurationControllerOptions{}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/001.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),lodash_clonedeep_1=__importDefault(__webpack_require__("./node_modules/lodash.clonedeep/index.js")),keyringTypesToChange=["Custody - Curv","Custody - Qredo","Custody - Jupiter"];exports.default={version:1,keyringTypesToChange,migrate(keyring){var _a;let versionedKeyring={};if(keyringTypesToChange.includes(keyring.type)&&(versionedKeyring=(0,lodash_clonedeep_1.default)(keyring),1!==(null===(_a=versionedKeyring.meta)||void 0===_a?void 0:_a.version))){versionedKeyring.meta={version:1};const newKeyring=function transformKeyring(keyring){delete keyring.jwt,delete keyring.token;const defaultApiUrl=keyring.custodianType.apiUrl;return keyring.accountsDetails=keyring.accountsDetails.map((details=>{var _a,_b;return{name:details.name,address:details.address,custodianDetails:details.custodianDetails,labels:details.labels,apiUrl:details.apiUrl||defaultApiUrl,chainId:details.chainId,custodyType:details.custodyType,authDetails:keyring.authType===types_1.AuthTypes.REFRESH_TOKEN?{refreshToken:details.jwt||details.token||(null===(_a=details.authDetails)||void 0===_a?void 0:_a.refreshToken)}:{jwt:details.jwt||details.token||(null===(_b=details.authDetails)||void 0===_b?void 0:_b.jwt)}}})),keyring}(versionedKeyring);versionedKeyring=newKeyring}return versionedKeyring||keyring}}},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrations=void 0;const _001_1=__importDefault(__webpack_require__("./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/001.js"));exports.migrations=[_001_1.default]},"./node_modules/@metamask-institutional/custody-controller/node_modules/@metamask-institutional/custody-keyring/dist/migrations/migrator.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Migrator=void 0;const events_1=__webpack_require__("./node_modules/events/events.js");class Migrator extends events_1.EventEmitter{constructor(opts){super();const migrations=(null==opts?void 0:opts.migrations)||[];this.migrations=migrations.sort(((a,b)=>a.version-b.version));const lastMigration=this.migrations.slice(-1)[0];this.defaultVersion=opts.defaultVersion||lastMigration&&lastMigration.version||0}migrateData(versionedKeyring=this.generateInitialState()){const pendingMigrations=this.migrations.filter((migration=>migration.keyringTypesToChange.includes(versionedKeyring.type)&&(!versionedKeyring.meta||versionedKeyring.meta.version<migration.version)));for(const migration of pendingMigrations)try{const migratedKeyring=migration.migrate(versionedKeyring);if(!migratedKeyring.meta)throw new Error("MMI Migrator - migration returned empty meta");if(migratedKeyring.meta.version!==migration.version)throw new Error("MMI Migrator - Migration did not update version number correctly");versionedKeyring=migratedKeyring}catch(err){const originalErrorMessage=err.message;return err.message=`MetaMask Institutional Migration Error #${migration.version}: ${originalErrorMessage}`,this.emit("error",err),versionedKeyring}return versionedKeyring}generateInitialState(data){return{meta:{version:this.defaultVersion},data}}}exports.Migrator=Migrator},"./node_modules/@metamask-institutional/extension/dist/ExtensionActions.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mmiActionsFactory=void 0,exports.mmiActionsFactory=function mmiActionsFactory({log,showLoadingIndication,submitRequestToBackground,displayWarning,hideLoadingIndication,forceUpdateMetamaskState,showModal,callBackgroundMethod}){const createAsyncAction=(name,params,forceUpdateMetamaskState,loadingText)=>(log.debug(`background.${name}`),async dispatch=>{let result;loadingText&&dispatch(showLoadingIndication(loadingText));try{result=await submitRequestToBackground(name,[...params])}catch(error){throw log.error(error),dispatch(displayWarning(error.message)),error}return loadingText&&dispatch(hideLoadingIndication()),forceUpdateMetamaskState&&await forceUpdateMetamaskState(dispatch),result}),createAction=(name,payload)=>()=>{callBackgroundMethod(name,[payload],(err=>{if(err)throw new Error(err.message)}))};return{connectCustodyAddresses:(custodianType,custodianName,newAccounts)=>createAsyncAction("connectCustodyAddresses",[custodianType,custodianName,newAccounts],forceUpdateMetamaskState,"Looking for your custodian account..."),getCustodianAccounts:(token,apiUrl,custody,getNonImportedAccounts)=>createAsyncAction("getCustodianAccounts",[token,apiUrl,custody,getNonImportedAccounts],forceUpdateMetamaskState,"Getting custodian accounts..."),getCustodianAccountsByAddress:(jwt,apiUrl,address,custody)=>createAsyncAction("getCustodianAccountsByAddress",[jwt,apiUrl,address,custody],forceUpdateMetamaskState,"Getting custodian accounts..."),getCustodianTransactionDeepLink:(address,txId)=>createAsyncAction("getCustodianTransactionDeepLink",[address,txId],forceUpdateMetamaskState),getCustodianConfirmDeepLink:txId=>createAsyncAction("getCustodianConfirmDeepLink",[txId],forceUpdateMetamaskState),getCustodianSignMessageDeepLink:(from,custodyTxId)=>createAsyncAction("getCustodianSignMessageDeepLink",[from,custodyTxId],forceUpdateMetamaskState),getCustodianToken:custody=>createAsyncAction("getCustodianToken",[custody],forceUpdateMetamaskState),getCustodianJWTList:custody=>createAsyncAction("getCustodianJWTList",[custody],forceUpdateMetamaskState),setWaitForConfirmDeepLinkDialog:waitForConfirmDeepLinkDialog=>createAction("setWaitForConfirmDeepLinkDialog",waitForConfirmDeepLinkDialog),setComplianceAuthData:({clientId,projectId})=>createAsyncAction("setComplianceAuthData",[{clientId,projectId}]),deleteComplianceAuthData:()=>createAsyncAction("deleteComplianceAuthData",[]),generateComplianceReport:address=>createAction("generateComplianceReport",address),getComplianceHistoricalReportsByAddress:(address,projectId)=>createAsyncAction("getComplianceHistoricalReportsByAddress",[address,projectId]),syncReportsInProgress:({address,historicalReports})=>createAction("syncReportsInProgress",{address,historicalReports}),removeConnectInstitutionalFeature:({origin,projectId})=>createAction("removeConnectInstitutionalFeature",{origin,projectId}),removeAddTokenConnectRequest:({origin,apiUrl,token})=>createAction("removeAddTokenConnectRequest",{origin,apiUrl,token}),setCustodianConnectRequest:({token,apiUrl,custodianType,custodianName})=>createAsyncAction("setCustodianConnectRequest",[{token,apiUrl,custodianType,custodianName}]),getCustodianConnectRequest:()=>createAsyncAction("getCustodianConnectRequest",[]),getMmiConfiguration:()=>createAsyncAction("getMmiConfiguration",[]),getAllCustodianAccountsWithToken:(custodyType,token)=>createAsyncAction("getAllCustodianAccountsWithToken",[custodyType,token]),setCustodianNewRefreshToken:(address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl)=>createAsyncAction("setCustodianNewRefreshToken",[address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl]),showCustodyConfirmLink:({link,address,closeNotification,custodyId})=>async dispatch=>{dispatch(showModal({name:"CUSTODY_CONFIRM_LINK",link,address,closeNotification,custodyId}))},showInteractiveReplacementTokenModal:()=>async dispatch=>{dispatch(showModal({name:"INTERACTIVE_REPLACEMENT_TOKEN_MODAL"}))}}}},"./node_modules/@metamask-institutional/extension/dist/ExtensionSelectors.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCustodianIconForAddress=exports.getConfiguredCustodians=exports.getMmiPortfolioUrl=exports.getMmiPortfolioEnabled=exports.getCustodyAccountSupportedChains=exports.getCustodyAccountDetails=exports.getTransactionStatusMap=exports.getWaitForConfirmDeepLinkDialog=void 0;const util_1=__webpack_require__("./node_modules/@ethereumjs/util/dist/index.js");exports.getWaitForConfirmDeepLinkDialog=function getWaitForConfirmDeepLinkDialog(state){return state.metamask.waitForConfirmDeepLinkDialog},exports.getTransactionStatusMap=function getTransactionStatusMap(state){return state.metamask.custodyStatusMaps},exports.getCustodyAccountDetails=function getCustodyAccountDetails(state){return state.metamask.custodyAccountDetails},exports.getCustodyAccountSupportedChains=function getCustodyAccountSupportedChains(state,address){return state.metamask.custodianSupportedChains?state.metamask.custodianSupportedChains[(0,util_1.toChecksumAddress)(address)]:[]},exports.getMmiPortfolioEnabled=function getMmiPortfolioEnabled(state){var _a,_b;return null===(_b=null===(_a=state.metamask.mmiConfiguration)||void 0===_a?void 0:_a.portfolio)||void 0===_b?void 0:_b.enabled},exports.getMmiPortfolioUrl=function getMmiPortfolioUrl(state){var _a,_b;return null===(_b=null===(_a=state.metamask.mmiConfiguration)||void 0===_a?void 0:_a.portfolio)||void 0===_b?void 0:_b.url},exports.getConfiguredCustodians=function getConfiguredCustodians(state){var _a;return(null===(_a=state.metamask.mmiConfiguration)||void 0===_a?void 0:_a.custodians)||[]},exports.getCustodianIconForAddress=function getCustodianIconForAddress(state,address){var _a,_b,_c,_d;let custodianIcon;const checksummedAddress=(0,util_1.toChecksumAddress)(address);if(null===(_a=state.metamask.custodyAccountDetails)||void 0===_a?void 0:_a[checksummedAddress]){const{custodianName}=state.metamask.custodyAccountDetails[checksummedAddress];custodianIcon=null===(_d=null===(_c=null===(_b=state.metamask.mmiConfiguration)||void 0===_b?void 0:_b.custodians)||void 0===_c?void 0:_c.find((custodian=>custodian.name===custodianName)))||void 0===_d?void 0:_d.iconUrl}return custodianIcon}},"./node_modules/@metamask-institutional/extension/dist/ExtensionUtils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleTxStatusUpdate=exports.setDashboardCookie=exports.getTxByCustodyId=exports.showCustodianDeepLink=exports.custodianEventHandlerFactory=exports.updateCustodianTransactions=void 0;const custody_controller_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/index.js"),sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),TRANSACTION_EVENTS={[types_1.MetaMaskTransactionStatuses.APPROVED]:"Transaction Approved",[types_1.MetaMaskTransactionStatuses.SIGNED]:"Transaction Finalized",[types_1.MetaMaskTransactionStatuses.REJECTED]:"Transaction Rejected",[types_1.MetaMaskTransactionStatuses.FAILED]:"Transaction Failed",[types_1.MetaMaskTransactionStatuses.SUBMITTED]:"Transaction Submitted",[types_1.MetaMaskTransactionStatuses.CONFIRMED]:"Transaction Confirmed",[types_1.MetaMaskTransactionStatuses.UNAPPROVED]:"Transaction Unapproved",[types_1.MetaMaskTransactionStatuses.SIGNED]:"Transaction Signed",[types_1.MetaMaskTransactionStatuses.DROPPED]:"Transaction Dropped"};function getTxByCustodyId(getTransactions,txCustodyId){const found=getTransactions({searchCriteria:{custodyId:txCustodyId}});if(found.length)return found[0]}async function handleTxStatusUpdate(txData,txStateManager,getPendingNonce,setTxHash){var _a;const txMeta=getTxByCustodyId((({searchCriteria})=>txStateManager.getTransactions({searchCriteria})),txData.transaction.id);if(txMeta){if(txMeta.custodyStatus=txData.transaction.status.displayText.toLowerCase(),txMeta.custodyStatusDisplayText=null===(_a=txData.transaction)||void 0===_a?void 0:_a.status.displayText,!txData.transaction.hash||txMeta.hash&&"0x"!==txMeta.hash||setTxHash(txMeta.id,txData.transaction.hash),txData.transaction.status.signed&&!txData.transaction.status.finished&&txMeta.status!==types_1.MetaMaskTransactionStatuses.SIGNED&&txStateManager.setTxStatusSigned(txMeta.id),!txMeta.txParams.nonce||txData.transaction.nonce&&Number(txMeta.txParams.nonce)!==Number(txData.transaction.nonce)){const nonce="0x"+(parseInt(txData.transaction.nonce)||await getPendingNonce(txData.transaction.from)).toString(16),newTxParams=await{...txMeta.txParams,nonce};txMeta.txParams=newTxParams}if(txData.transaction.status.finished&&txData.transaction.status.success&&txMeta.status!==types_1.MetaMaskTransactionStatuses.CONFIRMED)txStateManager.setTxStatusSubmitted(txMeta.id),txStateManager.setTxStatusConfirmed(txMeta.id);else if(txData.transaction.status.finished&&!txData.transaction.status.success){let message=`Transaction status from custodian: ${txMeta.custodyStatusDisplayText}`;txData.transaction.status.reason&&(message=txData.transaction.status.reason),txStateManager.setTxStatusFailed(txMeta.id,message)}return txStateManager.updateTransaction(txMeta,"Updated custody transaction status."),txMeta}return null}exports.updateCustodianTransactions=async function updateCustodianTransactions({keyring,type,txList,custodyController,transactionUpdateController,txStateManager,getPendingNonce,setTxHash}){const txStatusMap=keyring.getStatusMap();await Promise.all(txList.map((async tx=>{var _a;if(tx.custodyId&&(!tx.custodyStatus||!(null===(_a=txStatusMap[tx.custodyStatus])||void 0===_a?void 0:_a.finished))){if(custodyController.getCustodyTypeByAddress((0,custody_controller_1.toChecksumHexAddress)(tx.txParams.from))!==type)return;const custodyTx=await keyring.getTransaction(tx.txParams.from,tx.custodyId);if(null===custodyTx)return;const status=(0,sdk_1.mapTransactionStatus)(custodyTx.transactionStatus),updateEvent={transaction:{id:custodyTx.custodian_transactionId,hash:custodyTx.transactionHash,status,from:custodyTx.from,gasPrice:custodyTx.gasPrice,nonce:custodyTx.nonce,to:custodyTx.to,value:custodyTx.value,data:custodyTx.data,gas:custodyTx.gasLimit,type:null},metadata:null};await handleTxStatusUpdate(updateEvent,txStateManager,getPendingNonce,setTxHash),status.finished||transactionUpdateController.addTransactionToWatchList(custodyTx.custodian_transactionId,custodyTx.from,null,!1)}}))),custodyController.storeCustodyStatusMap(keyring.type.split(" - ")[1],txStatusMap)},exports.custodianEventHandlerFactory=function custodianEventHandlerFactory({getState,log,getPendingNonce,setTxHash,typedMessageManager,personalMessageManager,txStateManager,custodyController,trackTransactionEvent}){return async txData=>{var _a,_b;let address;Object.hasOwnProperty.call(txData,"transaction")&&null!==txData.transaction&&Object.hasOwnProperty.call(txData.transaction,"from")?address=txData.transaction.from:Object.hasOwnProperty.call(txData,"signedMessage")&&null!==txData.signedMessage&&Object.hasOwnProperty.call(txData.signedMessage,"address")&&(address=txData.signedMessage.address);if(!custodyController.getCustodyTypeByAddress((0,custody_controller_1.toChecksumHexAddress)(address)))return log.info(`Got an update for an address I do not own: ${address}`),getState();if(!Object.hasOwnProperty.call(txData,"signedMessage")&&!txData.transaction)return getState();if(Object.hasOwnProperty.call(txData,"signedMessage")&&null!==txData.signedMessage){if(console.log("Update for message:",txData.signedMessage.id,txData.signedMessage.status),txData.signedMessage.signature&&custodyController.setWaitForConfirmDeepLinkDialog(!1),/personal/.test(txData.signedMessage.signatureVersion)){const msgId=null===(_b=personalMessageManager.getMsgByCustodyId(txData.signedMessage.id))||void 0===_b?void 0:_b.id;console.log(personalMessageManager.getMsgByCustodyId(txData.signedMessage.id)),txData.signedMessage.signature&&"0x"!=txData.signedMessage.signature?personalMessageManager.setMsgStatusSigned(msgId,txData.signedMessage.signature):txData.signedMessage.status.finished&&!txData.signedMessage.status.success&&personalMessageManager.rejectMsg(msgId)}else{const msgId=null===(_a=typedMessageManager.getMsgByCustodyId(txData.signedMessage.id))||void 0===_a?void 0:_a.id;txData.signedMessage.signature&&"0x"!=txData.signedMessage.signature?typedMessageManager.setMsgStatusSigned(msgId,txData.signedMessage.signature):txData.signedMessage.status.finished&&!txData.signedMessage.status.success&&typedMessageManager.rejectMsg(msgId)}return}console.log("Update for transaction: ",txData.transaction.id,txData.transaction.status);const txMeta=await handleTxStatusUpdate(txData,txStateManager,getPendingNonce,setTxHash);if(txMeta){if(TRANSACTION_EVENTS[txMeta.status])try{trackTransactionEvent(txMeta,TRANSACTION_EVENTS[txMeta.status])}catch(error){log.error(error)}console.log("custodianEventHandler finished, txMeta:",txMeta)}}},exports.showCustodianDeepLink=async function showCustodianDeepLink({dispatch,MMIActions,txId,fromAddress,closeNotification,isSignature,custodyId,onDeepLinkFetched,onDeepLinkShown}){let deepLink,custodianTxId=custodyId;if(isSignature){deepLink=await dispatch(MMIActions.getCustodianSignMessageDeepLink(fromAddress,custodyId))}else{const result=await dispatch(MMIActions.getCustodianConfirmDeepLink(txId));deepLink=result.deepLink,custodianTxId=result.custodyId}onDeepLinkFetched();try{await dispatch(MMIActions.showCustodyConfirmLink({link:deepLink,address:fromAddress,closeNotification,custodyId:custodianTxId})),dispatch(MMIActions.setWaitForConfirmDeepLinkDialog(!0)),onDeepLinkShown()}catch(e){dispatch(MMIActions.setWaitForConfirmDeepLinkDialog(!1))}},exports.getTxByCustodyId=getTxByCustodyId,exports.setDashboardCookie=async function setDashboardCookie(mmiDashboardData,cookieSetUrls){try{const promiseArray=cookieSetUrls.map((url=>fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(mmiDashboardData)})));return await Promise.all(promiseArray),!0}catch(e){return console.log("Error setting dashboard cookie:",e.message,e.stack,e.response),!1}},exports.handleTxStatusUpdate=handleTxStatusUpdate},"./node_modules/@metamask-institutional/extension/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.kC=void 0;var ExtensionUtils_1=__webpack_require__("./node_modules/@metamask-institutional/extension/dist/ExtensionUtils.js");Object.defineProperty(exports,"kC",{enumerable:!0,get:function(){return ExtensionUtils_1.showCustodianDeepLink}});var ExtensionSelectors_1=__webpack_require__("./node_modules/@metamask-institutional/extension/dist/ExtensionSelectors.js");var ExtensionActions_1=__webpack_require__("./node_modules/@metamask-institutional/extension/dist/ExtensionActions.js")},"./node_modules/@metamask-institutional/sdk/dist/classes/AccountHierarchyNode.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ETHEREUM_ACCOUNT=exports.WALLET=exports.ORGANIZATION=exports.ROOT_NAME=exports.ROOT=exports.AccountHierarchyNode=void 0;exports.AccountHierarchyNode=class AccountHierarchyNode{constructor(type,id,name,parent=null){this.type=type,this.name=name,this.id=id,this.parent=parent,this.children=[]}serialize(){return this.removeParents(),this}removeParents(){this.parent=void 0,this.children.length&&this.children.forEach((child=>child.removeParents()))}findItemWithId(id){if(this.id===id)return this;for(const child of this.children){const found=child.findItemWithId(id);if(found)return found}return null}getEthereumAccounts(stack=[]){this.account&&stack.push(this.account);for(const child of this.children)child.getEthereumAccounts(stack);return stack}},exports.ROOT="root",exports.ROOT_NAME="Root account node",exports.ORGANIZATION="organization",exports.WALLET="wallet",exports.ETHEREUM_ACCOUNT="ethereum-account"},"./node_modules/@metamask-institutional/sdk/dist/classes/MMISDK.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MMISDK=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),order_by_property_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/order-by-property.js");class MMISDK extends events_1.EventEmitter{constructor(custodianApi,authDetails,authType,apiUrl,defaultCacheAgeSeconds=-1){super(),this.defaultCacheAgeSeconds=defaultCacheAgeSeconds,this.cache=new simplecache_1.SimpleCache,this.custodianApi=new custodianApi(authDetails,authType,apiUrl,defaultCacheAgeSeconds),this.custodianApi.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,(event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)})),this.custodianApi.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,(event=>{this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)}))}changeRefreshTokenAuthDetails(authDetails){this.custodianApi.changeRefreshTokenAuthDetails(authDetails)}getAccountHierarchy(){return this.custodianApi.getAccountHierarchy()}async getEthereumAccounts(maxCacheAgeSeconds=this.defaultCacheAgeSeconds){console.log("GetEthereumAccounts MMI SDK");return this.cache.tryCachingArray("getEthereumAccounts",maxCacheAgeSeconds,(async()=>(await this.custodianApi.getEthereumAccounts()).sort((0,order_by_property_1.orderByProperty)("balance")).reverse()))}async getEthereumAccountsByAddress(address,maxCacheAgeSeconds=this.defaultCacheAgeSeconds){const cacheKey="getEthereumAccountsByAddress-"+address;return this.cache.tryCachingArray(cacheKey,maxCacheAgeSeconds,(async()=>(await this.custodianApi.getEthereumAccountsByAddress(address)).sort((0,order_by_property_1.orderByProperty)("balance")).reverse()))}async getEthereumAccountsByLabelOrAddressName(name,maxCacheAgeSeconds=this.defaultCacheAgeSeconds){const cacheKey="getEthereumAccountsByLabelOrAddressName-"+name;return this.cache.tryCachingArray(cacheKey,maxCacheAgeSeconds,(async()=>(await this.custodianApi.getEthereumAccountsByLabelOrAddressName(name)).sort((0,order_by_property_1.orderByProperty)("balance")).reverse()))}async createTransaction(txParams,txMeta){return await this.custodianApi.createTransaction(txParams,txMeta)}getTransaction(from,transactionId){return this.custodianApi.getTransaction(from,transactionId)}getAllTransactions(){return this.custodianApi.getAllTransactions()}getCustomerId(){return this.custodianApi.getCustomerId()}async signedTypedData_v4(address,buffer,note=""){return await this.custodianApi.signTypedData_v4(address,buffer,note)}async signPersonalMessage(address,message){return await this.custodianApi.signPersonalMessage(address,message)}async getSignature(address,signatureId){return this.custodianApi.getSignedMessage(address,signatureId)}async getCustomerProof(){return this.custodianApi.getCustomerProof()}async getErc20Tokens(){return this.custodianApi.getErc20Tokens()}async getSupportedChains(address){return this.custodianApi.getSupportedChains(address)}async getTransactionLink(transactionId){return this.custodianApi.getTransactionLink(transactionId)}}exports.MMISDK=MMISDK},"./node_modules/@metamask-institutional/sdk/dist/classes/NetworkMappings.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkMappings=void 0;const defaultMappings=[{name:"Mainnet",custodianName:"ETHEREUM_MAINNET",custodianId:"d8e36489-4561-4062-822b-9245eadd20c0",chainId:"1"},{name:"Ropsten",custodianName:"ETHEREUM_ROPSTEN",custodianId:"13323143-efa4-4733-b4e6-79e384a39fdd",chainId:"3"},{name:"Kovan",custodianName:"ETHEREUM_KOVAN",custodianId:"6b40f106-c0b5-4d04-85df-ec772253f0f4",chainId:"42"},{name:"Ethereum Classic",custodianName:"ETHEREUM_CLASSIC_MAINNET",custodianId:"043f3fb5-53ed-4c8a-a508-765634a6b354",chainId:"61"}];exports.NetworkMappings=class NetworkMappings{constructor(mappings=defaultMappings){this.mappings=[],this.populateMappings(mappings)}populateMappings(newMappings){this.mappings=this.mappings.concat(newMappings.filter((mapping=>!this.mappings.find((existingMapping=>mapping.chainId===existingMapping.chainId)))))}unsupportedMapping(prop){return console.warn("Unsupported network: "+prop.toString()),{chainId:"0",name:"Unsupported",custodianName:"Unsupported",custodianId:"00000000-0000-0000-0000-000000000000"}}getMappingByChainId(chainId){return this.mappings.find((mapping=>mapping.chainId==chainId))||this.unsupportedMapping(chainId)}getMappingByCustodianName(custodianName){return this.mappings.find((mapping=>mapping.custodianName==custodianName))||this.unsupportedMapping(custodianName)}}},"./node_modules/@metamask-institutional/sdk/dist/constants/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_MAX_CACHE_AGE=exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT=exports.REFRESH_TOKEN_CHANGE_EVENT=void 0,exports.REFRESH_TOKEN_CHANGE_EVENT="refresh_token_change",exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT="interactive_replacement_token_change",exports.DEFAULT_MAX_CACHE_AGE=60},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoClient=void 0;const CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");exports.BitgoClient=class BitgoClient{constructor(apiUrl,jwt){this.bitgoApiurl=apiUrl,this.jwt=jwt}getHeaders(){return{"Content-Type":"application/json",Authorization:`Bearer ${this.jwt}`}}async getEthereumAccounts(){const headers=this.getHeaders();try{const body=await fetch(`${this.bitgoApiurl}/wallets`,{headers});return(await body.json()).data}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getEthereumAccountByAddress(address){const headers=this.getHeaders();try{const body=await fetch(`${this.bitgoApiurl}/mmi/wallets/address/${address}`,{headers}),accounts=await body.json();return accounts.data.length?accounts.data[0]:null}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(bitgoTxDetails,txParams){const headers=this.getHeaders();"0"===txParams.type||"1"===txParams.type?txParams.gasPrice=txParams.gasPrice:"2"===txParams.type&&(txParams.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,txParams.maxFeePerGas=txParams.maxFeePerGas);try{const response=await fetch(`${this.bitgoApiurl}/mmi/${bitgoTxDetails.coinId}/wallet/${bitgoTxDetails.walletId}/tx/build`,{method:"POST",headers,body:JSON.stringify({txParams})});return(await response.json()).data}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){const headers=this.getHeaders();try{const response=await fetch(`${this.bitgoApiurl}/mmi/wallets/transactions/${custodian_transactionId}`,{headers});return(await response.json()).data[0]}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(){const headers=this.getHeaders();try{const response=await fetch(`${this.bitgoApiurl}/custodian/transaction`,{headers});return(await response.json()).data}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(){const headers=this.getHeaders();try{const response=await fetch(`${this.bitgoApiurl}/mmi/customer-proof`,{method:"POST",headers,body:JSON.stringify({version:"n/a"})});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(fromAddress,message,coinId,walletId,version){const headers=await this.getHeaders(),payload={address:fromAddress,payload:message,encodingVersion:version||"v4"};try{const response=await fetch(`${this.bitgoApiurl}/mmi/${coinId}/wallet/${walletId}/messages/typed`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(fromAddress,message,coinId,walletId){const headers=await this.getHeaders(),payload={address:fromAddress,message};try{const response=await fetch(`${this.bitgoApiurl}/mmi/${coinId}/wallet/${walletId}/messages/personal`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getSignedMessage(custodian_signedMessageId,coinId,walletId){const headers=await this.getHeaders();try{const response=await fetch(`${this.bitgoApiurl}/mmi/${coinId}/wallet/${walletId}/messages/${custodian_signedMessageId}`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoCustodianApi=void 0;const events_1=__webpack_require__("./node_modules/events/events.js"),BitgoClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoClient.js"),DefaultBitgoCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/DefaultBitgoCustodianDetails.js");class BitgoCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultBitgoCustodianDetails_1.DefaultBitgoCustodianDetails.apiUrl,_cacheAge){super(),this._cacheAge=_cacheAge,this.integrationVersion=1;const{jwt}=authDetails;this.client=new BitgoClient_1.BitgoClient(apiUrl,jwt),this.jwt=jwt}getAccountHierarchy(){return null}async getEthereumAccounts(chainId){const mappedAccounts=(await this.client.getEthereumAccounts()).map((account=>{var _a;return{name:(null===(_a=account.labels.find((label=>"Wallet Name"===label.key)))||void 0===_a?void 0:_a.value)||"Unnamed Bitgo Wallet",address:account.address,balance:account.balance,custodianDetails:{accountId:account.custodianDetails.id,coinId:account.custodianDetails.coin},chainId:account.chainId,labels:account.labels.filter((label=>"Wallet Name"!==label.key))}}));return chainId?mappedAccounts.filter((account=>account.chainId===chainId)):mappedAccounts}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter((account=>account.address.toLowerCase().includes(address.toLowerCase())))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter((account=>account.name.includes(name)))}async createTransaction(txParams){const fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw new Error("No such ethereum account!");const walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId;txParams.gasLimit=(Number(txParams.gasLimit)+1e5).toString();const result=await this.client.createTransaction({walletId,coinId},txParams);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodianTransactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getTransaction(_from,custodian_transactionId){const result=await this.client.getTransaction(custodian_transactionId);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodianTransactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getCustomerId(){return"bitgo-customer"}async getAllTransactions(){return(await this.client.getTransactions()).map((result=>({transactionStatus:result.transactionStatus,custodian_transactionId:result.custodianTransactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash})))}async getCustomerProof(){const{data}=await this.client.getCustomerProof();return data}async getErc20Tokens(){return{}}async getSupportedChains(address){const account=await this.client.getEthereumAccountByAddress(address);return account?[account.chainId.toString()]:[]}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw new Error("BitGo does not support refresh tokens")}async getSignedMessage(address,custodian_signedMessageId){const accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw new Error("No such ethereum account!");const walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId,result=await this.client.getSignedMessage(custodian_signedMessageId,coinId,walletId);return result?{id:result.data.id,signature:result.data.signature,status:result.data.status}:null}async signTypedData_v4(address,message,version){const accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw new Error("No such ethereum account!");const walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId;return{custodian_transactionId:(await this.client.signTypedData_v4(address,message,coinId,walletId,version)).data.id,transactionStatus:"created",from:address}}async signPersonalMessage(address,message){const accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw new Error("No such ethereum account!");const walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId;return{custodian_transactionId:(await this.client.signPersonalMessage(address,message,coinId,walletId)).data.id,transactionStatus:"created",from:address}}}exports.BitgoCustodianApi=BitgoCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/DefaultBitgoCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultBitgoCustodianDetails=void 0,exports.DefaultBitgoCustodianDetails={apiUrl:"https://app.bitgo.com/defi/v2"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusClient=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");exports.CactusClient=class CactusClient{constructor(apiUrl,refreshToken){this.apiUrl=apiUrl,this.refreshToken=refreshToken,this.cache=new simplecache_1.SimpleCache}async getHeaders(){return{Authorization:`Bearer ${await this.cache.tryCachingArray("accessToken",7200,(async()=>this.getAccessToken()))}`}}async getAccessToken(){try{const response=await fetch(`${this.apiUrl}/tokens`,{method:"POST",body:JSON.stringify({grantType:"refresh_token",refreshToken:this.refreshToken})}),data=await response.json();if(!data.jwt)throw new Error("No access token");return data.jwt}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getEthereumAccounts(){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/eth-accounts`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(cactusTxDetails,txParams){const headers=await this.getHeaders(),payload={to:txParams.to,from:txParams.from,value:txParams.value,data:txParams.data,gasLimit:txParams.gasLimit,note:cactusTxDetails.note};"0"===txParams.type||"1"===txParams.type?payload.gasPrice=txParams.gasPrice:"2"===txParams.type&&(payload.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,payload.maxFeePerGas=txParams.maxFeePerGas);try{const response=await fetch(`${this.apiUrl}/transactions?chainId=${cactusTxDetails.chainId}`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getSignedMessage(custodian_signedMessageId){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/signatures?transactionId=${custodian_signedMessageId}`,{headers}),data=await response.json();return data.length?data[0]:null}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/transactions?transactionId=${custodian_transactionId}`,{headers}),data=await response.json();return data.length?data[0]:null}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(chainId){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/transactions?chainId=${chainId}`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/customer-proof`,{method:"POST",headers,body:JSON.stringify({})});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(fromAddress,message,signatureVersion,chainId){const headers=await this.getHeaders(),payload={address:fromAddress,payload:message,signatureVersion};let url=`${this.apiUrl}/signatures`;chainId&&(url+=`?chainId=${chainId}`);try{const response=await fetch(url,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(fromAddress,message){const headers=await this.getHeaders(),payload={address:fromAddress,payload:{message},signatureVersion:"personalSign"};try{const response=await fetch(`${this.apiUrl}/signatures`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getChainIds(){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/chainIds`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusCustodianApi=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),map_status_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/map-status.js"),CactusClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusClient.js"),DefaultCactusCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/DefaultCactusCustodianDetails.js");class CactusCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultCactusCustodianDetails_1.DefaultCactusCustodianDetails.apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=1,this.client=new CactusClient_1.CactusClient(apiUrl,authDetails.refreshToken)}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.getEthereumAccounts()).map((account=>({name:account.name||"Cactus wallet",address:account.address,balance:account.balance,custodianDetails:{walletId:account.custodianDetails.walletId,chainId:account.chainId},labels:account.labels?account.labels.map((label=>({key:"label",value:label}))):[]})))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter((account=>account.address.toLowerCase().includes(address.toLowerCase())))}async getEthereumAccountsByLabelOrAddressName(name){const accounts=await this.getEthereumAccounts();return name.length?accounts.filter((account=>new RegExp(name).test(account.name))):accounts}async createTransaction(txParams,txMeta){const result=await this.client.createTransaction({chainId:Number(txMeta.chainId),note:txMeta.note},txParams);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodian_transactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getTransaction(_from,custodian_transactionId){const result=await this.client.getTransaction(custodian_transactionId);return result?{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodian_transactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}:null}async getSignedMessage(address,custodian_signedMessageId){var _a;const result=await this.client.getSignedMessage(custodian_signedMessageId);let signature=null==result?void 0:result.signature;return result?((null===(_a=result.signature)||void 0===_a?void 0:_a.length)&&(signature=result.signature),{id:result.custodian_transactionId,signature,status:(0,map_status_1.mapTransactionStatus)(result.transactionStatus)}):null}async getCustomerId(){return"cactus-customer"}async getAllTransactions(){throw new Error("Not implemented")}async getCustomerProof(){const{jwt}=await this.client.getCustomerProof();return jwt}async signTypedData_v4(address,message,version){var _a;const result=await this.client.signTypedData_v4(address,message,version,null===(_a=message.domain)||void 0===_a?void 0:_a.chainId);return{custodian_transactionId:result.custodian_transactionId,transactionStatus:result.transactionStatus,from:address}}async signPersonalMessage(address,message){const result=await this.client.signPersonalMessage(address,message);return{custodian_transactionId:result.custodian_transactionId,transactionStatus:result.transactionStatus,from:address}}async getErc20Tokens(){return{}}async getSupportedChains(){return this.cache.tryCachingArray("getSupportedChains",this.cacheAge,(async()=>{const{networks}=await this.client.getChainIds();return networks.map((network=>network.chainID))}))}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw new Error("Not implemented yet")}}exports.CactusCustodianApi=CactusCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/DefaultCactusCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultCactusCustodianDetails=void 0,exports.DefaultCactusCustodianDetails={apiUrl:"https://jupiter-custody.codefi.network"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/curv/CurvCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CurvCustodianApi=void 0;const events_1=__webpack_require__("./node_modules/events/events.js");class CurvCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,_apiUrl=null,cacheAge){super(),this.cacheAge=cacheAge,this.integrationVersion=1}async getAccountHierarchy(){return null}async getEthereumAccounts(_chainId){return null}async getEthereumAccountsByAddress(_address){return null}async createTransaction(_txParams){return null}async getTransaction(_from,_custodian_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw new Error("Not implemented yet")}async getCustomerId(){return null}async getCustomerProof(){return null}async getAllTransactions(){return null}async signTypedData_v4(_address,_buffer,_version){return null}async signPersonalMessage(_address,_message){return null}async suggestGasPrices(_address){return null}async getNetworkMappings(_organizationId){return null}async getErc20Tokens(){return null}async getSupportedChains(){return null}async getEthereumAccountsByLabelOrAddressName(_name,_chainId){return null}async getTransactionLink(_transactionId){return null}}exports.CurvCustodianApi=CurvCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcClient.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcClient=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),crypto_1=__importDefault(__webpack_require__("?9581")),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),json_rpc_call_1=__importDefault(__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/json-rpc-call.js"));class JsonRpcClient extends events_1.EventEmitter{constructor(apiBaseUrl,refreshToken,refreshTokenUrl){super(),this.apiBaseUrl=apiBaseUrl,this.refreshToken=refreshToken,this.refreshTokenUrl=refreshTokenUrl,this.cacheAge=null,this.call=(0,json_rpc_call_1.default)(`${apiBaseUrl}/v1/json-rpc`),this.cache=new simplecache_1.SimpleCache}setRefreshToken(refreshToken){const payload={oldRefreshToken:this.refreshToken,newRefreshToken:refreshToken};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload),this.refreshToken=refreshToken}async getAccessToken(){if(this.cacheAge){if(this.cache.cacheExists("accessToken")&&this.cache.cacheValid("accessToken",this.cacheAge))return this.cache.getCache("accessToken")}try{const data=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken}),options={headers:{"Content-Type":"application/x-www-form-urlencoded"}},response=await fetch(this.refreshTokenUrl,{method:"POST",body:data,headers:options.headers,credentials:"same-origin"});if(401===(null==response?void 0:response.status)){const url=null==response?void 0:response.url,oldRefreshToken=this.refreshToken,hashedToken=crypto_1.default.createHash("sha256").update(oldRefreshToken+url).digest("hex");throw this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,{url,oldRefreshToken:hashedToken}),new Error("Custodian session expired")}const responseJson=await response.json();if(this.cacheAge=responseJson.expires_in,this.cache.setCache("accessToken",responseJson.access_token),responseJson.refresh_token&&responseJson.refresh_token!==this.refreshToken){console.log("JsonRPCClient: Refresh token changed to "+responseJson.refresh_token.substring(0,5)+"..."+responseJson.refresh_token.substring(responseJson.refresh_token.length-5));const oldRefreshToken=this.refreshToken;this.setRefreshToken(responseJson.refresh_token);const payload={oldRefreshToken,newRefreshToken:responseJson.refresh_token};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}return responseJson.access_token}catch(e){throw new Error(e)}}async listAccounts(){const accessToken=await this.getAccessToken();return this.call("custodian_listAccounts",{},accessToken)}async getCustomerProof(){const accessToken=await this.getAccessToken();return this.call("custodian_getCustomerProof",{},accessToken)}async createTransaction(createTransactionPayload){const accessToken=await this.getAccessToken();return this.call("custodian_createTransaction",createTransactionPayload,accessToken)}async getAccountChainIds(listAccountChainIdPayload){const accessToken=await this.getAccessToken();return this.call("custodian_listAccountChainIds",listAccountChainIdPayload,accessToken)}async signPersonalMessage(signPayload){const accessToken=await this.getAccessToken();return this.call("custodian_sign",signPayload,accessToken)}async signTypedData(signPayload){const accessToken=await this.getAccessToken();return this.call("custodian_signTypedData",signPayload,accessToken)}async getTransaction(getTransactionPayload){const accessToken=await this.getAccessToken();return this.call("custodian_getTransactionById",getTransactionPayload,accessToken)}async getSignedMessage(getSignedMessagePayload){const accessToken=await this.getAccessToken();return this.call("custodian_getSignedMessageById",getSignedMessagePayload,accessToken)}async getTransactionLink(getTransactionLinkPayload){const accessToken=await this.getAccessToken();return this.call("custodian_getTransactionLink",getTransactionLinkPayload,accessToken)}}exports.JsonRpcClient=JsonRpcClient},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcCustodianApi=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),JsonRpcClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcClient.js"),hexlify_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/hexlify.js"),mapStatusObjectToStatusText_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/mapStatusObjectToStatusText.js");class JsonRpcCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=2;const{refreshToken}=authDetails;this.client=new JsonRpcClient_1.JsonRpcClient(apiUrl,refreshToken,authDetails.refreshTokenUrl),this.client.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,(event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)})),this.client.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,(event=>{this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)}))}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.listAccounts()).result.map((account=>({name:account.name,address:account.address,custodianDetails:null,labels:account.tags.map((tag=>({key:tag.name,value:tag.value})))})))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter((account=>account.address.toLowerCase().includes(address.toLowerCase())))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter((account=>account.name.includes(name)))}async createTransaction(txParams,txMeta){const fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw new Error("No such ethereum account!");const payload={from:accounts[0].address,to:txParams.to,data:txParams.data,value:(0,hexlify_1.hexlify)(txParams.value),gas:(0,hexlify_1.hexlify)(txParams.gasLimit),type:(0,hexlify_1.hexlify)(txParams.type)};2===Number(txParams.type)?(payload.maxFeePerGas=(0,hexlify_1.hexlify)(txParams.maxFeePerGas),payload.maxPriorityFeePerGas=(0,hexlify_1.hexlify)(txParams.maxPriorityFeePerGas)):payload.gasPrice=(0,hexlify_1.hexlify)(txParams.gasPrice);const{result}=await this.client.createTransaction([payload,{chainId:(0,hexlify_1.hexlify)(txMeta.chainId),note:txMeta.note,originUrl:txMeta.origin,transactionCategory:txMeta.transactionCategory}]);return{custodian_transactionId:result,transactionStatus:"created",from:accounts[0].address}}async getTransaction(_from,custodian_transactionId){var _a;const{result}=await this.client.getTransaction([custodian_transactionId]);return result?{transactionStatus:(0,mapStatusObjectToStatusText_1.mapStatusObjectToStatusText)(result.status),transactionStatusDisplayText:null===(_a=result.status)||void 0===_a?void 0:_a.displayText,custodian_transactionId:result.id,from:result.from,gasLimit:result.gas,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.hash,reason:result.status.reason,to:result.to}:null}async getSignedMessage(_address,custodian_signedMessageId){const{result}=await this.client.getSignedMessage([custodian_signedMessageId]);return result?{signature:result.signature,status:result.status}:null}async getTransactionLink(transactionId){const{result}=await this.client.getTransactionLink([transactionId]);return result?{url:result.url,text:result.text,action:result.action,ethereum:result.ethereum}:null}async getCustomerId(){return null}async getAllTransactions(){return null}async getCustomerProof(){const{result}=await this.client.getCustomerProof();return result.jwt}async signTypedData_v4(address,message,version){if(!(await this.getEthereumAccountsByAddress(address)).length)throw new Error("No such ethereum account!");version=version.toLowerCase();const{result}=await this.client.signTypedData([address,message,version]);return{custodian_transactionId:result,transactionStatus:"created",from:address}}async signPersonalMessage(address,message){const accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw new Error("No such ethereum account!");const{result}=await this.client.signPersonalMessage([address,message]);return{custodian_transactionId:result,transactionStatus:"created",from:accounts[0].address}}async getErc20Tokens(){return{}}async getSupportedChains(address){return this.cache.tryCachingArray("getSupportedChains-"+address,this.cacheAge,(async()=>{const{result}=await this.client.getAccountChainIds([address]);return result}))}changeRefreshTokenAuthDetails(authDetails){this.client.setRefreshToken(authDetails.refreshToken)}}exports.JsonRpcCustodianApi=JsonRpcCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/hexlify.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hexlify=void 0,exports.hexlify=function hexlify(num){return"0x"+BigInt(num).toString(16)}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/json-rpc-call.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function default_1(jsonRpcEndpoint){let requestId=0;return async function jsonRpcCall(method,params,accessToken){let response,responseJson;requestId++,console.debug("JSON-RPC >",method,requestId,params,jsonRpcEndpoint);try{if(response=await fetch(jsonRpcEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${accessToken}`},body:JSON.stringify({jsonrpc:"2.0",id:requestId,method,params}),credentials:"same-origin"}),responseJson=await response.json(),responseJson.error)throw console.log("JSON-RPC <",method,requestId,responseJson,jsonRpcEndpoint),new Error(responseJson.error.message);console.debug("JSON-RPC <",method,requestId,responseJson.result,jsonRpcEndpoint)}catch(e){throw console.log("JSON-RPC <",method,requestId,e,jsonRpcEndpoint),e}return responseJson}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/mapStatusObjectToStatusText.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStatusObjectToStatusText=void 0,exports.mapStatusObjectToStatusText=function mapStatusObjectToStatusText(status){return status.finished&&status.submitted&&status.signed&&status.success?"mined":status.finished&&status.submitted&&status.signed&&!status.success?"failed":status.submitted&&!status.finished?"submitted":status.signed&&!status.submitted?"signed":status.signed||status.finished?!status.signed&&status.finished?"aborted":void 0:"created"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/DefaultJupiterCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultJupiterCustodianDetails=void 0,exports.DefaultJupiterCustodianDetails={apiUrl:"https://jupiter-custody.codefi.network"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterClient=void 0;const CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");exports.JupiterClient=class JupiterClient{constructor(apiUrl,jwt){this.jupiterApiurl=apiUrl,this.jwt=jwt}getHeaders(){return{Authorization:`Bearer ${this.jwt}`}}async getEthereumAccounts(){const headers=this.getHeaders();try{const response=await fetch(`${this.jupiterApiurl}/custodian/account`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(jupiterTxDetails,txParams){const headers=this.getHeaders(),payload={to:txParams.to,accountId:jupiterTxDetails.accountId,value:txParams.value,data:txParams.data,type:txParams.type,gasLimit:txParams.gasLimit,network:jupiterTxDetails.chainId};"0"===txParams.type||"1"===txParams.type?payload.gasPrice=txParams.gasPrice:"2"===txParams.type&&(payload.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,payload.maxFeePerGas=txParams.maxFeePerGas);try{const response=await fetch(`${this.jupiterApiurl}/custodian/transaction`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){const headers=this.getHeaders();try{const response=await fetch(`${this.jupiterApiurl}/custodian/transaction/${custodian_transactionId}`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(){const headers=this.getHeaders();try{const response=await fetch(`${this.jupiterApiurl}/custodian/transaction`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(customerId,issuer){const headers=this.getHeaders();try{const response=await fetch(`${this.jupiterApiurl}/customer-proof`,{method:"POST",headers,body:JSON.stringify({customerId,issuer,custodian:"jupiter"})});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(accountId,message,signatureVersion){const headers=this.getHeaders(),payload={accountId,payload:message,signatureVersion};try{const response=await fetch(`${this.jupiterApiurl}/custodian/signature`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(accountId,message){const headers=this.getHeaders(),payload={accountId,payload:message};try{const response=await fetch(`${this.jupiterApiurl}/custodian/personal-signature`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getSupportedChains(){const headers=this.getHeaders();try{const response=await fetch(`${this.jupiterApiurl}/custodian/networks`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterCustodianApi=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),get_token_issuer_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/get-token-issuer.js"),DefaultJupiterCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/DefaultJupiterCustodianDetails.js"),JupiterClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterClient.js");class JupiterCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultJupiterCustodianDetails_1.DefaultJupiterCustodianDetails.apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=1;const{jwt}=authDetails;this.client=new JupiterClient_1.JupiterClient(apiUrl,jwt),this.jwt=jwt}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.getEthereumAccounts()).map((account=>({name:account.label,address:account.address,balance:account.balance,custodianDetails:{accountId:account.id},labels:[{key:"label",value:account.label}]})))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter((account=>account.address.toLowerCase().includes(address.toLowerCase())))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter((account=>account.name.includes(name)))}async createTransaction(txParams,txMeta){const fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw new Error("No such ethereum account!");const accountId=accounts[0].custodianDetails.accountId,result=await this.client.createTransaction({accountId,chainId:txMeta.chainId},txParams);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.id,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getTransaction(_from,custodian_transactionId){const result=await this.client.getTransaction(custodian_transactionId);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.id,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getCustomerId(){return"jupiter-customer"}async getAllTransactions(){return(await this.client.getTransactions()).map((result=>({transactionStatus:result.transactionStatus,custodian_transactionId:result.id,from:result.from})))}async getCustomerProof(){const customerId=await this.getCustomerId(),issuer=(0,get_token_issuer_1.getTokenIssuer)(this.jwt),{jwt}=await this.client.getCustomerProof(customerId,issuer);return jwt}async signTypedData_v4(address,message,version){const accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw new Error("No such ethereum account!");const accountId=accounts[0].custodianDetails.accountId,result=await this.client.signTypedData_v4(accountId,message,version);return{custodian_transactionId:result.id,transactionStatus:result.transactionStatus,from:result.from}}async signPersonalMessage(address,message){const accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw new Error("No such ethereum account!");const accountId=accounts[0].custodianDetails.accountId,result=await this.client.signPersonalMessage(accountId,message);return{custodian_transactionId:result.id,transactionStatus:result.transactionStatus,from:result.from}}async getErc20Tokens(){return{}}async getSupportedChains(){return this.cache.tryCachingArray("getSupportedChains",this.cacheAge,(async()=>{const response=await this.client.getSupportedChains();return Object.keys(response)}))}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw new Error("Not implemented yet")}}exports.JupiterCustodianApi=JupiterCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/DefaultQredoCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultQredoCustodianDetails=void 0,exports.DefaultQredoCustodianDetails={apiUrl:"https://jupiter-custody.codefi.network"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoClient=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");class QredoClient extends events_1.EventEmitter{constructor(apiUrl,refreshToken){super(),this.apiUrl=apiUrl,this.refreshToken=refreshToken,this.cache=new simplecache_1.SimpleCache}async getHeaders(){return{Authorization:`Bearer ${await this.cache.tryCachingArray("accessToken",800,(async()=>this.getAccessToken()))}`}}async getAccessToken(){try{const response=await fetch(`${this.apiUrl}/connect/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=refresh_token&refresh_token=${this.refreshToken}`}),data=await response.json();if(!data.access_token)throw new Error("No access token");if(data.refresh_token&&data.refresh_token!==this.refreshToken){console.log("JsonRPCClient: Refresh token changed to "+data.refresh_token.substring(0,5)+"..."+data.refresh_token.substring(data.refresh_token.length-5));const oldRefreshToken=this.refreshToken;this.setRefreshToken(data.refresh_token);const payload={oldRefreshToken,newRefreshToken:data.refresh_token};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}return data.access_token}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getEthereumAccounts(){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/connect/wallets`,{headers});return(await response.json()).wallets}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(qredoTxDetails,txParams){const headers=await this.getHeaders(),payload={to:txParams.to,from:qredoTxDetails.from,value:txParams.value,data:txParams.data,gasLimit:txParams.gasLimit,chainID:qredoTxDetails.chainId,note:qredoTxDetails.note};"0"===txParams.type||"1"===txParams.type?payload.gasPrice=txParams.gasPrice:"2"===txParams.type&&(payload.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,payload.maxFeePerGas=txParams.maxFeePerGas);try{const response=await fetch(`${this.apiUrl}/connect/transaction`,{method:"POST",headers,body:JSON.stringify(payload)});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/connect/transaction/${custodian_transactionId}`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(){await this.getHeaders();throw new Error("Not implemented yet")}async getSignedMessage(custodian_signedMessageId){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/connect/sign/${custodian_signedMessageId}`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(){var _a,_b;const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/connect/customer-proof`,{method:"POST",headers});return await response.json()}catch(e){throw(null===(_a=e.response)||void 0===_a?void 0:_a.status)>=400&&(null===(_b=e.response)||void 0===_b?void 0:_b.status)<500&&(console.warn("Authentication error obtaining customer proof - deleting token"),this.cache.deleteCache("accessToken")),new CustodianApiError_1.CustodianApiError(e)}}async getNetworks(){const headers=await this.getHeaders();try{const response=await fetch(`${this.apiUrl}/connect/networks`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(fromAddress,message){const headers=await this.getHeaders(),payload={from:fromAddress,payload:message};try{const response=await fetch(`${this.apiUrl}/connect/sign`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(fromAddress,message){const headers=await this.getHeaders(),payload={from:fromAddress,message};try{const response=await fetch(`${this.apiUrl}/connect/sign`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}setRefreshToken(refreshToken){this.refreshToken=refreshToken}}exports.QredoClient=QredoClient},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoCustodianApi=void 0;const simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),NetworkMappings_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/NetworkMappings.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),map_status_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/map-status.js"),DefaultQredoCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/DefaultQredoCustodianDetails.js"),qredo_network_mappings_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/qredo-network-mappings.js"),QredoClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoClient.js");class QredoCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultQredoCustodianDetails_1.DefaultQredoCustodianDetails.apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=1,this.client=new QredoClient_1.QredoClient(apiUrl,authDetails.refreshToken),this.networkMappings=new NetworkMappings_1.NetworkMappings(qredo_network_mappings_1.qredoNetworkMappings),this.client.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,(event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)}))}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.getEthereumAccounts()).map((account=>({name:account.labels.find((label=>"wallet-name"===label.key)).value,address:account.address,balance:null,custodianDetails:{accountId:account.walletID},chainId:this.networkMappings.getMappingByCustodianName(account.network).chainId,labels:account.labels.filter((label=>"wallet-name"!==label.key)).map((label=>({key:label.name,value:label.value})))})))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter((account=>account.address.toLowerCase().includes(address.toLowerCase())))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter((account=>account.name.includes(name)))}async createTransaction(txParams,txMeta){const fromAddress=txParams.from,result=await this.client.createTransaction({from:fromAddress,chainId:txMeta.chainId,note:txMeta.note},txParams);return{transactionStatus:result.status,custodian_transactionId:result.txID,from:txParams.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:null,maxPriorityFeePerGas:null,nonce:result.nonce.toString(10),transactionHash:result.txHash}}async getTransaction(_from,custodian_transactionId){const result=await this.client.getTransaction(custodian_transactionId);return{transactionStatus:result.status,custodian_transactionId:result.txID,from:result.from||null,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:null,maxPriorityFeePerGas:null,nonce:result.nonce.toString(10),transactionHash:result.txHash}}async getCustomerId(){return"qredo-customer"}async getSignedMessage(_address,custodian_signedMessageId){var _a;const result=await this.client.getSignedMessage(custodian_signedMessageId);let signature=null==result?void 0:result.signature;return result?((null===(_a=result.signature)||void 0===_a?void 0:_a.length)&&(signature="0x"+result.signature),{id:result.sigID,signature,status:(0,map_status_1.mapTransactionStatus)(result.status)}):null}async getAllTransactions(){return(await this.client.getTransactions()).map((result=>({transactionStatus:result.status,custodian_transactionId:result.txID,from:null})))}async getCustomerProof(){const{jwt}=await this.client.getCustomerProof();return jwt}async signPersonalMessage(address,message){const result=await this.client.signPersonalMessage(address,message);return{custodian_transactionId:result.sigID,transactionStatus:result.status,from:address}}async signTypedData_v4(address,message,_version){const result=await this.client.signTypedData_v4(address,message);return{custodian_transactionId:result.sigID,transactionStatus:result.status,from:address}}async getErc20Tokens(){return{}}async getSupportedChains(){return this.cache.tryCachingArray("getSupportedChains",this.cacheAge,(async()=>{const{networks}=await this.client.getNetworks();return networks.map((network=>network.chainID))}))}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw new Error("Not implemented yet")}}exports.QredoCustodianApi=QredoCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/qredo-network-mappings.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qredoNetworkMappings=void 0,exports.qredoNetworkMappings=[{name:"Mainnet",custodianName:"eth-mainnet",custodianId:"eth-mainnet",chainId:"1"},{name:"Ropsten",custodianName:"eth-ropsten",custodianId:"eth-ropsten",chainId:"3"}]},"./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustodianApiError=void 0;class CustodianApiError extends Error{constructor(e,requestId){var _a,_b,_c,_d;const statusCode=null===(_a=e.response)||void 0===_a?void 0:_a.status;let detail,body=null===(_b=e.response)||void 0===_b?void 0:_b.data,requestMeta="";if(requestId&&(requestMeta+=`(Request ID: ${requestId})`),statusCode&&body){if("string"==typeof body)try{body=JSON.parse(body),detail=body.detail}catch(e){detail=body}else"object"==typeof body&&(body.detail||body.message)&&(detail="string"==typeof body.detail?body.detail:"string"==typeof(null===(_c=body.detail)||void 0===_c?void 0:_c.reason)?body.detail.reason:"string"==typeof body.message?body.message:JSON.stringify(body.detail));502===statusCode&&(detail=`Gateway timeout reaching ${null===(_d=e.config)||void 0===_d?void 0:_d.url}`),detail||(detail=e.message);super(`${statusCode}: ${detail} ${requestMeta}`),Object.setPrototypeOf(this,CustodianApiError.prototype),this.detail={code:statusCode,body:detail}}else super(e.message),this.detail={code:0,body:e.message}}}exports.CustodianApiError=CustodianApiError},"./node_modules/@metamask-institutional/sdk/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mmiSDKFactory=exports.mapTransactionStatus=exports.QredoCustodianApi=exports.JupiterCustodianApi=exports.JsonRpcCustodianApi=exports.CurvCustodianApi=exports.CactusCustodianApi=exports.BitgoCustodianApi=exports.DEFAULT_MAX_CACHE_AGE=exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT=exports.REFRESH_TOKEN_CHANGE_EVENT=exports.MMISDK=exports.AccountHierarchyNode=void 0;var AccountHierarchyNode_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/AccountHierarchyNode.js");Object.defineProperty(exports,"AccountHierarchyNode",{enumerable:!0,get:function(){return AccountHierarchyNode_1.AccountHierarchyNode}});var MMISDK_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/MMISDK.js");Object.defineProperty(exports,"MMISDK",{enumerable:!0,get:function(){return MMISDK_1.MMISDK}});var constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js");Object.defineProperty(exports,"REFRESH_TOKEN_CHANGE_EVENT",{enumerable:!0,get:function(){return constants_1.REFRESH_TOKEN_CHANGE_EVENT}}),Object.defineProperty(exports,"INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT",{enumerable:!0,get:function(){return constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT}}),Object.defineProperty(exports,"DEFAULT_MAX_CACHE_AGE",{enumerable:!0,get:function(){return constants_1.DEFAULT_MAX_CACHE_AGE}});var BitgoCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoCustodianApi.js");Object.defineProperty(exports,"BitgoCustodianApi",{enumerable:!0,get:function(){return BitgoCustodianApi_1.BitgoCustodianApi}});var CactusCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusCustodianApi.js");Object.defineProperty(exports,"CactusCustodianApi",{enumerable:!0,get:function(){return CactusCustodianApi_1.CactusCustodianApi}});var CurvCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/curv/CurvCustodianApi.js");Object.defineProperty(exports,"CurvCustodianApi",{enumerable:!0,get:function(){return CurvCustodianApi_1.CurvCustodianApi}});var JsonRpcCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcCustodianApi.js");Object.defineProperty(exports,"JsonRpcCustodianApi",{enumerable:!0,get:function(){return JsonRpcCustodianApi_1.JsonRpcCustodianApi}});var JupiterCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterCustodianApi.js");Object.defineProperty(exports,"JupiterCustodianApi",{enumerable:!0,get:function(){return JupiterCustodianApi_1.JupiterCustodianApi}});var QredoCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoCustodianApi.js");Object.defineProperty(exports,"QredoCustodianApi",{enumerable:!0,get:function(){return QredoCustodianApi_1.QredoCustodianApi}});var map_status_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/map-status.js");Object.defineProperty(exports,"mapTransactionStatus",{enumerable:!0,get:function(){return map_status_1.mapTransactionStatus}});var mmi_sdk_factory_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/mmi-sdk-factory.js");Object.defineProperty(exports,"mmiSDKFactory",{enumerable:!0,get:function(){return mmi_sdk_factory_1.mmiSDKFactory}})},"./node_modules/@metamask-institutional/sdk/dist/util/get-token-issuer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTokenIssuer=void 0;const jsonwebtoken_1=__importDefault(__webpack_require__("./node_modules/jsonwebtoken/index.js"));exports.getTokenIssuer=function getTokenIssuer(token){const decoded=jsonwebtoken_1.default.decode(token.trim());if(!decoded.iss)throw new Error("Missing `iss` claim in token");return decoded.iss}},"./node_modules/@metamask-institutional/sdk/dist/util/map-status.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapTransactionStatus=void 0,exports.mapTransactionStatus=function mapTransactionStatus(status,reason){switch(status){case"created":return{finished:!1,submitted:!1,signed:!1,success:!1,displayText:"Created",reason};case"signed":return{finished:!1,submitted:!1,signed:!0,success:!1,displayText:"Signed",reason};case"submitted":return{finished:!1,submitted:!0,signed:!0,success:!1,displayText:"Submitted",reason};case"mined":return{finished:!0,submitted:!0,signed:!0,success:!0,displayText:"Mined",reason};case"completed":return{finished:!0,submitted:!0,signed:!0,success:!0,displayText:"Completed",reason};case"failed":return{finished:!0,submitted:!0,signed:!0,success:!1,displayText:"Failed",reason};case"rejected":return{finished:!0,submitted:!1,signed:!1,success:!1,displayText:"Rejected",reason};case"aborted":return{finished:!0,submitted:!1,signed:!1,success:!1,displayText:"Aborted",reason};case"confirmed":return{finished:!0,submitted:!0,signed:!0,success:!0,displayText:"Confirmed",reason};default:return{finished:!1,submitted:!1,signed:!1,success:!1,displayText:"Unknown",reason}}}},"./node_modules/@metamask-institutional/sdk/dist/util/mmi-sdk-factory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mmiSDKFactory=void 0;const MMISDK_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/MMISDK.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js");exports.mmiSDKFactory=function(custodianApi,authDetails,authType,apiUrl){if(apiUrl.startsWith("http://")&&!apiUrl.startsWith("http://localhost")&&!apiUrl.startsWith("http://18.139.217.63"))throw new Error("http:// URLs are not supported - only https://");return new MMISDK_1.MMISDK(custodianApi,authDetails,authType,apiUrl,constants_1.DEFAULT_MAX_CACHE_AGE)}},"./node_modules/@metamask-institutional/sdk/dist/util/order-by-property.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.orderByProperty=void 0;const bignumber_js_1=__importDefault(__webpack_require__("./node_modules/@metamask-institutional/sdk/node_modules/bignumber.js/bignumber.js"));exports.orderByProperty=function orderByProperty(field){return function(a,b){const aValue=new bignumber_js_1.default(a[field]),bValue=new bignumber_js_1.default(b[field]);return aValue.lt(bValue)?-1:aValue.gt(bValue)?1:0}}},"./node_modules/@metamask-institutional/sdk/node_modules/bignumber.js/bignumber.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(globalObject){"use strict";var BigNumber,isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],MAX=1e9;function bitFloor(n){var i=0|n;return n>0||n===i?i:i-1}function coeffToString(a){for(var s,z,i=1,j=a.length,r=a[0]+"";i<j;){for(s=a[i++]+"",z=LOG_BASE-s.length;z--;s="0"+s);r+=s}for(j=r.length;48===r.charCodeAt(--j););return r.slice(0,j+1||1)}function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;if(a=xc&&!xc[0],b=yc&&!yc[0],a||b)return a?b?0:-j:i;if(i!=j)return i;if(a=i<0,b=k==l,!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;for(j=(k=xc.length)<(l=yc.length)?k:l,i=0;i<j;i++)if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;return k==l?0:k>l^a?1:-1}function intCheck(n,min,max,name){if(n<min||n>max||n!==mathfloor(n))throw Error(bignumberError+(name||"Argument")+("number"==typeof n?n<min||n>max?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function isOdd(n){var k=n.c.length-1;return bitFloor(n.e/LOG_BASE)==k&&n.c[k]%2!=0}function toExponential(str,e){return(str.length>1?str.charAt(0)+"."+str.slice(1):str)+(e<0?"e":"e+")+e}function toFixedPoint(str,e,z){var len,zs;if(e<0){for(zs=z+".";++e;zs+=z);str=zs+str}else if(++e>(len=str.length)){for(zs=z,e-=len;--e;zs+=z);str+=zs}else e<len&&(str=str.slice(0,e)+"."+str.slice(e));return str}BigNumber=function clone(configObject){var div,convertBase,parseNumeric,random53bitInt,basePrefix,dotAfter,dotBefore,isInfinityOrNaN,whitespaceOrPlus,P=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,CRYPTO=!1,MODULO_MODE=1,POW_PRECISION=0,FORMAT={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz",alphabetHasNormalDecimalDigits=!0;function BigNumber(v,b){var alphabet,c,caseChanged,e,i,isNum,len,str,x=this;if(!(x instanceof BigNumber))return new BigNumber(v,b);if(null==b){if(v&&!0===v._isBigNumber)return x.s=v.s,void(!v.c||v.e>MAX_EXP?x.c=x.e=null:v.e<MIN_EXP?x.c=[x.e=0]:(x.e=v.e,x.c=v.c.slice()));if((isNum="number"==typeof v)&&0*v==0){if(x.s=1/v<0?(v=-v,-1):1,v===~~v){for(e=0,i=v;i>=10;i/=10,e++);return void(e>MAX_EXP?x.c=x.e=null:(x.e=e,x.c=[v]))}str=String(v)}else{if(!isNumeric.test(str=String(v)))return parseNumeric(x,str,isNum);x.s=45==str.charCodeAt(0)?(str=str.slice(1),-1):1}(e=str.indexOf("."))>-1&&(str=str.replace(".","")),(i=str.search(/e/i))>0?(e<0&&(e=i),e+=+str.slice(i+1),str=str.substring(0,i)):e<0&&(e=str.length)}else{if(intCheck(b,2,ALPHABET.length,"Base"),10==b&&alphabetHasNormalDecimalDigits)return round(x=new BigNumber(v),DECIMAL_PLACES+x.e+1,ROUNDING_MODE);if(str=String(v),isNum="number"==typeof v){if(0*v!=0)return parseNumeric(x,str,isNum,b);if(x.s=1/v<0?(str=str.slice(1),-1):1,BigNumber.DEBUG&&str.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+v)}else x.s=45===str.charCodeAt(0)?(str=str.slice(1),-1):1;for(alphabet=ALPHABET.slice(0,b),e=i=0,len=str.length;i<len;i++)if(alphabet.indexOf(c=str.charAt(i))<0){if("."==c){if(i>e){e=len;continue}}else if(!caseChanged&&(str==str.toUpperCase()&&(str=str.toLowerCase())||str==str.toLowerCase()&&(str=str.toUpperCase()))){caseChanged=!0,i=-1,e=0;continue}return parseNumeric(x,String(v),isNum,b)}isNum=!1,(e=(str=convertBase(str,b,10,x.s)).indexOf("."))>-1?str=str.replace(".",""):e=str.length}for(i=0;48===str.charCodeAt(i);i++);for(len=str.length;48===str.charCodeAt(--len););if(str=str.slice(i,++len)){if(len-=i,isNum&&BigNumber.DEBUG&&len>15&&(v>9007199254740991||v!==mathfloor(v)))throw Error(tooManyDigits+x.s*v);if((e=e-i-1)>MAX_EXP)x.c=x.e=null;else if(e<MIN_EXP)x.c=[x.e=0];else{if(x.e=e,x.c=[],i=(e+1)%LOG_BASE,e<0&&(i+=LOG_BASE),i<len){for(i&&x.c.push(+str.slice(0,i)),len-=LOG_BASE;i<len;)x.c.push(+str.slice(i,i+=LOG_BASE));i=LOG_BASE-(str=str.slice(i)).length}else i-=len;for(;i--;str+="0");x.c.push(+str)}}else x.c=[x.e=0]}function format(n,i,rm,id){var c0,e,ne,len,str;if(null==rm?rm=ROUNDING_MODE:intCheck(rm,0,8),!n.c)return n.toString();if(c0=n.c[0],ne=n.e,null==i)str=coeffToString(n.c),str=1==id||2==id&&(ne<=TO_EXP_NEG||ne>=TO_EXP_POS)?toExponential(str,ne):toFixedPoint(str,ne,"0");else if(e=(n=round(new BigNumber(n),i,rm)).e,len=(str=coeffToString(n.c)).length,1==id||2==id&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+="0",len++);str=toExponential(str,e)}else if(i-=ne,str=toFixedPoint(str,e,"0"),e+1>len){if(--i>0)for(str+=".";i--;str+="0");}else if((i+=e-len)>0)for(e+1==len&&(str+=".");i--;str+="0");return n.s<0&&c0?"-"+str:str}function maxOrMin(args,method){for(var n,i=1,m=new BigNumber(args[0]);i<args.length;i++){if(!(n=new BigNumber(args[i])).s){m=n;break}method.call(m,n)&&(m=n)}return m}function normalise(n,c,e){for(var i=1,j=c.length;!c[--j];c.pop());for(j=c[0];j>=10;j/=10,i++);return(e=i+e*LOG_BASE-1)>MAX_EXP?n.c=n.e=null:e<MIN_EXP?n.c=[n.e=0]:(n.e=e,n.c=c),n}function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++);if((i=sd-d)<0)i+=LOG_BASE,j=sd,rd=(n=xc[ni=0])/pows10[d-j-1]%10|0;else if((ni=mathceil((i+1)/LOG_BASE))>=xc.length){if(!r)break out;for(;xc.length<=ni;xc.push(0));n=rd=0,d=1,j=(i%=LOG_BASE)-LOG_BASE+1}else{for(n=k=xc[ni],d=1;k>=10;k/=10,d++);rd=(j=(i%=LOG_BASE)-LOG_BASE+d)<0?0:n/pows10[d-j-1]%10|0}if(r=r||sd<0||null!=xc[ni+1]||(j<0?n:n%pows10[d-j-1]),r=rm<4?(rd||r)&&(0==rm||rm==(x.s<0?3:2)):rd>5||5==rd&&(4==rm||r||6==rm&&(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7)),sd<1||!xc[0])return xc.length=0,r?(sd-=x.e+1,xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE],x.e=-sd||0):xc[0]=x.e=0,x;if(0==i?(xc.length=ni,k=1,ni--):(xc.length=ni+1,k=pows10[LOG_BASE-i],xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0),r)for(;;){if(0==ni){for(i=1,j=xc[0];j>=10;j/=10,i++);for(j=xc[0]+=k,k=1;j>=10;j/=10,k++);i!=k&&(x.e++,xc[0]==BASE&&(xc[0]=1));break}if(xc[ni]+=k,xc[ni]!=BASE)break;xc[ni--]=0,k=1}for(i=xc.length;0===xc[--i];xc.pop());}x.e>MAX_EXP?x.c=x.e=null:x.e<MIN_EXP&&(x.c=[x.e=0])}return x}function valueOf(n){var str,e=n.e;return null===e?n.toString():(str=coeffToString(n.c),str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,"0"),n.s<0?"-"+str:str)}return BigNumber.clone=clone,BigNumber.ROUND_UP=0,BigNumber.ROUND_DOWN=1,BigNumber.ROUND_CEIL=2,BigNumber.ROUND_FLOOR=3,BigNumber.ROUND_HALF_UP=4,BigNumber.ROUND_HALF_DOWN=5,BigNumber.ROUND_HALF_EVEN=6,BigNumber.ROUND_HALF_CEIL=7,BigNumber.ROUND_HALF_FLOOR=8,BigNumber.EUCLID=9,BigNumber.config=BigNumber.set=function(obj){var p,v;if(null!=obj){if("object"!=typeof obj)throw Error(bignumberError+"Object expected: "+obj);if(obj.hasOwnProperty(p="DECIMAL_PLACES")&&(intCheck(v=obj[p],0,MAX,p),DECIMAL_PLACES=v),obj.hasOwnProperty(p="ROUNDING_MODE")&&(intCheck(v=obj[p],0,8,p),ROUNDING_MODE=v),obj.hasOwnProperty(p="EXPONENTIAL_AT")&&((v=obj[p])&&v.pop?(intCheck(v[0],-MAX,0,p),intCheck(v[1],0,MAX,p),TO_EXP_NEG=v[0],TO_EXP_POS=v[1]):(intCheck(v,-MAX,MAX,p),TO_EXP_NEG=-(TO_EXP_POS=v<0?-v:v))),obj.hasOwnProperty(p="RANGE"))if((v=obj[p])&&v.pop)intCheck(v[0],-MAX,-1,p),intCheck(v[1],1,MAX,p),MIN_EXP=v[0],MAX_EXP=v[1];else{if(intCheck(v,-MAX,MAX,p),!v)throw Error(bignumberError+p+" cannot be zero: "+v);MIN_EXP=-(MAX_EXP=v<0?-v:v)}if(obj.hasOwnProperty(p="CRYPTO")){if((v=obj[p])!==!!v)throw Error(bignumberError+p+" not true or false: "+v);if(v){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw CRYPTO=!v,Error(bignumberError+"crypto unavailable");CRYPTO=v}else CRYPTO=v}if(obj.hasOwnProperty(p="MODULO_MODE")&&(intCheck(v=obj[p],0,9,p),MODULO_MODE=v),obj.hasOwnProperty(p="POW_PRECISION")&&(intCheck(v=obj[p],0,MAX,p),POW_PRECISION=v),obj.hasOwnProperty(p="FORMAT")){if("object"!=typeof(v=obj[p]))throw Error(bignumberError+p+" not an object: "+v);FORMAT=v}if(obj.hasOwnProperty(p="ALPHABET")){if("string"!=typeof(v=obj[p])||/^.?$|[+\-.\s]|(.).*\1/.test(v))throw Error(bignumberError+p+" invalid: "+v);alphabetHasNormalDecimalDigits="0123456789"==v.slice(0,10),ALPHABET=v}}return{DECIMAL_PLACES,ROUNDING_MODE,EXPONENTIAL_AT:[TO_EXP_NEG,TO_EXP_POS],RANGE:[MIN_EXP,MAX_EXP],CRYPTO,MODULO_MODE,POW_PRECISION,FORMAT,ALPHABET}},BigNumber.isBigNumber=function(v){if(!v||!0!==v._isBigNumber)return!1;if(!BigNumber.DEBUG)return!0;var i,n,c=v.c,e=v.e,s=v.s;out:if("[object Array]"=={}.toString.call(c)){if((1===s||-1===s)&&e>=-MAX&&e<=MAX&&e===mathfloor(e)){if(0===c[0]){if(0===e&&1===c.length)return!0;break out}if((i=(e+1)%LOG_BASE)<1&&(i+=LOG_BASE),String(c[0]).length==i){for(i=0;i<c.length;i++)if((n=c[i])<0||n>=BASE||n!==mathfloor(n))break out;if(0!==n)return!0}}}else if(null===c&&null===e&&(null===s||1===s||-1===s))return!0;throw Error(bignumberError+"Invalid BigNumber: "+v)},BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,P.lt)},BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,P.gt)},BigNumber.random=(random53bitInt=9007199254740992*Math.random()&2097151?function(){return mathfloor(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);if(null==dp?dp=DECIMAL_PLACES:intCheck(dp,0,MAX),k=mathceil(dp/LOG_BASE),CRYPTO)if(crypto.getRandomValues){for(a=crypto.getRandomValues(new Uint32Array(k*=2));i<k;)(v=131072*a[i]+(a[i+1]>>>11))>=9e15?(b=crypto.getRandomValues(new Uint32Array(2)),a[i]=b[0],a[i+1]=b[1]):(c.push(v%1e14),i+=2);i=k/2}else{if(!crypto.randomBytes)throw CRYPTO=!1,Error(bignumberError+"crypto unavailable");for(a=crypto.randomBytes(k*=7);i<k;)(v=281474976710656*(31&a[i])+1099511627776*a[i+1]+4294967296*a[i+2]+16777216*a[i+3]+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6])>=9e15?crypto.randomBytes(7).copy(a,i):(c.push(v%1e14),i+=7);i=k/7}if(!CRYPTO)for(;i<k;)(v=random53bitInt())<9e15&&(c[i++]=v%1e14);for(k=c[--i],dp%=LOG_BASE,k&&dp&&(v=POWS_TEN[LOG_BASE-dp],c[i]=mathfloor(k/v)*v);0===c[i];c.pop(),i--);if(i<0)c=[e=0];else{for(e=-1;0===c[0];c.splice(0,1),e-=LOG_BASE);for(i=1,v=c[0];v>=10;v/=10,i++);i<LOG_BASE&&(e-=LOG_BASE-i)}return rand.e=e,rand.c=c,rand}),BigNumber.sum=function(){for(var i=1,args=arguments,sum=new BigNumber(args[0]);i<args.length;)sum=sum.plus(args[i++]);return sum},convertBase=function(){function toBaseOut(str,baseIn,baseOut,alphabet){for(var j,arrL,arr=[0],i=0,len=str.length;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);for(arr[0]+=alphabet.indexOf(str.charAt(i++)),j=0;j<arr.length;j++)arr[j]>baseOut-1&&(null==arr[j+1]&&(arr[j+1]=0),arr[j+1]+=arr[j]/baseOut|0,arr[j]%=baseOut)}return arr.reverse()}return function(str,baseIn,baseOut,sign,callerIsToString){var alphabet,d,e,k,r,x,xc,y,i=str.indexOf("."),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;for(i>=0&&(k=POW_PRECISION,POW_PRECISION=0,str=str.replace(".",""),x=(y=new BigNumber(baseIn)).pow(str.length-i),POW_PRECISION=k,y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e,"0"),10,baseOut,"0123456789"),y.e=y.c.length),e=k=(xc=toBaseOut(str,baseIn,baseOut,callerIsToString?(alphabet=ALPHABET,"0123456789"):(alphabet="0123456789",ALPHABET))).length;0==xc[--k];xc.pop());if(!xc[0])return alphabet.charAt(0);if(i<0?--e:(x.c=xc,x.e=e,x.s=sign,xc=(x=div(x,y,dp,rm,baseOut)).c,r=x.r,e=x.e),i=xc[d=e+dp+1],k=baseOut/2,r=r||d<0||null!=xc[d+1],r=rm<4?(null!=i||r)&&(0==rm||rm==(x.s<0?3:2)):i>k||i==k&&(4==rm||r||6==rm&&1&xc[d-1]||rm==(x.s<0?8:7)),d<1||!xc[0])str=r?toFixedPoint(alphabet.charAt(1),-dp,alphabet.charAt(0)):alphabet.charAt(0);else{if(xc.length=d,r)for(--baseOut;++xc[--d]>baseOut;)xc[d]=0,d||(++e,xc=[1].concat(xc));for(k=xc.length;!xc[--k];);for(i=0,str="";i<=k;str+=alphabet.charAt(xc[i++]));str=toFixedPoint(str,e,alphabet.charAt(0))}return str}}(),div=function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%1e7,khi=k/1e7|0;for(x=x.slice();i--;)carry=((temp=klo*(xlo=x[i]%1e7)+(m=khi*xlo+(xhi=x[i]/1e7|0)*klo)%1e7*1e7+carry)/base|0)+(m/1e7|0)+khi*xhi,x[i]=temp%base;return carry&&(x=[carry].concat(x)),x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL)cmp=aL>bL?1:-1;else for(i=cmp=0;i<aL;i++)if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}return cmp}function subtract(a,b,aL,base){for(var i=0;aL--;)a[aL]-=i,i=a[aL]<b[aL]?1:0,a[aL]=i*base+a[aL]-b[aL];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!(xc&&xc[0]&&yc&&yc[0]))return new BigNumber(x.s&&y.s&&(xc?!yc||xc[0]!=yc[0]:yc)?xc&&0==xc[0]||!yc?0*s:s/0:NaN);for(qc=(q=new BigNumber(s)).c=[],s=dp+(e=x.e-y.e)+1,base||(base=BASE,e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE),s=s/LOG_BASE|0),i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0)&&e--,s<0)qc.push(1),more=!0;else{for(xL=xc.length,yL=yc.length,i=0,s+=2,(n=mathfloor(base/(yc[0]+1)))>1&&(yc=multiply(yc,n,base),xc=multiply(xc,n,base),yL=yc.length,xL=xc.length),xi=yL,remL=(rem=xc.slice(0,yL)).length;remL<yL;rem[remL++]=0);yz=yc.slice(),yz=[0].concat(yz),yc0=yc[0],yc[1]>=base/2&&yc0++;do{if(n=0,(cmp=compare(yc,rem,yL,remL))<0){if(rem0=rem[0],yL!=remL&&(rem0=rem0*base+(rem[1]||0)),(n=mathfloor(rem0/yc0))>1)for(n>=base&&(n=base-1),prodL=(prod=multiply(yc,n,base)).length,remL=rem.length;1==compare(prod,rem,prodL,remL);)n--,subtract(prod,yL<prodL?yz:yc,prodL,base),prodL=prod.length,cmp=1;else 0==n&&(cmp=n=1),prodL=(prod=yc.slice()).length;if(prodL<remL&&(prod=[0].concat(prod)),subtract(rem,prod,remL,base),remL=rem.length,-1==cmp)for(;compare(yc,rem,yL,remL)<1;)n++,subtract(rem,yL<remL?yz:yc,remL,base),remL=rem.length}else 0===cmp&&(n++,rem=[0]);qc[i++]=n,rem[0]?rem[remL++]=xc[xi]||0:(rem=[xc[xi]],remL=1)}while((xi++<xL||null!=rem[0])&&s--);more=null!=rem[0],qc[0]||qc.splice(0,1)}if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++);round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more)}else q.e=e,q.r=+more;return q}}(),basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g,parseNumeric=function(x,str,isNum,b){var base,s=isNum?str:str.replace(whitespaceOrPlus,"");if(isInfinityOrNaN.test(s))x.s=isNaN(s)?null:s<0?-1:1;else{if(!isNum&&(s=s.replace(basePrefix,(function(m,p1,p2){return base="x"==(p2=p2.toLowerCase())?16:"b"==p2?2:8,b&&b!=base?m:p1})),b&&(base=b,s=s.replace(dotAfter,"$1").replace(dotBefore,"0.$1")),str!=s))return new BigNumber(s,base);if(BigNumber.DEBUG)throw Error(bignumberError+"Not a"+(b?" base "+b:"")+" number: "+str);x.s=null}x.c=x.e=null},P.absoluteValue=P.abs=function(){var x=new BigNumber(this);return x.s<0&&(x.s=1),x},P.comparedTo=function(y,b){return compare(this,new BigNumber(y,b))},P.decimalPlaces=P.dp=function(dp,rm){var c,n,v,x=this;if(null!=dp)return intCheck(dp,0,MAX),null==rm?rm=ROUNDING_MODE:intCheck(rm,0,8),round(new BigNumber(x),dp+x.e+1,rm);if(!(c=x.c))return null;if(n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,v=c[v])for(;v%10==0;v/=10,n--);return n<0&&(n=0),n},P.dividedBy=P.div=function(y,b){return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE)},P.dividedToIntegerBy=P.idiv=function(y,b){return div(this,new BigNumber(y,b),0,1)},P.exponentiatedBy=P.pow=function(n,m){var half,isModExp,i,k,nIsBig,nIsNeg,nIsOdd,y,x=this;if((n=new BigNumber(n)).c&&!n.isInteger())throw Error(bignumberError+"Exponent not an integer: "+valueOf(n));if(null!=m&&(m=new BigNumber(m)),nIsBig=n.e>14,!x.c||!x.c[0]||1==x.c[0]&&!x.e&&1==x.c.length||!n.c||!n.c[0])return y=new BigNumber(Math.pow(+valueOf(x),nIsBig?n.s*(2-isOdd(n)):+valueOf(n))),m?y.mod(m):y;if(nIsNeg=n.s<0,m){if(m.c?!m.c[0]:!m.s)return new BigNumber(NaN);(isModExp=!nIsNeg&&x.isInteger()&&m.isInteger())&&(x=x.mod(m))}else{if(n.e>9&&(x.e>0||x.e<-1||(0==x.e?x.c[0]>1||nIsBig&&x.c[1]>=24e7:x.c[0]<8e13||nIsBig&&x.c[0]<=9999975e7)))return k=x.s<0&&isOdd(n)?-0:0,x.e>-1&&(k=1/k),new BigNumber(nIsNeg?1/k:k);POW_PRECISION&&(k=mathceil(POW_PRECISION/LOG_BASE+2))}for(nIsBig?(half=new BigNumber(.5),nIsNeg&&(n.s=1),nIsOdd=isOdd(n)):nIsOdd=(i=Math.abs(+valueOf(n)))%2,y=new BigNumber(ONE);;){if(nIsOdd){if(!(y=y.times(x)).c)break;k?y.c.length>k&&(y.c.length=k):isModExp&&(y=y.mod(m))}if(i){if(0===(i=mathfloor(i/2)))break;nIsOdd=i%2}else if(round(n=n.times(half),n.e+1,1),n.e>14)nIsOdd=isOdd(n);else{if(0===(i=+valueOf(n)))break;nIsOdd=i%2}x=x.times(x),k?x.c&&x.c.length>k&&(x.c.length=k):isModExp&&(x=x.mod(m))}return isModExp?y:(nIsNeg&&(y=ONE.div(y)),m?y.mod(m):k?round(y,POW_PRECISION,ROUNDING_MODE,undefined):y)},P.integerValue=function(rm){var n=new BigNumber(this);return null==rm?rm=ROUNDING_MODE:intCheck(rm,0,8),round(n,n.e+1,rm)},P.isEqualTo=P.eq=function(y,b){return 0===compare(this,new BigNumber(y,b))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(y,b){return compare(this,new BigNumber(y,b))>0},P.isGreaterThanOrEqualTo=P.gte=function(y,b){return 1===(b=compare(this,new BigNumber(y,b)))||0===b},P.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},P.isLessThan=P.lt=function(y,b){return compare(this,new BigNumber(y,b))<0},P.isLessThanOrEqualTo=P.lte=function(y,b){return-1===(b=compare(this,new BigNumber(y,b)))||0===b},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(y,b){var i,j,t,xLTy,x=this,a=x.s;if(b=(y=new BigNumber(y,b)).s,!a||!b)return new BigNumber(NaN);if(a!=b)return y.s=-b,x.plus(y);var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0])return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:3==ROUNDING_MODE?-0:0)}if(xe=bitFloor(xe),ye=bitFloor(ye),xc=xc.slice(),a=xe-ye){for((xLTy=a<0)?(a=-a,t=xc):(ye=xe,t=yc),t.reverse(),b=a;b--;t.push(0));t.reverse()}else for(j=(xLTy=(a=xc.length)<(b=yc.length))?a:b,a=b=0;b<j;b++)if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}if(xLTy&&(t=xc,xc=yc,yc=t,y.s=-y.s),(b=(j=yc.length)-(i=xc.length))>0)for(;b--;xc[i++]=0);for(b=BASE-1;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b);--xc[i],xc[j]+=BASE}xc[j]-=yc[j]}for(;0==xc[0];xc.splice(0,1),--ye);return xc[0]?normalise(y,xc,ye):(y.s=3==ROUNDING_MODE?-1:1,y.c=[y.e=0],y)},P.modulo=P.mod=function(y,b){var q,s,x=this;return y=new BigNumber(y,b),!x.c||!y.s||y.c&&!y.c[0]?new BigNumber(NaN):!y.c||x.c&&!x.c[0]?new BigNumber(x):(9==MODULO_MODE?(s=y.s,y.s=1,q=div(x,y,0,3),y.s=s,q.s*=s):q=div(x,y,0,MODULO_MODE),(y=x.minus(q.times(y))).c[0]||1!=MODULO_MODE||(y.s=x.s),y)},P.multipliedBy=P.times=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,x=this,xc=x.c,yc=(y=new BigNumber(y,b)).c;if(!(xc&&yc&&xc[0]&&yc[0]))return!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc?y.c=y.e=y.s=null:(y.s*=x.s,xc&&yc?(y.c=[0],y.e=0):y.c=y.e=null),y;for(e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE),y.s*=x.s,(xcL=xc.length)<(ycL=yc.length)&&(zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i),i=xcL+ycL,zc=[];i--;zc.push(0));for(base=BASE,1e7,i=ycL;--i>=0;){for(c=0,ylo=yc[i]%1e7,yhi=yc[i]/1e7|0,j=i+(k=xcL);j>i;)c=((xlo=ylo*(xlo=xc[--k]%1e7)+(m=yhi*xlo+(xhi=xc[k]/1e7|0)*ylo)%1e7*1e7+zc[j]+c)/base|0)+(m/1e7|0)+yhi*xhi,zc[j--]=xlo%base;zc[j]=c}return c?++e:zc.splice(0,1),normalise(y,zc,e)},P.negated=function(){var x=new BigNumber(this);return x.s=-x.s||null,x},P.plus=function(y,b){var t,x=this,a=x.s;if(b=(y=new BigNumber(y,b)).s,!a||!b)return new BigNumber(NaN);if(a!=b)return y.s=-b,x.minus(y);var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:0*a)}if(xe=bitFloor(xe),ye=bitFloor(ye),xc=xc.slice(),a=xe-ye){for(a>0?(ye=xe,t=yc):(a=-a,t=xc),t.reverse();a--;t.push(0));t.reverse()}for((a=xc.length)-(b=yc.length)<0&&(t=yc,yc=xc,xc=t,b=a),a=0;b;)a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0,xc[b]=BASE===xc[b]?0:xc[b]%BASE;return a&&(xc=[a].concat(xc),++ye),normalise(y,xc,ye)},P.precision=P.sd=function(sd,rm){var c,n,v,x=this;if(null!=sd&&sd!==!!sd)return intCheck(sd,1,MAX),null==rm?rm=ROUNDING_MODE:intCheck(rm,0,8),round(new BigNumber(x),sd,rm);if(!(c=x.c))return null;if(n=(v=c.length-1)*LOG_BASE+1,v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}return sd&&x.e+1>n&&(n=x.e+1),n},P.shiftedBy=function(k){return intCheck(k,-9007199254740991,9007199254740991),this.times("1e"+k)},P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber("0.5");if(1!==s||!c||!c[0])return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0);if(0==(s=Math.sqrt(+valueOf(x)))||s==1/0?(((n=coeffToString(c)).length+e)%2==0&&(n+="0"),s=Math.sqrt(+n),e=bitFloor((e+1)/2)-(e<0||e%2),r=new BigNumber(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)):r=new BigNumber(s+""),r.c[0])for((s=(e=r.e)+dp)<3&&(s=0);;)if(t=r,r=half.times(t.plus(div(x,t,dp,1))),coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e&&--s,"9999"!=(n=n.slice(s-3,s+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(round(r,r.e+DECIMAL_PLACES+2,1),m=!r.times(r).eq(x));break}if(!rep&&(round(t,t.e+DECIMAL_PLACES+2,0),t.times(t).eq(x))){r=t;break}dp+=4,s+=4,rep=1}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m)},P.toExponential=function(dp,rm){return null!=dp&&(intCheck(dp,0,MAX),dp++),format(this,dp,rm,1)},P.toFixed=function(dp,rm){return null!=dp&&(intCheck(dp,0,MAX),dp=dp+this.e+1),format(this,dp,rm)},P.toFormat=function(dp,rm,format){var str,x=this;if(null==format)null!=dp&&rm&&"object"==typeof rm?(format=rm,rm=null):dp&&"object"==typeof dp?(format=dp,dp=rm=null):format=FORMAT;else if("object"!=typeof format)throw Error(bignumberError+"Argument not an object: "+format);if(str=x.toFixed(dp,rm),x.c){var i,arr=str.split("."),g1=+format.groupSize,g2=+format.secondaryGroupSize,groupSeparator=format.groupSeparator||"",intPart=arr[0],fractionPart=arr[1],isNeg=x.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2&&(i=g1,g1=g2,g2=i,len-=i),g1>0&&len>0){for(i=len%g1||g1,intPart=intDigits.substr(0,i);i<len;i+=g1)intPart+=groupSeparator+intDigits.substr(i,g1);g2>0&&(intPart+=groupSeparator+intDigits.slice(i)),isNeg&&(intPart="-"+intPart)}str=fractionPart?intPart+(format.decimalSeparator||"")+((g2=+format.fractionGroupSize)?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+(format.fractionGroupSeparator||"")):fractionPart):intPart}return(format.prefix||"")+str+(format.suffix||"")},P.toFraction=function(md){var d,d0,d1,d2,e,exp,n,n0,n1,q,r,s,x=this,xc=x.c;if(null!=md&&(!(n=new BigNumber(md)).isInteger()&&(n.c||1!==n.s)||n.lt(ONE)))throw Error(bignumberError+"Argument "+(n.isInteger()?"out of range: ":"not an integer: ")+valueOf(n));if(!xc)return new BigNumber(x);for(d=new BigNumber(ONE),n1=d0=new BigNumber(ONE),d1=n0=new BigNumber(ONE),s=coeffToString(xc),e=d.e=s.length-x.e-1,d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp],md=!md||n.comparedTo(d)>0?e>0?d:n1:n,exp=MAX_EXP,MAX_EXP=1/0,n=new BigNumber(s),n0.c[0]=0;q=div(n,d,0,1),1!=(d2=d0.plus(q.times(d1))).comparedTo(md);)d0=d1,d1=d2,n1=n0.plus(q.times(d2=n1)),n0=d2,d=n.minus(q.times(d2=d)),n=d2;return d2=div(md.minus(d0),d1,0,1),n0=n0.plus(d2.times(n1)),d0=d0.plus(d2.times(d1)),n0.s=n1.s=x.s,r=div(n1,d1,e*=2,ROUNDING_MODE).minus(x).abs().comparedTo(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1,d1]:[n0,d0],MAX_EXP=exp,r},P.toNumber=function(){return+valueOf(this)},P.toPrecision=function(sd,rm){return null!=sd&&intCheck(sd,1,MAX),format(this,sd,rm,2)},P.toString=function(b){var str,n=this,s=n.s,e=n.e;return null===e?s?(str="Infinity",s<0&&(str="-"+str)):str="NaN":(null==b?str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(coeffToString(n.c),e):toFixedPoint(coeffToString(n.c),e,"0"):10===b&&alphabetHasNormalDecimalDigits?str=toFixedPoint(coeffToString((n=round(new BigNumber(n),DECIMAL_PLACES+e+1,ROUNDING_MODE)).c),n.e,"0"):(intCheck(b,2,ALPHABET.length,"Base"),str=convertBase(toFixedPoint(coeffToString(n.c),e,"0"),10,b,s,!0)),s<0&&n.c[0]&&(str="-"+str)),str},P.valueOf=P.toJSON=function(){return valueOf(this)},P._isBigNumber=!0,null!=configObject&&BigNumber.set(configObject),BigNumber}(),BigNumber.default=BigNumber.BigNumber=BigNumber,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return BigNumber}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"./node_modules/@metamask-institutional/simplecache/dist/SimpleCache.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleCache=void 0;exports.SimpleCache=class SimpleCache{constructor(){this.cache={}}async tryCachingArray(key,maxCacheAgeSeconds,fn){if(maxCacheAgeSeconds>=0&&this.cacheExists(key)&&this.cacheValid(key,maxCacheAgeSeconds))return this.cache[key].results;const results=await fn();return this.cache[key]={results,timestamp:(new Date).getTime()},results}setCache(key,value){this.cache[key]={results:value,timestamp:(new Date).getTime()}}getCache(key){return this.cacheExists(key)?this.cache[key].results:null}cacheExists(key){return this.cache.hasOwnProperty(key)}cacheValid(key,maxCacheAgeSeconds){const cache=this.cache[key],maxCacheAgeMs=1e3*maxCacheAgeSeconds;return(new Date).getTime()-cache.timestamp<maxCacheAgeMs}deleteCache(key){this.cacheExists(key)&&delete this.cache[key]}}},"./node_modules/@metamask-institutional/simplecache/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleCache=void 0;var SimpleCache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/SimpleCache.js");Object.defineProperty(exports,"SimpleCache",{enumerable:!0,get:function(){return SimpleCache_1.SimpleCache}})},"./node_modules/@metamask-institutional/types/dist/enum/AddressType.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddressType=void 0,function(AddressType){AddressType[AddressType.MONOCHAIN=0]="MONOCHAIN",AddressType[AddressType.POLYCHAIN=1]="POLYCHAIN"}(exports.AddressType||(exports.AddressType={}))},"./node_modules/@metamask-institutional/types/dist/enum/AuthTypes.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthTypes=void 0,function(AuthTypes){AuthTypes[AuthTypes.TOKEN=0]="TOKEN",AuthTypes[AuthTypes.REFRESH_TOKEN=1]="REFRESH_TOKEN",AuthTypes[AuthTypes.AUTHORIZATION_CODE_FLOW=2]="AUTHORIZATION_CODE_FLOW"}(exports.AuthTypes||(exports.AuthTypes={}))},"./node_modules/@metamask-institutional/types/dist/enum/MetaMaskTransactionStatuses.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetaMaskTransactionStatuses=void 0,function(MetaMaskTransactionStatuses){MetaMaskTransactionStatuses.UNAPPROVED="unapproved",MetaMaskTransactionStatuses.APPROVED="approved",MetaMaskTransactionStatuses.REJECTED="rejected",MetaMaskTransactionStatuses.SIGNED="signed",MetaMaskTransactionStatuses.SUBMITTED="submitted",MetaMaskTransactionStatuses.FAILED="failed",MetaMaskTransactionStatuses.DROPPED="dropped",MetaMaskTransactionStatuses.CONFIRMED="confirmed"}(exports.MetaMaskTransactionStatuses||(exports.MetaMaskTransactionStatuses={}))},"./node_modules/@metamask-institutional/types/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetaMaskTransactionStatuses=exports.AddressType=exports.AuthTypes=void 0;var AuthTypes_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/enum/AuthTypes.js");Object.defineProperty(exports,"AuthTypes",{enumerable:!0,get:function(){return AuthTypes_1.AuthTypes}});var AddressType_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/enum/AddressType.js");Object.defineProperty(exports,"AddressType",{enumerable:!0,get:function(){return AddressType_1.AddressType}});var MetaMaskTransactionStatuses_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/enum/MetaMaskTransactionStatuses.js");Object.defineProperty(exports,"MetaMaskTransactionStatuses",{enumerable:!0,get:function(){return MetaMaskTransactionStatuses_1.MetaMaskTransactionStatuses}})},"./node_modules/@metamask/obs-store/dist/ComposedStore.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComposedStore=void 0;const ObservableStore_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/ObservableStore.js");class ComposedStore extends ObservableStore_1.ObservableStore{constructor(children){super({}),this._children=children||{},Object.keys(this._children).forEach((childKey=>{const child=this._children[childKey];this._addChild(childKey,child)}))}_addChild(childKey,child){const updateFromChild=childValue=>{const state=this.getState();state[childKey]=childValue,this.putState(state)};child.subscribe(updateFromChild),updateFromChild(child.getState())}}exports.ComposedStore=ComposedStore},"./node_modules/@metamask/obs-store/dist/MergedStore.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MergedStore=void 0;const ObservableStore_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/ObservableStore.js");class MergedStore extends ObservableStore_1.ObservableStore{constructor(children=[]){super({}),this._children=children,children.forEach((child=>this._addChild(child))),this._updateWholeState()}_addChild(child){child.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const childStates=this._children.map((child=>child.getState())),state=Object.assign({},...childStates);this.putState(state)}}exports.MergedStore=MergedStore},"./node_modules/@metamask/obs-store/dist/ObservableStore.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObservableStore=void 0;const safe_event_emitter_1=__importDefault(__webpack_require__("./node_modules/@metamask/safe-event-emitter/index.js"));class ObservableStore extends safe_event_emitter_1.default{constructor(initState){super(),this._state=void 0===initState?{}:initState}getState(){return this._getState()}putState(newState){this._putState(newState),this.emit("update",newState)}updateState(partialState){if(partialState&&"object"==typeof partialState){const state=this.getState();this.putState(Object.assign(Object.assign({},state),partialState))}else this.putState(partialState)}subscribe(handler){this.on("update",handler)}unsubscribe(handler){this.removeListener("update",handler)}_getState(){return this._state}_putState(newState){this._state=newState}}exports.ObservableStore=ObservableStore},"./node_modules/@metamask/obs-store/dist/asStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeAsStream=void 0;const stream_1=__webpack_require__("./node_modules/stream-browserify/index.js");class ObservableStoreStream extends stream_1.Duplex{constructor(obsStore){super({objectMode:!0}),this.resume(),this.handler=state=>this.push(state),this.obsStore=obsStore,this.obsStore.subscribe(this.handler)}pipe(dest,options){const result=super.pipe(dest,options);return dest.write(this.obsStore.getState()),result}_write(chunk,_encoding,callback){this.obsStore.putState(chunk),callback()}_read(_size){}_destroy(err,callback){this.obsStore.unsubscribe(this.handler),super._destroy(err,callback)}}exports.storeAsStream=function storeAsStream(obsStore){return new ObservableStoreStream(obsStore)}},"./node_modules/@metamask/obs-store/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/asStream.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/ComposedStore.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/MergedStore.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/ObservableStore.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/transform.js"),exports)},"./node_modules/@metamask/obs-store/dist/transform.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeTransformStream=void 0;const through2_1=__webpack_require__("./node_modules/@metamask/obs-store/node_modules/through2/through2.js");exports.storeTransformStream=function storeTransformStream(syncTransformFn){return through2_1.obj(((state,_encoding,cb)=>{try{return void cb(null,syncTransformFn(state))}catch(err){return void cb(err)}}))}},"./node_modules/@metamask/obs-store/node_modules/through2/through2.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Transform=__webpack_require__("./node_modules/readable-stream/readable-browser.js").Transform,inherits=__webpack_require__("./node_modules/util/util.js").inherits,xtend=__webpack_require__("./node_modules/xtend/immutable.js");function DestroyableTransform(opts){Transform.call(this,opts),this._destroyed=!1}function noop(chunk,enc,callback){callback(null,chunk)}function through2(construct){return function(options,transform,flush){return"function"==typeof options&&(flush=transform,transform=options,options={}),"function"!=typeof transform&&(transform=noop),"function"!=typeof flush&&(flush=null),construct(options,transform,flush)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(err){if(!this._destroyed){this._destroyed=!0;var self=this;process.nextTick((function(){err&&self.emit("error",err),self.emit("close")}))}},module.exports=through2((function(options,transform,flush){var t2=new DestroyableTransform(options);return t2._transform=transform,flush&&(t2._flush=flush),t2})),module.exports.ctor=through2((function(options,transform,flush){function Through2(override){if(!(this instanceof Through2))return new Through2(override);this.options=xtend(options,override),DestroyableTransform.call(this,this.options)}return inherits(Through2,DestroyableTransform),Through2.prototype._transform=transform,flush&&(Through2.prototype._flush=flush),Through2})),module.exports.obj=through2((function(options,transform,flush){var t2=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},options));return t2._transform=transform,flush&&(t2._flush=flush),t2}))},"./node_modules/buffer-equal-constant-time/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,SlowBuffer=__webpack_require__("./node_modules/buffer/index.js").SlowBuffer;function bufferEq(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))return!1;if(a.length!==b.length)return!1;for(var c=0,i=0;i<a.length;i++)c|=a[i]^b[i];return 0===c}module.exports=bufferEq,bufferEq.install=function(){Buffer.prototype.equal=SlowBuffer.prototype.equal=function equal(that){return bufferEq(this,that)}};var origBufEqual=Buffer.prototype.equal,origSlowBufEqual=SlowBuffer.prototype.equal;bufferEq.restore=function(){Buffer.prototype.equal=origBufEqual,SlowBuffer.prototype.equal=origSlowBufEqual}},"./node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,getParamBytesForAlg=__webpack_require__("./node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js"),MAX_OCTET=128;function signatureAsBuffer(signature){if(Buffer.isBuffer(signature))return signature;if("string"==typeof signature)return Buffer.from(signature,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function countPadding(buf,start,stop){for(var padding=0;start+padding<stop&&0===buf[start+padding];)++padding;return buf[start+padding]>=MAX_OCTET&&--padding,padding}module.exports={derToJose:function derToJose(signature,alg){signature=signatureAsBuffer(signature);var paramBytes=getParamBytesForAlg(alg),maxEncodedParamLength=paramBytes+1,inputLength=signature.length,offset=0;if(48!==signature[offset++])throw new Error('Could not find expected "seq"');var seqLength=signature[offset++];if(seqLength===(1|MAX_OCTET)&&(seqLength=signature[offset++]),inputLength-offset<seqLength)throw new Error('"seq" specified length of "'+seqLength+'", only "'+(inputLength-offset)+'" remaining');if(2!==signature[offset++])throw new Error('Could not find expected "int" for "r"');var rLength=signature[offset++];if(inputLength-offset-2<rLength)throw new Error('"r" specified length of "'+rLength+'", only "'+(inputLength-offset-2)+'" available');if(maxEncodedParamLength<rLength)throw new Error('"r" specified length of "'+rLength+'", max of "'+maxEncodedParamLength+'" is acceptable');var rOffset=offset;if(offset+=rLength,2!==signature[offset++])throw new Error('Could not find expected "int" for "s"');var sLength=signature[offset++];if(inputLength-offset!==sLength)throw new Error('"s" specified length of "'+sLength+'", expected "'+(inputLength-offset)+'"');if(maxEncodedParamLength<sLength)throw new Error('"s" specified length of "'+sLength+'", max of "'+maxEncodedParamLength+'" is acceptable');var sOffset=offset;if((offset+=sLength)!==inputLength)throw new Error('Expected to consume entire buffer, but "'+(inputLength-offset)+'" bytes remain');var rPadding=paramBytes-rLength,sPadding=paramBytes-sLength,dst=Buffer.allocUnsafe(rPadding+rLength+sPadding+sLength);for(offset=0;offset<rPadding;++offset)dst[offset]=0;signature.copy(dst,offset,rOffset+Math.max(-rPadding,0),rOffset+rLength);for(var o=offset=paramBytes;offset<o+sPadding;++offset)dst[offset]=0;return signature.copy(dst,offset,sOffset+Math.max(-sPadding,0),sOffset+sLength),dst=function base64Url(base64){return base64.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(dst=dst.toString("base64"))},joseToDer:function joseToDer(signature,alg){signature=signatureAsBuffer(signature);var paramBytes=getParamBytesForAlg(alg),signatureBytes=signature.length;if(signatureBytes!==2*paramBytes)throw new TypeError('"'+alg+'" signatures must be "'+2*paramBytes+'" bytes, saw "'+signatureBytes+'"');var rPadding=countPadding(signature,0,paramBytes),sPadding=countPadding(signature,paramBytes,signature.length),rLength=paramBytes-rPadding,sLength=paramBytes-sPadding,rsBytes=2+rLength+1+1+sLength,shortLength=rsBytes<MAX_OCTET,dst=Buffer.allocUnsafe((shortLength?2:3)+rsBytes),offset=0;return dst[offset++]=48,shortLength?dst[offset++]=rsBytes:(dst[offset++]=1|MAX_OCTET,dst[offset++]=255&rsBytes),dst[offset++]=2,dst[offset++]=rLength,rPadding<0?(dst[offset++]=0,offset+=signature.copy(dst,offset,0,paramBytes)):offset+=signature.copy(dst,offset,rPadding,paramBytes),dst[offset++]=2,dst[offset++]=sLength,sPadding<0?(dst[offset++]=0,signature.copy(dst,offset,paramBytes)):signature.copy(dst,offset,paramBytes+sPadding),dst}}},"./node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js":module=>{"use strict";function getParamSize(keySize){return(keySize/8|0)+(keySize%8==0?0:1)}var paramBytesForAlg={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};module.exports=function getParamBytesForAlg(alg){var paramBytes=paramBytesForAlg[alg];if(paramBytes)return paramBytes;throw new Error('Unknown algorithm "'+alg+'"')}},"./node_modules/jsonwebtoken/decode.js":(module,__unused_webpack_exports,__webpack_require__)=>{var jws=__webpack_require__("./node_modules/jws/index.js");module.exports=function(jwt,options){options=options||{};var decoded=jws.decode(jwt,options);if(!decoded)return null;var payload=decoded.payload;if("string"==typeof payload)try{var obj=JSON.parse(payload);null!==obj&&"object"==typeof obj&&(payload=obj)}catch(e){}return!0===options.complete?{header:decoded.header,payload,signature:decoded.signature}:payload}},"./node_modules/jsonwebtoken/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports={verify:__webpack_require__("./node_modules/jsonwebtoken/verify.js"),sign:__webpack_require__("./node_modules/jsonwebtoken/sign.js"),JsonWebTokenError:__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),NotBeforeError:__webpack_require__("./node_modules/jsonwebtoken/lib/NotBeforeError.js"),TokenExpiredError:__webpack_require__("./node_modules/jsonwebtoken/lib/TokenExpiredError.js")},Object.defineProperty(module.exports,"decode",{enumerable:!1,value:__webpack_require__("./node_modules/jsonwebtoken/decode.js")})},"./node_modules/jsonwebtoken/lib/JsonWebTokenError.js":module=>{var JsonWebTokenError=function(message,error){Error.call(this,message),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=message,error&&(this.inner=error)};(JsonWebTokenError.prototype=Object.create(Error.prototype)).constructor=JsonWebTokenError,module.exports=JsonWebTokenError},"./node_modules/jsonwebtoken/lib/NotBeforeError.js":(module,__unused_webpack_exports,__webpack_require__)=>{var JsonWebTokenError=__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),NotBeforeError=function(message,date){JsonWebTokenError.call(this,message),this.name="NotBeforeError",this.date=date};(NotBeforeError.prototype=Object.create(JsonWebTokenError.prototype)).constructor=NotBeforeError,module.exports=NotBeforeError},"./node_modules/jsonwebtoken/lib/TokenExpiredError.js":(module,__unused_webpack_exports,__webpack_require__)=>{var JsonWebTokenError=__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),TokenExpiredError=function(message,expiredAt){JsonWebTokenError.call(this,message),this.name="TokenExpiredError",this.expiredAt=expiredAt};(TokenExpiredError.prototype=Object.create(JsonWebTokenError.prototype)).constructor=TokenExpiredError,module.exports=TokenExpiredError},"./node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js");const semver=__webpack_require__("./node_modules/semver/index.js");module.exports=semver.satisfies(process.version,">=15.7.0")},"./node_modules/jsonwebtoken/lib/psSupported.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),semver=__webpack_require__("./node_modules/semver/index.js");module.exports=semver.satisfies(process.version,"^6.12.0 || >=8.0.0")},"./node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js");const semver=__webpack_require__("./node_modules/semver/index.js");module.exports=semver.satisfies(process.version,">=16.9.0")},"./node_modules/jsonwebtoken/lib/timespan.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ms=__webpack_require__("./node_modules/ms/index.js");module.exports=function(time,iat){var timestamp=iat||Math.floor(Date.now()/1e3);if("string"==typeof time){var milliseconds=ms(time);if(void 0===milliseconds)return;return Math.floor(timestamp+milliseconds/1e3)}return"number"==typeof time?timestamp+time:void 0}},"./node_modules/jsonwebtoken/lib/validateAsymmetricKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{const ASYMMETRIC_KEY_DETAILS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js"),RSA_PSS_KEY_DETAILS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js"),allowedAlgorithmsForKeys={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},allowedCurves={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};module.exports=function(algorithm,key){if(!algorithm||!key)return;const keyType=key.asymmetricKeyType;if(!keyType)return;const allowedAlgorithms=allowedAlgorithmsForKeys[keyType];if(!allowedAlgorithms)throw new Error(`Unknown key type "${keyType}".`);if(!allowedAlgorithms.includes(algorithm))throw new Error(`"alg" parameter for "${keyType}" key type must be one of: ${allowedAlgorithms.join(", ")}.`);if(ASYMMETRIC_KEY_DETAILS_SUPPORTED)switch(keyType){case"ec":const keyCurve=key.asymmetricKeyDetails.namedCurve,allowedCurve=allowedCurves[algorithm];if(keyCurve!==allowedCurve)throw new Error(`"alg" parameter "${algorithm}" requires curve "${allowedCurve}".`);break;case"rsa-pss":if(RSA_PSS_KEY_DETAILS_SUPPORTED){const length=parseInt(algorithm.slice(-3),10),{hashAlgorithm,mgf1HashAlgorithm,saltLength}=key.asymmetricKeyDetails;if(hashAlgorithm!==`sha${length}`||mgf1HashAlgorithm!==hashAlgorithm)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${algorithm}.`);if(void 0!==saltLength&&saltLength>length>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${algorithm}.`)}}}},"./node_modules/jsonwebtoken/sign.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const timespan=__webpack_require__("./node_modules/jsonwebtoken/lib/timespan.js"),PS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/psSupported.js"),validateAsymmetricKey=__webpack_require__("./node_modules/jsonwebtoken/lib/validateAsymmetricKey.js"),jws=__webpack_require__("./node_modules/jws/index.js"),{includes,isBoolean,isInteger,isNumber,isPlainObject,isString,once}=__webpack_require__("./node_modules/lodash/lodash.js"),{KeyObject,createSecretKey,createPrivateKey}=__webpack_require__("?e2bf"),SUPPORTED_ALGS=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];PS_SUPPORTED&&SUPPORTED_ALGS.splice(3,0,"PS256","PS384","PS512");const sign_options_schema={expiresIn:{isValid:function(value){return isInteger(value)||isString(value)&&value},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(value){return isInteger(value)||isString(value)&&value},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(value){return isString(value)||Array.isArray(value)},message:'"audience" must be a string or array'},algorithm:{isValid:includes.bind(null,SUPPORTED_ALGS),message:'"algorithm" must be a valid string enum value'},header:{isValid:isPlainObject,message:'"header" must be an object'},encoding:{isValid:isString,message:'"encoding" must be a string'},issuer:{isValid:isString,message:'"issuer" must be a string'},subject:{isValid:isString,message:'"subject" must be a string'},jwtid:{isValid:isString,message:'"jwtid" must be a string'},noTimestamp:{isValid:isBoolean,message:'"noTimestamp" must be a boolean'},keyid:{isValid:isString,message:'"keyid" must be a string'},mutatePayload:{isValid:isBoolean,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:isBoolean,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:isBoolean,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},registered_claims_schema={iat:{isValid:isNumber,message:'"iat" should be a number of seconds'},exp:{isValid:isNumber,message:'"exp" should be a number of seconds'},nbf:{isValid:isNumber,message:'"nbf" should be a number of seconds'}};function validate(schema,allowUnknown,object,parameterName){if(!isPlainObject(object))throw new Error('Expected "'+parameterName+'" to be a plain object.');Object.keys(object).forEach((function(key){const validator=schema[key];if(validator){if(!validator.isValid(object[key]))throw new Error(validator.message)}else if(!allowUnknown)throw new Error('"'+key+'" is not allowed in "'+parameterName+'"')}))}const options_to_payload={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},options_for_objects=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];module.exports=function(payload,secretOrPrivateKey,options,callback){"function"==typeof options?(callback=options,options={}):options=options||{};const isObjectPayload="object"==typeof payload&&!Buffer.isBuffer(payload),header=Object.assign({alg:options.algorithm||"HS256",typ:isObjectPayload?"JWT":void 0,kid:options.keyid},options.header);function failure(err){if(callback)return callback(err);throw err}if(!secretOrPrivateKey&&"none"!==options.algorithm)return failure(new Error("secretOrPrivateKey must have a value"));if(null!=secretOrPrivateKey&&!(secretOrPrivateKey instanceof KeyObject))try{secretOrPrivateKey=createPrivateKey(secretOrPrivateKey)}catch(_){try{secretOrPrivateKey=createSecretKey("string"==typeof secretOrPrivateKey?Buffer.from(secretOrPrivateKey):secretOrPrivateKey)}catch(_){return failure(new Error("secretOrPrivateKey is not valid key material"))}}if(header.alg.startsWith("HS")&&"secret"!==secretOrPrivateKey.type)return failure(new Error(`secretOrPrivateKey must be a symmetric key when using ${header.alg}`));if(/^(?:RS|PS|ES)/.test(header.alg)){if("private"!==secretOrPrivateKey.type)return failure(new Error(`secretOrPrivateKey must be an asymmetric key when using ${header.alg}`));if(!options.allowInsecureKeySizes&&!header.alg.startsWith("ES")&&void 0!==secretOrPrivateKey.asymmetricKeyDetails&&secretOrPrivateKey.asymmetricKeyDetails.modulusLength<2048)return failure(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`))}if(void 0===payload)return failure(new Error("payload is required"));if(isObjectPayload){try{!function validatePayload(payload){return validate(registered_claims_schema,!0,payload,"payload")}(payload)}catch(error){return failure(error)}options.mutatePayload||(payload=Object.assign({},payload))}else{const invalid_options=options_for_objects.filter((function(opt){return void 0!==options[opt]}));if(invalid_options.length>0)return failure(new Error("invalid "+invalid_options.join(",")+" option for "+typeof payload+" payload"))}if(void 0!==payload.exp&&void 0!==options.expiresIn)return failure(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==payload.nbf&&void 0!==options.notBefore)return failure(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function validateOptions(options){return validate(sign_options_schema,!1,options,"options")}(options)}catch(error){return failure(error)}if(!options.allowInvalidAsymmetricKeyTypes)try{validateAsymmetricKey(header.alg,secretOrPrivateKey)}catch(error){return failure(error)}const timestamp=payload.iat||Math.floor(Date.now()/1e3);if(options.noTimestamp?delete payload.iat:isObjectPayload&&(payload.iat=timestamp),void 0!==options.notBefore){try{payload.nbf=timespan(options.notBefore,timestamp)}catch(err){return failure(err)}if(void 0===payload.nbf)return failure(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==options.expiresIn&&"object"==typeof payload){try{payload.exp=timespan(options.expiresIn,timestamp)}catch(err){return failure(err)}if(void 0===payload.exp)return failure(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(options_to_payload).forEach((function(key){const claim=options_to_payload[key];if(void 0!==options[key]){if(void 0!==payload[claim])return failure(new Error('Bad "options.'+key+'" option. The payload already has an "'+claim+'" property.'));payload[claim]=options[key]}}));const encoding=options.encoding||"utf8";if("function"!=typeof callback){let signature=jws.sign({header,payload,secret:secretOrPrivateKey,encoding});if(!options.allowInsecureKeySizes&&/^(?:RS|PS)/.test(header.alg)&&signature.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`);return signature}callback=callback&&once(callback),jws.createSign({header,privateKey:secretOrPrivateKey,payload,encoding}).once("error",callback).once("done",(function(signature){if(!options.allowInsecureKeySizes&&/^(?:RS|PS)/.test(header.alg)&&signature.length<256)return callback(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));callback(null,signature)}))}},"./node_modules/jsonwebtoken/verify.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const JsonWebTokenError=__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),NotBeforeError=__webpack_require__("./node_modules/jsonwebtoken/lib/NotBeforeError.js"),TokenExpiredError=__webpack_require__("./node_modules/jsonwebtoken/lib/TokenExpiredError.js"),decode=__webpack_require__("./node_modules/jsonwebtoken/decode.js"),timespan=__webpack_require__("./node_modules/jsonwebtoken/lib/timespan.js"),validateAsymmetricKey=__webpack_require__("./node_modules/jsonwebtoken/lib/validateAsymmetricKey.js"),PS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/psSupported.js"),jws=__webpack_require__("./node_modules/jws/index.js"),{KeyObject,createSecretKey,createPublicKey}=__webpack_require__("?e2bf"),PUB_KEY_ALGS=["RS256","RS384","RS512"],EC_KEY_ALGS=["ES256","ES384","ES512"],RSA_KEY_ALGS=["RS256","RS384","RS512"],HS_ALGS=["HS256","HS384","HS512"];PS_SUPPORTED&&(PUB_KEY_ALGS.splice(PUB_KEY_ALGS.length,0,"PS256","PS384","PS512"),RSA_KEY_ALGS.splice(RSA_KEY_ALGS.length,0,"PS256","PS384","PS512")),module.exports=function(jwtString,secretOrPublicKey,options,callback){let done;if("function"!=typeof options||callback||(callback=options,options={}),options||(options={}),options=Object.assign({},options),done=callback||function(err,data){if(err)throw err;return data},options.clockTimestamp&&"number"!=typeof options.clockTimestamp)return done(new JsonWebTokenError("clockTimestamp must be a number"));if(void 0!==options.nonce&&("string"!=typeof options.nonce||""===options.nonce.trim()))return done(new JsonWebTokenError("nonce must be a non-empty string"));if(void 0!==options.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof options.allowInvalidAsymmetricKeyTypes)return done(new JsonWebTokenError("allowInvalidAsymmetricKeyTypes must be a boolean"));const clockTimestamp=options.clockTimestamp||Math.floor(Date.now()/1e3);if(!jwtString)return done(new JsonWebTokenError("jwt must be provided"));if("string"!=typeof jwtString)return done(new JsonWebTokenError("jwt must be a string"));const parts=jwtString.split(".");if(3!==parts.length)return done(new JsonWebTokenError("jwt malformed"));let decodedToken;try{decodedToken=decode(jwtString,{complete:!0})}catch(err){return done(err)}if(!decodedToken)return done(new JsonWebTokenError("invalid token"));const header=decodedToken.header;let getSecret;if("function"==typeof secretOrPublicKey){if(!callback)return done(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));getSecret=secretOrPublicKey}else getSecret=function(header,secretCallback){return secretCallback(null,secretOrPublicKey)};return getSecret(header,(function(err,secretOrPublicKey){if(err)return done(new JsonWebTokenError("error in secret or public key callback: "+err.message));const hasSignature=""!==parts[2].trim();if(!hasSignature&&secretOrPublicKey)return done(new JsonWebTokenError("jwt signature is required"));if(hasSignature&&!secretOrPublicKey)return done(new JsonWebTokenError("secret or public key must be provided"));if(!hasSignature&&!options.algorithms)return done(new JsonWebTokenError('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=secretOrPublicKey&&!(secretOrPublicKey instanceof KeyObject))try{secretOrPublicKey=createPublicKey(secretOrPublicKey)}catch(_){try{secretOrPublicKey=createSecretKey("string"==typeof secretOrPublicKey?Buffer.from(secretOrPublicKey):secretOrPublicKey)}catch(_){return done(new JsonWebTokenError("secretOrPublicKey is not valid key material"))}}if(options.algorithms||("secret"===secretOrPublicKey.type?options.algorithms=HS_ALGS:["rsa","rsa-pss"].includes(secretOrPublicKey.asymmetricKeyType)?options.algorithms=RSA_KEY_ALGS:"ec"===secretOrPublicKey.asymmetricKeyType?options.algorithms=EC_KEY_ALGS:options.algorithms=PUB_KEY_ALGS),-1===options.algorithms.indexOf(decodedToken.header.alg))return done(new JsonWebTokenError("invalid algorithm"));if(header.alg.startsWith("HS")&&"secret"!==secretOrPublicKey.type)return done(new JsonWebTokenError(`secretOrPublicKey must be a symmetric key when using ${header.alg}`));if(/^(?:RS|PS|ES)/.test(header.alg)&&"public"!==secretOrPublicKey.type)return done(new JsonWebTokenError(`secretOrPublicKey must be an asymmetric key when using ${header.alg}`));if(!options.allowInvalidAsymmetricKeyTypes)try{validateAsymmetricKey(header.alg,secretOrPublicKey)}catch(e){return done(e)}let valid;try{valid=jws.verify(jwtString,decodedToken.header.alg,secretOrPublicKey)}catch(e){return done(e)}if(!valid)return done(new JsonWebTokenError("invalid signature"));const payload=decodedToken.payload;if(void 0!==payload.nbf&&!options.ignoreNotBefore){if("number"!=typeof payload.nbf)return done(new JsonWebTokenError("invalid nbf value"));if(payload.nbf>clockTimestamp+(options.clockTolerance||0))return done(new NotBeforeError("jwt not active",new Date(1e3*payload.nbf)))}if(void 0!==payload.exp&&!options.ignoreExpiration){if("number"!=typeof payload.exp)return done(new JsonWebTokenError("invalid exp value"));if(clockTimestamp>=payload.exp+(options.clockTolerance||0))return done(new TokenExpiredError("jwt expired",new Date(1e3*payload.exp)))}if(options.audience){const audiences=Array.isArray(options.audience)?options.audience:[options.audience];if(!(Array.isArray(payload.aud)?payload.aud:[payload.aud]).some((function(targetAudience){return audiences.some((function(audience){return audience instanceof RegExp?audience.test(targetAudience):audience===targetAudience}))})))return done(new JsonWebTokenError("jwt audience invalid. expected: "+audiences.join(" or ")))}if(options.issuer){if("string"==typeof options.issuer&&payload.iss!==options.issuer||Array.isArray(options.issuer)&&-1===options.issuer.indexOf(payload.iss))return done(new JsonWebTokenError("jwt issuer invalid. expected: "+options.issuer))}if(options.subject&&payload.sub!==options.subject)return done(new JsonWebTokenError("jwt subject invalid. expected: "+options.subject));if(options.jwtid&&payload.jti!==options.jwtid)return done(new JsonWebTokenError("jwt jwtid invalid. expected: "+options.jwtid));if(options.nonce&&payload.nonce!==options.nonce)return done(new JsonWebTokenError("jwt nonce invalid. expected: "+options.nonce));if(options.maxAge){if("number"!=typeof payload.iat)return done(new JsonWebTokenError("iat required when maxAge is specified"));const maxAgeTimestamp=timespan(options.maxAge,payload.iat);if(void 0===maxAgeTimestamp)return done(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(clockTimestamp>=maxAgeTimestamp+(options.clockTolerance||0))return done(new TokenExpiredError("maxAge exceeded",new Date(1e3*maxAgeTimestamp)))}if(!0===options.complete){const signature=decodedToken.signature;return done(null,{header,payload,signature})}return done(null,payload)}))}},"./node_modules/jwa/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var bufferEqual=__webpack_require__("./node_modules/buffer-equal-constant-time/index.js"),Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,crypto=__webpack_require__("?5316"),formatEcdsa=__webpack_require__("./node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js"),util=__webpack_require__("./node_modules/util/util.js"),MSG_INVALID_SECRET="secret must be a string or buffer",MSG_INVALID_VERIFIER_KEY="key must be a string or a buffer",MSG_INVALID_SIGNER_KEY="key must be a string, a buffer or an object",supportsKeyObjects="function"==typeof crypto.createPublicKey;function checkIsPublicKey(key){if(!Buffer.isBuffer(key)&&"string"!=typeof key){if(!supportsKeyObjects)throw typeError(MSG_INVALID_VERIFIER_KEY);if("object"!=typeof key)throw typeError(MSG_INVALID_VERIFIER_KEY);if("string"!=typeof key.type)throw typeError(MSG_INVALID_VERIFIER_KEY);if("string"!=typeof key.asymmetricKeyType)throw typeError(MSG_INVALID_VERIFIER_KEY);if("function"!=typeof key.export)throw typeError(MSG_INVALID_VERIFIER_KEY)}}function checkIsPrivateKey(key){if(!Buffer.isBuffer(key)&&"string"!=typeof key&&"object"!=typeof key)throw typeError(MSG_INVALID_SIGNER_KEY)}function fromBase64(base64){return base64.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(base64url){var padding=4-(base64url=base64url.toString()).length%4;if(4!==padding)for(var i=0;i<padding;++i)base64url+="=";return base64url.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(template){var args=[].slice.call(arguments,1),errMsg=util.format.bind(util,template).apply(null,args);return new TypeError(errMsg)}function normalizeInput(thing){return function bufferOrString(obj){return Buffer.isBuffer(obj)||"string"==typeof obj}(thing)||(thing=JSON.stringify(thing)),thing}function createHmacSigner(bits){return function sign(thing,secret){!function checkIsSecretKey(key){if(!Buffer.isBuffer(key)){if("string"==typeof key)return key;if(!supportsKeyObjects)throw typeError(MSG_INVALID_SECRET);if("object"!=typeof key)throw typeError(MSG_INVALID_SECRET);if("secret"!==key.type)throw typeError(MSG_INVALID_SECRET);if("function"!=typeof key.export)throw typeError(MSG_INVALID_SECRET)}}(secret),thing=normalizeInput(thing);var hmac=crypto.createHmac("sha"+bits,secret);return fromBase64((hmac.update(thing),hmac.digest("base64")))}}function createHmacVerifier(bits){return function verify(thing,signature,secret){var computedSig=createHmacSigner(bits)(thing,secret);return bufferEqual(Buffer.from(signature),Buffer.from(computedSig))}}function createKeySigner(bits){return function sign(thing,privateKey){checkIsPrivateKey(privateKey),thing=normalizeInput(thing);var signer=crypto.createSign("RSA-SHA"+bits);return fromBase64((signer.update(thing),signer.sign(privateKey,"base64")))}}function createKeyVerifier(bits){return function verify(thing,signature,publicKey){checkIsPublicKey(publicKey),thing=normalizeInput(thing),signature=toBase64(signature);var verifier=crypto.createVerify("RSA-SHA"+bits);return verifier.update(thing),verifier.verify(publicKey,signature,"base64")}}function createPSSKeySigner(bits){return function sign(thing,privateKey){checkIsPrivateKey(privateKey),thing=normalizeInput(thing);var signer=crypto.createSign("RSA-SHA"+bits);return fromBase64((signer.update(thing),signer.sign({key:privateKey,padding:crypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function createPSSKeyVerifier(bits){return function verify(thing,signature,publicKey){checkIsPublicKey(publicKey),thing=normalizeInput(thing),signature=toBase64(signature);var verifier=crypto.createVerify("RSA-SHA"+bits);return verifier.update(thing),verifier.verify({key:publicKey,padding:crypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto.constants.RSA_PSS_SALTLEN_DIGEST},signature,"base64")}}function createECDSASigner(bits){var inner=createKeySigner(bits);return function sign(){var signature=inner.apply(null,arguments);return signature=formatEcdsa.derToJose(signature,"ES"+bits)}}function createECDSAVerifer(bits){var inner=createKeyVerifier(bits);return function verify(thing,signature,publicKey){return signature=formatEcdsa.joseToDer(signature,"ES"+bits).toString("base64"),inner(thing,signature,publicKey)}}function createNoneSigner(){return function sign(){return""}}function createNoneVerifier(){return function verify(thing,signature){return""===signature}}supportsKeyObjects&&(MSG_INVALID_VERIFIER_KEY+=" or a KeyObject",MSG_INVALID_SECRET+="or a KeyObject"),module.exports=function jwa(algorithm){var signerFactories={hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner},verifierFactories={hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier},match=algorithm.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!match)throw typeError('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',algorithm);var algo=(match[1]||match[3]).toLowerCase(),bits=match[2];return{sign:signerFactories[algo](bits),verify:verifierFactories[algo](bits)}}},"./node_modules/jws/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{var SignStream=__webpack_require__("./node_modules/jws/lib/sign-stream.js"),VerifyStream=__webpack_require__("./node_modules/jws/lib/verify-stream.js");exports.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],exports.sign=SignStream.sign,exports.verify=VerifyStream.verify,exports.decode=VerifyStream.decode,exports.isValid=VerifyStream.isValid,exports.createSign=function createSign(opts){return new SignStream(opts)},exports.createVerify=function createVerify(opts){return new VerifyStream(opts)}},"./node_modules/jws/lib/data-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,Stream=__webpack_require__("./node_modules/stream-browserify/index.js");function DataStream(data){if(this.buffer=null,this.writable=!0,this.readable=!0,!data)return this.buffer=Buffer.alloc(0),this;if("function"==typeof data.pipe)return this.buffer=Buffer.alloc(0),data.pipe(this),this;if(data.length||"object"==typeof data)return this.buffer=data,this.writable=!1,process.nextTick(function(){this.emit("end",data),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof data+")")}__webpack_require__("./node_modules/util/util.js").inherits(DataStream,Stream),DataStream.prototype.write=function write(data){this.buffer=Buffer.concat([this.buffer,Buffer.from(data)]),this.emit("data",data)},DataStream.prototype.end=function end(data){data&&this.write(data),this.emit("end",data),this.emit("close"),this.writable=!1,this.readable=!1},module.exports=DataStream},"./node_modules/jws/lib/sign-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,DataStream=__webpack_require__("./node_modules/jws/lib/data-stream.js"),jwa=__webpack_require__("./node_modules/jwa/index.js"),Stream=__webpack_require__("./node_modules/stream-browserify/index.js"),toString=__webpack_require__("./node_modules/jws/lib/tostring.js"),util=__webpack_require__("./node_modules/util/util.js");function base64url(string,encoding){return Buffer.from(string,encoding).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSign(opts){var header=opts.header,payload=opts.payload,secretOrKey=opts.secret||opts.privateKey,encoding=opts.encoding,algo=jwa(header.alg),securedInput=function jwsSecuredInput(header,payload,encoding){encoding=encoding||"utf8";var encodedHeader=base64url(toString(header),"binary"),encodedPayload=base64url(toString(payload),encoding);return util.format("%s.%s",encodedHeader,encodedPayload)}(header,payload,encoding),signature=algo.sign(securedInput,secretOrKey);return util.format("%s.%s",securedInput,signature)}function SignStream(opts){var secret=opts.secret||opts.privateKey||opts.key,secretStream=new DataStream(secret);this.readable=!0,this.header=opts.header,this.encoding=opts.encoding,this.secret=this.privateKey=this.key=secretStream,this.payload=new DataStream(opts.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}util.inherits(SignStream,Stream),SignStream.prototype.sign=function sign(){try{var signature=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",signature),this.emit("data",signature),this.emit("end"),this.readable=!1,signature}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},SignStream.sign=jwsSign,module.exports=SignStream},"./node_modules/jws/lib/tostring.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;module.exports=function toString(obj){return"string"==typeof obj?obj:"number"==typeof obj||Buffer.isBuffer(obj)?obj.toString():JSON.stringify(obj)}},"./node_modules/jws/lib/verify-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,DataStream=__webpack_require__("./node_modules/jws/lib/data-stream.js"),jwa=__webpack_require__("./node_modules/jwa/index.js"),Stream=__webpack_require__("./node_modules/stream-browserify/index.js"),toString=__webpack_require__("./node_modules/jws/lib/tostring.js"),util=__webpack_require__("./node_modules/util/util.js"),JWS_REGEX=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function safeJsonParse(thing){if(function isObject(thing){return"[object Object]"===Object.prototype.toString.call(thing)}(thing))return thing;try{return JSON.parse(thing)}catch(e){return}}function headerFromJWS(jwsSig){var encodedHeader=jwsSig.split(".",1)[0];return safeJsonParse(Buffer.from(encodedHeader,"base64").toString("binary"))}function signatureFromJWS(jwsSig){return jwsSig.split(".")[2]}function isValidJws(string){return JWS_REGEX.test(string)&&!!headerFromJWS(string)}function jwsVerify(jwsSig,algorithm,secretOrKey){if(!algorithm){var err=new Error("Missing algorithm parameter for jws.verify");throw err.code="MISSING_ALGORITHM",err}var signature=signatureFromJWS(jwsSig=toString(jwsSig)),securedInput=function securedInputFromJWS(jwsSig){return jwsSig.split(".",2).join(".")}(jwsSig);return jwa(algorithm).verify(securedInput,signature,secretOrKey)}function jwsDecode(jwsSig,opts){if(opts=opts||{},!isValidJws(jwsSig=toString(jwsSig)))return null;var header=headerFromJWS(jwsSig);if(!header)return null;var payload=function payloadFromJWS(jwsSig,encoding){encoding=encoding||"utf8";var payload=jwsSig.split(".")[1];return Buffer.from(payload,"base64").toString(encoding)}(jwsSig);return("JWT"===header.typ||opts.json)&&(payload=JSON.parse(payload,opts.encoding)),{header,payload,signature:signatureFromJWS(jwsSig)}}function VerifyStream(opts){var secretOrKey=(opts=opts||{}).secret||opts.publicKey||opts.key,secretStream=new DataStream(secretOrKey);this.readable=!0,this.algorithm=opts.algorithm,this.encoding=opts.encoding,this.secret=this.publicKey=this.key=secretStream,this.signature=new DataStream(opts.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}util.inherits(VerifyStream,Stream),VerifyStream.prototype.verify=function verify(){try{var valid=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer),obj=jwsDecode(this.signature.buffer,this.encoding);return this.emit("done",valid,obj),this.emit("data",valid),this.emit("end"),this.readable=!1,valid}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},VerifyStream.decode=jwsDecode,VerifyStream.isValid=isValidJws,VerifyStream.verify=jwsVerify,module.exports=VerifyStream},"./node_modules/lodash.clonedeep/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",boolTag="[object Boolean]",dateTag="[object Date]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function isArguments(value){return function isArrayLikeObject(value){return function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function initCloneArray(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}(getPrototype(object))}(isFunc?{}:value),!isDeep)return function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}(value,function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag:return function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),!0):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case symbolTag:return function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}(object)}}(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}(value):keys(value);return function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););return array}(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))})),result}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value))}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function hashDelete(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache},Stack.prototype.delete=function stackDelete(key){return this.__data__.delete(key)},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):function stubArray(){return[]},getTag=function baseGetTag(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}module.exports=function cloneDeep(value){return baseClone(value,!0,!0)}},"./node_modules/ms/index.js":module=>{var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d;function plural(ms,msAbs,n,name){var isPlural=msAbs>=1.5*n;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return function parse(str){if((str=String(str)).length>100)return;var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&isFinite(val))return options.long?function fmtLong(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return plural(ms,msAbs,d,"day");if(msAbs>=h)return plural(ms,msAbs,h,"hour");if(msAbs>=m)return plural(ms,msAbs,m,"minute");if(msAbs>=s)return plural(ms,msAbs,s,"second");return ms+" ms"}(val):function fmtShort(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return Math.round(ms/d)+"d";if(msAbs>=h)return Math.round(ms/h)+"h";if(msAbs>=m)return Math.round(ms/m)+"m";if(msAbs>=s)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}}}]);