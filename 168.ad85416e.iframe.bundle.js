"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[168],{"./ui/components/app/advanced-gas-fee-popover/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>advanced_gas_fee_popover});var react=__webpack_require__("./node_modules/react/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),transaction_modal=__webpack_require__("./ui/contexts/transaction-modal.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);const AdvancedGasFeePopoverContext=(0,react.createContext)({}),AdvancedGasFeePopoverContextProvider=({children})=>{const[gasLimit,setGasLimit]=(0,react.useState)(),[maxFeePerGas,setMaxFeePerGas]=(0,react.useState)(),[maxPriorityFeePerGas,setMaxPriorityFeePerGas]=(0,react.useState)(),[errors,setErrors]=(0,react.useState)({maxFeePerGas:!1,maxPriorityFeePerGas:!1,gasLimit:!1}),setErrorValue=(0,react.useCallback)(((field,value)=>{errors[field]!==value&&setErrors({...errors,[field]:value})}),[errors,setErrors]),[maxBaseFee,setMaxBaseFee]=(0,react.useState)();return react.createElement(AdvancedGasFeePopoverContext.Provider,{value:{gasLimit,hasErrors:errors.maxFeePerGas||errors.maxPriorityFeePerGas||errors.gasLimit,gasErrors:errors,maxFeePerGas,maxPriorityFeePerGas,setErrorValue,maxBaseFee,setGasLimit,setMaxPriorityFeePerGas,setMaxFeePerGas,setMaxBaseFee}},children)};function useAdvancedGasFeePopoverContext(){return(0,react.useContext)(AdvancedGasFeePopoverContext)}AdvancedGasFeePopoverContextProvider.propTypes={children:prop_types_default().node.isRequired},AdvancedGasFeePopoverContextProvider.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeePopoverContextProvider",props:{children:{description:"",type:{name:"node"},required:!0}}};var es=__webpack_require__("./node_modules/react-redux/es/index.js"),send_constants=__webpack_require__("./ui/pages/send/send.constants.js"),gas=__webpack_require__("./shared/constants/gas.ts"),common=__webpack_require__("./ui/helpers/constants/common.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),selectors=__webpack_require__("./ui/selectors/index.js"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),useUserPreferencedCurrency=__webpack_require__("./ui/hooks/useUserPreferencedCurrency.js"),useCurrencyDisplay=__webpack_require__("./ui/hooks/useCurrencyDisplay.js"),form_field=__webpack_require__("./ui/components/ui/form-field/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),utils_gas=__webpack_require__("./ui/helpers/utils/gas.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),loading_heartbeat=__webpack_require__("./ui/components/ui/loading-heartbeat/index.js");const AdvancedGasFeeInputSubtext=({latest,historical,trend})=>{const t=(0,react.useContext)(i18n.OO),trendInfo=function determineTrendInfo(trend,t){switch(trend){case"up":return{className:"fa-arrow-up advanced-gas-fee-input-subtext__up",color:"var(--color-success-default)",title:t("upArrow")};case"down":return{className:"fa-arrow-down advanced-gas-fee-input-subtext__down",color:"var(--color-error-default)",title:t("downArrow")};case"level":return{className:"fa-arrow-right advanced-gas-fee-input-subtext__level",color:"var(--color-icon-alternative)",title:t("levelArrow")};default:return null}}(trend,t);return react.createElement(box.ZP,{display:"flex",alignItems:"center",gap:4,className:"advanced-gas-fee-input-subtext"},(0,util.Rw)(latest)?null:react.createElement(box.ZP,{display:"flex",alignItems:"center","data-testid":"latest"},react.createElement("span",{className:"advanced-gas-fee-input-subtext__label"},t("currentTitle")),react.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},react.createElement(loading_heartbeat.Z,null),(0,utils_gas.m5)(latest)),null===trendInfo?null:react.createElement("span",{className:"advanced-gas-fee-input-subtext__icon"},react.createElement("i",{className:classnames_default()("fa",trendInfo.className),style:{color:trendInfo.color},title:trendInfo.title,"data-testid":"fee-arrow"}))),(0,util.Rw)(historical)?null:react.createElement(box.ZP,null,react.createElement("span",{className:"advanced-gas-fee-input-subtext__label","data-testid":"historical"},t("twelveHrTitle")),react.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},react.createElement(loading_heartbeat.Z,null),(0,utils_gas.m5)(historical))))};AdvancedGasFeeInputSubtext.propTypes={latest:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().arrayOf(prop_types_default().string)]),historical:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().arrayOf(prop_types_default().string)]),trend:prop_types_default().oneOf(["up","down","level"])},AdvancedGasFeeInputSubtext.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeeInputSubtext",props:{latest:{description:"",type:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"string"}}]},required:!1},historical:{description:"",type:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"string"}}]},required:!1},trend:{description:"",type:{name:"enum",value:[{value:"'up'",computed:!1},{value:"'down'",computed:!1},{value:"'level'",computed:!1}]},required:!1}}};const advanced_gas_fee_input_subtext=AdvancedGasFeeInputSubtext;var conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts");const BaseFeeInput=()=>{const t=(0,useI18nContext.C)(),{gasFeeEstimates,estimateUsed,maxFeePerGas,editGasMode}=(0,gasFee.YJ)(),{gasLimit,maxPriorityFeePerGas,setErrorValue,setMaxFeePerGas,setMaxBaseFee}=useAdvancedGasFeePopoverContext(),{estimatedBaseFee,historicalBaseFeeRange,baseFeeTrend}=gasFeeEstimates,[baseFeeError,setBaseFeeError]=(0,react.useState)(),{currency,numberOfDecimals}=(0,useUserPreferencedCurrency.I)(common._8),advancedGasFeeValues=(0,es.v9)(selectors.QVH),[baseFee,setBaseFee]=(0,react.useState)((()=>estimateUsed!==gas.o7.custom&&null!=advancedGasFeeValues&&advancedGasFeeValues.maxBaseFee&&editGasMode!==gas.G_.swaps?advancedGasFeeValues.maxBaseFee:maxFeePerGas)),[baseFeeInPrimaryCurrency]=(0,useCurrencyDisplay._)((0,conversion_utils.Kn)(baseFee*gasLimit),{currency,numberOfDecimals}),updateBaseFee=(0,react.useCallback)((value=>{setBaseFee(value)}),[setBaseFee]);return(0,react.useEffect)((()=>{setMaxFeePerGas(baseFee);const error=((value,gasFeeEstimates,maxPriorityFeePerGas)=>(0,util.Xn)(maxPriorityFeePerGas,value)?"editGasMaxBaseFeeGWEIImbalance":null!=gasFeeEstimates&&gasFeeEstimates.low&&(0,util.A7)(value,gasFeeEstimates.low.suggestedMaxFeePerGas)?"editGasMaxBaseFeeLow":null!=gasFeeEstimates&&gasFeeEstimates.high&&(0,util.Xn)(value,gasFeeEstimates.high.suggestedMaxFeePerGas*send_constants.P4)?"editGasMaxBaseFeeHigh":null)(baseFee,gasFeeEstimates,maxPriorityFeePerGas);setBaseFeeError(error),setErrorValue("maxFeePerGas","editGasMaxBaseFeeGWEIImbalance"===error),setMaxBaseFee(baseFee)}),[baseFee,gasFeeEstimates,maxPriorityFeePerGas,setBaseFeeError,setErrorValue,setMaxFeePerGas,setMaxBaseFee]),react.createElement(box.ZP,{className:"base-fee-input",marginLeft:2,marginRight:2},react.createElement(form_field.Z,{dataTestId:"base-fee-input",error:baseFeeError?t(baseFeeError):"",onChange:updateBaseFee,titleText:t("maxBaseFee"),titleUnit:`(${t("gwei")})`,tooltipText:t("advancedBaseGasFeeToolTip"),value:baseFee,detailText:`≈ ${baseFeeInPrimaryCurrency}`,allowDecimals:!0,numeric:!0}),react.createElement(advanced_gas_fee_input_subtext,{latest:estimatedBaseFee,historical:historicalBaseFeeRange,trend:baseFeeTrend}))};BaseFeeInput.__docgenInfo={description:"",methods:[],displayName:"BaseFeeInput"};const base_fee_input=BaseFeeInput,PriorityFeeInput=()=>{const t=(0,useI18nContext.C)(),advancedGasFeeValues=(0,es.v9)(selectors.QVH),{gasLimit,setErrorValue,setMaxPriorityFeePerGas}=useAdvancedGasFeePopoverContext(),{editGasMode,estimateUsed,gasFeeEstimates,maxPriorityFeePerGas}=(0,gasFee.YJ)(),{latestPriorityFeeRange,historicalPriorityFeeRange,priorityFeeTrend}=gasFeeEstimates,[priorityFeeError,setPriorityFeeError]=(0,react.useState)(),[priorityFee,setPriorityFee]=(0,react.useState)((()=>estimateUsed!==gas.o7.custom&&null!=advancedGasFeeValues&&advancedGasFeeValues.priorityFee&&editGasMode!==gas.G_.swaps?advancedGasFeeValues.priorityFee:maxPriorityFeePerGas)),{currency,numberOfDecimals}=(0,useUserPreferencedCurrency.I)(common._8),[priorityFeeInPrimaryCurrency]=(0,useCurrencyDisplay._)((0,conversion_utils.Kn)(priorityFee*gasLimit),{currency,numberOfDecimals});return(0,react.useEffect)((()=>{setMaxPriorityFeePerGas(priorityFee);const error=((value,gasFeeEstimates)=>value<0?"editGasMaxPriorityFeeBelowMinimumV2":null!=gasFeeEstimates&&gasFeeEstimates.low&&(0,util.A7)(value,gasFeeEstimates.low.suggestedMaxPriorityFeePerGas)?"editGasMaxPriorityFeeLowV2":null!=gasFeeEstimates&&gasFeeEstimates.high&&(0,util.Xn)(value,gasFeeEstimates.high.suggestedMaxPriorityFeePerGas*send_constants.P4)?"editGasMaxPriorityFeeHighV2":null)(priorityFee,gasFeeEstimates);setErrorValue("maxPriorityFeePerGas","editGasMaxPriorityFeeBelowMinimumV2"===error),setPriorityFeeError(error)}),[gasFeeEstimates,priorityFee,setErrorValue,setMaxPriorityFeePerGas,setPriorityFeeError]),react.createElement(box.ZP,{marginTop:4,marginLeft:2,marginRight:2,className:"priority-fee-input"},react.createElement(form_field.Z,{dataTestId:"priority-fee-input",error:priorityFeeError?t(priorityFeeError):"",onChange:value=>{setPriorityFee(value)},titleText:t("priorityFeeProperCase"),titleUnit:`(${t("gwei")})`,tooltipText:t("advancedPriorityFeeToolTip"),value:priorityFee,detailText:`≈ ${priorityFeeInPrimaryCurrency}`,allowDecimals:!0,numeric:!0}),react.createElement(advanced_gas_fee_input_subtext,{latest:latestPriorityFeeRange,historical:historicalPriorityFeeRange,trend:priorityFeeTrend}))};PriorityFeeInput.__docgenInfo={description:"",methods:[],displayName:"PriorityFeeInput"};const priority_fee_input=PriorityFeeInput,AdvancedGasFeeInputs=()=>react.createElement(box.ZP,{className:"advanced-gas-fee-inputs"},react.createElement(base_fee_input,null),react.createElement(priority_fee_input,null));AdvancedGasFeeInputs.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeeInputs"};const advanced_gas_fee_inputs=AdvancedGasFeeInputs;var design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.js");const AdvancedGasFeeGasLimit=()=>{const t=(0,useI18nContext.C)(),{setGasLimit:setGasLimitInContext,setErrorValue}=useAdvancedGasFeePopoverContext(),{gasLimit:gasLimitInTransaction,minimumGasLimitDec}=(0,gasFee.YJ)(),[isEditing,setEditing]=(0,react.useState)(!1),[gasLimit,setGasLimit]=(0,react.useState)(gasLimitInTransaction),[gasLimitError,setGasLimitError]=(0,react.useState)(),updateGasLimit=value=>{setGasLimit(value)};return(0,react.useEffect)((()=>{setGasLimitInContext(gasLimit);const error=((gasLimit,minimumGasLimitDec)=>(0,util.A7)(gasLimit,minimumGasLimitDec)||(0,util.Xn)(gasLimit,send_constants.BD)?"editGasLimitOutOfBoundsV2":null)(gasLimit,minimumGasLimitDec);setGasLimitError(error),setErrorValue("gasLimit","editGasLimitOutOfBoundsV2"===error)}),[gasLimit,minimumGasLimitDec,setGasLimitInContext,setErrorValue]),isEditing?react.createElement(form_field.Z,{dataTestId:"gas-limit-input",error:gasLimitError?t(gasLimitError,[minimumGasLimitDec-1,send_constants.BD]):"",onChange:updateGasLimit,titleText:t("gasLimitV2"),value:gasLimit,allowDecimals:!1,numeric:!0}):react.createElement(component_library.xv,{tag:design_system.rK.bodyMd,variant:design_system.rK.bodySm,as:"h6",className:"advanced-gas-fee-gas-limit",marginTop:4,marginLeft:2,marginRight:2},react.createElement("strong",null,t("gasLimitV2")),react.createElement("span",null,gasLimit),react.createElement(ui_button.Z,{"data-testid":"advanced-gas-fee-edit",className:"advanced-gas-fee-gas-limit__edit-link",onClick:()=>setEditing(!0),type:"link"},t("edit")))};AdvancedGasFeeGasLimit.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeeGasLimit"};const advanced_gas_fee_gas_limit=AdvancedGasFeeGasLimit;var useTransactionEventFragment=__webpack_require__("./ui/hooks/useTransactionEventFragment.js");const AdvancedGasFeeSaveButton=()=>{const{closeModal}=(0,transaction_modal.y8)(),{updateTransactionEventFragment}=(0,useTransactionEventFragment.s)(),{updateTransaction}=(0,gasFee.YJ)(),t=(0,useI18nContext.C)(),{gasLimit,hasErrors,maxFeePerGas,maxPriorityFeePerGas}=useAdvancedGasFeePopoverContext();return react.createElement(ui_button.Z,{type:"primary",disabled:hasErrors,onClick:()=>{updateTransaction({estimateUsed:gas.o7.custom,maxFeePerGas:(0,conversion_utils.Kn)(maxFeePerGas),maxPriorityFeePerGas:(0,conversion_utils.Kn)(maxPriorityFeePerGas),gasLimit}),updateTransactionEventFragment({properties:{gas_edit_type:"advanced"}}),closeModal(["advancedGasFee","editGasFee"])}},t("save"))};AdvancedGasFeeSaveButton.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeeSaveButton"};const advanced_gas_fee_save=AdvancedGasFeeSaveButton;var check_box=__webpack_require__("./ui/components/ui/check-box/index.js"),actions=__webpack_require__("./ui/store/actions.ts");const AdvancedGasFeeDefaults=()=>{const t=(0,useI18nContext.C)(),dispatch=(0,es.I0)(),{gasErrors,maxBaseFee,maxPriorityFeePerGas}=useAdvancedGasFeePopoverContext(),advancedGasFeeValues=(0,es.v9)(selectors.QVH),{updateTransactionEventFragment}=(0,useTransactionEventFragment.s)(),{editGasMode}=(0,gasFee.YJ)(),[isDefaultSettingsSelected,setDefaultSettingsSelected]=(0,react.useState)(Boolean(advancedGasFeeValues)&&advancedGasFeeValues.maxBaseFee===maxBaseFee&&advancedGasFeeValues.priorityFee===maxPriorityFeePerGas);(0,react.useEffect)((()=>{setDefaultSettingsSelected(Boolean(advancedGasFeeValues)&&advancedGasFeeValues.maxBaseFee===maxBaseFee&&advancedGasFeeValues.priorityFee===maxPriorityFeePerGas)}),[advancedGasFeeValues,maxBaseFee,maxPriorityFeePerGas]);return editGasMode===gas.G_.swaps?null:react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Row,marginTop:4,marginLeft:2,marginRight:2,className:"advanced-gas-fee-defaults"},react.createElement("label",{className:"advanced-gas-fee-defaults__label"},react.createElement(check_box.ZP,{checked:isDefaultSettingsSelected,className:"advanced-gas-fee-defaults__checkbox",onClick:()=>{isDefaultSettingsSelected?(dispatch((0,actions.kqE)(null)),setDefaultSettingsSelected(!1),updateTransactionEventFragment({properties:{advanced_gas_defaults_updated_maxbasefee:null,advanced_gas_defaults_updated_priorityfee:null}})):(dispatch((0,actions.kqE)({maxBaseFee,priorityFee:maxPriorityFeePerGas})),updateTransactionEventFragment({properties:{advanced_gas_defaults_updated_maxbasefee:maxBaseFee,advanced_gas_defaults_updated_priorityfee:maxPriorityFeePerGas}}))},disabled:gasErrors.maxFeePerGas||gasErrors.maxPriorityFeePerGas}),react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",color:design_system.d9.textAlternative},isDefaultSettingsSelected?t("advancedGasFeeDefaultOptOut"):t("advancedGasFeeDefaultOptIn",[react.createElement("strong",{key:"default-value-change"},t("newValues"))]))))};AdvancedGasFeeDefaults.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeeDefaults"};const advanced_gas_fee_defaults=AdvancedGasFeeDefaults,AdvancedGasFeePopover=()=>{const t=(0,useI18nContext.C)(),{closeAllModals,currentModal}=(0,transaction_modal.y8)();return"advancedGasFee"!==currentModal?null:react.createElement(AdvancedGasFeePopoverContextProvider,null,react.createElement(popover.Z,{className:"advanced-gas-fee-popover",title:t("advancedGasFeeModalTitle"),onClose:closeAllModals,footer:react.createElement(advanced_gas_fee_save,null)},react.createElement(box.ZP,{margin:4},react.createElement(advanced_gas_fee_inputs,null),react.createElement(advanced_gas_fee_defaults,null),react.createElement(advanced_gas_fee_gas_limit,null))))};AdvancedGasFeePopover.__docgenInfo={description:"",methods:[],displayName:"AdvancedGasFeePopover"};const advanced_gas_fee_popover=AdvancedGasFeePopover},"./ui/components/app/app-loading-spinner/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>app_loading_spinner});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),spinner=__webpack_require__("./ui/components/ui/spinner/index.js");const AppLoadingSpinner=({className})=>(0,es.v9)(selectors.dlV)?react.createElement("div",{className:`${className} app-loading-spinner`,role:"alert","aria-busy":"true"},react.createElement(spinner.Z,{color:"var(--color-secondary-muted)",className:"app-loading-spinner__inner"})):null;AppLoadingSpinner.propTypes={className:prop_types_default().string},AppLoadingSpinner.__docgenInfo={description:"",methods:[],displayName:"AppLoadingSpinner",props:{className:{description:"",type:{name:"string"},required:!1}}};const app_loading_spinner=AppLoadingSpinner},"./ui/components/app/edit-gas-fee-button/edit-gas-fee-button.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>EditGasFeeButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),_shared_constants_gas__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/constants/gas.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_helpers_constants_gas__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/gas.js"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/contexts/gasFee.js"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/hooks/useI18nContext.js"),_hooks_useTransactionEventFragment__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/hooks/useTransactionEventFragment.js"),_contexts_transaction_modal__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/contexts/transaction-modal.js"),_ui_info_tooltip_info_tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/components/ui/info-tooltip/info-tooltip.js"),_component_library__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/components/component-library/index.js");function EditGasFeeButton({userAcknowledgedGasMissing}){const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_5__.C)(),{editGasMode,gasLimit,hasSimulationError,estimateUsed,maxFeePerGas,maxPriorityFeePerGas,supportsEIP1559,transaction}=(0,_contexts_gasFee__WEBPACK_IMPORTED_MODULE_4__.YJ)(),{updateTransactionEventFragment}=(0,_hooks_useTransactionEventFragment__WEBPACK_IMPORTED_MODULE_6__.s)(),{openModal}=(0,_contexts_transaction_modal__WEBPACK_IMPORTED_MODULE_7__.y8)();if(!supportsEIP1559||!estimateUsed||!(!hasSimulationError||!0===userAcknowledgedGasMissing))return null;let icon=estimateUsed,title=estimateUsed;estimateUsed===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_1__.o7.high&&editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_1__.G_.swaps?(icon="swapSuggested",title="swapSuggested"):estimateUsed===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_1__.o7.tenPercentIncreased&&(icon=void 0,title="tenPercentIncreased");return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"edit-gas-fee-button"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>{updateTransactionEventFragment({gas_edit_attempted:"basic"}),openModal("editGasFee")},"data-testid":"edit-gas-fee-button"},icon&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"edit-gas-fee-button__icon"},_helpers_constants_gas__WEBPACK_IMPORTED_MODULE_3__.K7[icon]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"edit-gas-fee-button__label"},t(title)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_9__.JO,{name:_component_library__WEBPACK_IMPORTED_MODULE_9__.uH.ArrowRight,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.Il.primaryDefault,size:_component_library__WEBPACK_IMPORTED_MODULE_9__.Jh.Xs})),"custom"===estimateUsed&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>{updateTransactionEventFragment({gas_edit_attempted:"advanced"}),openModal("advancedGasFee")}},t("edit")),"dappSuggested"===estimateUsed&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_info_tooltip_info_tooltip__WEBPACK_IMPORTED_MODULE_8__.Z,{contentText:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"edit-gas-fee-button__tooltip"},(null==transaction?void 0:transaction.origin)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_9__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.rK.bodySm,as:"h6",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.d9.textAlternative},t("dappSuggestedTooltip",[transaction.origin])),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_9__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.rK.bodySm,as:"h6"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("b",null,t("maxBaseFee"))," ",maxFeePerGas),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_9__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.rK.bodySm,as:"h6"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("b",null,t("maxPriorityFee"))," ",maxPriorityFeePerGas),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_9__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.rK.bodySm,as:"h6"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("b",null,t("gasLimit"))," ",gasLimit)),position:"top"}))}EditGasFeeButton.propTypes={userAcknowledgedGasMissing:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool},EditGasFeeButton.__docgenInfo={description:"",methods:[],displayName:"EditGasFeeButton",props:{userAcknowledgedGasMissing:{description:"",type:{name:"bool"},required:!1}}}},"./ui/components/app/edit-gas-fee-button/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_edit_gas_fee_button__WEBPACK_IMPORTED_MODULE_0__.Z});var _edit_gas_fee_button__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/edit-gas-fee-button/edit-gas-fee-button.js")},"./ui/components/app/edit-gas-fee-popover/edit-gas-fee-popover.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>edit_gas_fee_popover});var react=__webpack_require__("./node_modules/react/index.js"),gas=__webpack_require__("./shared/constants/gas.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),transaction_modal=__webpack_require__("./ui/contexts/transaction-modal.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),error_message=__webpack_require__("./ui/components/ui/error-message/index.js"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),error_keys=__webpack_require__("./ui/helpers/constants/error-keys.js"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),app_loading_spinner=__webpack_require__("./ui/components/app/app-loading-spinner/index.js"),zendesk_url=__webpack_require__("./ui/helpers/constants/zendesk-url.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),constants_gas=__webpack_require__("./ui/helpers/constants/gas.js"),common=__webpack_require__("./ui/helpers/constants/common.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),useTransactionEventFragment=__webpack_require__("./ui/hooks/useTransactionEventFragment.js"),info_tooltip=__webpack_require__("./ui/components/ui/info-tooltip/index.js"),loading_heartbeat=__webpack_require__("./ui/components/ui/loading-heartbeat/index.js"),user_preferenced_currency_display=__webpack_require__("./ui/components/app/user-preferenced-currency-display/index.js"),utils_gas=__webpack_require__("./ui/helpers/utils/gas.js");const EditGasToolTip=({editGasMode,estimateGreaterThanGasUse,gasLimit,priorityLevel,maxFeePerGas,maxPriorityFeePerGas,transaction,t})=>{const toolTipMessage=(0,react.useMemo)((()=>{switch(priorityLevel){case gas.o7.low:return t("lowGasSettingToolTipMessage",[react.createElement("span",{key:priorityLevel},react.createElement("b",null,t("low")))]);case gas.o7.medium:return estimateGreaterThanGasUse?t("disabledGasOptionToolTipMessage",[react.createElement("span",{key:`disabled-priority-level-${priorityLevel}`},t(priorityLevel))]):t("mediumGasSettingToolTipMessage",[react.createElement("span",{key:priorityLevel},react.createElement("b",null,t("medium")))]);case gas.o7.high:return estimateGreaterThanGasUse?t("disabledGasOptionToolTipMessage",[react.createElement("span",{key:`disabled-priority-level-${priorityLevel}`},t(priorityLevel))]):editGasMode===gas.G_.swaps?t("swapSuggestedGasSettingToolTipMessage"):t("highGasSettingToolTipMessage",[react.createElement("span",{key:priorityLevel},react.createElement("b",null,t("high")))]);case gas.o7.custom:return t("customGasSettingToolTipMessage",[react.createElement("span",{key:priorityLevel},react.createElement("b",null,t("custom")))]);case gas.o7.dAppSuggested:return null!=transaction&&transaction.origin?t("dappSuggestedGasSettingToolTipMessage",[react.createElement("span",{key:null==transaction?void 0:transaction.origin},null==transaction?void 0:transaction.origin)]):null;default:return""}}),[editGasMode,estimateGreaterThanGasUse,priorityLevel,transaction,t]);let imgAltText;priorityLevel===gas.o7.low?imgAltText=t("curveLowGasEstimate"):priorityLevel===gas.o7.medium?imgAltText=t("curveMediumGasEstimate"):priorityLevel===gas.o7.high&&(imgAltText=t("curveHighGasEstimate"));const showGasEstimateCurve=(0,utils_gas.DW)(priorityLevel)&&!(priorityLevel===gas.o7.high&&editGasMode===gas.G_.swaps)&&!estimateGreaterThanGasUse;return react.createElement("div",{className:"edit-gas-tooltip__container"},showGasEstimateCurve?react.createElement("img",{alt:imgAltText,src:`./images/curve-${priorityLevel}.svg`}):null,toolTipMessage&&react.createElement("div",{className:"edit-gas-tooltip__container__message"},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6"},toolTipMessage)),priorityLevel===gas.o7.custom||estimateGreaterThanGasUse?null:react.createElement("div",{className:"edit-gas-tooltip__container__values"},react.createElement("div",null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",fontWeight:design_system.U9.Bold,className:"edit-gas-tooltip__container__label"},t("maxBaseFee")),maxFeePerGas&&react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",color:design_system.d9.textAlternative,className:"edit-gas-tooltip__container__value"},(0,util.YQ)(maxFeePerGas,4))),react.createElement("div",null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",fontWeight:design_system.U9.Bold,className:"edit-gas-tooltip__container__label"},t("priorityFeeProperCase")),maxPriorityFeePerGas&&react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",color:design_system.d9.textAlternative,className:"edit-gas-tooltip__container__value"},(0,util.YQ)(maxPriorityFeePerGas,4))),react.createElement("div",null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",fontWeight:design_system.U9.Bold,className:"edit-gas-tooltip__container__label"},t("gasLimit")),gasLimit&&react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",color:design_system.d9.textAlternative,className:"edit-gas-tooltip__container__value"},(0,util.YQ)(gasLimit,4)))))};EditGasToolTip.propTypes={estimateGreaterThanGasUse:prop_types_default().bool,priorityLevel:prop_types_default().string,maxFeePerGas:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),maxPriorityFeePerGas:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),t:prop_types_default().func,editGasMode:prop_types_default().string,gasLimit:prop_types_default().number,transaction:prop_types_default().object},EditGasToolTip.__docgenInfo={description:"",methods:[],displayName:"EditGasToolTip",props:{estimateGreaterThanGasUse:{description:"",type:{name:"bool"},required:!1},priorityLevel:{description:"",type:{name:"string"},required:!1},maxFeePerGas:{description:"",type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1},maxPriorityFeePerGas:{description:"",type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1},t:{description:"",type:{name:"func"},required:!1},editGasMode:{description:"",type:{name:"string"},required:!1},gasLimit:{description:"",type:{name:"number"},required:!1},transaction:{description:"",type:{name:"object"},required:!1}}};const edit_gas_tooltip=EditGasToolTip;var es=__webpack_require__("./node_modules/react-redux/es/index.js"),gas_utils=__webpack_require__("./shared/modules/gas.utils.js"),selectors=__webpack_require__("./ui/selectors/index.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bignumber_default=__webpack_require__.n(bignumber),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),actions=__webpack_require__("./ui/store/actions.ts");const useGasItemFeeDetails=priorityLevel=>{const{editGasMode,estimateUsed,gasFeeEstimates,gasLimit,maxFeePerGas:maxFeePerGasValue,maxPriorityFeePerGas:maxPriorityFeePerGasValue,transaction}=(0,gasFee.YJ)(),[estimateGreaterThanGasUse,setEstimateGreaterThanGasUse]=(0,react.useState)(!1),advancedGasFeeValues=(0,es.v9)(selectors.QVH);let maxFeePerGas,maxPriorityFeePerGas,minWaitTime;const{dappSuggestedGasFees}=transaction;if(null!=gasFeeEstimates&&gasFeeEstimates[priorityLevel])maxFeePerGas=gasFeeEstimates[priorityLevel].suggestedMaxFeePerGas,maxPriorityFeePerGas=gasFeeEstimates[priorityLevel].suggestedMaxPriorityFeePerGas;else if(priorityLevel===gas.o7.dAppSuggested&&dappSuggestedGasFees)maxFeePerGas=(0,conversion_utils.Yg)(dappSuggestedGasFees.maxFeePerGas||dappSuggestedGasFees.gasPrice),maxPriorityFeePerGas=(0,conversion_utils.Yg)(dappSuggestedGasFees.maxPriorityFeePerGas||maxFeePerGas);else if(priorityLevel===gas.o7.custom)estimateUsed===gas.o7.custom?(maxFeePerGas=maxFeePerGasValue,maxPriorityFeePerGas=maxPriorityFeePerGasValue):advancedGasFeeValues&&editGasMode!==gas.G_.swaps&&(maxFeePerGas=advancedGasFeeValues.maxBaseFee,maxPriorityFeePerGas=advancedGasFeeValues.priorityFee);else if(priorityLevel===gas.o7.tenPercentIncreased&&transaction.previousGas){var _transaction$previous,_transaction$previous2;maxFeePerGas=(0,conversion_utils.Yg)((0,utils_gas.Vc)(null===(_transaction$previous=transaction.previousGas)||void 0===_transaction$previous?void 0:_transaction$previous.maxFeePerGas)),maxPriorityFeePerGas=(0,conversion_utils.Yg)((0,utils_gas.Vc)(null===(_transaction$previous2=transaction.previousGas)||void 0===_transaction$previous2?void 0:_transaction$previous2.maxPriorityFeePerGas))}const{waitTimeEstimate}=(({gasFeeEstimates,maxFeePerGas,maxPriorityFeePerGas})=>{const gasEstimateType=(0,es.v9)(metamask.xP),isGasEstimatesLoading=(0,es.v9)(metamask.rc),[customEstimatedTime,setCustomEstimatedTime]=(0,react.useState)(null),returnNoEstimates=isGasEstimatesLoading||gasEstimateType!==gas.gB.feeMarket||!maxPriorityFeePerGas,isUnknownLow=(null==gasFeeEstimates?void 0:gasFeeEstimates.low)&&Number(maxPriorityFeePerGas)<Number(gasFeeEstimates.low.suggestedMaxPriorityFeePerGas);if((0,react.useEffect)((()=>{!isGasEstimatesLoading&&gasEstimateType===gas.gB.feeMarket&&maxPriorityFeePerGas&&isUnknownLow&&(0,actions.H61)(new(bignumber_default())(maxPriorityFeePerGas,10).toString(10),new(bignumber_default())(maxFeePerGas,10).toString(10)).then((result=>{setCustomEstimatedTime(result)}))}),[gasEstimateType,isUnknownLow,isGasEstimatesLoading,maxFeePerGas,maxPriorityFeePerGas,returnNoEstimates]),returnNoEstimates)return{};const{low={},medium={},high={}}=gasFeeEstimates;let waitTimeEstimate="";return waitTimeEstimate=isUnknownLow&&customEstimatedTime&&"unknown"!==customEstimatedTime&&"unknown"!==(null==customEstimatedTime?void 0:customEstimatedTime.upperTimeBound)?Number(null==customEstimatedTime?void 0:customEstimatedTime.upperTimeBound):Number(maxPriorityFeePerGas)>=Number(medium.suggestedMaxPriorityFeePerGas)?high.minWaitTimeEstimate:low.maxWaitTimeEstimate,{waitTimeEstimate}})({gasFeeEstimates,maxFeePerGas,maxPriorityFeePerGas});minWaitTime=gasFeeEstimates[priorityLevel]?priorityLevel===gas.o7.high?null==gasFeeEstimates?void 0:gasFeeEstimates.high.minWaitTimeEstimate:null==gasFeeEstimates?void 0:gasFeeEstimates.low.maxWaitTimeEstimate:waitTimeEstimate;const hexMaximumTransactionFee=maxFeePerGas?(0,gas_utils.a)({gasLimit:(0,conversion_utils.X0)(gasLimit),maxFeePerGas:(0,conversion_utils.Kn)(maxFeePerGas)}):null;return(0,react.useEffect)((()=>{if(!(editGasMode!==gas.G_.cancel&&editGasMode!==gas.G_.speedUp||priorityLevel!==gas.o7.medium&&priorityLevel!==gas.o7.high)){const estimateGreater=!(0,utils_gas.Ll)(transaction.previousGas||transaction.txParams,gasFeeEstimates,priorityLevel);setEstimateGreaterThanGasUse(estimateGreater)}}),[editGasMode,gasFeeEstimates,priorityLevel,transaction]),{estimateGreaterThanGasUse,maxFeePerGas,maxPriorityFeePerGas,minWaitTime,hexMaximumTransactionFee}},EditGasItem=({priorityLevel})=>{const{editGasMode,estimateUsed,gasLimit,updateTransactionToTenPercentIncreasedGasFee,updateTransactionUsingDAPPSuggestedValues,updateTransactionUsingEstimate,transaction}=(0,gasFee.YJ)(),{updateTransactionEventFragment}=(0,useTransactionEventFragment.s)(),t=(0,useI18nContext.C)(),{closeModal,openModal}=(0,transaction_modal.y8)(),{dappSuggestedGasFees}=transaction,{estimateGreaterThanGasUse,hexMaximumTransactionFee,maxFeePerGas,maxPriorityFeePerGas,minWaitTime}=useGasItemFeeDetails(priorityLevel);if(!(priorityLevel!==gas.o7.dAppSuggested||null!=dappSuggestedGasFees&&dappSuggestedGasFees.maxFeePerGas||null!=dappSuggestedGasFees&&dappSuggestedGasFees.gasPrice))return null;const{title,icon}=((priorityLevel,editGasMode)=>{let icon=priorityLevel,title=priorityLevel;return priorityLevel===gas.o7.dAppSuggested?title="dappSuggestedShortLabel":priorityLevel===gas.o7.dappSuggestedHigh?title="dappSuggestedHighShortLabel":priorityLevel===gas.o7.tenPercentIncreased?(icon=null,title="tenPercentIncreased"):priorityLevel===gas.o7.high&&editGasMode===gas.G_.swaps&&(icon="swapSuggested",title="swapSuggested"),{title,icon}})(priorityLevel,editGasMode);return react.createElement("button",{className:classnames_default()("edit-gas-item",{"edit-gas-item--selected":priorityLevel===estimateUsed,"edit-gas-item--disabled":estimateGreaterThanGasUse}),onClick:()=>{priorityLevel===gas.o7.custom?(updateTransactionEventFragment({properties:{gas_edit_attempted:"advanced"}}),openModal("advancedGasFee")):(updateTransactionEventFragment({properties:{gas_edit_type:"basic"}}),closeModal(["editGasFee"]),priorityLevel===gas.o7.tenPercentIncreased?updateTransactionToTenPercentIncreasedGasFee():priorityLevel===gas.o7.dAppSuggested?updateTransactionUsingDAPPSuggestedValues():updateTransactionUsingEstimate(priorityLevel))},"aria-label":priorityLevel,autoFocus:priorityLevel===estimateUsed,disabled:estimateGreaterThanGasUse,"data-testid":`edit-gas-fee-item-${priorityLevel}`},react.createElement("span",{className:"edit-gas-item__name"},icon&&react.createElement("span",{className:`edit-gas-item__icon edit-gas-item__icon-${priorityLevel}`},constants_gas.K7[icon]),t(title)),react.createElement("span",{className:`edit-gas-item__time-estimate edit-gas-item__time-estimate-${priorityLevel}`},editGasMode!==gas.G_.swaps&&(minWaitTime?(0,util.Xg)(t,minWaitTime):"--")),react.createElement("span",{className:`edit-gas-item__fee-estimate edit-gas-item__fee-estimate-${priorityLevel}`},hexMaximumTransactionFee?react.createElement("div",{className:"edit-gas-item__maxfee"},react.createElement(loading_heartbeat.Z,{backgroundColor:priorityLevel===estimateUsed?"var(--color-background-alternative)":"var(--color-background-default)",estimateUsed:priorityLevel}),react.createElement(user_preferenced_currency_display.Z,{key:"editGasSubTextFeeAmount",type:common._8,value:hexMaximumTransactionFee})):"--"),react.createElement("span",{className:"edit-gas-item__tooltip","data-testid":"gas-tooltip"},react.createElement(info_tooltip.Z,{contentText:react.createElement(edit_gas_tooltip,{t,priorityLevel,maxFeePerGas,maxPriorityFeePerGas,editGasMode,gasLimit,transaction,estimateGreaterThanGasUse}),position:"top"})))};EditGasItem.propTypes={priorityLevel:prop_types_default().string},EditGasItem.__docgenInfo={description:"",methods:[],displayName:"EditGasItem",props:{priorityLevel:{description:"",type:{name:"string"},required:!1}}};const edit_gas_item=EditGasItem;var i18n=__webpack_require__("./ui/contexts/i18n.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js");const NetworkStatusTooltip=({children,html,title})=>react.createElement(tooltip.Z,{position:"top",html,title},react.createElement(box.ZP,{display:design_system.bA.FLEX,flexDirection:design_system.uM.COLUMN},children));NetworkStatusTooltip.propTypes={children:prop_types_default().node.isRequired,html:prop_types_default().node,title:prop_types_default().string};const BaseFeeTooltip=({children})=>{const t=(0,useI18nContext.C)();return react.createElement(NetworkStatusTooltip,{html:t("networkStatusBaseFeeTooltip",[react.createElement("strong",{key:"base_fee_medium_estimate",className:"network-status__tooltip-label"},t("medium")),react.createElement("strong",{key:"base_fee_high_estimate",className:"network-status__tooltip-label"},t("high"))])},children)};BaseFeeTooltip.propTypes={children:prop_types_default().node.isRequired};const PriorityFeeTooltip=({children})=>{const t=(0,useI18nContext.C)();return react.createElement(NetworkStatusTooltip,{title:t("networkStatusPriorityFeeTooltip")},children)};PriorityFeeTooltip.propTypes={children:prop_types_default().node.isRequired};const NetworkStabilityTooltip=({children,color,tooltipLabel})=>{const t=(0,useI18nContext.C)();return react.createElement(NetworkStatusTooltip,{html:t("networkStatusStabilityFeeTooltip",[react.createElement("strong",{key:"network-status__tooltip",className:"network-status__tooltip-label",style:{color}},t(tooltipLabel))])},children)};NetworkStabilityTooltip.propTypes={children:prop_types_default().node.isRequired,color:prop_types_default().string.isRequired,tooltipLabel:prop_types_default().string.isRequired},BaseFeeTooltip.__docgenInfo={description:"",methods:[],displayName:"BaseFeeTooltip",props:{children:{description:"",type:{name:"node"},required:!0}}},PriorityFeeTooltip.__docgenInfo={description:"",methods:[],displayName:"PriorityFeeTooltip",props:{children:{description:"",type:{name:"node"},required:!0}}},NetworkStabilityTooltip.__docgenInfo={description:"",methods:[],displayName:"NetworkStabilityTooltip",props:{children:{description:"",type:{name:"node"},required:!0},color:{description:"",type:{name:"string"},required:!0},tooltipLabel:{description:"",type:{name:"string"},required:!0}}};const GRADIENT_COLORS=["#037DD6","#1876C8","#2D70BA","#4369AB","#57629E","#6A5D92","#805683","#9A4D71","#B44561","#C54055","#D73A49"],StatusSlider=()=>{const t=(0,useI18nContext.C)(),{gasFeeEstimates}=(0,gasFee.YJ)(),statusInfo=(givenNetworkCongestion=>{const networkCongestion=givenNetworkCongestion??.5,colorIndex=Math.round(10*networkCongestion),color=GRADIENT_COLORS[colorIndex],sliderTickValue=10*colorIndex;return networkCongestion>=gas.JI.busy?{statusLabel:"busy",tooltipLabel:"highLowercase",color,sliderTickValue}:networkCongestion>=gas.JI.stable?{statusLabel:"stable",tooltipLabel:"stableLowercase",color,sliderTickValue}:{statusLabel:"notBusy",tooltipLabel:"lowLowercase",color,sliderTickValue}})(gasFeeEstimates.networkCongestion);return react.createElement(NetworkStabilityTooltip,{color:statusInfo.color,tooltipLabel:statusInfo.tooltipLabel},react.createElement("div",{className:"status-slider"},react.createElement("div",{className:"status-slider__arrow-container"},react.createElement("div",{className:"status-slider__arrow-border",style:{marginLeft:`${statusInfo.sliderTickValue}%`},"data-testid":"status-slider-arrow-border"},react.createElement("div",{className:"status-slider__arrow",style:{borderTopColor:statusInfo.color},"data-testid":"status-slider-arrow"}))),react.createElement("div",{className:"status-slider__line"}),react.createElement("div",{className:"status-slider__label",style:{color:statusInfo.color},"data-testid":"status-slider-label"},t(statusInfo.statusLabel))))};StatusSlider.__docgenInfo={description:"",methods:[],displayName:"StatusSlider"};const status_slider=StatusSlider,NetworkStatistics=()=>{const t=(0,react.useContext)(i18n.OO),{gasFeeEstimates}=(0,gasFee.YJ)(),formattedLatestBaseFee=(0,utils_gas.m5)(null==gasFeeEstimates?void 0:gasFeeEstimates.estimatedBaseFee,{precision:0}),formattedLatestPriorityFeeRange=(0,utils_gas.m5)(null==gasFeeEstimates?void 0:gasFeeEstimates.latestPriorityFeeRange,{precision:[1,0]}),networkCongestion=null==gasFeeEstimates?void 0:gasFeeEstimates.networkCongestion;return react.createElement("div",{className:"network-statistics"},react.createElement(component_library.xv,{color:design_system.d9.textAlternative,fontWeight:design_system.U9.Bold,marginTop:3,marginBottom:3,variant:design_system.rK.bodyXs,as:"h6"},t("networkStatus")),react.createElement("div",{className:"network-statistics__info"},(0,util.Rw)(formattedLatestBaseFee)?null:react.createElement("div",{className:"network-statistics__field","data-testid":"formatted-latest-base-fee"},react.createElement(BaseFeeTooltip,null,react.createElement("span",{className:"network-statistics__field-data"},formattedLatestBaseFee),react.createElement("span",{className:"network-statistics__field-label"},t("baseFee")))),(0,util.Rw)(formattedLatestPriorityFeeRange)?null:react.createElement("div",{className:"network-statistics__field","data-testid":"formatted-latest-priority-fee-range"},react.createElement(PriorityFeeTooltip,null,react.createElement("span",{className:"network-statistics__field-data"},formattedLatestPriorityFeeRange),react.createElement("span",{className:"network-statistics__field-label"},t("priorityFee")))),(0,util.Rw)(networkCongestion)?null:react.createElement("div",{className:"network-statistics__field"},react.createElement(status_slider,null))))};NetworkStatistics.__docgenInfo={description:"",methods:[],displayName:"NetworkStatistics"};const network_statistics=NetworkStatistics,EditGasFeePopover=()=>{const{balanceError,editGasMode}=(0,gasFee.YJ)(),t=(0,useI18nContext.C)(),{closeAllModals,closeModal,currentModal,openModalCount}=(0,transaction_modal.y8)();if("editGasFee"!==currentModal)return null;let popupTitle="editGasFeeModalTitle";return editGasMode===gas.G_.cancel?popupTitle="editCancellationGasFeeModalTitle":editGasMode===gas.G_.speedUp&&(popupTitle="editSpeedUpEditGasFeeModalTitle"),react.createElement(popover.Z,{title:t(popupTitle),onBack:1===openModalCount?void 0:()=>closeModal(["editGasFee"]),onClose:closeAllModals,className:"edit-gas-fee-popover"},react.createElement(react.Fragment,null,react.createElement(app_loading_spinner.Z,null),react.createElement("div",{className:"edit-gas-fee-popover__wrapper"},react.createElement("div",{className:"edit-gas-fee-popover__content"},react.createElement(box.ZP,null,balanceError&&react.createElement(error_message.Z,{errorKey:error_keys.Xr}),react.createElement("div",{className:"edit-gas-fee-popover__content__header"},react.createElement("span",{className:"edit-gas-fee-popover__content__header-option"},t("gasOption")),react.createElement("span",{className:"edit-gas-fee-popover__content__header-time"},editGasMode!==gas.G_.swaps&&t("time")),react.createElement("span",{className:"edit-gas-fee-popover__content__header-max-fee"},t("maxFee"))),(editGasMode===gas.G_.cancel||editGasMode===gas.G_.speedUp)&&react.createElement(edit_gas_item,{priorityLevel:gas.o7.tenPercentIncreased}),editGasMode===gas.G_.modifyInPlace&&react.createElement(edit_gas_item,{priorityLevel:gas.o7.low}),react.createElement(edit_gas_item,{priorityLevel:gas.o7.medium}),react.createElement(edit_gas_item,{priorityLevel:gas.o7.high}),react.createElement("div",{className:"edit-gas-fee-popover__content__separator"}),editGasMode===gas.G_.modifyInPlace&&react.createElement(edit_gas_item,{priorityLevel:gas.o7.dAppSuggested}),react.createElement(edit_gas_item,{priorityLevel:gas.o7.custom})),react.createElement(box.ZP,null,react.createElement(network_statistics,null),react.createElement(component_library.xv,{className:"edit-gas-fee-popover__know-more",align:"center",color:design_system.d9.textAlternative,tag:design_system.rK.bodyMd,variant:design_system.rK.bodySm,as:"h6"},t("learnMoreAboutGas",[react.createElement("a",{key:"learnMoreLink",target:"_blank",rel:"noopener noreferrer",href:zendesk_url.Z.USER_GUIDE_GAS},t("learnMore"))])))))))};EditGasFeePopover.__docgenInfo={description:"",methods:[],displayName:"EditGasFeePopover"};const edit_gas_fee_popover=EditGasFeePopover},"./ui/components/app/edit-gas-popover/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>EditGasPopover});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useGasFeeInputs=__webpack_require__("./ui/hooks/gasFeeInput/useGasFeeInputs.js"),transaction_utils=__webpack_require__("./shared/modules/transaction.utils.js"),gas=__webpack_require__("./shared/constants/gas.ts"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),edit_gas_display=__webpack_require__("./ui/components/app/edit-gas-display/index.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),actions=__webpack_require__("./ui/store/actions.ts"),loading_heartbeat=__webpack_require__("./ui/components/ui/loading-heartbeat/index.js"),useIncrementedGasFees=__webpack_require__("./ui/hooks/useIncrementedGasFees.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),process=__webpack_require__("./node_modules/process/browser.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function EditGasPopover({popoverTitle="",confirmButtonText="",editGasDisplayProps={},transaction,mode,onClose,minimumGasLimit=gas.Kw.SIMPLE}){const t=(0,react.useContext)(i18n.OO),dispatch=(0,es.I0)(),[dappSuggestedGasFeeAcknowledged,setDappSuggestedGasFeeAcknowledged]=(0,react.useState)(!1),minimumGasLimitDec=(0,conversion_utils.Z8)(minimumGasLimit),updatedCustomGasSettings=(0,useIncrementedGasFees.N)(transaction);let updatedTransaction=transaction;mode!==gas.G_.speedUp&&mode!==gas.G_.cancel||(updatedTransaction={...transaction,userFeeLevel:gas.d_,txParams:{...transaction.txParams,...updatedCustomGasSettings}});const{estimatedMinimumNative,gasPrice,setGasPrice,gasLimit,setGasLimit,properGasLimit,estimateToUse,hasGasErrors,gasErrors,onManualChange,balanceError}=(0,useGasFeeInputs.a)(gas.RQ.medium,updatedTransaction,minimumGasLimit,mode),txParamsHaveBeenCustomized=estimateToUse===gas.d_||(0,transaction_utils.EN)(updatedTransaction),closePopover=(0,react.useCallback)((()=>{onClose?onClose():dispatch((0,actions.VGc)())}),[onClose,dispatch]),onSubmit=(0,react.useCallback)((async()=>{updatedTransaction&&mode||closePopover();const newGasSettings={gas:(0,conversion_utils.X0)(gasLimit),gasLimit:(0,conversion_utils.X0)(gasLimit),estimateUsed:estimateToUse,gasPrice:(0,conversion_utils.Kn)(gasPrice)},cleanTransactionParams={...updatedTransaction.txParams},updatedTxMeta={...updatedTransaction,userEditedGasLimit:gasLimit!==Number(transaction.originalGasEstimate),userFeeLevel:estimateToUse||gas.d_,txParams:{...cleanTransactionParams,...newGasSettings}};switch(mode){case gas.G_.cancel:dispatch((0,actions.vGx)(updatedTransaction.id,newGasSettings));break;case gas.G_.speedUp:dispatch((0,actions.$eK)(updatedTransaction.id,newGasSettings));break;case gas.G_.modifyInPlace:newGasSettings.userEditedGasLimit=updatedTxMeta.userEditedGasLimit,newGasSettings.userFeeLevel=updatedTxMeta.userFeeLevel,dispatch((0,actions.Nbs)()),await dispatch((0,actions.ol_)(updatedTxMeta.id,newGasSettings)),dispatch((0,actions.awJ)())}closePopover()}),[updatedTransaction,mode,dispatch,closePopover,gasLimit,gasPrice,transaction.originalGasEstimate,estimateToUse]);let title=t("editGasTitle");popoverTitle?title=popoverTitle:mode===gas.G_.speedUp?title=t("speedUpPopoverTitle"):mode===gas.G_.cancel&&(title=t("cancelPopoverTitle"));const footerButtonText=confirmButtonText||t("save");return react.createElement(popover.Z,{title,onClose:closePopover,className:"edit-gas-popover__wrapper",footer:react.createElement(ui_button.Z,{type:"primary",onClick:onSubmit,disabled:hasGasErrors||balanceError||!txParamsHaveBeenCustomized},footerButtonText)},react.createElement("div",{style:{padding:"0 20px 20px 20px",position:"relative"}},process.env.IN_TEST?null:react.createElement(loading_heartbeat.Z,null),react.createElement(edit_gas_display.Z,_extends({dappSuggestedGasFeeAcknowledged,setDappSuggestedGasFeeAcknowledged,estimatedMinimumNative,gasPrice,setGasPrice,gasLimit,setGasLimit,properGasLimit,mode,transaction:updatedTransaction,onManualChange,minimumGasLimit:minimumGasLimitDec,balanceError,txParamsHaveBeenCustomized,gasErrors},editGasDisplayProps))))}EditGasPopover.propTypes={popoverTitle:prop_types_default().string,editGasDisplayProps:prop_types_default().object,confirmButtonText:prop_types_default().string,onClose:prop_types_default().func,transaction:prop_types_default().object,mode:prop_types_default().oneOf(Object.values(gas.G_)),minimumGasLimit:prop_types_default().string},EditGasPopover.__docgenInfo={description:"",methods:[],displayName:"EditGasPopover",props:{popoverTitle:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},confirmButtonText:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},editGasDisplayProps:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},minimumGasLimit:{defaultValue:{value:"GAS_LIMITS.SIMPLE",computed:!0},description:"",type:{name:"string"},required:!1},onClose:{description:"",type:{name:"func"},required:!1},transaction:{description:"",type:{name:"object"},required:!1},mode:{description:"",type:{name:"enum",computed:!0,value:"Object.values(EditGasModes)"},required:!1}}}},"./ui/components/ui/account-mismatch-warning/account-mismatch-warning.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>AccountMismatchWarning});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__),_tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/index.js"),_icon_info_icon_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/ui/icon/info-icon.component.js"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/hooks/useI18nContext.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/helpers/constants/design-system.ts");function AccountMismatchWarning({address}){const selectedAccount=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_3__.uWD),t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_5__.C)();return selectedAccount.address===address?null:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_tooltip__WEBPACK_IMPORTED_MODULE_2__.Z,{position:"bottom",html:react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,t("notCurrentAccount")),wrapperClassName:"account-mismatch-warning__tooltip-wrapper",containerClassName:"account-mismatch-warning__tooltip-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"account-mismatch-warning__tooltip-container-icon","data-testid":"account-mismatch-warning-tooltip"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_icon_info_icon_component__WEBPACK_IMPORTED_MODULE_4__.Z,{severity:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_6__.zb.Warning})))}AccountMismatchWarning.propTypes={address:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string.isRequired},AccountMismatchWarning.__docgenInfo={description:"",methods:[],displayName:"AccountMismatchWarning",props:{address:{description:"",type:{name:"string"},required:!0}}}},"./ui/components/ui/check-box/check-box.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Km:()=>INDETERMINATE,ZP:()=>__WEBPACK_DEFAULT_EXPORT__,ri:()=>CHECKED,wT:()=>UNCHECKED});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);const CHECKBOX_STATE={CHECKED:"CHECKED",INDETERMINATE:"INDETERMINATE",UNCHECKED:"UNCHECKED"},{CHECKED,INDETERMINATE,UNCHECKED}=CHECKBOX_STATE,CheckBox=({className,disabled,id,onClick,checked,title,dataTestId})=>{"boolean"==typeof checked&&(checked=checked?CHECKBOX_STATE.CHECKED:CHECKBOX_STATE.UNCHECKED);const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{ref.current.indeterminate=checked===CHECKBOX_STATE.INDETERMINATE}),[checked]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{checked:checked===CHECKBOX_STATE.CHECKED,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("check-box",className,{"far fa-square":checked===CHECKBOX_STATE.UNCHECKED,"fa fa-check-square check-box__checked":checked===CHECKBOX_STATE.CHECKED,"fa fa-minus-square check-box__indeterminate":checked===CHECKBOX_STATE.INDETERMINATE}),disabled,id,onClick:onClick?event=>{event.preventDefault(),onClick()}:null,readOnly:!0,ref,title,"data-testid":dataTestId,type:"checkbox"})};CheckBox.propTypes={className:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,id:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,checked:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf([...Object.keys(CHECKBOX_STATE),!0,!1]).isRequired,title:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,dataTestId:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string},CheckBox.defaultProps={className:void 0,disabled:!1,id:void 0},CheckBox.__docgenInfo={description:"",methods:[],displayName:"CheckBox",props:{className:{defaultValue:{value:"undefined",computed:!0},description:"Add custom classname css",type:{name:"string"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"Check if checkbox disabled or not",type:{name:"bool"},required:!1},id:{defaultValue:{value:"undefined",computed:!0},description:"Checkbox ID",type:{name:"string"},required:!1},onClick:{description:"Click handler",type:{name:"func"},required:!1},checked:{description:"Check if the checkbox are checked or not",type:{name:"enum",value:[{value:"...Object.keys(CHECKBOX_STATE)",computed:!0},{value:"true",computed:!1},{value:"false",computed:!1}]},required:!0},title:{description:"Show title",type:{name:"string"},required:!1},dataTestId:{description:"Data test ID for checkbox Component",type:{name:"string"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=CheckBox},"./ui/components/ui/check-box/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Km:()=>_check_box_component__WEBPACK_IMPORTED_MODULE_0__.Km,ZP:()=>_check_box_component__WEBPACK_IMPORTED_MODULE_0__.ZP,ri:()=>_check_box_component__WEBPACK_IMPORTED_MODULE_0__.ri,wT:()=>_check_box_component__WEBPACK_IMPORTED_MODULE_0__.wT});var _check_box_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/check-box/check-box.component.js")},"./ui/components/ui/icon/info-icon.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>InfoIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts");function InfoIcon({severity}){const className=classnames__WEBPACK_IMPORTED_MODULE_1___default()("info-icon",{"info-icon--success":severity===_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.t3.SUCCESS,"info-icon--warning":severity===_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.t3.WARNING,"info-icon--danger":severity===_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.t3.DANGER,"info-icon--info":severity===_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.t3.INFO});return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{className,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M7.2 5.6H8.8V4H7.2V5.6ZM8 14.4C4.472 14.4 1.6 11.528 1.6 8C1.6 4.472 4.472 1.6 8 1.6C11.528 1.6 14.4 4.472 14.4 8C14.4 11.528 11.528 14.4 8 14.4ZM8 0C6.94943 0 5.90914 0.206926 4.93853 0.608964C3.96793 1.011 3.08601 1.60028 2.34315 2.34315C0.842855 3.84344 0 5.87827 0 8C0 10.1217 0.842855 12.1566 2.34315 13.6569C3.08601 14.3997 3.96793 14.989 4.93853 15.391C5.90914 15.7931 6.94943 16 8 16C10.1217 16 12.1566 15.1571 13.6569 13.6569C15.1571 12.1566 16 10.1217 16 8C16 6.94943 15.7931 5.90914 15.391 4.93853C14.989 3.96793 14.3997 3.08601 13.6569 2.34315C12.914 1.60028 12.0321 1.011 11.0615 0.608964C10.0909 0.206926 9.05058 0 8 0ZM7.2 12H8.8V7.2H7.2V12Z"}))}InfoIcon.propTypes={severity:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOf(Object.values(_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.t3))},InfoIcon.__docgenInfo={description:"@deprecated This has been deprecated in favor of the `<Icon />` component in ./ui/components/component-library/icon/icon.js\nSee storybook documentation for Icon here https://metamask.github.io/metamask-storybook/?path=/docs/components-componentlibrary-icon--default-story#icon",methods:[],displayName:"InfoIcon",props:{severity:{description:"Severity can be 1 of 4 states:'danger', 'warning', 'info' or 'success'",type:{name:"enum",computed:!0,value:"Object.values(SEVERITIES)"},required:!1}}}},"./ui/components/ui/sender-to-recipient/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>SenderToRecipient});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),copy_to_clipboard=__webpack_require__("./node_modules/copy-to-clipboard/index.js"),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),account_mismatch_warning_component=__webpack_require__("./ui/components/ui/account-mismatch-warning/account-mismatch-warning.component.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),nickname_popovers=__webpack_require__("./ui/components/app/modals/nickname-popovers/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),sender_to_recipient_constants=__webpack_require__("./ui/components/ui/sender-to-recipient/sender-to-recipient.constants.js");const variantHash={[sender_to_recipient_constants.Sz]:"sender-to-recipient--default",[sender_to_recipient_constants.Wz]:"sender-to-recipient--cards",[sender_to_recipient_constants.lN]:"sender-to-recipient--flat"};function SenderAddress({addressOnly,checksummedSenderAddress,senderName,onSenderClick,senderAddress,warnUserOnAccountMismatch}){const t=(0,useI18nContext.C)(),[addressCopied,setAddressCopied]=(0,react.useState)(!1);let tooltipHtml=react.createElement("p",null,t("copiedExclamation"));return addressCopied||(tooltipHtml=addressOnly?react.createElement("p",null,t("copyAddress")):react.createElement("p",null,(0,util.$Q)(checksummedSenderAddress),react.createElement("br",null),t("copyAddress"))),react.createElement("div",{className:classnames_default()("sender-to-recipient__party sender-to-recipient__party--sender"),onClick:()=>{setAddressCopied(!0),copy_to_clipboard_default()(checksummedSenderAddress),onSenderClick&&onSenderClick()}},react.createElement("div",{className:"sender-to-recipient__sender-icon"},react.createElement(identicon.Z,{address:(0,hexstring_utils.QG)(senderAddress),diameter:24})),react.createElement(tooltip.Z,{position:"bottom",html:tooltipHtml,wrapperClassName:"sender-to-recipient__tooltip-wrapper",containerClassName:"sender-to-recipient__tooltip-container",onHidden:()=>setAddressCopied(!1)},react.createElement("div",{className:"sender-to-recipient__name"},addressOnly?react.createElement("span",null,`${senderName||(0,util.$Q)(checksummedSenderAddress)}`):senderName)),warnUserOnAccountMismatch&&react.createElement(account_mismatch_warning_component.Z,{address:senderAddress}))}function RecipientWithAddress({checksummedRecipientAddress,onRecipientClick,addressOnly,recipientNickname,recipientEns,recipientName,recipientMetadataName,recipientIsOwnedAccount}){const t=(0,useI18nContext.C)(),[showNicknamePopovers,setShowNicknamePopovers]=(0,react.useState)(!1),[addressCopied,setAddressCopied]=(0,react.useState)(!1);let tooltipHtml=react.createElement("p",null,t("copiedExclamation"));return addressCopied||(tooltipHtml=addressOnly?react.createElement("p",null,t("copyAddress")):react.createElement("p",null,(0,util.$Q)(checksummedRecipientAddress),react.createElement("br",null),t("copyAddress"))),react.createElement(react.Fragment,null,react.createElement("div",{className:"sender-to-recipient__party sender-to-recipient__party--recipient sender-to-recipient__party--recipient-with-address",onClick:()=>{recipientIsOwnedAccount?(setAddressCopied(!0),copy_to_clipboard_default()(checksummedRecipientAddress)):(setShowNicknamePopovers(!0),onRecipientClick&&onRecipientClick())}},react.createElement("div",{className:"sender-to-recipient__sender-icon"},react.createElement(identicon.Z,{address:checksummedRecipientAddress,diameter:24})),react.createElement(tooltip.Z,{position:"bottom",disabled:!recipientName,html:tooltipHtml,wrapperClassName:"sender-to-recipient__tooltip-wrapper",containerClassName:"sender-to-recipient__tooltip-container",onHidden:()=>setAddressCopied(!1)},react.createElement("div",{className:"sender-to-recipient__name","data-testid":"sender-to-recipient__name"},addressOnly?recipientName||recipientNickname||recipientMetadataName||recipientEns||(0,util.$Q)(checksummedRecipientAddress):recipientName||recipientNickname||recipientMetadataName||recipientEns||(0,util.$Q)(checksummedRecipientAddress)||t("newContract")))),showNicknamePopovers?react.createElement(nickname_popovers.Z,{onClose:()=>setShowNicknamePopovers(!1),address:checksummedRecipientAddress}):null)}function Arrow({variant}){return variant===sender_to_recipient_constants.Sz?react.createElement("div",{className:"sender-to-recipient__arrow-container"},react.createElement("div",{className:"sender-to-recipient__arrow-circle"},react.createElement("i",{className:"fa fa-arrow-right sender-to-recipient__arrow-circle__icon"}))):react.createElement("div",{className:"sender-to-recipient__arrow-container"},react.createElement(component_library.JO,{name:component_library.uH.ArrowRight}))}function SenderToRecipient({senderAddress,addressOnly,senderName,recipientNickname,recipientName,recipientMetadataName,recipientEns,onRecipientClick,onSenderClick,recipientAddress,variant,warnUserOnAccountMismatch,recipientIsOwnedAccount}){const t=(0,useI18nContext.C)(),checksummedSenderAddress=(0,hexstring_utils.QG)(senderAddress),checksummedRecipientAddress=(0,hexstring_utils.QG)(recipientAddress);return react.createElement("div",{className:classnames_default()("sender-to-recipient",variantHash[variant]),"data-testid":"sender-to-recipient"},react.createElement(SenderAddress,{checksummedSenderAddress,addressOnly,senderName,onSenderClick,senderAddress,warnUserOnAccountMismatch}),react.createElement(Arrow,{variant}),recipientAddress?react.createElement(RecipientWithAddress,{checksummedRecipientAddress,onRecipientClick,addressOnly,recipientNickname,recipientEns,recipientName,recipientMetadataName,recipientIsOwnedAccount}):react.createElement("div",{className:"sender-to-recipient__party sender-to-recipient__party--recipient"},react.createElement("i",{className:"fa fa-file-text-o"}),react.createElement("div",{className:"sender-to-recipient__name"},t("newContract"))))}SenderAddress.propTypes={senderName:prop_types_default().string,checksummedSenderAddress:prop_types_default().string,addressOnly:prop_types_default().bool,senderAddress:prop_types_default().string,onSenderClick:prop_types_default().func,warnUserOnAccountMismatch:prop_types_default().bool},RecipientWithAddress.propTypes={checksummedRecipientAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientMetadataName:prop_types_default().string,recipientEns:prop_types_default().string,recipientNickname:prop_types_default().string,addressOnly:prop_types_default().bool,onRecipientClick:prop_types_default().func,recipientIsOwnedAccount:prop_types_default().bool},Arrow.propTypes={variant:prop_types_default().oneOf([sender_to_recipient_constants.Sz,sender_to_recipient_constants.Wz,sender_to_recipient_constants.lN])},SenderToRecipient.defaultProps={variant:sender_to_recipient_constants.Sz,warnUserOnAccountMismatch:!0},SenderToRecipient.propTypes={senderName:prop_types_default().string,senderAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientMetadataName:prop_types_default().string,recipientEns:prop_types_default().string,recipientAddress:prop_types_default().string,recipientNickname:prop_types_default().string,variant:prop_types_default().oneOf([sender_to_recipient_constants.Sz,sender_to_recipient_constants.Wz,sender_to_recipient_constants.lN]),addressOnly:prop_types_default().bool,onRecipientClick:prop_types_default().func,onSenderClick:prop_types_default().func,warnUserOnAccountMismatch:prop_types_default().bool,recipientIsOwnedAccount:prop_types_default().bool},RecipientWithAddress.__docgenInfo={description:"",methods:[],displayName:"RecipientWithAddress",props:{checksummedRecipientAddress:{description:"",type:{name:"string"},required:!1},recipientName:{description:"",type:{name:"string"},required:!1},recipientMetadataName:{description:"",type:{name:"string"},required:!1},recipientEns:{description:"",type:{name:"string"},required:!1},recipientNickname:{description:"",type:{name:"string"},required:!1},addressOnly:{description:"",type:{name:"bool"},required:!1},onRecipientClick:{description:"",type:{name:"func"},required:!1},recipientIsOwnedAccount:{description:"",type:{name:"bool"},required:!1}}},SenderToRecipient.__docgenInfo={description:"",methods:[],displayName:"SenderToRecipient",props:{variant:{defaultValue:{value:"DEFAULT_VARIANT",computed:!0},description:"",type:{name:"enum",value:[{value:"import {\n  DEFAULT_VARIANT,\n  CARDS_VARIANT,\n  FLAT_VARIANT,\n} from './sender-to-recipient.constants';",computed:!0},{value:"import {\n  DEFAULT_VARIANT,\n  CARDS_VARIANT,\n  FLAT_VARIANT,\n} from './sender-to-recipient.constants';",computed:!0},{value:"import {\n  DEFAULT_VARIANT,\n  CARDS_VARIANT,\n  FLAT_VARIANT,\n} from './sender-to-recipient.constants';",computed:!0}]},required:!1},warnUserOnAccountMismatch:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},senderName:{description:"",type:{name:"string"},required:!1},senderAddress:{description:"",type:{name:"string"},required:!1},recipientName:{description:"",type:{name:"string"},required:!1},recipientMetadataName:{description:"",type:{name:"string"},required:!1},recipientEns:{description:"",type:{name:"string"},required:!1},recipientAddress:{description:"",type:{name:"string"},required:!1},recipientNickname:{description:"",type:{name:"string"},required:!1},addressOnly:{description:"",type:{name:"bool"},required:!1},onRecipientClick:{description:"",type:{name:"func"},required:!1},onSenderClick:{description:"",type:{name:"func"},required:!1},recipientIsOwnedAccount:{description:"",type:{name:"bool"},required:!1}}}},"./ui/components/ui/sender-to-recipient/sender-to-recipient.constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Sz:()=>DEFAULT_VARIANT,Wz:()=>CARDS_VARIANT,lN:()=>FLAT_VARIANT});const DEFAULT_VARIANT="DEFAULT_VARIANT",CARDS_VARIANT="CARDS_VARIANT",FLAT_VARIANT="FLAT_VARIANT"},"./ui/contexts/transaction-modal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_O:()=>TransactionModalContext,rj:()=>TransactionModalContextProvider,y8:()=>useTransactionModalContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);const TransactionModalContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}),TransactionModalContextProvider=({children})=>{const[openModals,setOpenModals]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(TransactionModalContext.Provider,{value:{closeModal:modalNames=>{if(openModals<0)return;const modals=[...openModals];modalNames.forEach((modal=>{const index=openModals.indexOf(modal);modals.splice(index,1)})),setOpenModals(modals)},closeAllModals:()=>{setOpenModals([])},currentModal:openModals[openModals.length-1],openModal:modalName=>{if(openModals.includes(modalName))return;const modals=[...openModals];modals.push(modalName),setOpenModals(modals)},openModalCount:openModals.length}},children)};function useTransactionModalContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(TransactionModalContext)}TransactionModalContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node.isRequired},TransactionModalContextProvider.__docgenInfo={description:"",methods:[],displayName:"TransactionModalContextProvider",props:{children:{description:"",type:{name:"node"},required:!0}}}},"./ui/hooks/useIncrementedGasFees.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>useIncrementedGasFees});var bignumber_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bignumber_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/modules/conversion.utils.ts"),_shared_modules_transaction_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/transaction.utils.js"),_helpers_utils_gas__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/utils/gas.js"),_useGasFeeEstimates__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/hooks/useGasFeeEstimates.js");function getHighestIncrementedFee(originalFee,currentEstimate){const buffedOriginalHexWei=(0,_helpers_utils_gas__WEBPACK_IMPORTED_MODULE_4__.Vc)(originalFee),currentEstimateHexWei=(0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_2__.Kn)(currentEstimate);return new(bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(buffedOriginalHexWei,16).greaterThan(new(bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(currentEstimateHexWei,16))?buffedOriginalHexWei:currentEstimateHexWei}function useIncrementedGasFees(transaction){const{gasFeeEstimates={}}=(0,_useGasFeeEstimates__WEBPACK_IMPORTED_MODULE_5__.a)();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>{var _transaction$txParams,_transaction$txParams2,_gasFeeEstimates$medi,_gasFeeEstimates$medi2;const temporaryGasSettings={gasLimit:null===(_transaction$txParams=transaction.txParams)||void 0===_transaction$txParams?void 0:_transaction$txParams.gas,gas:null===(_transaction$txParams2=transaction.txParams)||void 0===_transaction$txParams2?void 0:_transaction$txParams2.gas},suggestedMaxFeePerGas=(null==gasFeeEstimates||null===(_gasFeeEstimates$medi=gasFeeEstimates.medium)||void 0===_gasFeeEstimates$medi?void 0:_gasFeeEstimates$medi.suggestedMaxFeePerGas)??"0",suggestedMaxPriorityFeePerGas=(null==gasFeeEstimates||null===(_gasFeeEstimates$medi2=gasFeeEstimates.medium)||void 0===_gasFeeEstimates$medi2?void 0:_gasFeeEstimates$medi2.suggestedMaxPriorityFeePerGas)??"0";if((0,_shared_modules_transaction_utils__WEBPACK_IMPORTED_MODULE_3__.K3)(transaction)){var _transaction$txParams3,_transaction$txParams4;const transactionMaxFeePerGas=null===(_transaction$txParams3=transaction.txParams)||void 0===_transaction$txParams3?void 0:_transaction$txParams3.maxFeePerGas,transactionMaxPriorityFeePerGas=null===(_transaction$txParams4=transaction.txParams)||void 0===_transaction$txParams4?void 0:_transaction$txParams4.maxPriorityFeePerGas;temporaryGasSettings.maxFeePerGas=void 0===transactionMaxFeePerGas||transactionMaxFeePerGas.startsWith("-")?"0x0":getHighestIncrementedFee(transactionMaxFeePerGas,suggestedMaxFeePerGas),temporaryGasSettings.maxPriorityFeePerGas=void 0===transactionMaxPriorityFeePerGas||transactionMaxPriorityFeePerGas.startsWith("-")?"0x0":getHighestIncrementedFee(transactionMaxPriorityFeePerGas,suggestedMaxPriorityFeePerGas)}else{var _transaction$txParams5;const transactionGasPrice=null===(_transaction$txParams5=transaction.txParams)||void 0===_transaction$txParams5?void 0:_transaction$txParams5.gasPrice;temporaryGasSettings.gasPrice=void 0===transactionGasPrice||transactionGasPrice.startsWith("-")?"0x0":getHighestIncrementedFee(transactionGasPrice,suggestedMaxFeePerGas)}return temporaryGasSettings}),[transaction,gasFeeEstimates])}},"./ui/hooks/useTransactionEventFragment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useTransactionEventFragment});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/contexts/gasFee.js"),_store_actions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/store/actions.ts"),_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/selectors/index.js"),_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/constants/transaction.ts");const useTransactionEventFragment=()=>{const{transaction}=(0,_contexts_gasFee__WEBPACK_IMPORTED_MODULE_2__.YJ)(),fragment=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)((state=>(0,_selectors__WEBPACK_IMPORTED_MODULE_4__.kmh)(state,{fragmentOptions:{},existingId:`transaction-added-${null==transaction?void 0:transaction.id}`})));return{updateTransactionEventFragment:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((async params=>{transaction&&transaction.id&&(fragment||await(0,_store_actions__WEBPACK_IMPORTED_MODULE_3__.j9l)(transaction.id,_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.d0.approved),(0,_store_actions__WEBPACK_IMPORTED_MODULE_3__.XCZ)(`transaction-added-${transaction.id}`,params))}),[fragment,transaction])}}},"./ui/selectors/institutional/selectors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>getCustodianIconForAddress,GZ:()=>getIsNoteToTraderSupported,Hg:()=>getMMIConfiguration,L8:()=>getTransactionStatusMap,LL:()=>getMmiPortfolioEnabled,kl:()=>getMmiPortfolioUrl,q9:()=>getCustodyAccountDetails,rE:()=>getMMIAddressFromModalOrAddress,vG:()=>getInteractiveReplacementToken,xL:()=>getIsCustodianSupportedChain});var ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ethereumjs-util/dist.browser/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/selectors/selectors.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/conversion.utils.ts");function getTransactionStatusMap(state){return state.metamask.custodyStatusMaps}function getCustodyAccountDetails(state){return state.metamask.custodyAccountDetails}function getMmiPortfolioEnabled(state){var _state$metamask$mmiCo,_state$metamask$mmiCo2;return null===(_state$metamask$mmiCo=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo||null===(_state$metamask$mmiCo2=_state$metamask$mmiCo.portfolio)||void 0===_state$metamask$mmiCo2?void 0:_state$metamask$mmiCo2.enabled}function getMmiPortfolioUrl(state){var _state$metamask$mmiCo3,_state$metamask$mmiCo4;return null===(_state$metamask$mmiCo3=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo3||null===(_state$metamask$mmiCo4=_state$metamask$mmiCo3.portfolio)||void 0===_state$metamask$mmiCo4?void 0:_state$metamask$mmiCo4.url}function getCustodianIconForAddress(state,address){var _state$metamask$custo;let custodianIcon;const checksummedAddress=address&&(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(address);if(checksummedAddress&&null!==(_state$metamask$custo=state.metamask.custodyAccountDetails)&&void 0!==_state$metamask$custo&&_state$metamask$custo[checksummedAddress]){var _state$metamask$mmiCo6,_state$metamask$mmiCo7,_state$metamask$mmiCo8;const{custodianName}=state.metamask.custodyAccountDetails[checksummedAddress];custodianIcon=null===(_state$metamask$mmiCo6=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo6||null===(_state$metamask$mmiCo7=_state$metamask$mmiCo6.custodians)||void 0===_state$metamask$mmiCo7||null===(_state$metamask$mmiCo8=_state$metamask$mmiCo7.find((custodian=>custodian.name===custodianName)))||void 0===_state$metamask$mmiCo8?void 0:_state$metamask$mmiCo8.iconUrl}return custodianIcon}function getIsCustodianSupportedChain(state){const selectedIdentity=(0,_selectors__WEBPACK_IMPORTED_MODULE_1__.Sv)(state),accountType=(0,_selectors__WEBPACK_IMPORTED_MODULE_1__.lx)(state),providerConfig=(0,_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__.Vu)(state),supportedChains="custody"===accountType?function getCustodyAccountSupportedChains(state,address){return state.metamask.custodianSupportedChains?state.metamask.custodianSupportedChains[(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(address)]:[]}(state,selectedIdentity.address):null;return null==supportedChains||!supportedChains.supportedChains||supportedChains.supportedChains.includes((0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__.Z8)(providerConfig.chainId))}function getMMIAddressFromModalOrAddress(state){return state.appState.modal.modalState.props.address||state.metamask.selectedAddress}function getMMIConfiguration(state){return state.metamask.mmiConfiguration||[]}function getInteractiveReplacementToken(state){return state.metamask.interactiveReplacementToken||{}}function getIsNoteToTraderSupported(state,fromChecksumHexAddress){var _state$metamask$custo2;let isNoteToTraderSupported=!1;if(null!==(_state$metamask$custo2=state.metamask.custodyAccountDetails)&&void 0!==_state$metamask$custo2&&_state$metamask$custo2[fromChecksumHexAddress]){var _state$metamask$mmiCo9,_state$metamask$mmiCo10,_state$metamask$mmiCo11;const{custodianName}=state.metamask.custodyAccountDetails[fromChecksumHexAddress];isNoteToTraderSupported=null===(_state$metamask$mmiCo9=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo9||null===(_state$metamask$mmiCo10=_state$metamask$mmiCo9.custodians)||void 0===_state$metamask$mmiCo10||null===(_state$metamask$mmiCo11=_state$metamask$mmiCo10.find((custodian=>custodian.name===custodianName)))||void 0===_state$metamask$mmiCo11?void 0:_state$metamask$mmiCo11.isNoteToTraderSupported}return isNoteToTraderSupported}},"./ui/store/institutional/institution-background.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I6:()=>mmiActionsFactory,Lx:()=>setTypedMessageInProgress,Y0:()=>showInteractiveReplacementTokenBanner});var loglevel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/loglevel/lib/loglevel.js"),loglevel__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__),_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/store/actions.ts"),_action_queue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/store/action-queue/index.ts"),_shared_modules_error__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/error.ts");function showInteractiveReplacementTokenBanner({url,oldRefreshToken}){return async dispatch=>{try{await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)("showInteractiveReplacementTokenBanner",[url,oldRefreshToken])}catch(err){if(err)throw dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(err.message)),new Error(err.message)}}}function setTypedMessageInProgress(msgId){return async dispatch=>{dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.Nbs)());try{await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)("setTypedMessageInProgress",[msgId])}catch(error){loglevel__WEBPACK_IMPORTED_MODULE_0___default().error(error),dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(error.message))}finally{await(0,_actions__WEBPACK_IMPORTED_MODULE_1__.Skm)(dispatch),dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.awJ)())}}}function mmiActionsFactory(){function createAsyncAction(name,params,useForceUpdateMetamaskState,loadingText){return loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(`background.${name}`),async dispatch=>{let result;loadingText&&dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.Nbs)(loadingText));try{result=await(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.lf)(name,[...params])}catch(error){throw dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.eaQ)(error)),(0,_shared_modules_error__WEBPACK_IMPORTED_MODULE_3__.M)(error)?new Error(error.message):error}return loadingText&&dispatch((0,_actions__WEBPACK_IMPORTED_MODULE_1__.awJ)()),useForceUpdateMetamaskState&&await(0,_actions__WEBPACK_IMPORTED_MODULE_1__.Skm)(dispatch),result}}function createAction(name,payload){return new Promise(((resolve,reject)=>{(0,_action_queue__WEBPACK_IMPORTED_MODULE_2__.BW)(name,[payload],(error=>{error?reject(error):resolve()}))}))}return{connectCustodyAddresses:(custodianType,custodianName,newAccounts)=>createAsyncAction("connectCustodyAddresses",[custodianType,custodianName,newAccounts],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Looking for your custodian account..."),getCustodianAccounts:(token,apiUrl,custody,getNonImportedAccounts)=>createAsyncAction("getCustodianAccounts",[token,apiUrl,custody,getNonImportedAccounts],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Getting custodian accounts..."),getCustodianAccountsByAddress:(jwt,apiUrl,address,custody)=>createAsyncAction("getCustodianAccountsByAddress",[jwt,apiUrl,address,custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm,"Getting custodian accounts..."),getCustodianTransactionDeepLink:(address,txId)=>createAsyncAction("getCustodianTransactionDeepLink",[address,txId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianConfirmDeepLink:txId=>createAsyncAction("getCustodianConfirmDeepLink",[txId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianSignMessageDeepLink:(from,custodyTxId)=>createAsyncAction("getCustodianSignMessageDeepLink",[from,custodyTxId],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianToken:custody=>createAsyncAction("getCustodianToken",[custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),getCustodianJWTList:custody=>createAsyncAction("getCustodianJWTList",[custody],_actions__WEBPACK_IMPORTED_MODULE_1__.Skm),setWaitForConfirmDeepLinkDialog:waitForConfirmDeepLinkDialog=>createAction("setWaitForConfirmDeepLinkDialog",waitForConfirmDeepLinkDialog),setComplianceAuthData:(clientId,projectId)=>createAsyncAction("setComplianceAuthData",[{clientId,projectId}]),deleteComplianceAuthData:()=>createAsyncAction("deleteComplianceAuthData",[]),generateComplianceReport:address=>createAction("generateComplianceReport",address),getComplianceHistoricalReportsByAddress:(address,projectId)=>createAsyncAction("getComplianceHistoricalReportsByAddress",[address,projectId]),syncReportsInProgress:(address,historicalReports)=>createAction("syncReportsInProgress",{address,historicalReports}),removeConnectInstitutionalFeature:(origin,projectId)=>createAction("removeConnectInstitutionalFeature",{origin,projectId}),removeAddTokenConnectRequest:({origin,apiUrl,token})=>createAction("removeAddTokenConnectRequest",{origin,apiUrl,token}),setCustodianConnectRequest:({token,apiUrl,custodianType,custodianName})=>createAsyncAction("setCustodianConnectRequest",[{token,apiUrl,custodianType,custodianName}]),getCustodianConnectRequest:()=>createAsyncAction("getCustodianConnectRequest",[]),getMmiConfiguration:()=>createAsyncAction("getMmiConfiguration",[]),getAllCustodianAccountsWithToken:(custodyType,token)=>createAsyncAction("getAllCustodianAccountsWithToken",[custodyType,token]),setCustodianNewRefreshToken:(address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl)=>createAsyncAction("setCustodianNewRefreshToken",[address,oldAuthDetails,oldApiUrl,newAuthDetails,newApiUrl])}}}}]);