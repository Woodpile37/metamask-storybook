"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[490],{"./ui/components/multichain/global-menu/global-menu.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory$paramet,_DefaultStory$paramet2,_DefaultStory$paramet3,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/multichain/global-menu/index.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Multichain/GlobalMenu",component:___WEBPACK_IMPORTED_MODULE_1__.A,argTypes:{closeMenu:{action:"closeMenu"},anchorElement:{control:"func"}},args:{closeMenu:()=>console.log("Closing menu!"),anchorElement:null}},DefaultStory=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_1__.A,args);DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...null===(_DefaultStory$paramet=DefaultStory.parameters)||void 0===_DefaultStory$paramet?void 0:_DefaultStory$paramet.docs,source:{originalSource:"args => <GlobalMenu {...args} />",...null===(_DefaultStory$paramet2=DefaultStory.parameters)||void 0===_DefaultStory$paramet2||null===(_DefaultStory$paramet3=_DefaultStory$paramet2.docs)||void 0===_DefaultStory$paramet3?void 0:_DefaultStory$paramet3.source}}};const __namedExportsOrder=["DefaultStory"];DefaultStory.__docgenInfo={description:"",methods:[],displayName:"DefaultStory"}},"./shared/lib/ui-utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QL:()=>COINGECKO_LINK,TH:()=>ETHERSCAN_PRIVACY_LINK,YM:()=>CONSENSYS_PRIVACY_LINK,cK:()=>SUPPORT_LINK,jJ:()=>AUTO_DETECT_TOKEN_LEARN_MORE_LINK,jb:()=>PRIVACY_POLICY_LINK,oq:()=>CRYPTOCOMPARE_LINK});const SUPPORT_LINK=__webpack_require__("./node_modules/process/browser.js").env.SUPPORT_LINK,COINGECKO_LINK="https://www.coingecko.com/",CRYPTOCOMPARE_LINK="https://www.cryptocompare.com/",PRIVACY_POLICY_LINK="https://consensys.net/privacy-policy/",ETHERSCAN_PRIVACY_LINK="https://etherscan.io/privacyPolicy",CONSENSYS_PRIVACY_LINK="https://consensys.net/privacy-policy/",AUTO_DETECT_TOKEN_LEARN_MORE_LINK="https://consensys.net/privacy-policy/"},"./ui/components/multichain/global-menu/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>GlobalMenu});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),actions=__webpack_require__("./ui/store/actions.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),component_library=__webpack_require__("./ui/components/component-library/index.js"),menu=__webpack_require__("./ui/components/ui/menu/index.js"),util=__webpack_require__("./app/scripts/lib/util.ts"),app=__webpack_require__("./shared/constants/app.ts"),ui_utils=__webpack_require__("./shared/lib/ui-utils.js"),common=__webpack_require__("./ui/helpers/constants/common.ts"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts"),process=__webpack_require__("./node_modules/process/browser.js");var selectors=__webpack_require__("./ui/selectors/institutional/selectors.js"),ui_selectors=__webpack_require__("./ui/selectors/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts");const GlobalMenu=({closeMenu,anchorElement})=>{const t=(0,useI18nContext.C)(),dispatch=(0,es.I0)(),trackEvent=(0,react.useContext)(metametrics.Wd),history=(0,react_router.k6)(),metaMetricsId=(0,es.v9)(ui_selectors.AQy),hasUnapprovedTransactions=(0,es.v9)((state=>Object.keys(state.metamask.unapprovedTxs).length>0)),mmiPortfolioUrl=(0,es.v9)(selectors.kl),mmiPortfolioEnabled=(0,es.v9)(selectors.LL),unreadNotificationsCount=(0,es.v9)(ui_selectors.rj0);let supportText=t("support"),supportLink=ui_utils.cK;return supportText=t("needHelpSubmitTicket"),supportLink=common.XZ,react.createElement(menu.v,{anchorElement,onHide:closeMenu},react.createElement(menu.s,{iconName:component_library.uH.Connect,disabled:hasUnapprovedTransactions,onClick:()=>{history.push(routes.v0),trackEvent({event:constants_metametrics.AW.NavConnectedSitesOpened,category:constants_metametrics.ci.Navigation,properties:{location:"Global Menu"}}),closeMenu()},"data-testid":"global-menu-connected-sites"},t("connectedSites")),mmiPortfolioEnabled&&react.createElement(menu.s,{iconName:component_library.uH.Diagram,onClick:()=>{trackEvent({category:constants_metametrics.ci.Navigation,event:constants_metametrics.AW.UserClickedPortfolioButton}),window.open(mmiPortfolioUrl,"_blank"),closeMenu()},"data-testid":"global-menu-mmi-portfolio"},t("portfolioDashboard")),react.createElement(menu.s,{iconName:component_library.uH.Diagram,onClick:()=>{const portfolioUrl=function getPortfolioUrl(endpoint="",metamaskEntry="",metaMetricsId=""){return`${process.env.PORTFOLIO_URL||""}/${endpoint}?metamaskEntry=${metamaskEntry}&metametricsId=${metaMetricsId}`}("","ext",metaMetricsId);__webpack_require__.g.platform.openTab({url:portfolioUrl}),trackEvent({category:constants_metametrics.ci.Home,event:constants_metametrics.AW.PortfolioLinkClicked,properties:{url:portfolioUrl,location:"Global Menu"}},{contextPropsIntoEventProperties:[constants_metametrics.SH.PageTitle]}),closeMenu()},"data-testid":"global-menu-portfolio"},t("portfolioView")),(0,util.kD)()===app.BK?null:react.createElement(menu.s,{iconName:component_library.uH.Expand,onClick:()=>{__webpack_require__.g.platform.openExtensionInBrowser(),trackEvent({event:constants_metametrics.AW.AppWindowExpanded,category:constants_metametrics.ci.Navigation,properties:{location:"Global Menu"}}),closeMenu()},"data-testid":"global-menu-expand"},t("expandView")),react.createElement(react.Fragment,null,react.createElement(menu.s,{iconName:component_library.uH.Notification,onClick:()=>{closeMenu(),history.push(routes.F3)}},react.createElement(component_library.xv,{as:"span"},t("notifications")),unreadNotificationsCount>0&&react.createElement(component_library.xv,{as:"span",display:design_system.sS.InlineBlock,justifyContent:design_system.E0.center,alignItems:design_system.g1.center,backgroundColor:design_system.lP.primaryDefault,color:design_system.d9.primaryInverse,padding:[0,1,0,1],variant:design_system.rK.bodyXs,textAlign:design_system.PH.Center,"data-testid":"global-menu-notification-count",style:{borderRadius:"16px",minWidth:"24px"},marginInlineStart:2},unreadNotificationsCount>99?"99+":unreadNotificationsCount))),react.createElement(menu.s,{iconName:component_library.uH.MessageQuestion,onClick:()=>{__webpack_require__.g.platform.openTab({url:supportLink}),trackEvent({category:constants_metametrics.ci.Home,event:constants_metametrics.AW.SupportLinkClicked,properties:{url:supportLink,location:"Global Menu"}},{contextPropsIntoEventProperties:[constants_metametrics.SH.PageTitle]}),closeMenu()},"data-testid":"global-menu-support"},supportText),react.createElement(menu.s,{iconName:component_library.uH.Setting,disabled:hasUnapprovedTransactions,onClick:()=>{history.push(routes.VS),trackEvent({category:constants_metametrics.ci.Navigation,event:constants_metametrics.AW.NavSettingsOpened,properties:{location:"Global Menu"}}),closeMenu()},"data-testid":"global-menu-settings"},t("settings")),react.createElement(menu.s,{iconName:component_library.uH.Lock,onClick:()=>{dispatch((0,actions.e23)()),history.push(routes.QO),trackEvent({category:constants_metametrics.ci.Navigation,event:constants_metametrics.AW.AppLocked,properties:{location:"Global Menu"}}),closeMenu()},"data-testid":"global-menu-lock"},t("lockMetaMask")))};GlobalMenu.propTypes={anchorElement:prop_types_default().instanceOf(window.Element),closeMenu:prop_types_default().func.isRequired},GlobalMenu.__docgenInfo={description:"",methods:[],displayName:"GlobalMenu",props:{anchorElement:{description:"The element that the menu should display next to",type:{name:"instanceOf",value:"window.Element"},required:!1},closeMenu:{description:"Function that closes this menu",type:{name:"func"},required:!0}}}},"./ui/components/ui/menu/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>menu,s:()=>menu_item});var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),usePopper=__webpack_require__("./node_modules/react-popper/lib/esm/usePopper.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const Menu=({anchorElement,children,className,"data-testid":dataTestId,onHide,popperOptions})=>{const[popperElement,setPopperElement]=(0,react.useState)(null),popoverContainerElement=(0,react.useRef)(document.getElementById("popover-content")),{attributes,styles}=(0,usePopper.D)(anchorElement,popperElement,popperOptions);return(0,react_dom.createPortal)(react.createElement(react.Fragment,null,react.createElement("div",{className:"menu__background","data-testid":dataTestId,onClick:onHide}),react.createElement("div",_extends({className:classnames_default()("menu__container",className),"data-testid":className,ref:setPopperElement,style:styles.popper},attributes.popper),children)),popoverContainerElement.current)};Menu.propTypes={anchorElement:prop_types_default().instanceOf(window.Element),children:prop_types_default().node.isRequired,className:prop_types_default().string,onHide:prop_types_default().func.isRequired,popperOptions:prop_types_default().object,dataTestId:prop_types_default().string},Menu.defaultProps={anchorElement:void 0,className:void 0,popperOptions:void 0};const menu=Menu;var component_library=__webpack_require__("./ui/components/component-library/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts");const MenuItem=react.forwardRef((({children,className,"data-testid":dataTestId,iconName,onClick,subtitle,disabled=!1},ref)=>react.createElement("button",{className:classnames_default()("menu-item",className),"data-testid":dataTestId,onClick,ref,disabled},iconName?react.createElement(component_library.JO,{name:iconName,size:component_library.Jh.Sm,marginRight:2}):null,react.createElement("div",null,react.createElement("div",null,children),subtitle?react.createElement(component_library.xv,{variant:design_system.rK.bodyXs},subtitle):null))));MenuItem.propTypes={children:prop_types_default().node.isRequired,className:prop_types_default().string,"data-testid":prop_types_default().string,iconName:prop_types_default().string,onClick:prop_types_default().func,subtitle:prop_types_default().node,disabled:prop_types_default().bool},MenuItem.displayName="MenuItem",MenuItem.__docgenInfo={description:"",methods:[],displayName:"MenuItem",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},children:{description:"",type:{name:"node"},required:!0},className:{description:"",type:{name:"string"},required:!1},"data-testid":{description:"",type:{name:"string"},required:!1},iconName:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!1},subtitle:{description:"",type:{name:"node"},required:!1}}};const menu_item=MenuItem},"./ui/selectors/institutional/selectors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>getCustodianIconForAddress,GZ:()=>getIsNoteToTraderSupported,Hg:()=>getMMIConfiguration,L8:()=>getTransactionStatusMap,LL:()=>getMmiPortfolioEnabled,kl:()=>getMmiPortfolioUrl,q9:()=>getCustodyAccountDetails,rE:()=>getMMIAddressFromModalOrAddress,vG:()=>getInteractiveReplacementToken,xL:()=>getIsCustodianSupportedChain});var ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ethereumjs-util/dist.browser/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/selectors/selectors.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/conversion.utils.ts");function getTransactionStatusMap(state){return state.metamask.custodyStatusMaps}function getCustodyAccountDetails(state){return state.metamask.custodyAccountDetails}function getMmiPortfolioEnabled(state){var _state$metamask$mmiCo,_state$metamask$mmiCo2;return null===(_state$metamask$mmiCo=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo||null===(_state$metamask$mmiCo2=_state$metamask$mmiCo.portfolio)||void 0===_state$metamask$mmiCo2?void 0:_state$metamask$mmiCo2.enabled}function getMmiPortfolioUrl(state){var _state$metamask$mmiCo3,_state$metamask$mmiCo4;return null===(_state$metamask$mmiCo3=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo3||null===(_state$metamask$mmiCo4=_state$metamask$mmiCo3.portfolio)||void 0===_state$metamask$mmiCo4?void 0:_state$metamask$mmiCo4.url}function getCustodianIconForAddress(state,address){var _state$metamask$custo;let custodianIcon;const checksummedAddress=address&&(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(address);if(checksummedAddress&&null!==(_state$metamask$custo=state.metamask.custodyAccountDetails)&&void 0!==_state$metamask$custo&&_state$metamask$custo[checksummedAddress]){var _state$metamask$mmiCo6,_state$metamask$mmiCo7,_state$metamask$mmiCo8;const{custodianName}=state.metamask.custodyAccountDetails[checksummedAddress];custodianIcon=null===(_state$metamask$mmiCo6=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo6||null===(_state$metamask$mmiCo7=_state$metamask$mmiCo6.custodians)||void 0===_state$metamask$mmiCo7||null===(_state$metamask$mmiCo8=_state$metamask$mmiCo7.find((custodian=>custodian.name===custodianName)))||void 0===_state$metamask$mmiCo8?void 0:_state$metamask$mmiCo8.iconUrl}return custodianIcon}function getIsCustodianSupportedChain(state){const selectedIdentity=(0,_selectors__WEBPACK_IMPORTED_MODULE_1__.Sv)(state),accountType=(0,_selectors__WEBPACK_IMPORTED_MODULE_1__.lx)(state),providerConfig=(0,_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__.Vu)(state),supportedChains="custody"===accountType?function getCustodyAccountSupportedChains(state,address){return state.metamask.custodianSupportedChains?state.metamask.custodianSupportedChains[(0,ethereumjs_util__WEBPACK_IMPORTED_MODULE_0__.toChecksumAddress)(address)]:[]}(state,selectedIdentity.address):null;return null==supportedChains||!supportedChains.supportedChains||supportedChains.supportedChains.includes((0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__.Z8)(providerConfig.chainId))}function getMMIAddressFromModalOrAddress(state){return state.appState.modal.modalState.props.address||state.metamask.selectedAddress}function getMMIConfiguration(state){return state.metamask.mmiConfiguration||[]}function getInteractiveReplacementToken(state){return state.metamask.interactiveReplacementToken||{}}function getIsNoteToTraderSupported(state,fromChecksumHexAddress){var _state$metamask$custo2;let isNoteToTraderSupported=!1;if(null!==(_state$metamask$custo2=state.metamask.custodyAccountDetails)&&void 0!==_state$metamask$custo2&&_state$metamask$custo2[fromChecksumHexAddress]){var _state$metamask$mmiCo9,_state$metamask$mmiCo10,_state$metamask$mmiCo11;const{custodianName}=state.metamask.custodyAccountDetails[fromChecksumHexAddress];isNoteToTraderSupported=null===(_state$metamask$mmiCo9=state.metamask.mmiConfiguration)||void 0===_state$metamask$mmiCo9||null===(_state$metamask$mmiCo10=_state$metamask$mmiCo9.custodians)||void 0===_state$metamask$mmiCo10||null===(_state$metamask$mmiCo11=_state$metamask$mmiCo10.find((custodian=>custodian.name===custodianName)))||void 0===_state$metamask$mmiCo11?void 0:_state$metamask$mmiCo11.isNoteToTraderSupported}return isNoteToTraderSupported}}}]);