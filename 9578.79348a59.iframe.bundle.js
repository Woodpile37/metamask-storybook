"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[9578],{"./ui/components/app/cancel-button/cancel-button.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CancelButton});var _material_ui_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@material-ui/core/esm/Tooltip/Tooltip.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),_ui_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/components/ui/button/index.js"),_shared_modules_gas_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/modules/gas.utils.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/hooks/useI18nContext.js"),_hooks_useIncrementedGasFees__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/useIncrementedGasFees.js"),_pages_send_send_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/pages/send/send.utils.js"),_selectors__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/selectors/index.js");function CancelButton({cancelTransaction,transaction,detailsModal}){const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_6__.C)(),customCancelGasSettings=(0,_hooks_useIncrementedGasFees__WEBPACK_IMPORTED_MODULE_7__.N)(transaction),selectedAccount=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_9__.uWD),conversionRate=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_5__.PC),hasEnoughCancelGas=(0,_pages_send_send_utils__WEBPACK_IMPORTED_MODULE_8__.UV)({amount:"0x0",gasTotal:(0,_shared_modules_gas_utils__WEBPACK_IMPORTED_MODULE_4__.a)(customCancelGasSettings),balance:selectedAccount.balance,conversionRate}),btn=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_button__WEBPACK_IMPORTED_MODULE_3__.Z,{onClick:cancelTransaction,type:"secondary",className:classnames__WEBPACK_IMPORTED_MODULE_2___default()({"transaction-list-item__header-button":!detailsModal,"transaction-list-item-details__header-button-rounded-button":detailsModal}),disabled:!hasEnoughCancelGas,"data-testid":"cancel-button"},t("cancel"));return hasEnoughCancelGas?btn:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_10__.ZP,{title:t("notEnoughGas"),"data-testid":"not-enough-gas__tooltip",position:"bottom"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,btn))}CancelButton.propTypes={transaction:prop_types__WEBPACK_IMPORTED_MODULE_11___default().object,cancelTransaction:prop_types__WEBPACK_IMPORTED_MODULE_11___default().func,detailsModal:prop_types__WEBPACK_IMPORTED_MODULE_11___default().bool},CancelButton.__docgenInfo={description:"",methods:[],displayName:"CancelButton",props:{transaction:{description:"",type:{name:"object"},required:!1},cancelTransaction:{description:"",type:{name:"func"},required:!1},detailsModal:{description:"",type:{name:"bool"},required:!1}}}},"./ui/components/app/cancel-button/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_cancel_button__WEBPACK_IMPORTED_MODULE_0__.Z});var _cancel_button__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/cancel-button/cancel-button.js")},"./ui/components/app/cancel-speedup-popover/cancel-speedup-popover.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/constants/gas.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/selectors/index.js"),_helpers_utils_gas__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/utils/gas.js"),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/contexts/gasFee.js"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/useI18nContext.js"),_contexts_transaction_modal__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/contexts/transaction-modal.js"),_gas_details_item__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/components/app/gas-details-item/index.js"),_ui_box__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ui/components/ui/box/index.js"),_ui_info_tooltip__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./ui/components/ui/info-tooltip/index.js"),_app_loading_spinner__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./ui/components/app/app-loading-spinner/index.js"),_component_library__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./ui/components/component-library/index.ts"),_component_library_modal_content_deprecated__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./ui/components/component-library/modal-content/deprecated/index.ts"),_component_library_modal_header_deprecated__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./ui/components/component-library/modal-header/deprecated/index.ts");const CancelSpeedupPopover=()=>{const{cancelTransaction,editGasMode,gasFeeEstimates,speedUpTransaction,transaction,updateTransaction,updateTransactionToTenPercentIncreasedGasFee,updateTransactionUsingEstimate}=(0,_contexts_gasFee__WEBPACK_IMPORTED_MODULE_6__.YJ)(),t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_7__.C)(),{closeModal,currentModal}=(0,_contexts_transaction_modal__WEBPACK_IMPORTED_MODULE_8__.y8)(),appIsLoading=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_4__.dlV);if((0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{if(transaction.previousGas||appIsLoading||"cancelSpeedUpTransaction"!==currentModal)return;gasFeeEstimates&&(0,_helpers_utils_gas__WEBPACK_IMPORTED_MODULE_5__.Ll)(transaction.txParams,gasFeeEstimates,_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.o7.medium)?updateTransactionUsingEstimate(_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.o7.medium):updateTransactionToTenPercentIncreasedGasFee(!0)}),[appIsLoading,currentModal,editGasMode,gasFeeEstimates,transaction,updateTransaction,updateTransactionToTenPercentIncreasedGasFee,updateTransactionUsingEstimate]),"cancelSpeedUpTransaction"!==currentModal)return null;return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_13__.u_,{isOpen:!0,onClose:()=>closeModal(["cancelSpeedUpTransaction"]),className:"cancel-speedup-popover"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_13__.ZA,null),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library_modal_content_deprecated__WEBPACK_IMPORTED_MODULE_14__.h,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library_modal_header_deprecated__WEBPACK_IMPORTED_MODULE_15__.x,{onClose:()=>closeModal(["cancelSpeedUpTransaction"]),marginBottom:4},editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.G_.cancel?`âŒ${t("cancel")}`:`ðŸš€${t("speedUp")}`),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_app_loading_spinner__WEBPACK_IMPORTED_MODULE_12__.Z,{className:"cancel-speedup-popover__spinner"}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"cancel-speedup-popover__wrapper"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_13__.xv,{alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.center,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,marginBottom:2,paddingBottom:2,className:"cancel-speedup-popover__description"},t("cancelSpeedUpLabel",[react__WEBPACK_IMPORTED_MODULE_1__.createElement("strong",{key:"cancelSpeedupReplace"},t("replace"))]),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_ui_info_tooltip__WEBPACK_IMPORTED_MODULE_11__.Z,{position:"top",contentText:react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_13__.xv,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm},t("cancelSpeedUpTransactionTooltip",[editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.G_.cancel?t("cancel"):t("speedUp")])),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_13__.ZP,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.rK.bodySm,href:"https://community.metamask.io/t/how-to-speed-up-or-cancel-transactions-on-metamask/3296",target:"_blank"},t("learnMoreUpperCase")))})),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_ui_box__WEBPACK_IMPORTED_MODULE_10__.ZP,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.sS.Flex,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.g1.center,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Qb.Column,marginTop:2},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"cancel-speedup-popover__gas-details"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_gas_details_item__WEBPACK_IMPORTED_MODULE_9__.Z,null))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_13__.zx,{onClick:()=>{editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.G_.cancel?cancelTransaction():speedUpTransaction(),closeModal(["cancelSpeedUpTransaction"])}},t("submit")))))};CancelSpeedupPopover.__docgenInfo={description:"",methods:[],displayName:"CancelSpeedupPopover"};const __WEBPACK_DEFAULT_EXPORT__=CancelSpeedupPopover},"./ui/components/app/edit-gas-fee-icon/edit-gas-fee-icon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>EditGasFeeIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_contexts_gasFee__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/contexts/gasFee.js"),_hooks_useTransactionEventFragment__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/hooks/useTransactionEventFragment.js"),_contexts_transaction_modal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/contexts/transaction-modal.js"),_component_library__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/constants/design-system.ts");function EditGasFeeIcon({userAcknowledgedGasMissing=!1}){const{hasSimulationError,estimateUsed,supportsEIP1559}=(0,_contexts_gasFee__WEBPACK_IMPORTED_MODULE_1__.YJ)(),{updateTransactionEventFragment}=(0,_hooks_useTransactionEventFragment__WEBPACK_IMPORTED_MODULE_2__.s)(),{openModal}=(0,_contexts_transaction_modal__WEBPACK_IMPORTED_MODULE_3__.y8)();if(!supportsEIP1559||!estimateUsed||!(!hasSimulationError||userAcknowledgedGasMissing))return null;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_4__.zx,{style:{textDecoration:"none"},size:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.$u.SM,variant:_component_library__WEBPACK_IMPORTED_MODULE_4__.RN.LINK,startIconName:_component_library__WEBPACK_IMPORTED_MODULE_4__.uH.Edit,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.EY.primaryDefault,"data-testid":"edit-gas-fee-icon",onClick:()=>{updateTransactionEventFragment({gas_edit_attempted:"basic"}),openModal("editGasFee")}})}EditGasFeeIcon.propTypes={userAcknowledgedGasMissing:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool},EditGasFeeIcon.__docgenInfo={description:"",methods:[],displayName:"EditGasFeeIcon",props:{userAcknowledgedGasMissing:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}}},"./ui/components/app/gas-details-item/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>gas_details_item});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),es=__webpack_require__("./node_modules/react-redux/es/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),common=__webpack_require__("./ui/helpers/constants/common.ts"),gas=__webpack_require__("./shared/constants/gas.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),send=__webpack_require__("./ui/ducks/send/index.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),useDraftTransactionWithTxParams=__webpack_require__("./ui/hooks/useDraftTransactionWithTxParams.js"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),loading_heartbeat=__webpack_require__("./ui/components/ui/loading-heartbeat/index.js"),edit_gas_fee_icon=__webpack_require__("./ui/components/app/edit-gas-fee-icon/edit-gas-fee-icon.js"),gas_timing_component=__webpack_require__("./ui/components/app/gas-timing/gas-timing.component.js"),fetchEstimatedL1Fee=__webpack_require__("./ui/helpers/utils/optimism/fetchEstimatedL1Fee.js"),transaction_detail_item_component=__webpack_require__("./ui/components/app/transaction-detail-item/transaction-detail-item.component.js"),user_preferenced_currency_display=__webpack_require__("./ui/components/app/user-preferenced-currency-display/index.js");const GasDetailsItem=({"data-testid":dataTestId,userAcknowledgedGasMissing=!1})=>{var _transactionData$txPa,_transactionData$txPa2;const t=(0,useI18nContext.C)(),isMultiLayerFeeNetwork=(0,es.v9)(selectors.SEh),txData=(0,es.v9)(selectors.LCq),[estimatedL1Fees,setEstimatedL1Fees]=(0,react.useState)(null);(0,react.useEffect)((()=>{isMultiLayerFeeNetwork&&(0,fetchEstimatedL1Fee.Z)(null==txData?void 0:txData.chainId,txData).then((result=>{setEstimatedL1Fees(result)})).catch((_err=>{setEstimatedL1Fees(null)}))}),[isMultiLayerFeeNetwork,txData]);const draftTransaction=(0,es.v9)(send.aP),transactionData=(0,useDraftTransactionWithTxParams.r)(),{hexMinimumTransactionFee:draftHexMinimumTransactionFee,hexMaximumTransactionFee:draftHexMaximumTransactionFee}=(0,es.v9)((state=>(0,selectors.nfL)(state,transactionData))),{estimateUsed,hasSimulationError,maximumCostInHexWei:hexMaximumTransactionFee,maxPriorityFeePerGas,maxFeePerGas}=(0,gasFee.YJ)(),{useNativeCurrencyAsPrimaryCurrency}=(0,es.v9)(selectors.Izy),useCurrencyRateCheck=(0,es.v9)(selectors.nsI),getTransactionFeeTotal=(0,react.useMemo)((()=>isMultiLayerFeeNetwork?(0,conversion_utils.Vb)(hexMaximumTransactionFee,estimatedL1Fees||0):hexMaximumTransactionFee),[isMultiLayerFeeNetwork,hexMaximumTransactionFee,estimatedL1Fees]);if(hasSimulationError&&!userAcknowledgedGasMissing)return null;const maxPriorityFeePerGasToRender=(maxPriorityFeePerGas??(0,conversion_utils.Yg)((null===(_transactionData$txPa=transactionData.txParams)||void 0===_transactionData$txPa?void 0:_transactionData$txPa.maxPriorityFeePerGas)??"0x0")).toString(),maxFeePerGasToRender=(maxFeePerGas??(0,conversion_utils.Yg)((null===(_transactionData$txPa2=transactionData.txParams)||void 0===_transactionData$txPa2?void 0:_transactionData$txPa2.maxFeePerGas)??"0x0")).toString();return react.createElement(transaction_detail_item_component.Z,{key:"gas-details-item","data-testid":dataTestId,detailTitle:react.createElement(component_library.xv,null,t("estimatedFee")),detailTitleColor:design_system.d9.textDefault,detailText:useCurrencyRateCheck&&0===Object.keys(draftTransaction).length&&react.createElement("div",{className:"gas-details-item__currency-container"},react.createElement(loading_heartbeat.Z,{estimateUsed}),react.createElement(edit_gas_fee_icon.Z,{userAcknowledgedGasMissing}),react.createElement(user_preferenced_currency_display.Z,{type:common.Vb,value:getTransactionFeeTotal,hideLabel:Boolean(useNativeCurrencyAsPrimaryCurrency)})),detailTotal:react.createElement("div",{className:"gas-details-item__currency-container"},react.createElement(loading_heartbeat.Z,{estimateUsed}),react.createElement(user_preferenced_currency_display.Z,{type:common._8,value:getTransactionFeeTotal||draftHexMinimumTransactionFee,hideLabel:!useNativeCurrencyAsPrimaryCurrency})),subText:react.createElement(react.Fragment,null,react.createElement(box.ZP,{key:"editGasSubTextFeeLabel",display:"inline-flex",className:classnames_default()("gas-details-item__gasfee-label",{"gas-details-item__gas-fee-warning":estimateUsed===gas.o7.high||estimateUsed===gas.o7.dappSuggestedHigh})},react.createElement(loading_heartbeat.Z,{estimateUsed}),react.createElement(box.ZP,{marginRight:1},react.createElement("strong",null,(estimateUsed===gas.o7.high||estimateUsed===gas.o7.dappSuggestedHigh)&&"âš  ",t("editGasSubTextFeeLabel"))),react.createElement("div",{key:"editGasSubTextFeeValue",className:"gas-details-item__currency-container"},react.createElement(loading_heartbeat.Z,{estimateUsed}),react.createElement(user_preferenced_currency_display.Z,{key:"editGasSubTextFeeAmount",type:common._8,value:getTransactionFeeTotal||draftHexMaximumTransactionFee,hideLabel:!useNativeCurrencyAsPrimaryCurrency})))),subTitle:react.createElement(gas_timing_component.Z,{maxPriorityFeePerGas:maxPriorityFeePerGasToRender,maxFeePerGas:maxFeePerGasToRender})})};GasDetailsItem.propTypes={"data-testid":prop_types_default().string,userAcknowledgedGasMissing:prop_types_default().bool},GasDetailsItem.__docgenInfo={description:"",methods:[],displayName:"GasDetailsItem",props:{userAcknowledgedGasMissing:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},"data-testid":{description:"",type:{name:"string"},required:!1}}};const gas_details_item=GasDetailsItem},"./ui/components/app/transaction-activity-log/transaction-activity-log-icon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_transaction_activity_log_icon_component__WEBPACK_IMPORTED_MODULE_0__.Z});var _transaction_activity_log_icon_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/transaction-activity-log/transaction-activity-log-icon/transaction-activity-log-icon.component.js")},"./ui/components/app/transaction-activity-log/transaction-activity-log-icon/transaction-activity-log-icon.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>ACTIVITY_ICONS,Z:()=>TransactionActivityLogIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/app/transaction-activity-log/transaction-activity-log.constants.js"),_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const ACTIVITY_ICONS={[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__._]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Add,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.Ru]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.ArrowUp,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.Xf]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.ProgrammingArrows,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.CQ]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Check,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.xs]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Close,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.lO]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Danger,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.Zn]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Close,[_transaction_activity_log_constants__WEBPACK_IMPORTED_MODULE_4__.qg]:_component_library__WEBPACK_IMPORTED_MODULE_2__.uH.Close};class TransactionActivityLogIcon extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{render(){const{className,eventKey}=this.props,icon=ACTIVITY_ICONS[eventKey];return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("transaction-activity-log-icon",className)},icon?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.JO,{name:icon,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Il.iconDefault,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.Jh.Sm}):null)}}_defineProperty(TransactionActivityLogIcon,"contextTypes",{t:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func}),_defineProperty(TransactionActivityLogIcon,"propTypes",{className:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,eventKey:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(Object.keys(ACTIVITY_ICONS))}),TransactionActivityLogIcon.__docgenInfo={description:"",methods:[],displayName:"TransactionActivityLogIcon",props:{className:{description:"",type:{name:"string"},required:!1},eventKey:{description:"",type:{name:"enum",computed:!0,value:"Object.keys(ACTIVITY_ICONS)"},required:!1}},context:{t:{type:{name:"func"},required:!1}}}},"./ui/components/app/transaction-activity-log/transaction-activity-log.constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CQ:()=>TRANSACTION_CONFIRMED_EVENT,Oh:()=>CONFIRMED_STATUS,Ru:()=>TRANSACTION_SUBMITTED_EVENT,Wr:()=>TRANSACTION_UPDATED_EVENT,Xf:()=>TRANSACTION_RESUBMITTED_EVENT,Zn:()=>TRANSACTION_CANCEL_ATTEMPTED_EVENT,_:()=>TRANSACTION_CREATED_EVENT,af:()=>DROPPED_STATUS,lO:()=>TRANSACTION_ERRORED_EVENT,qg:()=>TRANSACTION_CANCEL_SUCCESS_EVENT,rS:()=>SUBMITTED_STATUS,xs:()=>TRANSACTION_DROPPED_EVENT});const TRANSACTION_CREATED_EVENT="transactionCreated",TRANSACTION_SUBMITTED_EVENT="transactionSubmitted",TRANSACTION_RESUBMITTED_EVENT="transactionResubmitted",TRANSACTION_CONFIRMED_EVENT="transactionConfirmed",TRANSACTION_DROPPED_EVENT="transactionDropped",TRANSACTION_UPDATED_EVENT="transactionUpdated",TRANSACTION_ERRORED_EVENT="transactionErrored",TRANSACTION_CANCEL_ATTEMPTED_EVENT="transactionCancelAttempted",TRANSACTION_CANCEL_SUCCESS_EVENT="transactionCancelSuccess",SUBMITTED_STATUS="submitted",CONFIRMED_STATUS="confirmed",DROPPED_STATUS="dropped"},"./ui/components/app/transaction-icon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>TransactionIcon});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dist=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),transaction=__webpack_require__("./shared/constants/transaction.ts"),actions=__webpack_require__("./ui/store/actions.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts");const ICON_MAP={[transaction.Bd.approval]:component_library.uH.Check,[transaction.Bd.interaction]:component_library.uH.ProgrammingArrows,[transaction.Bd.receive]:component_library.uH.Received,[transaction.Bd.send]:component_library.uH.Arrow2UpRight,[transaction.Bd.signatureRequest]:component_library.uH.SecurityTick,[transaction.Bd.swap]:component_library.uH.SwapHorizontal},COLOR_MAP={[transaction.Ss.pending]:design_system.EY.primaryDefault,[transaction.Ss.cancelled]:design_system.EY.errorDefault,[dist.TransactionStatus.approved]:design_system.EY.primaryDefault,[dist.TransactionStatus.dropped]:design_system.EY.errorDefault,[dist.TransactionStatus.failed]:design_system.EY.errorDefault,[dist.TransactionStatus.rejected]:design_system.EY.errorDefault,[dist.TransactionStatus.submitted]:design_system.EY.primaryDefault,[dist.TransactionStatus.unapproved]:design_system.EY.primaryDefault},BACKGROUND_COLOR_MAP={[transaction.Ss.pending]:design_system.lP.primaryMuted,[transaction.Ss.cancelled]:design_system.lP.errorMuted,[dist.TransactionStatus.approved]:design_system.lP.primaryMuted,[dist.TransactionStatus.dropped]:design_system.lP.errorMuted,[dist.TransactionStatus.failed]:design_system.lP.errorMuted,[dist.TransactionStatus.rejected]:design_system.lP.errorMuted,[dist.TransactionStatus.submitted]:design_system.lP.primaryMuted,[dist.TransactionStatus.unapproved]:design_system.lP.primaryMuted};function TransactionIcon({status,category}){const dispatch=(0,es.I0)(),color=COLOR_MAP[status]||design_system.EY.primaryDefault,backgroundColor=BACKGROUND_COLOR_MAP[status]||design_system.lP.primaryMuted,Icon=ICON_MAP[category];return Icon?react.createElement(component_library.fM,{backgroundColor,iconName:Icon,size:component_library.dt.Md,color}):(dispatch((0,actions.Qnr)(`The category prop passed to TransactionIcon is not supported. The prop is: ${category}`)),react.createElement(component_library.fM,{backgroundColor:design_system.lP.backgroundAlternative,size:component_library.dt.Md}))}TransactionIcon.propTypes={status:prop_types_default().oneOf([transaction.Ss.cancelled,transaction.Ss.pending,dist.TransactionStatus.approved,dist.TransactionStatus.confirmed,dist.TransactionStatus.dropped,dist.TransactionStatus.failed,dist.TransactionStatus.rejected,dist.TransactionStatus.submitted,dist.TransactionStatus.unapproved]).isRequired,category:prop_types_default().oneOf([transaction.Bd.approval,transaction.Bd.interaction,transaction.Bd.receive,transaction.Bd.send,transaction.Bd.signatureRequest,transaction.Bd.swap]).isRequired},TransactionIcon.__docgenInfo={description:"",methods:[],displayName:"TransactionIcon",props:{status:{description:"",type:{name:"enum",value:[{value:"TransactionGroupStatus.cancelled",computed:!0},{value:"TransactionGroupStatus.pending",computed:!0},{value:"TransactionStatus.approved",computed:!0},{value:"TransactionStatus.confirmed",computed:!0},{value:"TransactionStatus.dropped",computed:!0},{value:"TransactionStatus.failed",computed:!0},{value:"TransactionStatus.rejected",computed:!0},{value:"TransactionStatus.submitted",computed:!0},{value:"TransactionStatus.unapproved",computed:!0}]},required:!0},category:{description:"",type:{name:"enum",value:[{value:"TransactionGroupCategory.approval",computed:!0},{value:"TransactionGroupCategory.interaction",computed:!0},{value:"TransactionGroupCategory.receive",computed:!0},{value:"TransactionGroupCategory.send",computed:!0},{value:"TransactionGroupCategory.signatureRequest",computed:!0},{value:"TransactionGroupCategory.swap",computed:!0}]},required:!0}}}},"./ui/components/app/transaction-list-item-details/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>transaction_list_item_details_container});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),redux=__webpack_require__("./node_modules/redux/es/redux.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),actions=__webpack_require__("./ui/store/actions.ts"),institution_background=__webpack_require__("./ui/store/institutional/institution-background.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),copy_to_clipboard=__webpack_require__("./node_modules/copy-to-clipboard/index.js"),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard),dist=__webpack_require__("./node_modules/@metamask/etherscan-link/dist/index.js"),transaction_controller_dist=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),sender_to_recipient=__webpack_require__("./ui/components/ui/sender-to-recipient/index.js"),sender_to_recipient_constants=__webpack_require__("./ui/components/ui/sender-to-recipient/sender-to-recipient.constants.js"),disclosure=__webpack_require__("./ui/components/ui/disclosure/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),util=__webpack_require__("./ui/helpers/utils/util.js"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),transaction_activity_log_icon=__webpack_require__("./ui/components/app/transaction-activity-log/transaction-activity-log-icon/index.js"),transaction_activity_log_constants=__webpack_require__("./ui/components/app/transaction-activity-log/transaction-activity-log.constants.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class TransactionActivityLog extends react.PureComponent{constructor(...args){super(...args),_defineProperty(this,"handleActivityClick",(activity=>{const{rpcPrefs}=this.props,etherscanUrl=(0,dist.getBlockExplorerLink)(activity,rpcPrefs);this.context.trackEvent({category:metametrics.ci.Transactions,event:"Clicked Block Explorer Link",properties:{link_type:"Transaction Block Explorer",action:"Activity Details",block_explorer_domain:(0,util.Cs)(etherscanUrl)}}),__webpack_require__.g.platform.openTab({url:etherscanUrl})}))}renderInlineRetry(index){const{t}=this.context,{inlineRetryIndex,primaryTransaction={},onRetry,isEarliestNonce}=this.props,{status}=primaryTransaction;return isEarliestNonce&&status!==transaction_activity_log_constants.Oh&&index===inlineRetryIndex?react.createElement("div",{className:"transaction-activity-log__action-link",onClick:onRetry},t("speedUpTransaction")):null}renderInlineCancel(index){const{t}=this.context,{inlineCancelIndex,primaryTransaction={},onCancel,isEarliestNonce}=this.props,{status}=primaryTransaction;return isEarliestNonce&&status!==transaction_activity_log_constants.Oh&&index===inlineCancelIndex?react.createElement("div",{className:"transaction-activity-log__action-link",onClick:onCancel},t("speedUpCancellation")):null}renderActivity(activity,index){const{conversionRate,nativeCurrency}=this.props,{eventKey,value,timestamp}=activity,ethValue=`${(0,conversion_utils.nu)({value,fromCurrency:"ETH",toCurrency:"ETH",conversionRate,numberOfDecimals:6})} ${nativeCurrency}`,formattedTimestamp=(0,util.p6)(timestamp,"T 'on' M/d/y"),activityText=this.context.t(eventKey,[ethValue,formattedTimestamp]);return react.createElement("div",{key:index,className:"transaction-activity-log__activity"},react.createElement(transaction_activity_log_icon.Z,{className:"transaction-activity-log__activity-icon",eventKey}),react.createElement("div",{className:"transaction-activity-log__entry-container"},react.createElement("div",{className:"transaction-activity-log__activity-text",title:activityText,onClick:()=>this.handleActivityClick(activity)},activityText),this.renderInlineRetry(index),this.renderInlineCancel(index)))}render(){const{t}=this.context,{className,activities}=this.props;return 0===activities.length?null:react.createElement("div",{className:classnames_default()("transaction-activity-log",className)},react.createElement("div",{className:"transaction-activity-log__title"},t("activityLog")),react.createElement("div",{className:"transaction-activity-log__activities-container"},activities.map(((activity,index)=>this.renderActivity(activity,index)))))}}_defineProperty(TransactionActivityLog,"contextTypes",{t:prop_types_default().func,trackEvent:prop_types_default().func}),_defineProperty(TransactionActivityLog,"propTypes",{activities:prop_types_default().array,className:prop_types_default().string,conversionRate:prop_types_default().number,inlineRetryIndex:prop_types_default().number,inlineCancelIndex:prop_types_default().number,nativeCurrency:prop_types_default().string,onCancel:prop_types_default().func,onRetry:prop_types_default().func,primaryTransaction:prop_types_default().object,isEarliestNonce:prop_types_default().bool,rpcPrefs:prop_types_default().object}),TransactionActivityLog.__docgenInfo={description:"",methods:[{name:"handleActivityClick",docblock:null,modifiers:[],params:[{name:"activity",type:null}],returns:null},{name:"renderInlineRetry",docblock:null,modifiers:[],params:[{name:"index",type:null}],returns:null},{name:"renderInlineCancel",docblock:null,modifiers:[],params:[{name:"index",type:null}],returns:null},{name:"renderActivity",docblock:null,modifiers:[],params:[{name:"activity",type:null},{name:"index",type:null}],returns:null}],displayName:"TransactionActivityLog",props:{activities:{description:"",type:{name:"array"},required:!1},className:{description:"",type:{name:"string"},required:!1},conversionRate:{description:"",type:{name:"number"},required:!1},inlineRetryIndex:{description:"",type:{name:"number"},required:!1},inlineCancelIndex:{description:"",type:{name:"number"},required:!1},nativeCurrency:{description:"",type:{name:"string"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},onRetry:{description:"",type:{name:"func"},required:!1},primaryTransaction:{description:"",type:{name:"object"},required:!1},isEarliestNonce:{description:"",type:{name:"bool"},required:!1},rpcPrefs:{description:"",type:{name:"object"},required:!1}},context:{t:{type:{name:"func"},required:!1},trackEvent:{type:{name:"func"},required:!1}}};var confirm_tx_util=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts");const STATUS_PATH="/status",GAS_PRICE_PATH="/txParams/gasPrice",GAS_LIMIT_PATH="/txParams/gas",ESTIMATE_BASE_FEE_PATH="/estimatedBaseFee",BLOCKTIMESTAMP="/blockTimestamp",REPLACE_OP="replace",eventPathsHash={[STATUS_PATH]:!0,[GAS_PRICE_PATH]:!0,[GAS_LIMIT_PATH]:!0,[BLOCKTIMESTAMP]:!0},statusHash={[transaction_activity_log_constants.rS]:transaction_activity_log_constants.Ru,[transaction_activity_log_constants.Oh]:transaction_activity_log_constants.CQ,[transaction_activity_log_constants.af]:transaction_activity_log_constants.xs};function combineTransactionHistories(transactions=[]){if(!transactions.length)return[];const activities=[];transactions.forEach(((transaction,index)=>{const transactionActivities=function getActivities(transaction,isFirstTransaction=!1){const{id,chainId,hash,history=[],txParams:{gas:paramsGasLimit,gasPrice:paramsGasPrice,maxPriorityFeePerGas:paramsMaxPriorityFeePerGas},txReceipt:{status}={},type,estimatedBaseFee:paramsEstimatedBaseFee}=transaction,paramsEip1559Price=paramsEstimatedBaseFee&&paramsMaxPriorityFeePerGas&&(0,conversion_utils.Vb)(paramsEstimatedBaseFee,paramsMaxPriorityFeePerGas);let cachedGasLimit="0x0",cachedGasPrice="0x0";const historyActivities=history.reduce(((acc,base,index)=>{if(0===index&&!Array.isArray(base)&&base.txParams){const{time:timestamp,estimatedBaseFee,txParams:{value,gas="0x0",gasPrice,maxPriorityFeePerGas}={}}=base,eip1559Price=estimatedBaseFee&&maxPriorityFeePerGas&&(0,conversion_utils.Vb)(estimatedBaseFee,maxPriorityFeePerGas);if(cachedGasLimit=gas,cachedGasPrice=eip1559Price||gasPrice||paramsGasPrice||"0x0",isFirstTransaction)return acc.concat({id,hash,chainId,eventKey:transaction_activity_log_constants._,timestamp,value})}else if(Array.isArray(base)){const events=[];return base.forEach((entry=>{const{op,path,value,timestamp:entryTimestamp}=entry,timestamp=entryTimestamp||base[0]&&base[0].timestamp;if(path in eventPathsHash&&op===REPLACE_OP||path===ESTIMATE_BASE_FEE_PATH&&"add"===op)switch(path){case STATUS_PATH:{const gasFee="0x0"===cachedGasLimit&&"0x0"===cachedGasPrice?(0,confirm_tx_util.Xg)({gasLimit:paramsGasLimit,gasPrice:paramsEip1559Price||paramsGasPrice}):(0,confirm_tx_util.Xg)({gasLimit:cachedGasLimit,gasPrice:cachedGasPrice});if(value in statusHash){let eventKey=statusHash[value];value===transaction_activity_log_constants.rS?type===transaction_controller_dist.TransactionType.retry?eventKey=transaction_activity_log_constants.Xf:type===transaction_controller_dist.TransactionType.cancel&&(eventKey=transaction_activity_log_constants.Zn):value===transaction_activity_log_constants.Oh&&type===transaction_controller_dist.TransactionType.cancel&&(eventKey=transaction_activity_log_constants.qg),events.push({id,hash,eventKey,timestamp,chainId,value:gasFee})}break}case GAS_PRICE_PATH:case GAS_LIMIT_PATH:case ESTIMATE_BASE_FEE_PATH:{const lastEvent=events[events.length-1]||{},{lastEventKey}=lastEvent;if(path===GAS_LIMIT_PATH)cachedGasLimit=value;else if(path===GAS_PRICE_PATH)cachedGasPrice=value;else if(path===ESTIMATE_BASE_FEE_PATH){var _base$txParams;cachedGasPrice=paramsEip1559Price||(null==base||null===(_base$txParams=base.txParams)||void 0===_base$txParams?void 0:_base$txParams.gasPrice),lastEvent.value=(0,confirm_tx_util.Xg)({gasLimit:paramsGasLimit,gasPrice:cachedGasPrice})}lastEventKey!==transaction_activity_log_constants.Ru&&lastEventKey!==transaction_activity_log_constants.Xf||(lastEvent.value=(0,confirm_tx_util.Xg)({gasLimit:cachedGasLimit,gasPrice:cachedGasPrice}));break}case BLOCKTIMESTAMP:{const filteredAcc=acc.find((ac=>ac.eventKey===transaction_activity_log_constants.CQ));void 0!==filteredAcc&&(filteredAcc.timestamp=new Date(1e3*parseInt(entry.value,16)).getTime());break}default:events.push({id,hash,chainId,eventKey:transaction_activity_log_constants.Wr,timestamp})}})),acc.concat(events)}return acc}),[]);return"0x0"===status?historyActivities.concat({id,hash,chainId,eventKey:transaction_activity_log_constants.lO}):historyActivities}(transaction,0===index);activities.push(...transactionActivities)}));return function filterSortedActivities(activities){const filteredActivities=[],hasConfirmedActivity=Boolean(activities.find((({eventKey})=>eventKey===transaction_activity_log_constants.CQ||eventKey===transaction_activity_log_constants.qg)));let addedDroppedActivity=!1;return activities.forEach((activity=>{activity.eventKey===transaction_activity_log_constants.xs?hasConfirmedActivity||addedDroppedActivity||(filteredActivities.push(activity),addedDroppedActivity=!0):filteredActivities.push(activity)})),filteredActivities}(activities.sort(((a,b)=>a.timestamp-b.timestamp)))}const matchesEventKey=matchEventKey=>({eventKey})=>eventKey===matchEventKey,transaction_activity_log_container=(0,es.$j)((state=>({conversionRate:(0,selectors.tOe)(state),nativeCurrency:(0,metamask.JK)(state),rpcPrefs:(0,selectors.Kzx)(state)})),null,((stateProps,dispatchProps,ownProps)=>{const{transactionGroup:{transactions=[],primaryTransaction}={},...restOwnProps}=ownProps,activities=combineTransactionHistories(transactions);return{...stateProps,...dispatchProps,...restOwnProps,activities,inlineRetryIndex:(0,lodash.findLastIndex)(activities,matchesEventKey(transaction_activity_log_constants.Xf)),inlineCancelIndex:(0,lodash.findLastIndex)(activities,matchesEventKey(transaction_activity_log_constants.Zn)),primaryTransaction}}))(TransactionActivityLog);var transaction_utils=__webpack_require__("./shared/modules/transaction.utils.js"),currency_display=__webpack_require__("./ui/components/ui/currency-display/index.js"),user_preferenced_currency_display=__webpack_require__("./ui/components/app/user-preferenced-currency-display/index.js"),hex_to_decimal_component=__webpack_require__("./ui/components/ui/hex-to-decimal/hex-to-decimal.component.js"),common=__webpack_require__("./ui/helpers/constants/common.ts"),constants_common=__webpack_require__("./shared/constants/common.ts");class TransactionBreakdownRow extends react.PureComponent{render(){const{title,children,className,divider=!1}=this.props;return react.createElement("div",{className:classnames_default()("transaction-breakdown-row",divider?"transaction-breakdown-row--with-bottom-border":"",className),"data-testid":"transaction-breakdown-row"},react.createElement("div",{className:"transaction-breakdown-row__title","data-testid":"transaction-breakdown-row-title"},title),react.createElement("div",{className:"transaction-breakdown-row__value","data-testid":"transaction-breakdown-row-value"},children))}}function transaction_breakdown_component_defineProperty(obj,key,value){return(key=function transaction_breakdown_component_toPropertyKey(arg){var key=function transaction_breakdown_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}!function transaction_breakdown_row_component_defineProperty(obj,key,value){return(key=function transaction_breakdown_row_component_toPropertyKey(arg){var key=function transaction_breakdown_row_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(TransactionBreakdownRow,"propTypes",{title:prop_types_default().string,children:prop_types_default().node,className:prop_types_default().string,divider:prop_types_default().bool}),TransactionBreakdownRow.__docgenInfo={description:"",methods:[],displayName:"TransactionBreakdownRow",props:{title:{description:"",type:{name:"string"},required:!1},children:{description:"",type:{name:"node"},required:!1},className:{description:"",type:{name:"string"},required:!1},divider:{description:"",type:{name:"bool"},required:!1}}};class TransactionBreakdown extends react.PureComponent{render(){const{t}=this.context,{gas,gasPrice,maxFeePerGas,primaryCurrency,className,nonce,nativeCurrency,showFiat,totalInHex,gasUsed,isTokenApprove,baseFee,priorityFee,hexGasTotal,isEIP1559Transaction,isMultiLayerFeeNetwork,l1HexGasTotal}=this.props;return react.createElement("div",{className:classnames_default()("transaction-breakdown",className)},react.createElement("div",{className:"transaction-breakdown__title"},t("transaction")),react.createElement(TransactionBreakdownRow,{divider:!0,title:t("nonce")},void 0===nonce?null:react.createElement(hex_to_decimal_component.Z,{className:"transaction-breakdown__value",value:nonce})),react.createElement(TransactionBreakdownRow,{title:t(isTokenApprove?"spendingCap":"amount")},react.createElement("span",{className:"transaction-breakdown__value transaction-breakdown__value--amount","data-testid":"transaction-breakdown-value-amount"},primaryCurrency)),react.createElement(TransactionBreakdownRow,{title:isMultiLayerFeeNetwork?t("transactionHistoryL2GasLimitLabel"):`${t("gasLimit")} (${t("units")})`,className:"transaction-breakdown__row-title"},void 0===gas?"?":react.createElement(hex_to_decimal_component.Z,{className:"transaction-breakdown__value",value:gas})),"string"==typeof gasUsed&&react.createElement(TransactionBreakdownRow,{title:`${t("gasUsed")} (${t("units")})`,className:"transaction-breakdown__row-title"},react.createElement(hex_to_decimal_component.Z,{className:"transaction-breakdown__value",value:gasUsed})),isEIP1559Transaction&&void 0!==baseFee?react.createElement(TransactionBreakdownRow,{title:t("transactionHistoryBaseFee")},react.createElement(currency_display.Z,{className:"transaction-breakdown__value","data-testid":"transaction-breakdown__base-fee",currency:nativeCurrency,denomination:constants_common.E.GWEI,value:baseFee,numberOfDecimals:10,hideLabel:!0})):null,isEIP1559Transaction&&void 0!==priorityFee?react.createElement(TransactionBreakdownRow,{title:t("transactionHistoryPriorityFee")},react.createElement(currency_display.Z,{className:"transaction-breakdown__value","data-testid":"transaction-breakdown__priority-fee",currency:nativeCurrency,denomination:constants_common.E.GWEI,value:priorityFee,numberOfDecimals:10,hideLabel:!0})):null,!isEIP1559Transaction&&react.createElement(TransactionBreakdownRow,{title:t(isMultiLayerFeeNetwork?"transactionHistoryL2GasPriceLabel":"advancedGasPriceTitle")},void 0===gasPrice?"?":react.createElement(currency_display.Z,{className:"transaction-breakdown__value","data-testid":"transaction-breakdown__gas-price",currency:nativeCurrency,denomination:constants_common.E.GWEI,value:gasPrice,numberOfDecimals:9,hideLabel:!0})),isEIP1559Transaction&&react.createElement(TransactionBreakdownRow,{title:t("transactionHistoryTotalGasFee")},react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value","data-testid":"transaction-breakdown__effective-gas-price",currency:nativeCurrency,denomination:constants_common.E.ETH,numberOfDecimals:6,value:hexGasTotal,type:common._8}),showFiat&&react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value",type:common.Vb,value:hexGasTotal})),isEIP1559Transaction&&react.createElement(TransactionBreakdownRow,{divider:!0,title:t("transactionHistoryMaxFeePerGas")},react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value",currency:nativeCurrency,denomination:constants_common.E.ETH,numberOfDecimals:9,value:maxFeePerGas,type:common._8}),showFiat&&react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value",type:common.Vb,value:maxFeePerGas})),isMultiLayerFeeNetwork&&react.createElement(TransactionBreakdownRow,{title:t("transactionHistoryL1GasLabel")},react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value","data-testid":"transaction-breakdown__l1-gas-total",numberOfDecimals:18,value:l1HexGasTotal,type:common._8}),showFiat&&react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value",type:common.Vb,value:l1HexGasTotal})),react.createElement(TransactionBreakdownRow,{title:t("total")},react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value transaction-breakdown__value--eth-total",type:common._8,value:totalInHex,numberOfDecimals:isMultiLayerFeeNetwork?18:null}),showFiat&&react.createElement(user_preferenced_currency_display.Z,{className:"transaction-breakdown__value",type:common.Vb,value:totalInHex})))}}transaction_breakdown_component_defineProperty(TransactionBreakdown,"contextTypes",{t:prop_types_default().func}),transaction_breakdown_component_defineProperty(TransactionBreakdown,"propTypes",{className:prop_types_default().string,nativeCurrency:prop_types_default().string,showFiat:prop_types_default().bool,nonce:prop_types_default().string,primaryCurrency:prop_types_default().string,isTokenApprove:prop_types_default().bool,gas:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),gasPrice:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),maxFeePerGas:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),gasUsed:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),totalInHex:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),baseFee:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),priorityFee:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),hexGasTotal:prop_types_default().string,isEIP1559Transaction:prop_types_default().bool,isMultiLayerFeeNetwork:prop_types_default().bool,l1HexGasTotal:prop_types_default().string}),transaction_breakdown_component_defineProperty(TransactionBreakdown,"defaultProps",{showFiat:!0}),TransactionBreakdown.__docgenInfo={description:"",methods:[],displayName:"TransactionBreakdown",props:{showFiat:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},className:{description:"",type:{name:"string"},required:!1},nativeCurrency:{description:"",type:{name:"string"},required:!1},nonce:{description:"",type:{name:"string"},required:!1},primaryCurrency:{description:"",type:{name:"string"},required:!1},isTokenApprove:{description:"",type:{name:"bool"},required:!1},gas:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},gasPrice:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},maxFeePerGas:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},gasUsed:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},totalInHex:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},baseFee:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},priorityFee:{description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},hexGasTotal:{description:"",type:{name:"string"},required:!1},isEIP1559Transaction:{description:"",type:{name:"bool"},required:!1},isMultiLayerFeeNetwork:{description:"",type:{name:"bool"},required:!1},l1HexGasTotal:{description:"",type:{name:"string"},required:!1}},context:{t:{type:{name:"func"},required:!1}}};const transaction_breakdown_container=(0,es.$j)(((state,ownProps)=>{const{transaction,isTokenApprove}=ownProps,{txParams:{gas,gasPrice,maxFeePerGas,value}={},txReceipt:{gasUsed,effectiveGasPrice,l1Fee:l1HexGasTotal}={},baseFeePerGas}=transaction,gasLimit="string"==typeof gasUsed?gasUsed:gas,priorityFee=effectiveGasPrice&&baseFeePerGas&&(0,conversion_utils.Cd)(effectiveGasPrice,baseFeePerGas),usedGasPrice=gasPrice||effectiveGasPrice,hexGasTotal=gasLimit&&usedGasPrice&&(0,confirm_tx_util.Xg)({gasLimit,gasPrice:usedGasPrice})||"0x0";let totalInHex=(0,conversion_utils.Vb)(hexGasTotal,value);const isMultiLayerFeeNetwork=(0,selectors.SEh)(state)&&void 0!==l1HexGasTotal;return isMultiLayerFeeNetwork&&(totalInHex=(0,conversion_utils.Vb)(totalInHex,l1HexGasTotal)),{nativeCurrency:(0,metamask.JK)(state),showFiat:(0,selectors.i8I)(state),totalInHex,gas,gasPrice,maxFeePerGas,gasUsed,isTokenApprove,hexGasTotal,priorityFee,baseFee:baseFeePerGas,isEIP1559Transaction:(0,transaction_utils.K3)(transaction),isMultiLayerFeeNetwork,l1HexGasTotal}}))(TransactionBreakdown);var ui_button=__webpack_require__("./ui/components/ui/button/index.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),cancel_button=__webpack_require__("./ui/components/app/cancel-button/index.js"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),time=__webpack_require__("./shared/constants/time.ts"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),copy=__webpack_require__("./shared/constants/copy.ts");function transaction_list_item_details_component_defineProperty(obj,key,value){return(key=function transaction_list_item_details_component_toPropertyKey(arg){var key=function transaction_list_item_details_component_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class TransactionListItemDetails extends react.PureComponent{constructor(...args){super(...args),transaction_list_item_details_component_defineProperty(this,"state",{justCopied:!1,custodyTransactionDeepLink:null}),transaction_list_item_details_component_defineProperty(this,"handleBlockExplorerClick",(()=>{const{transactionGroup:{primaryTransaction},rpcPrefs,isCustomNetwork,history,onClose}=this.props,blockExplorerLink=(0,dist.getBlockExplorerLink)(primaryTransaction,rpcPrefs);!rpcPrefs.blockExplorerUrl&&isCustomNetwork?(onClose(),history.push(`${routes.Mx}#blockExplorerUrl`)):(this.context.trackEvent({category:metametrics.ci.Transactions,event:"Clicked Block Explorer Link",properties:{link_type:"Transaction Block Explorer",action:"Transaction Details",block_explorer_domain:(0,util.Cs)(blockExplorerLink)}}),__webpack_require__.g.platform.openTab({url:blockExplorerLink}))})),transaction_list_item_details_component_defineProperty(this,"handleCancel",(event=>{const{onCancel,onClose}=this.props;onCancel(event),onClose()})),transaction_list_item_details_component_defineProperty(this,"handleRetry",(event=>{const{onClose,onRetry}=this.props;onRetry(event),onClose()})),transaction_list_item_details_component_defineProperty(this,"handleCopyTxId",(()=>{const{transactionGroup}=this.props,{primaryTransaction:transaction}=transactionGroup,{hash}=transaction;this.context.trackEvent({category:metametrics.ci.Navigation,event:"Copied Transaction ID",properties:{action:"Activity Log",legacy_event:!0}}),this.setState({justCopied:!0},(()=>{copy_to_clipboard_default()(hash,copy.K),setTimeout((()=>this.setState({justCopied:!1})),time.sh)}))})),transaction_list_item_details_component_defineProperty(this,"getCustodianTransactionDeepLink",(async(address,custodyId)=>{const{getCustodianTransactionDeepLink}=this.props,custodyTransactionDeepLink=await getCustodianTransactionDeepLink(address,custodyId);custodyTransactionDeepLink&&this._mounted&&this.setState({custodyTransactionDeepLink})}))}componentDidMount(){var _transactionGroup$pri;const{recipientAddress,tryReverseResolveAddress,selectedAccount,transactionGroup}=this.props;this._mounted=!0;const address=null==selectedAccount?void 0:selectedAccount.address,custodyId=null==transactionGroup||null===(_transactionGroup$pri=transactionGroup.primaryTransaction)||void 0===_transactionGroup$pri?void 0:_transactionGroup$pri.custodyId;this._mounted&&address&&custodyId&&this.getCustodianTransactionDeepLink(address,custodyId),recipientAddress&&tryReverseResolveAddress(recipientAddress)}componentWillUnmount(){this._mounted=!1}render(){const{t}=this.context,{justCopied,custodyTransactionDeepLink}=this.state,{transactionGroup,primaryCurrency,showSpeedUp,showRetry,recipientEns,recipientAddress,recipientName,recipientMetadataName,senderAddress,isEarliestNonce,senderNickname,title,onClose,recipientNickname,showCancel,transactionStatus:TransactionStatus,blockExplorerLinkText,transactionNote}=this.props,{primaryTransaction:transaction,initialTransaction:{type}}=transactionGroup,{hash}=transaction;return react.createElement(popover.Z,{title,onClose},react.createElement("div",{className:"transaction-list-item-details"},react.createElement("div",{className:"transaction-list-item-details__operations"},react.createElement("div",{className:"transaction-list-item-details__header-buttons"},showSpeedUp&&react.createElement(ui_button.Z,{type:"primary",onClick:this.handleRetry,className:"transaction-list-item-details__header-button-rounded-button","data-testid":"speedup-button"},t("speedUp")),showCancel&&react.createElement(cancel_button.Z,{transaction,cancelTransaction:this.handleCancel,detailsModal:!0}),showRetry&&react.createElement(tooltip.Z,{title:t("retryTransaction")},react.createElement(ui_button.Z,{type:"raised",onClick:this.handleRetry,className:"transaction-list-item-details__header-button","data-testid":"rety-button"},react.createElement("i",{className:"fa fa-sync"}))))),react.createElement("div",{className:"transaction-list-item-details__header"},react.createElement("div",{className:"transaction-list-item-details__tx-status","data-testid":"transaction-list-item-details-tx-status"},react.createElement("div",null,t("status")),react.createElement("div",null,react.createElement(TransactionStatus,null))),react.createElement("div",{className:"transaction-list-item-details__tx-hash"},react.createElement("div",null,react.createElement(ui_button.Z,{type:"link",onClick:this.handleBlockExplorerClick,disabled:!hash},"addBlockExplorer"===blockExplorerLinkText.firstPart?t("addBlockExplorer"):t("viewOnBlockExplorer"))),react.createElement("div",null,react.createElement(tooltip.Z,{wrapperClassName:"transaction-list-item-details__header-button",containerClassName:"transaction-list-item-details__header-button-tooltip-container",title:justCopied?t("copiedExclamation"):null},react.createElement(ui_button.Z,{type:"link",onClick:this.handleCopyTxId,disabled:!hash},t("copyTransactionId")))),custodyTransactionDeepLink&&custodyTransactionDeepLink.url&&react.createElement(tooltip.Z,{wrapperClassName:"transaction-list-item-details__header-button",containerClassName:"transaction-list-item-details__header-button-tooltip-container",title:t("viewinCustodianApp")},react.createElement(ui_button.Z,{type:"raised",onClick:()=>{window.open(custodyTransactionDeepLink.url)}},react.createElement(component_library.JO,{name:component_library.uH.Custody,color:design_system.EY.primaryDefault}))))),react.createElement("div",{className:"transaction-list-item-details__body"},react.createElement("div",{className:"transaction-list-item-details__sender-to-recipient-header"},react.createElement("div",null,t("from")),react.createElement("div",null,t("to"))),react.createElement("div",{className:"transaction-list-item-details__sender-to-recipient-container"},react.createElement(sender_to_recipient.Z,{warnUserOnAccountMismatch:!1,variant:sender_to_recipient_constants.Sz,addressOnly:!0,recipientEns,recipientAddress,recipientNickname,recipientName,recipientMetadataName,senderName:senderNickname,senderAddress,onRecipientClick:()=>{this.context.trackEvent({category:metametrics.ci.Navigation,event:'Copied "To" Address',properties:{action:"Activity Log",legacy_event:!0}})},onSenderClick:()=>{this.context.trackEvent({category:metametrics.ci.Navigation,event:'Copied "From" Address',properties:{action:"Activity Log",legacy_event:!0}})}})),react.createElement("div",{className:"transaction-list-item-details__cards-container"},react.createElement(transaction_breakdown_container,{nonce:transactionGroup.initialTransaction.txParams.nonce,isTokenApprove:type===transaction_controller_dist.TransactionType.tokenMethodApprove||type===transaction_controller_dist.TransactionType.tokenMethodSetApprovalForAll,transaction,primaryCurrency,className:"transaction-list-item-details__transaction-breakdown"}),transactionNote&&0!==transactionNote.length&&react.createElement(component_library.xu,{className:"transaction-list-item-details__transaction-breakdown"},react.createElement(component_library.xv,{as:"h4",className:"transaction-breakdown__title"},t("transactionNote")),react.createElement(component_library.xv,{as:"p",className:"transaction-breakdown__description"},transactionNote)),transactionGroup.initialTransaction.type!==transaction_controller_dist.TransactionType.incoming&&react.createElement(disclosure.Z,{title:t("activityLog"),size:"small"},react.createElement(transaction_activity_log_container,{transactionGroup,className:"transaction-list-item-details__transaction-activity-log",onCancel:this.handleCancel,onRetry:this.handleRetry,isEarliestNonce}))))))}}transaction_list_item_details_component_defineProperty(TransactionListItemDetails,"contextTypes",{t:prop_types_default().func,trackEvent:prop_types_default().func}),transaction_list_item_details_component_defineProperty(TransactionListItemDetails,"defaultProps",{recipientEns:null}),transaction_list_item_details_component_defineProperty(TransactionListItemDetails,"propTypes",{onCancel:prop_types_default().func,onRetry:prop_types_default().func,showCancel:prop_types_default().bool,showSpeedUp:prop_types_default().bool,showRetry:prop_types_default().bool,isEarliestNonce:prop_types_default().bool,primaryCurrency:prop_types_default().string,transactionGroup:prop_types_default().object,title:prop_types_default().string.isRequired,onClose:prop_types_default().func.isRequired,recipientEns:prop_types_default().string,recipientAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientMetadataName:prop_types_default().string,rpcPrefs:prop_types_default().object,senderAddress:prop_types_default().string.isRequired,tryReverseResolveAddress:prop_types_default().func.isRequired,senderNickname:prop_types_default().string.isRequired,recipientNickname:prop_types_default().string,transactionStatus:prop_types_default().func,isCustomNetwork:prop_types_default().bool,history:prop_types_default().object,blockExplorerLinkText:prop_types_default().object,getCustodianTransactionDeepLink:prop_types_default().func,selectedAccount:prop_types_default().object,transactionNote:prop_types_default().string}),TransactionListItemDetails.__docgenInfo={description:"",methods:[{name:"handleBlockExplorerClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleCancel",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleRetry",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleCopyTxId",docblock:null,modifiers:[],params:[],returns:null},{name:"getCustodianTransactionDeepLink",docblock:null,modifiers:["async"],params:[{name:"address",type:null},{name:"custodyId",type:null}],returns:null}],displayName:"TransactionListItemDetails",props:{recipientEns:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},onCancel:{description:"",type:{name:"func"},required:!1},onRetry:{description:"",type:{name:"func"},required:!1},showCancel:{description:"",type:{name:"bool"},required:!1},showSpeedUp:{description:"",type:{name:"bool"},required:!1},showRetry:{description:"",type:{name:"bool"},required:!1},isEarliestNonce:{description:"",type:{name:"bool"},required:!1},primaryCurrency:{description:"",type:{name:"string"},required:!1},transactionGroup:{description:"",type:{name:"object"},required:!1},title:{description:"",type:{name:"string"},required:!0},onClose:{description:"",type:{name:"func"},required:!0},recipientAddress:{description:"",type:{name:"string"},required:!1},recipientName:{description:"",type:{name:"string"},required:!1},recipientMetadataName:{description:"",type:{name:"string"},required:!1},rpcPrefs:{description:"",type:{name:"object"},required:!1},senderAddress:{description:"",type:{name:"string"},required:!0},tryReverseResolveAddress:{description:"",type:{name:"func"},required:!0},senderNickname:{description:"",type:{name:"string"},required:!0},recipientNickname:{description:"",type:{name:"string"},required:!1},transactionStatus:{description:"",type:{name:"func"},required:!1},isCustomNetwork:{description:"",type:{name:"bool"},required:!1},history:{description:"",type:{name:"object"},required:!1},blockExplorerLinkText:{description:"",type:{name:"object"},required:!1},getCustodianTransactionDeepLink:{description:"",type:{name:"func"},required:!1},selectedAccount:{description:"",type:{name:"object"},required:!1},transactionNote:{description:"",type:{name:"string"},required:!1}},context:{t:{type:{name:"func"},required:!1},trackEvent:{type:{name:"func"},required:!1}}};const transaction_list_item_details_container=(0,redux.compose)(react_router.EN,(0,es.$j)(((state,ownProps)=>{var _ownProps$transaction,_ownProps$transaction2;const{recipientAddress,senderAddress}=ownProps;let recipientEns;if(recipientAddress){const address=(0,hexstring_utils.QG)(recipientAddress);recipientEns=(0,selectors.HZz)(state,address)}const addressBook=(0,selectors.vZs)(state),accounts=(0,selectors.GlL)(state),recipientName=(0,selectors.PyB)(accounts,recipientAddress),recipientMetadataName=(0,selectors.lxl)(state,recipientAddress),getNickName=address=>{const entry=addressBook.find((contact=>address.toLowerCase()===contact.address.toLowerCase()));return entry&&entry.name||""},rpcPrefs=(0,selectors.Kzx)(state),isCustomNetwork=(0,selectors.Lii)(state),data=null===(_ownProps$transaction=ownProps.transactionGroup)||void 0===_ownProps$transaction||null===(_ownProps$transaction=_ownProps$transaction.primaryTransaction)||void 0===_ownProps$transaction||null===(_ownProps$transaction=_ownProps$transaction.txParams)||void 0===_ownProps$transaction?void 0:_ownProps$transaction.data,methodData=(0,selectors.LO0)(state,data)||{},transactionNote=null===(_ownProps$transaction2=ownProps.transactionGroup)||void 0===_ownProps$transaction2||null===(_ownProps$transaction2=_ownProps$transaction2.primaryTransaction)||void 0===_ownProps$transaction2||null===(_ownProps$transaction2=_ownProps$transaction2.metadata)||void 0===_ownProps$transaction2?void 0:_ownProps$transaction2.note;return{rpcPrefs,recipientEns,senderNickname:getNickName(senderAddress),recipientNickname:recipientAddress?getNickName(recipientAddress):null,isCustomNetwork,blockExplorerLinkText:(0,selectors.L$2)(state),recipientName,recipientMetadataName,methodData,transactionNote,selectedAccount:(0,selectors.E7u)(state)}}),(dispatch=>{const mmiActions=(0,institution_background.I6)();return{tryReverseResolveAddress:address=>dispatch((0,actions.DNX)(address)),getCustodianTransactionDeepLink:(address,txId)=>dispatch(mmiActions.getCustodianTransactionDeepLink(address,txId))}})))(TransactionListItemDetails)},"./ui/components/app/transaction-list-item/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>transaction_list_item_component});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),dist=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),useTransactionDisplayData=__webpack_require__("./ui/hooks/useTransactionDisplayData.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),transaction_list_item_details=__webpack_require__("./ui/components/app/transaction-list-item-details/index.js"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),time=__webpack_require__("./shared/constants/time.ts");var transaction_status_label=__webpack_require__("./ui/components/app/transaction-status-label/transaction-status-label.js"),transaction_icon=__webpack_require__("./ui/components/app/transaction-icon/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),transaction=__webpack_require__("./shared/constants/transaction.ts"),gas=__webpack_require__("./shared/constants/gas.ts"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),transaction_modal=__webpack_require__("./ui/contexts/transaction-modal.js"),selectors=__webpack_require__("./ui/selectors/index.js"),transactions_util=__webpack_require__("./ui/helpers/utils/transactions.util.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),ui_button=__webpack_require__("./ui/components/ui/button/index.js"),advanced_gas_fee_popover=__webpack_require__("./ui/components/app/advanced-gas-fee-popover/index.js"),cancel_button=__webpack_require__("./ui/components/app/cancel-button/index.js"),cancel_speedup_popover=__webpack_require__("./ui/components/app/cancel-speedup-popover/cancel-speedup-popover.js"),edit_gas_fee_popover=__webpack_require__("./ui/components/app/edit-gas-fee-popover/edit-gas-fee-popover.js"),edit_gas_popover=__webpack_require__("./ui/components/app/edit-gas-popover/index.js"),contexts_metametrics=__webpack_require__("./ui/contexts/metametrics.js"),multichain=__webpack_require__("./ui/components/multichain/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function TransactionListItemInner({transactionGroup,setEditGasMode,isEarliestNonce=!1}){var _currentChain$rpcPref;const t=(0,useI18nContext.C)(),history=(0,react_router.k6)(),{hasCancelled}=transactionGroup,[showDetails,setShowDetails]=(0,react.useState)(!1),[showCancelEditGasPopover,setShowCancelEditGasPopover]=(0,react.useState)(!1),[showRetryEditGasPopover,setShowRetryEditGasPopover]=(0,react.useState)(!1),{supportsEIP1559}=(0,gasFee.YJ)(),{openModal}=(0,transaction_modal.y8)(),testNetworkBackgroundColor=(0,es.v9)(selectors.Rm7),{initialTransaction:{id},primaryTransaction:{error,status}}=transactionGroup,trackEvent=(0,react.useContext)(contexts_metametrics.Wd),retryTransaction=(0,react.useCallback)((async event=>{event.stopPropagation(),trackEvent({event:'Clicked "Speed Up"',category:metametrics.ci.Navigation,properties:{action:"Activity Log",legacy_event:!0}}),supportsEIP1559?(setEditGasMode(gas.G_.speedUp),openModal("cancelSpeedUpTransaction")):setShowRetryEditGasPopover(!0)}),[openModal,setEditGasMode,trackEvent,supportsEIP1559]),cancelTransaction=(0,react.useCallback)((event=>{event.stopPropagation(),trackEvent({event:'Clicked "Cancel"',category:metametrics.ci.Navigation,properties:{action:"Activity Log",legacy_event:!0}}),supportsEIP1559?(setEditGasMode(gas.G_.cancel),openModal("cancelSpeedUpTransaction")):setShowCancelEditGasPopover(!0)}),[trackEvent,openModal,setEditGasMode,supportsEIP1559]),shouldShowSpeedUp=function useShouldShowSpeedUp(transactionGroup,isEarliestNonce){const{transactions,hasRetried}=transactionGroup,[earliestTransaction={}]=transactions,{submittedTime}=earliestTransaction,[speedUpEnabled,setSpeedUpEnabled]=(0,react.useState)((()=>Date.now()-submittedTime>5e3&&isEarliestNonce&&!hasRetried));return(0,react.useEffect)((()=>{let timeoutId;return hasRetried||!isEarliestNonce||speedUpEnabled||(Date.now()-submittedTime>5*time.sh?setSpeedUpEnabled(!0):timeoutId=setTimeout((()=>{setSpeedUpEnabled(!0),clearTimeout(timeoutId)}),5001-(Date.now()-submittedTime))),()=>{timeoutId&&clearTimeout(timeoutId)}}),[submittedTime,speedUpEnabled,hasRetried,isEarliestNonce]),speedUpEnabled}(transactionGroup,isEarliestNonce),{title,category,primaryCurrency,recipientAddress,secondaryCurrency,displayedStatusKey,isPending,senderAddress}=(0,useTransactionDisplayData.i)(transactionGroup),date=(0,util.sK)(transactionGroup.primaryTransaction.time,"MMM d, y","MMM d"),isSignatureReq=category===transaction.Bd.signatureRequest,isApproval=category===transaction.Bd.approval,isUnapproved=status===dist.TransactionStatus.unapproved,isSwap=category===transaction.Bd.swap,isCustodian=Boolean(transactionGroup.primaryTransaction.custodyId),className=classnames_default()("transaction-list-item",{"transaction-list-item--unconfirmed":isPending||[dist.TransactionStatus.failed,dist.TransactionStatus.dropped,dist.TransactionStatus.rejected].includes(displayedStatusKey)}),toggleShowDetails=(0,react.useCallback)((()=>{isUnapproved?history.push(`${routes.zq}/${id}`):setShowDetails((prev=>(trackEvent({event:prev?metametrics.AW.ActivityDetailsClosed:metametrics.AW.ActivityDetailsOpened,category:metametrics.ci.Navigation,properties:{activity_type:category}}),!prev)))}),[isUnapproved,history,id,trackEvent,category]),debugTransactionMeta={"data-hash":transactionGroup.primaryTransaction.hash,...isCustodian?{"data-custodiantransactionid":transactionGroup.primaryTransaction.custodyId}:{}},speedUpButton=(0,react.useMemo)((()=>isCustodian?null:shouldShowSpeedUp&&isPending&&!isUnapproved?react.createElement(ui_button.Z,{type:"primary",onClick:hasCancelled?cancelTransaction:retryTransaction,style:hasCancelled?{width:"auto"}:null},t(hasCancelled?"speedUpCancellation":"speedUp")):null),[shouldShowSpeedUp,isUnapproved,t,isPending,hasCancelled,retryTransaction,cancelTransaction,isCustodian]),currentChain=(0,es.v9)(selectors.t4u);let showCancelButton=!hasCancelled&&isPending&&!isUnapproved;showCancelButton=showCancelButton&&!isCustodian;const PENDING_COLOR=design_system.EY.iconAlternative,OK_COLOR=design_system.EY.primaryDefault,FAIL_COLOR=design_system.EY.errorDefault;return react.createElement(react.Fragment,null,react.createElement(multichain.mz,{"data-testid":"activity-list-item",onClick:toggleShowDetails,className,title,icon:isCustodian?react.createElement(component_library.xu,{style:{position:"relative"},"data-testid":"custody-icon"},react.createElement(transaction_icon.Z,{category,status:displayedStatusKey}),react.createElement(component_library.JO,{"data-testid":"custody-icon-badge",name:component_library.uH.Custody,className:"transaction-list-item__icon-badge",color:(tsStatus=>{switch(tsStatus){case dist.TransactionStatus.signed:return PENDING_COLOR;case dist.TransactionStatus.rejected:case dist.TransactionStatus.failed:case dist.TransactionStatus.dropped:return FAIL_COLOR;default:return OK_COLOR}})(status),size:component_library.Jh.Xs})):react.createElement(component_library.MF,{anchorElementShape:component_library.o4.circular,positionObj:{top:-4,right:-4},display:design_system.sS.Block,badge:react.createElement(component_library.OQ,{className:"activity-tx__network-badge","data-testid":"activity-tx-network-badge",size:component_library.NI.Xs,name:null==currentChain?void 0:currentChain.nickname,src:null==currentChain||null===(_currentChain$rpcPref=currentChain.rpcPrefs)||void 0===_currentChain$rpcPref?void 0:_currentChain$rpcPref.imageUrl,borderWidth:1,borderColor:design_system.lP.backgroundDefault,backgroundColor:testNetworkBackgroundColor})},react.createElement(transaction_icon.Z,{category,status:displayedStatusKey})),subtitle:react.createElement(transaction_status_label.Z,{statusOnly:!0,isPending,isEarliestNonce,error,date,status:displayedStatusKey,custodyStatus:transactionGroup.primaryTransaction.custodyStatus,custodyStatusDisplayText:transactionGroup.primaryTransaction.custodyStatusDisplayText}),rightContent:!isSignatureReq&&!isApproval&&react.createElement(react.Fragment,null,react.createElement(component_library.xv,{variant:design_system.rK.bodyLgMedium,fontWeight:design_system.U9.Medium,color:design_system.Il.textDefault,title:primaryCurrency,textAlign:design_system.PH.Right,"data-testid":"transaction-list-item-primary-currency",className:"activity-list-item__primary-currency",ellipsis:!0},primaryCurrency),react.createElement(component_library.xv,{variant:design_system.rK.bodyMd,color:design_system.Il.textAlternative,textAlign:design_system.PH.Right,"data-testid":"transaction-list-item-secondary-currency"},secondaryCurrency))},react.createElement(component_library.xu,{paddingTop:4,className:"transaction-list-item__pending-actions"},showCancelButton&&react.createElement(cancel_button.Z,{"data-testid":"cancel-button",transaction:transactionGroup.primaryTransaction,cancelTransaction}),speedUpButton),react.createElement("a",_extends({},debugTransactionMeta,{className:"test-transaction-meta"}))),showDetails&&react.createElement(transaction_list_item_details.Z,{title,onClose:toggleShowDetails,transactionGroup,primaryCurrency,senderAddress,recipientAddress,onRetry:retryTransaction,showRetry:!isCustodian&&status===dist.TransactionStatus.failed&&!isSwap,showSpeedUp:!isCustodian&&shouldShowSpeedUp,isEarliestNonce,onCancel:cancelTransaction,showCancel:!isCustodian&&isPending&&!hasCancelled,transactionStatus:()=>react.createElement(transaction_status_label.Z,{isPending,isEarliestNonce,error,date,status:displayedStatusKey,statusOnly:!0,custodyStatus:transactionGroup.primaryTransaction.custodyStatus,custodyStatusDisplayText:transactionGroup.primaryTransaction.custodyStatusDisplayText})}),!supportsEIP1559&&showRetryEditGasPopover&&react.createElement(edit_gas_popover.Z,{onClose:()=>setShowRetryEditGasPopover(!1),mode:gas.G_.speedUp,transaction:transactionGroup.primaryTransaction}),!supportsEIP1559&&showCancelEditGasPopover&&react.createElement(edit_gas_popover.Z,{onClose:()=>setShowCancelEditGasPopover(!1),mode:gas.G_.cancel,transaction:transactionGroup.primaryTransaction}))}TransactionListItemInner.propTypes={transactionGroup:prop_types_default().object.isRequired,isEarliestNonce:prop_types_default().bool,setEditGasMode:prop_types_default().func};const TransactionListItem=props=>{const{transactionGroup}=props,[editGasMode,setEditGasMode]=(0,react.useState)(),transaction=transactionGroup.primaryTransaction,supportsEIP1559=(0,es.v9)(selectors.mVn)&&!(0,transactions_util.h0)(null==transaction?void 0:transaction.txParams),isCustodian=Boolean(transactionGroup.primaryTransaction.custodyId);return react.createElement(gasFee.Po,{transaction:transactionGroup.primaryTransaction,editGasMode},react.createElement(transaction_modal.rj,null,react.createElement(TransactionListItemInner,_extends({},props,{setEditGasMode})),supportsEIP1559&&react.createElement(react.Fragment,null,!isCustodian&&react.createElement(cancel_speedup_popover.Z,null),react.createElement(edit_gas_fee_popover.Z,null),react.createElement(advanced_gas_fee_popover.Z,null))))};TransactionListItem.propTypes={transactionGroup:prop_types_default().object.isRequired},TransactionListItem.__docgenInfo={description:"",methods:[],displayName:"TransactionListItem",props:{transactionGroup:{description:"",type:{name:"object"},required:!0}}};const transaction_list_item_component=TransactionListItem},"./ui/components/app/transaction-status-label/transaction-status-label.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>TransactionStatusLabel});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),_ui_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/hooks/useI18nContext.js"),_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/constants/transaction.ts");const QUEUED_PSEUDO_STATUS="queued",pendingStatusHash={[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.submitted]:_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.Ss.pending,[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.approved]:_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.Ss.pending,[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.signed]:_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.Ss.pending},statusToClassNameHash={[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.unapproved]:"transaction-status-label--unapproved",[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.rejected]:"transaction-status-label--rejected",[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.failed]:"transaction-status-label--failed",[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.dropped]:"transaction-status-label--dropped",[_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.Ss.cancelled]:"transaction-status-label--cancelled",[QUEUED_PSEUDO_STATUS]:"transaction-status-label--queued",[_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.Ss.pending]:"transaction-status-label--pending",inCustody:"transaction-status--custodian"};function TransactionStatusLabel({status,date,error,isEarliestNonce,className,statusOnly,custodyStatus,custodyStatusDisplayText}){var _error$rpc;const t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__.C)();let tooltipText=(null==error||null===(_error$rpc=error.rpc)||void 0===_error$rpc?void 0:_error$rpc.message)||(null==error?void 0:error.message),statusKey=status;pendingStatusHash[status]&&(statusKey=isEarliestNonce?_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.Ss.pending:QUEUED_PSEUDO_STATUS);let statusText=statusKey&&t(statusKey);return statusText=custodyStatusDisplayText||t(statusKey),statusKey!==_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_2__.TransactionStatus.confirmed||statusOnly||(statusText=date),custodyStatus&&(error?(tooltipText=error.message,statusText="aborted"===custodyStatus?custodyStatusDisplayText:t("snapResultError")):(tooltipText=custodyStatusDisplayText||custodyStatus,statusText=custodyStatusDisplayText||custodyStatus)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_tooltip__WEBPACK_IMPORTED_MODULE_3__.Z,{position:"top",title:tooltipText,wrapperClassName:classnames__WEBPACK_IMPORTED_MODULE_1___default()("transaction-status-label",`transaction-status-label--${statusKey}`,className,statusToClassNameHash[statusKey])},statusText)}TransactionStatusLabel.propTypes={status:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,date:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,error:prop_types__WEBPACK_IMPORTED_MODULE_6___default().object,isEarliestNonce:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,statusOnly:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool,custodyStatus:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,custodyStatusDisplayText:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string},TransactionStatusLabel.__docgenInfo={description:"",methods:[],displayName:"TransactionStatusLabel",props:{status:{description:"",type:{name:"string"},required:!1},className:{description:"",type:{name:"string"},required:!1},date:{description:"",type:{name:"string"},required:!1},error:{description:"",type:{name:"object"},required:!1},isEarliestNonce:{description:"",type:{name:"bool"},required:!1},statusOnly:{description:"",type:{name:"bool"},required:!1},custodyStatus:{description:"",type:{name:"string"},required:!1},custodyStatusDisplayText:{description:"",type:{name:"string"},required:!1}}}},"./ui/components/ui/hex-to-decimal/hex-to-decimal.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>HexToDecimal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/modules/conversion.utils.ts");class HexToDecimal extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{render(){const{className,value}=this.props,decimalValue=(0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_1__.Z8)(value);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className},decimalValue)}}!function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(HexToDecimal,"propTypes",{className:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,value:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string}),HexToDecimal.__docgenInfo={description:"",methods:[],displayName:"HexToDecimal",props:{className:{description:"",type:{name:"string"},required:!1},value:{description:"",type:{name:"string"},required:!1}}}},"./ui/hooks/useTransactionDisplayData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>useTransactionDisplayData});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),selectors=__webpack_require__("./ui/selectors/selectors.js"),transactions_util=__webpack_require__("./ui/helpers/utils/transactions.util.js");var common=__webpack_require__("./ui/helpers/constants/common.ts"),token_util=__webpack_require__("./ui/helpers/utils/token-util.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),transactions=__webpack_require__("./ui/helpers/constants/transactions.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),transaction=__webpack_require__("./shared/constants/transaction.ts"),actions=__webpack_require__("./ui/store/actions.ts"),string_utils=__webpack_require__("./shared/modules/string-utils.ts"),metamask_controller_utils=__webpack_require__("./shared/lib/metamask-controller-utils.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),useTokenFiatAmount=__webpack_require__("./ui/hooks/useTokenFiatAmount.js"),useUserPreferencedCurrency=__webpack_require__("./ui/hooks/useUserPreferencedCurrency.js"),useCurrencyDisplay=__webpack_require__("./ui/hooks/useCurrencyDisplay.js"),transactions_controller_utils=__webpack_require__("./shared/lib/transactions-controller-utils.js"),transaction_utils=__webpack_require__("./shared/modules/transaction.utils.js");function useTokenData(transactionData,isTokenTransaction=!0){return(0,react.useMemo)((()=>isTokenTransaction&&transactionData?(0,transaction_utils.I1)(transactionData):null),[isTokenTransaction,transactionData])}var swaps_utils=__webpack_require__("./shared/modules/swaps.utils.js"),ui_selectors=__webpack_require__("./ui/selectors/index.js");var react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),swaps=__webpack_require__("./shared/constants/swaps.ts");const signatureTypes=[null,void 0,dist.TransactionType.sign,dist.TransactionType.personalSign,dist.TransactionType.signTypedData,dist.TransactionType.ethDecrypt,dist.TransactionType.ethGetEncryptionPublicKey];function useTransactionDisplayData(transactionGroup){var _primaryTransaction$t,_initialTransaction$t3,_initialTransaction$t4,_primaryTransaction$t2,_token,_token2,_initialTransaction$m,_token3;const dispatch=(0,es.I0)(),currentAsset=function useCurrentAsset(){var _match$params;const match=(0,react_router.$B)({path:`${routes.Qv}/:asset`,exact:!0,strict:!0}),tokenAddress=null==match||null===(_match$params=match.params)||void 0===_match$params?void 0:_match$params.asset,knownTokens=(0,es.v9)(metamask.lz),token=tokenAddress&&knownTokens.find((({address})=>(0,string_utils.J)(address,tokenAddress))),chainId=(0,es.v9)(ui_selectors.BVZ);return token??(swaps.gG[chainId]||swaps.hE)}(),knownTokens=(0,es.v9)(metamask.lz),knownNfts=(0,es.v9)(metamask.J8),detectedTokens=(0,es.v9)(selectors.Tl8)||[],tokenList=(0,es.v9)(selectors.HJ),t=(0,useI18nContext.C)(),{initialTransaction,primaryTransaction}=transactionGroup,{type}=initialTransaction,{from:senderAddress,to}=initialTransaction.txParams||{},methodData=(0,es.v9)((state=>{var _initialTransaction$t;return(0,selectors.LO0)(state,null==initialTransaction||null===(_initialTransaction$t=initialTransaction.txParams)||void 0===_initialTransaction$t?void 0:_initialTransaction$t.data)}))||{},displayedStatusKey=(0,transactions_util.bN)(primaryTransaction),isPending=displayedStatusKey in transactions.u3,isSubmitted=displayedStatusKey===dist.TransactionStatus.submitted,primaryValue=null===(_primaryTransaction$t=primaryTransaction.txParams)||void 0===_primaryTransaction$t?void 0:_primaryTransaction$t.value,date=(0,util.sK)(initialTransaction.time);let subtitle,prefix="-",subtitleContainsOrigin=!1,recipientAddress=to;const isTokenCategory=transactions.q[type];let token=null;const[currentAssetDetails,setCurrentAssetDetails]=(0,react.useState)(null);isTokenCategory&&(token=knownTokens.find((({address})=>(0,string_utils.J)(address,recipientAddress)))||detectedTokens.find((({address})=>(0,string_utils.J)(address,recipientAddress)))||tokenList[recipientAddress.toLowerCase()]),(0,react.useEffect)((()=>{!async function getAndSetAssetDetails(){if(isTokenCategory&&!token){var _initialTransaction$t2;const assetDetails=await(0,token_util.uI)(to,senderAddress,null==initialTransaction||null===(_initialTransaction$t2=initialTransaction.txParams)||void 0===_initialTransaction$t2?void 0:_initialTransaction$t2.data,knownNfts);setCurrentAssetDetails(assetDetails)}}()}),[isTokenCategory,token,recipientAddress,senderAddress,null==initialTransaction||null===(_initialTransaction$t3=initialTransaction.txParams)||void 0===_initialTransaction$t3?void 0:_initialTransaction$t3.data,knownNfts,to]),currentAssetDetails&&(token={address:currentAssetDetails.toAddress,symbol:currentAssetDetails.symbol,decimals:currentAssetDetails.decimals});const tokenData=useTokenData(null==initialTransaction||null===(_initialTransaction$t4=initialTransaction.txParams)||void 0===_initialTransaction$t4?void 0:_initialTransaction$t4.data,isTokenCategory),transactionDataTokenId=(0,token_util.C5)(tokenData)??(0,metamask_controller_utils.d)(tokenData),nft=isTokenCategory&&knownNfts.find((({address,tokenId})=>(0,string_utils.J)(address,recipientAddress)&&tokenId===transactionDataTokenId)),tokenDisplayValue=function useTokenDisplayValue(transactionData,token,isTokenTransaction=!0){const tokenData=useTokenData(transactionData,isTokenTransaction),tokenValue=(0,metamask_controller_utils.d)(tokenData),shouldCalculateTokenValue=Boolean(isTokenTransaction&&transactionData&&token&&null!==token.decimals&&void 0!==token.decimals&&tokenValue);return(0,react.useMemo)((()=>shouldCalculateTokenValue?(0,transactions_controller_utils.cp)(tokenValue,token.decimals).toString(10):null),[shouldCalculateTokenValue,tokenValue,token])}(null==primaryTransaction||null===(_primaryTransaction$t2=primaryTransaction.txParams)||void 0===_primaryTransaction$t2?void 0:_primaryTransaction$t2.data,token,isTokenCategory),tokenFiatAmount=(0,useTokenFiatAmount.Q)(null===(_token=token)||void 0===_token?void 0:_token.address,tokenDisplayValue,null===(_token2=token)||void 0===_token2?void 0:_token2.symbol),origin=(0,util.qS)(initialTransaction.origin||(null===(_initialTransaction$m=initialTransaction.msgParams)||void 0===_initialTransaction$m?void 0:_initialTransaction$m.origin)||"");let category,title,primarySuffix=isTokenCategory?null===(_token3=token)||void 0===_token3?void 0:_token3.symbol:void 0,primaryDisplayValue=isTokenCategory?tokenDisplayValue:void 0,secondaryDisplayValue=isTokenCategory?tokenFiatAmount:void 0;const{swapTokenValue,isNegative,swapTokenFiatAmount,isViewingReceivedTokenFromSwap}=function useSwappedTokenValue(transactionGroup,currentAsset){const{symbol,decimals,address}=currentAsset,{primaryTransaction,initialTransaction}=transactionGroup,{type}=initialTransaction,{from:senderAddress}=initialTransaction.txParams||{},chainId=(0,es.v9)(ui_selectors.BVZ),isViewingReceivedTokenFromSwap=(null==currentAsset?void 0:currentAsset.symbol)===primaryTransaction.destinationTokenSymbol||(0,swaps_utils.N)(currentAsset.address,chainId)&&(0,swaps_utils.X)(primaryTransaction.destinationTokenSymbol,chainId),swapTokenValue=type===dist.TransactionType.swap&&isViewingReceivedTokenFromSwap?(0,transactions_controller_utils.lp)(primaryTransaction.destinationTokenSymbol,initialTransaction,address,senderAddress,decimals,null,chainId):type===dist.TransactionType.swap&&primaryTransaction.swapTokenValue,isNegative="string"==typeof swapTokenValue&&-1===Math.sign(swapTokenValue),_swapTokenFiatAmount=(0,useTokenFiatAmount.Q)(address,swapTokenValue||"",symbol);return{swapTokenValue,swapTokenFiatAmount:swapTokenValue&&isViewingReceivedTokenFromSwap&&_swapTokenFiatAmount,isViewingReceivedTokenFromSwap,isNegative}}(transactionGroup,currentAsset);if(signatureTypes.includes(type))category=transaction.Bd.signatureRequest,title=t("signatureRequest"),subtitle=origin,subtitleContainsOrigin=!0;else if(type===dist.TransactionType.swap)category=transaction.Bd.swap,title=t("swapTokenToToken",[initialTransaction.sourceTokenSymbol,initialTransaction.destinationTokenSymbol]),subtitle=origin,subtitleContainsOrigin=!0,primarySuffix=isViewingReceivedTokenFromSwap?currentAsset.symbol:initialTransaction.sourceTokenSymbol,primaryDisplayValue=swapTokenValue,secondaryDisplayValue=swapTokenFiatAmount,prefix=isNegative?"":isViewingReceivedTokenFromSwap?"+":"-";else if(type===dist.TransactionType.swapApproval)category=transaction.Bd.approval,title=t("swapApproval",[primaryTransaction.sourceTokenSymbol]),subtitle=origin,subtitleContainsOrigin=!0,primarySuffix=primaryTransaction.sourceTokenSymbol;else if(type===dist.TransactionType.tokenMethodApprove){var _token4;category=transaction.Bd.approval,prefix="",title=t("approveSpendingCap",[(null===(_token4=token)||void 0===_token4?void 0:_token4.symbol)||t("token").toLowerCase()]),subtitle=origin,subtitleContainsOrigin=!0}else if(type===dist.TransactionType.tokenMethodSetApprovalForAll){var _token5;category=transaction.Bd.approval,prefix="",title=t("setApprovalForAllTitle",[(null===(_token5=token)||void 0===_token5?void 0:_token5.symbol)||t("token")]),subtitle=origin,subtitleContainsOrigin=!0}else if(type===dist.TransactionType.contractInteraction){category=transaction.Bd.interaction;const transactionTypeTitle=(0,transactions_util.rm)(t,type);title=(null==methodData?void 0:methodData.name)&&function camelCaseToCapitalize(str=""){return str.replace(/([A-Z])/gu," $1").replace(/^./u,(s=>s.toUpperCase()))}(methodData.name)||transactionTypeTitle,subtitle=origin,subtitleContainsOrigin=!0}else if(type===dist.TransactionType.deployContract)category=transaction.Bd.interaction,title=(0,transactions_util.rm)(t,type),subtitle=origin,subtitleContainsOrigin=!0;else if(type===dist.TransactionType.incoming)category=transaction.Bd.receive,title=t("receive"),prefix="",subtitle=t("fromAddress",[(0,util.$Q)(senderAddress)]);else if(type===dist.TransactionType.tokenMethodTransferFrom||type===dist.TransactionType.tokenMethodTransfer){var _token6;category=transaction.Bd.send,title=t("sendSpecifiedTokens",[(null===(_token6=token)||void 0===_token6?void 0:_token6.symbol)||(null==nft?void 0:nft.name)||t("token")]),recipientAddress=(0,token_util.Qn)(tokenData),subtitle=t("toAddress",[(0,util.$Q)(recipientAddress)])}else type===dist.TransactionType.tokenMethodSafeTransferFrom?(category=transaction.Bd.send,title=t("safeTransferFrom"),recipientAddress=(0,token_util.Qn)(tokenData),subtitle=t("toAddress",[(0,util.$Q)(recipientAddress)])):type===dist.TransactionType.simpleSend?(category=transaction.Bd.send,title=t("send"),subtitle=t("toAddress",[(0,util.$Q)(recipientAddress)])):dispatch((0,actions.Qnr)(`useTransactionDisplayData does not recognize transaction type. Type received is: ${type}`));const primaryCurrencyPreferences=(0,useUserPreferencedCurrency.I)(common._8),secondaryCurrencyPreferences=(0,useUserPreferencedCurrency.I)(common.Vb),[primaryCurrency]=(0,useCurrencyDisplay._)(primaryValue,{prefix,displayValue:primaryDisplayValue,suffix:primarySuffix,...primaryCurrencyPreferences}),[secondaryCurrency]=(0,useCurrencyDisplay._)(primaryValue,{prefix,displayValue:secondaryDisplayValue,hideLabel:isTokenCategory||Boolean(swapTokenValue),...secondaryCurrencyPreferences});return{title,category,date,subtitle,subtitleContainsOrigin,primaryCurrency:type===dist.TransactionType.swap&&isPending?"":primaryCurrency,senderAddress,recipientAddress,secondaryCurrency:isTokenCategory&&!tokenFiatAmount||type===dist.TransactionType.swap&&!swapTokenFiatAmount?void 0:secondaryCurrency,displayedStatusKey,isPending,isSubmitted}}}}]);