/*! For license information please see 2950.1de046ff.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[2950],{"./node_modules/@metamask/object-multiplex/dist/ObjectMultiplex.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjectMultiplex=void 0;const readable_stream_1=__webpack_require__("./node_modules/readable-stream/readable-browser.js"),end_of_stream_1=__importDefault(__webpack_require__("./node_modules/end-of-stream/index.js")),once_1=__importDefault(__webpack_require__("./node_modules/once/once.js")),Substream_1=__webpack_require__("./node_modules/@metamask/object-multiplex/dist/Substream.js"),IGNORE_SUBSTREAM=Symbol("IGNORE_SUBSTREAM");class ObjectMultiplex extends readable_stream_1.Duplex{constructor(opts={}){super(Object.assign(Object.assign({},opts),{objectMode:!0})),this._substreams={}}createStream(name){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${name}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${name}" already ended`);if(!name)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[name])throw new Error(`ObjectMultiplex - Substream for name "${name}" already exists`);const substream=new Substream_1.Substream({parent:this,name});return this._substreams[name]=substream,function anyStreamEnd(stream,_cb){const cb=once_1.default(_cb);end_of_stream_1.default(stream,{readable:!1},cb),end_of_stream_1.default(stream,{writable:!1},cb)}(this,(_error=>substream.destroy(_error||void 0))),substream}ignoreStream(name){if(!name)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[name])throw new Error(`ObjectMultiplex - Substream for name "${name}" already exists`);this._substreams[name]=IGNORE_SUBSTREAM}_read(){}_write(chunk,_encoding,callback){const{name,data}=chunk;if(!name)return console.warn(`ObjectMultiplex - malformed chunk without name "${chunk}"`),callback();const substream=this._substreams[name];return substream?(substream!==IGNORE_SUBSTREAM&&substream.push(data),callback()):(console.warn(`ObjectMultiplex - orphaned data for stream "${name}"`),callback())}}exports.ObjectMultiplex=ObjectMultiplex},"./node_modules/@metamask/object-multiplex/dist/Substream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Substream=void 0;const readable_stream_1=__webpack_require__("./node_modules/readable-stream/readable-browser.js");class Substream extends readable_stream_1.Duplex{constructor({parent,name}){super({objectMode:!0}),this._parent=parent,this._name=name}_read(){}_write(chunk,_encoding,callback){this._parent.push({name:this._name,data:chunk}),callback()}}exports.Substream=Substream},"./node_modules/@metamask/object-multiplex/dist/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const ObjectMultiplex_1=__webpack_require__("./node_modules/@metamask/object-multiplex/dist/ObjectMultiplex.js");module.exports=ObjectMultiplex_1.ObjectMultiplex},"./node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BasePostMessageStream=void 0;const readable_stream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/readable-browser.js"),noop=()=>{};class BasePostMessageStream extends readable_stream_1.Duplex{constructor(){super({objectMode:!0}),this._init=!1,this._haveSyn=!1}_handshake(){this._write("SYN",null,noop),this.cork()}_onData(data){if(this._init)try{this.push(data)}catch(err){this.emit("error",err)}else"SYN"===data?(this._haveSyn=!0,this._write("ACK",null,noop)):"ACK"===data&&(this._init=!0,this._haveSyn||this._write("ACK",null,noop),this.uncork())}_read(){}_write(data,_encoding,cb){this._postMessage(data),cb()}}exports.BasePostMessageStream=BasePostMessageStream},"./node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerParentPostMessageStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebWorkerParentPostMessageStream=void 0;const BasePostMessageStream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"),utils_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/utils.js");class WebWorkerParentPostMessageStream extends BasePostMessageStream_1.BasePostMessageStream{constructor({worker}){super(),this._target=utils_1.DEDICATED_WORKER_NAME,this._worker=worker,this._worker.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(data){this._worker.postMessage({target:this._target,data})}_onMessage(event){const message=event.data;(0,utils_1.isValidStreamMessage)(message)&&this._onData(message.data)}_destroy(){this._worker.onmessage=null,this._worker=null}}exports.WebWorkerParentPostMessageStream=WebWorkerParentPostMessageStream},"./node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerPostMessageStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebWorkerPostMessageStream=void 0;const BasePostMessageStream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"),utils_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/utils.js");class WebWorkerPostMessageStream extends BasePostMessageStream_1.BasePostMessageStream{constructor(){if("undefined"==typeof self||"undefined"==typeof WorkerGlobalScope)throw new Error("WorkerGlobalScope not found. This class should only be instantiated in a WebWorker.");super(),this._name=utils_1.DEDICATED_WORKER_NAME,self.addEventListener("message",this._onMessage.bind(this)),this._handshake()}_postMessage(data){self.postMessage({data})}_onMessage(event){const message=event.data;(0,utils_1.isValidStreamMessage)(message)&&message.target===this._name&&this._onData(message.data)}_destroy(){}}exports.WebWorkerPostMessageStream=WebWorkerPostMessageStream},"./node_modules/@metamask/post-message-stream/dist/browser.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/post-message-stream/dist/window/WindowPostMessageStream.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerPostMessageStream.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerParentPostMessageStream.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/post-message-stream/dist/runtime/BrowserRuntimePostMessageStream.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"),exports)},"./node_modules/@metamask/post-message-stream/dist/runtime/BrowserRuntimePostMessageStream.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _BrowserRuntimePostMessageStream_name,_BrowserRuntimePostMessageStream_target,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserRuntimePostMessageStream=void 0;const BasePostMessageStream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"),utils_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/utils.js");class BrowserRuntimePostMessageStream extends BasePostMessageStream_1.BasePostMessageStream{constructor({name,target}){super(),_BrowserRuntimePostMessageStream_name.set(this,void 0),_BrowserRuntimePostMessageStream_target.set(this,void 0),__classPrivateFieldSet(this,_BrowserRuntimePostMessageStream_name,name,"f"),__classPrivateFieldSet(this,_BrowserRuntimePostMessageStream_target,target,"f"),this._onMessage=this._onMessage.bind(this),this._getRuntime().onMessage.addListener(this._onMessage),this._handshake()}_postMessage(data){this._getRuntime().sendMessage({target:__classPrivateFieldGet(this,_BrowserRuntimePostMessageStream_target,"f"),data})}_onMessage(message){(0,utils_1.isValidStreamMessage)(message)&&message.target===__classPrivateFieldGet(this,_BrowserRuntimePostMessageStream_name,"f")&&this._onData(message.data)}_getRuntime(){var _a,_b;if("chrome"in globalThis&&"function"==typeof(null===(_a=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===_a?void 0:_a.sendMessage))return chrome.runtime;if("browser"in globalThis&&"function"==typeof(null===(_b=null===browser||void 0===browser?void 0:browser.runtime)||void 0===_b?void 0:_b.sendMessage))return browser.runtime;throw new Error("browser.runtime.sendMessage is not a function. This class should only be instantiated in a web extension.")}_destroy(){this._getRuntime().onMessage.removeListener(this._onMessage)}}exports.BrowserRuntimePostMessageStream=BrowserRuntimePostMessageStream,_BrowserRuntimePostMessageStream_name=new WeakMap,_BrowserRuntimePostMessageStream_target=new WeakMap},"./node_modules/@metamask/post-message-stream/dist/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValidStreamMessage=exports.DEDICATED_WORKER_NAME=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/utils/dist/index.js");exports.DEDICATED_WORKER_NAME="dedicatedWorker",exports.isValidStreamMessage=function isValidStreamMessage(message){return(0,utils_1.isObject)(message)&&Boolean(message.data)&&("number"==typeof message.data||"object"==typeof message.data||"string"==typeof message.data)}},"./node_modules/@metamask/post-message-stream/dist/window/WindowPostMessageStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.WindowPostMessageStream=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/utils/dist/index.js"),BasePostMessageStream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"),utils_2=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/utils.js"),getSource=null===(_a=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"source"))||void 0===_a?void 0:_a.get;(0,utils_1.assert)(getSource,"MessageEvent.prototype.source getter is not defined.");const getOrigin=null===(_b=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"origin"))||void 0===_b?void 0:_b.get;(0,utils_1.assert)(getOrigin,"MessageEvent.prototype.origin getter is not defined.");class WindowPostMessageStream extends BasePostMessageStream_1.BasePostMessageStream{constructor({name,target,targetOrigin=location.origin,targetWindow=window}){if(super(),"undefined"==typeof window||"function"!=typeof window.postMessage)throw new Error("window.postMessage is not a function. This class should only be instantiated in a Window.");this._name=name,this._target=target,this._targetOrigin=targetOrigin,this._targetWindow=targetWindow,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1),this._handshake()}_postMessage(data){this._targetWindow.postMessage({target:this._target,data},this._targetOrigin)}_onMessage(event){const message=event.data;"*"!==this._targetOrigin&&getOrigin.call(event)!==this._targetOrigin||getSource.call(event)!==this._targetWindow||!(0,utils_2.isValidStreamMessage)(message)||message.target!==this._name||this._onData(message.data)}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}exports.WindowPostMessageStream=WindowPostMessageStream},"./node_modules/@metamask/post-message-stream/node_modules/process-nextick-args/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports=function nextTick(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick((function afterTickOne(){fn.call(null,arg1)}));case 3:return process.nextTick((function afterTickTwo(){fn.call(null,arg1,arg2)}));case 4:return process.nextTick((function afterTickThree(){fn.call(null,arg1,arg2,arg3)}));default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick((function afterTick(){fn.apply(null,args)}))}}:module.exports=process.nextTick},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var processNextTick=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/process-nextick-args/index.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=__webpack_require__("./node_modules/core-util-is/lib/util.js");util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js");var Readable=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_writable.js");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),processNextTick(cb,err)}},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_transform.js"),util=__webpack_require__("./node_modules/core-util-is/lib/util.js");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js"),processNextTick=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/process-nextick-args/index.js");module.exports=Readable;var Duplex,isArray=__webpack_require__("./node_modules/isarray/index.js");Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/events/events.js").EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/safe-buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var util=__webpack_require__("./node_modules/core-util-is/lib/util.js");util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js");var debugUtil=__webpack_require__("?1f20"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/BufferList.js"),destroyImpl=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/destroy.js");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){Duplex=Duplex||__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;null===chunk?(state.reading=!1,function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state)):(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));return er}(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront?state.endEmitted?stream.emit("error",new Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",new Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1));return function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/string_decoder/lib/string_decoder.js").s),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?processNextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,processNextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=function fromListPartial(n,list,hasStrings){var ret;n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?function copyFromBufferString(n,list){var p=list.head,c=1,ret=p.data;n-=ret.length;for(;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}(n,list):function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;p.data.copy(ret),n-=p.data.length;for(;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}(n,list);return ret}(n,state.buffer,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,processNextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?processNextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):processNextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,processNextTick(resume_,stream,state))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var state=this._readableState,paused=!1,self=this;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(self.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],self.emit.bind(self,kProxyEvents[n]));return self._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},self},Readable._fromList=fromList},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var Duplex=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"),util=__webpack_require__("./node_modules/core-util-is/lib/util.js");function TransformState(stream){this.afterTransform=function(er,data){return function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&stream.push(data);cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(er,data){done(stream,er,data)})):done(stream)}))}function done(stream,er,data){if(er)return stream.emit("error",er);null!=data&&stream.push(data);var ws=stream._writableState,ts=stream._transformState;if(ws.length)throw new Error("Calling transform done when ws.length != 0");if(ts.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this=this;Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2),_this.emit("close")}))}},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js"),processNextTick=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/process-nextick-args/index.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}(_this,state)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick;Writable.WritableState=WritableState;var util=__webpack_require__("./node_modules/core-util-is/lib/util.js");util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js");var internalUtil={deprecate:__webpack_require__("./node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/safe-buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/destroy.js");function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(processNextTick(cb,er),processNextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state)}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequestCount=0,state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(!function prefinish(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,processNextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||object&&object._writableState instanceof WritableState}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk)&&!state.objectMode;return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er),processNextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=new TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),processNextTick(cb,er),valid=!1),valid}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?processNextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/BufferList.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/safe-buffer/index.js").Buffer;module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function concat(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,src.copy(target,offset),i+=p.data.length,p=p.next;return ret},BufferList}()},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var processNextTick=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/process-nextick-args/index.js");function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;readableDestroyed||writableDestroyed?cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||processNextTick(emitErrorNT,this,err):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?(processNextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})))},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/events/events.js").EventEmitter},"./node_modules/@metamask/post-message-stream/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/@metamask/post-message-stream/node_modules/safe-buffer/index.js":(module,exports,__webpack_require__)=>{var buffer=__webpack_require__("./node_modules/buffer/index.js"),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},"./node_modules/@metamask/post-message-stream/node_modules/string_decoder/lib/string_decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/@metamask/post-message-stream/node_modules/safe-buffer/index.js").Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function normalizeEncoding(enc){var nenc=function _normalizeEncoding(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:-1}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function utf8CheckExtraBytes(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"�".repeat(p);if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"�".repeat(p+1);if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,"�".repeat(p+2)}}(this,buf,p);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.s=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"�".repeat(this.lastTotal-this.lastNeed):r},StringDecoder.prototype.text=function utf8Text(buf,i){var total=function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i)return 0;if(nb=utf8CheckByte(buf[j]),nb>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i)return 0;if(nb=utf8CheckByte(buf[j]),nb>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},"./node_modules/@metamask/snaps-controllers/dist/cronjob/CronjobController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _CronjobController_messenger,_CronjobController_dailyTimer,_CronjobController_timers,_CronjobController_snapIds,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CronjobController=exports.DAILY_TIMEOUT=void 0;const base_controller_1=__webpack_require__("./node_modules/@metamask/base-controller/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),__1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/index.js"),cronjob_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/cronjob.js"),Timer_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/Timer.js");exports.DAILY_TIMEOUT=(0,utils_1.inMilliseconds)(24,utils_1.Duration.Hour);class CronjobController extends base_controller_1.BaseControllerV2{constructor({messenger,state}){super({messenger,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...state}}),_CronjobController_messenger.set(this,void 0),_CronjobController_dailyTimer.set(this,void 0),_CronjobController_timers.set(this,void 0),_CronjobController_snapIds.set(this,void 0),__classPrivateFieldSet(this,_CronjobController_timers,new Map,"f"),__classPrivateFieldSet(this,_CronjobController_snapIds,new Map,"f"),__classPrivateFieldSet(this,_CronjobController_messenger,messenger,"f"),this._handleEventSnapInstalled=this._handleEventSnapInstalled.bind(this),this._handleEventSnapRemoved=this._handleEventSnapRemoved.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleEventSnapInstalled),this.messagingSystem.subscribe("SnapController:snapRemoved",this._handleEventSnapRemoved),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((error=>{(0,snaps_utils_1.logError)(error)}))}getAllJobs(){const snaps=this.messagingSystem.call("SnapController:getAll");return(0,__1.getRunnableSnaps)(snaps).map((snap=>this.getSnapJobs(snap.id))).flat().filter((job=>void 0!==job))}getSnapJobs(snapId){const permissions=__classPrivateFieldGet(this,_CronjobController_messenger,"f").call("PermissionController:getPermissions",snapId),permission=permissions?.[__1.SnapEndowments.Cronjob],definitions=(0,cronjob_1.getCronjobCaveatJobs)(permission);return definitions?.map(((definition,idx)=>({...definition,id:`${snapId}-${idx}`,snapId})))}register(snapId){const jobs=this.getSnapJobs(snapId);jobs?.forEach((job=>this.schedule(job)))}schedule(job){if(__classPrivateFieldGet(this,_CronjobController_timers,"f").has(job.id))return;const next=(0,snaps_utils_1.parseCronExpression)(job.expression).next(),now=new Date,ms=next.getTime()-now.getTime();if(ms>exports.DAILY_TIMEOUT)return;const timer=new Timer_1.Timer(ms);timer.start((()=>{this.executeCronjob(job).catch((error=>{(0,snaps_utils_1.logError)(error)})),__classPrivateFieldGet(this,_CronjobController_timers,"f").delete(job.id),this.schedule(job)})),this.updateJobLastRunState(job.id,0),__classPrivateFieldGet(this,_CronjobController_timers,"f").set(job.id,timer),__classPrivateFieldGet(this,_CronjobController_snapIds,"f").set(job.id,job.snapId)}async executeCronjob(job){this.updateJobLastRunState(job.id,Date.now()),await __classPrivateFieldGet(this,_CronjobController_messenger,"f").call("SnapController:handleRequest",{snapId:job.snapId,origin:"",handler:snaps_utils_1.HandlerType.OnCronjob,request:job.request})}unregister(snapId){const jobs=[...__classPrivateFieldGet(this,_CronjobController_snapIds,"f").entries()].filter((([_,jobSnapId])=>jobSnapId===snapId));jobs.length&&jobs.forEach((([id])=>{const timer=__classPrivateFieldGet(this,_CronjobController_timers,"f").get(id);timer&&(timer.cancel(),__classPrivateFieldGet(this,_CronjobController_timers,"f").delete(id),__classPrivateFieldGet(this,_CronjobController_snapIds,"f").delete(id))}))}updateJobLastRunState(jobId,lastRun){this.update((state=>{state.jobs[jobId]={lastRun}}))}async dailyCheckIn(){const jobs=this.getAllJobs();for(const job of jobs){const parsed=(0,snaps_utils_1.parseCronExpression)(job.expression),lastRun=this.state.jobs[job.id]?.lastRun;void 0!==lastRun&&parsed.hasPrev()&&parsed.prev().getTime()>lastRun&&await this.executeCronjob(job),this.schedule(job)}__classPrivateFieldSet(this,_CronjobController_dailyTimer,new Timer_1.Timer(exports.DAILY_TIMEOUT),"f"),__classPrivateFieldGet(this,_CronjobController_dailyTimer,"f").start((()=>{this.dailyCheckIn().catch((error=>{(0,snaps_utils_1.logError)(error)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleEventSnapInstalled),this.messagingSystem.unsubscribe("SnapController:snapRemoved",this._handleEventSnapRemoved),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),__classPrivateFieldGet(this,_CronjobController_snapIds,"f").forEach((snapId=>{this.unregister(snapId)}))}_handleEventSnapInstalled(snap){this.register(snap.id)}_handleEventSnapRemoved(snap){this.unregister(snap.id)}_handleEventSnapUpdated(snap){this.unregister(snap.id),this.register(snap.id)}}exports.CronjobController=CronjobController,_CronjobController_messenger=new WeakMap,_CronjobController_dailyTimer=new WeakMap,_CronjobController_timers=new WeakMap,_CronjobController_snapIds=new WeakMap},"./node_modules/@metamask/snaps-controllers/dist/cronjob/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/cronjob/CronjobController.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/fsm.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceStrict=exports.validateMachine=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),fsm_1=__webpack_require__("./node_modules/@xstate/fsm/es/index.js");exports.validateMachine=function validateMachine(machine){(0,utils_1.assert)("_options"in machine,"The machine is not an @xstate/fsm machine");const typed=machine,allActions=new Set,addActions=actions=>{return(obj=actions,Array.isArray(obj)?obj:null==obj?[]:[obj]).flatMap((action=>"string"==typeof action?[action]:((0,utils_1.assert)("function"==typeof action),[]))).forEach(allActions.add.bind(allActions));var obj};for(const state of Object.values(typed.config.states)){addActions(state.entry),addActions(state.exit);for(const transition of Object.values(state.on??{}))addActions(transition.actions)}allActions.forEach((action=>(0,utils_1.assert)(void 0!==typed._options.actions&&action in typed._options.actions,`Action "${action}" doesn't have an implementation`)))},exports.forceStrict=function forceStrict(interpreter){let onInitialCalled=!1;interpreter.subscribe((state=>{(0,utils_1.assert)(!onInitialCalled||state.changed,"Invalid state transition"),onInitialCalled=!0}));const ogSend=interpreter.send.bind(interpreter);interpreter.send=(...args)=>((0,utils_1.assert)(interpreter.status===fsm_1.InterpreterStatus.Running,"Interpreter is stopped"),ogSend(...args))}},"./node_modules/@metamask/snaps-controllers/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/browser.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/index.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/utils.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/multichain/index.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/cronjob/index.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/logging.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;const snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js");exports.log=(0,utils_1.createModuleLogger)(snaps_utils_1.snapsLogger,"snaps-controllers")},"./node_modules/@metamask/snaps-controllers/dist/multichain/MultiChainController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _MultiChainController_notify,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultiChainController=void 0;const base_controller_1=__webpack_require__("./node_modules/@metamask/base-controller/dist/index.js"),rpc_methods_1=__webpack_require__("./node_modules/@metamask/rpc-methods/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),nanoid_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.js"),snaps_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/index.js"),keyring_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/keyring.js"),matching_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/multichain/matching.js"),defaultState={sessions:{}};class MultiChainController extends base_controller_1.BaseControllerV2{constructor({messenger,notify}){super({messenger,metadata:{sessions:{persist:!1,anonymous:!1}},name:"MultiChainController",state:defaultState}),_MultiChainController_notify.set(this,void 0),__classPrivateFieldSet(this,_MultiChainController_notify,notify,"f")}getSession(origin){return this.state.sessions[origin]}async closeSession(origin){const session=this.getSession(origin);(0,utils_1.assert)(session,"No session to close."),await __classPrivateFieldGet(this,_MultiChainController_notify,"f").call(this,origin,{method:"multichainHack_metamask_disconnect"}),this.update((state=>{delete state.sessions[origin]})),await Promise.all(Object.values(session.handlingSnaps).map((snapId=>this.messagingSystem.call("SnapController:decrementActiveReferences",snapId))))}async onConnect(origin,connection){this.getSession(origin)&&await this.closeSession(origin);const snaps=this.messagingSystem.call("SnapController:getAll"),filteredSnaps=(0,snaps_1.getRunnableSnaps)(snaps),availableNamespaces=Object.fromEntries(await Promise.all(filteredSnaps.map((async snap=>[snap.id,await this.snapToNamespaces(snap)])))),namespaceToSnaps=(0,matching_1.findMatchingKeyringSnaps)(connection.requiredNamespaces,availableNamespaces),permissions=this.messagingSystem.call("PermissionController:getPermissions",origin);(0,utils_1.assert)(void 0!==permissions,`${origin} does not have any permissions.`);const approvedNamespacesAndSnaps=Object.entries(namespaceToSnaps).reduce(((acc,[namespace,snapIds])=>{const approvedSnaps=snapIds.filter((snapId=>(0,snaps_utils_1.isSnapPermitted)(permissions,snapId)));return approvedSnaps.length>0&&(acc[namespace]=approvedSnaps),acc}),{}),hasConflicts=Object.keys(namespaceToSnaps).some((namespace=>!(0,utils_1.hasProperty)(approvedNamespacesAndSnaps,namespace)||approvedNamespacesAndSnaps[namespace]?.length>1)),filteredNamespacesAndSnaps=hasConflicts?namespaceToSnaps:approvedNamespacesAndSnaps,possibleAccounts=await this.namespacesToAccounts(origin,filteredNamespacesAndSnaps,connection.requiredNamespaces);(0,utils_1.assert)(Object.values(possibleAccounts).some((possibleAccount=>possibleAccount.length>0)),"No installed snaps found for any requested namespace.");const resolvedAccounts=hasConflicts?await this.resolveConflicts(origin,possibleAccounts):Object.fromEntries(Object.entries(possibleAccounts).map((([namespace,snapAndAccounts])=>[namespace,snapAndAccounts[0]??null]))),providedNamespaces=Object.entries(connection.requiredNamespaces).reduce(((acc,[namespaceId,namespace])=>{const accounts=resolvedAccounts[namespaceId]?.accounts;return accounts&&(acc[namespaceId]={accounts,chains:namespace.chains,events:namespace.events,methods:namespace.methods}),acc}),{}),handlingSnaps=Object.entries(resolvedAccounts).reduce(((acc,[namespaceId,accountsAndSnap])=>(accountsAndSnap&&(acc[namespaceId]=accountsAndSnap.snapId),acc)),{}),session={origin,requestedNamespaces:connection.requiredNamespaces,providedNamespaces,handlingSnaps};return await Promise.all(Object.values(session.handlingSnaps).map((snapId=>this.messagingSystem.call("SnapController:incrementActiveReferences",snapId)))),this.update((state=>{state.sessions[origin]=session})),{namespaces:providedNamespaces}}async onRequest(origin,data){const session=this.getSession(origin);(0,utils_1.assert)(session,`Session for "${origin}" doesn't exist.`);const{namespace}=(0,snaps_utils_1.parseChainId)(data.chainId),sessionNamespace=session.providedNamespaces[namespace];(0,utils_1.assert)(session.providedNamespaces[namespace]?.chains.includes(data.chainId),`Session for "${origin}" is not connected to "${data.chainId}" chain.`);const{method}=data.request;(0,utils_1.assert)(sessionNamespace?.methods?.includes(method),`Session for "${origin}" does not support ${method}`);const snapId=session.handlingSnaps[namespace];(0,utils_1.assert)(void 0!==snapId);const permissions=this.messagingSystem.call("PermissionController:getPermissions",origin);return(0,utils_1.assert)(void 0!==permissions,`${origin} does not have any permissions.`),(0,utils_1.assert)((0,snaps_utils_1.isSnapPermitted)(permissions,snapId),`${origin} does not have permission to communicate with ${snapId}.`),this.snapRequest({snapId,origin,method:"handleRequest",args:data})}async snapRequest({snapId,origin,method,args}){return this.messagingSystem.call("SnapController:handleRequest",{snapId,origin,handler:snaps_utils_1.HandlerType.SnapKeyring,request:{method,params:args?[args]:[]}})}async getSnapAccounts(origin,snapId){try{const result=await this.snapRequest({snapId,origin,method:"getAccounts"});if((0,snaps_utils_1.isAccountIdArray)(result))return result}catch(error){(0,snaps_utils_1.logError)(error)}return null}snapToNamespaces(snap){const permissions=this.messagingSystem.call("PermissionController:getPermissions",snap.id),keyringPermission=permissions?.[snaps_1.SnapEndowments.Keyring];return(0,keyring_1.getKeyringCaveatNamespaces)(keyringPermission)}async namespacesToAccounts(origin,namespacesAndSnaps,requestedNamespaces){const dedupedSnaps=[...new Set(Object.values(namespacesAndSnaps).flat())],allAccounts=await dedupedSnaps.reduce((async(previousPromise,snapId)=>{const result=await this.getSnapAccounts(origin,snapId),acc=await previousPromise;return result&&(acc[snapId]=result),acc}),Promise.resolve({}));return Object.keys(namespacesAndSnaps).reduce(((acc,namespaceId)=>{const{chains}=requestedNamespaces[namespaceId],accountInAnyRequestedChain=account=>{const{chainId:parsedChainId}=(0,snaps_utils_1.parseAccountId)(account);return chains.some((chainId=>chainId===parsedChainId))},result=Object.entries(allAccounts).map((([snapId,accounts])=>({snapId,accounts:accounts.filter(accountInAnyRequestedChain)}))).filter((({accounts})=>accounts.length>0));return acc[namespaceId]=result,acc}),{})}async resolveConflicts(origin,possibleAccounts){const id=(0,nanoid_1.nanoid)(),resolvedAccounts=await this.messagingSystem.call("ApprovalController:addRequest",{origin,id,type:"multichain_connect",requestData:{possibleAccounts}},!0),approvedPermissions=Object.values(resolvedAccounts).reduce(((acc,curr)=>(null!==curr&&(acc[rpc_methods_1.WALLET_SNAP_PERMISSION_KEY][curr.snapId]={}),acc)),{[rpc_methods_1.WALLET_SNAP_PERMISSION_KEY]:{}});return this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions,subject:{origin}}),resolvedAccounts}}exports.MultiChainController=MultiChainController,_MultiChainController_notify=new WeakMap},"./node_modules/@metamask/snaps-controllers/dist/multichain/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/multichain/matching.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/multichain/middleware.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/multichain/MultiChainController.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/multichain/matching.js":(__unused_webpack_module,exports)=>{"use strict";function isSubset(potentialSubset,array){return potentialSubset.every((item=>array.includes(item)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findMatchingKeyringSnaps=void 0,exports.findMatchingKeyringSnaps=function findMatchingKeyringSnaps(requestedNamespaces,snaps){const snapEntries=Object.entries(snaps);return Object.entries(requestedNamespaces).reduce(((acc,[requestedNamespaceId,currentRequestedNamespace])=>{const matchedSnaps=snapEntries.filter((([,namespaces])=>{const potentialMatch=namespaces?.[requestedNamespaceId];return void 0!==potentialMatch&&function matchNamespace(requestedNamespace,potentialMatchNamespace){if(!requestedNamespace.chains.every((requestedChain=>potentialMatchNamespace.chains.some((potentialMatchChain=>potentialMatchChain.id===requestedChain)))))return!1;if(!isSubset(requestedNamespace.events??[],potentialMatchNamespace.events??[]))return!1;if(!isSubset(requestedNamespace.methods??[],potentialMatchNamespace.methods??[]))return!1;return!0}(currentRequestedNamespace,potentialMatch)})).map((([snapId])=>snapId));return acc[requestedNamespaceId]=matchedSnaps,acc}),{})}},"./node_modules/@metamask/snaps-controllers/dist/multichain/middleware.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMultiChainMiddleware=void 0;const snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),json_rpc_engine_1=__webpack_require__("./node_modules/json-rpc-engine/dist/index.js");exports.createMultiChainMiddleware=function createMultiChainMiddleware({onConnect,onRequest}){return(0,json_rpc_engine_1.createAsyncMiddleware)((async function middleware(req,res,next){const{origin,params:unwrapped}=req;if("wallet_multiChainRequestHack"===req.method)switch((0,utils_1.assert)(void 0!==unwrapped,`Invalid params for ${req.method}`),unwrapped.method){case"caip_request":return(0,snaps_utils_1.assertIsMultiChainRequest)(unwrapped.params),void(res.result=await onRequest(origin,unwrapped.params));case"metamask_handshake":return(0,snaps_utils_1.assertIsConnectArguments)(unwrapped.params),void(res.result=await onConnect(origin,unwrapped.params));default:await next()}else await next()}))}},"./node_modules/@metamask/snaps-controllers/dist/services/AbstractExecutionService.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _AbstractExecutionService_instances,_AbstractExecutionService_snapRpcHooks,_AbstractExecutionService_snapToJobMap,_AbstractExecutionService_jobToSnapMap,_AbstractExecutionService_messenger,_AbstractExecutionService_terminationTimeout,_AbstractExecutionService_removeSnapHooks,_AbstractExecutionService_createSnapHooks,_AbstractExecutionService_mapSnapAndJob,_AbstractExecutionService_removeSnapAndJobMapping,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.setupMultiplex=exports.AbstractExecutionService=void 0;const object_multiplex_1=__importDefault(__webpack_require__("./node_modules/@metamask/object-multiplex/dist/index.js")),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),json_rpc_engine_1=__webpack_require__("./node_modules/json-rpc-engine/dist/index.js"),json_rpc_middleware_stream_1=__webpack_require__("./node_modules/json-rpc-middleware-stream/dist/index.js"),nanoid_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.js"),pump_1=__importDefault(__webpack_require__("./node_modules/pump/index.js")),logging_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/logging.js"),utils_2=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/utils.js");function setupMultiplex(connectionStream,streamName){const mux=new object_multiplex_1.default;return(0,pump_1.default)(connectionStream,mux,connectionStream,(error=>{error&&(streamName?(0,snaps_utils_1.logError)(`"${streamName}" stream failure.`,error):(0,snaps_utils_1.logError)(error))})),mux}exports.AbstractExecutionService=class AbstractExecutionService{constructor({setupSnapProvider,messenger,terminationTimeout=utils_1.Duration.Second}){_AbstractExecutionService_instances.add(this),_AbstractExecutionService_snapRpcHooks.set(this,void 0),_AbstractExecutionService_snapToJobMap.set(this,void 0),_AbstractExecutionService_jobToSnapMap.set(this,void 0),_AbstractExecutionService_messenger.set(this,void 0),_AbstractExecutionService_terminationTimeout.set(this,void 0),__classPrivateFieldSet(this,_AbstractExecutionService_snapRpcHooks,new Map,"f"),this.jobs=new Map,this.setupSnapProvider=setupSnapProvider,__classPrivateFieldSet(this,_AbstractExecutionService_snapToJobMap,new Map,"f"),__classPrivateFieldSet(this,_AbstractExecutionService_jobToSnapMap,new Map,"f"),__classPrivateFieldSet(this,_AbstractExecutionService_messenger,messenger,"f"),__classPrivateFieldSet(this,_AbstractExecutionService_terminationTimeout,terminationTimeout,"f"),this.registerMessageHandlers()}registerMessageHandlers(){__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").registerActionHandler("ExecutionService:handleRpcRequest",(async(snapId,options)=>this.handleRpcRequest(snapId,options))),__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").registerActionHandler("ExecutionService:executeSnap",(async snapData=>this.executeSnap(snapData))),__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").registerActionHandler("ExecutionService:terminateSnap",(async snapId=>this.terminateSnap(snapId))),__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").registerActionHandler("ExecutionService:terminateAllSnaps",(async()=>this.terminateAllSnaps()))}async terminate(jobId){const jobWrapper=this.jobs.get(jobId);if(!jobWrapper)throw new Error(`Job with id "${jobId}" not found.`);const result=await(0,utils_2.withTimeout)(this.command(jobId,{jsonrpc:"2.0",method:"terminate",params:[],id:(0,nanoid_1.nanoid)()}),__classPrivateFieldGet(this,_AbstractExecutionService_terminationTimeout,"f"));result!==utils_2.hasTimedOut&&"OK"===result||(0,snaps_utils_1.logError)(`Job "${jobId}" failed to terminate gracefully.`,result),Object.values(jobWrapper.streams).forEach((stream=>{try{!stream.destroyed&&stream.destroy(),stream.removeAllListeners()}catch(error){(0,snaps_utils_1.logError)("Error while destroying stream",error)}})),this.terminateJob(jobWrapper),__classPrivateFieldGet(this,_AbstractExecutionService_instances,"m",_AbstractExecutionService_removeSnapAndJobMapping).call(this,jobId),this.jobs.delete(jobId),(0,logging_1.log)(`Job "${jobId}" terminated.`)}async initJob(){const jobId=(0,nanoid_1.nanoid)(),{streams,worker}=await this.initStreams(jobId),rpcEngine=new json_rpc_engine_1.JsonRpcEngine,jsonRpcConnection=(0,json_rpc_middleware_stream_1.createStreamMiddleware)();(0,pump_1.default)(jsonRpcConnection.stream,streams.command,jsonRpcConnection.stream),rpcEngine.push(jsonRpcConnection.middleware);const envMetadata={id:jobId,streams,rpcEngine,worker};return this.jobs.set(jobId,envMetadata),envMetadata}async initStreams(jobId){const{worker,stream:envStream}=await this.initEnvStream(jobId),mux=setupMultiplex(envStream,`Job: "${jobId}"`),commandStream=mux.createStream(snaps_utils_1.SNAP_STREAM_NAMES.COMMAND),notificationHandler=message=>{if(!(0,utils_1.isJsonRpcNotification)(message))return;const snapId=__classPrivateFieldGet(this,_AbstractExecutionService_jobToSnapMap,"f").get(jobId);"OutboundRequest"===message.method?__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").publish("ExecutionService:outboundRequest",snapId):"OutboundResponse"===message.method?__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").publish("ExecutionService:outboundResponse",snapId):"UnhandledError"===message.method?(0,utils_1.isObject)(message.params)&&message.params.error?(__classPrivateFieldGet(this,_AbstractExecutionService_messenger,"f").publish("ExecutionService:unhandledError",snapId,message.params.error),commandStream.removeListener("data",notificationHandler)):(0,snaps_utils_1.logError)(new Error(`Received malformed "${message.method}" command stream notification.`)):(0,snaps_utils_1.logError)(new Error(`Received unexpected command stream notification "${message.method}".`))};commandStream.on("data",notificationHandler);const rpcStream=mux.createStream(snaps_utils_1.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:commandStream,rpc:rpcStream,_connection:envStream},worker}}async terminateSnap(snapId){const jobId=__classPrivateFieldGet(this,_AbstractExecutionService_snapToJobMap,"f").get(snapId);jobId&&await this.terminate(jobId)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async jobId=>this.terminate(jobId)))),__classPrivateFieldGet(this,_AbstractExecutionService_snapRpcHooks,"f").clear()}getRpcRequestHandler(snapId){return __classPrivateFieldGet(this,_AbstractExecutionService_snapRpcHooks,"f").get(snapId)}async executeSnap(snapData){if(__classPrivateFieldGet(this,_AbstractExecutionService_snapToJobMap,"f").has(snapData.snapId))throw new Error(`Snap "${snapData.snapId}" is already being executed.`);const job=await this.initJob();__classPrivateFieldGet(this,_AbstractExecutionService_instances,"m",_AbstractExecutionService_mapSnapAndJob).call(this,snapData.snapId,job.id),await this.command(job.id,{jsonrpc:"2.0",method:"ping",id:(0,nanoid_1.nanoid)()});const rpcStream=job.streams.rpc;this.setupSnapProvider(snapData.snapId,rpcStream);const result=await this.command(job.id,{jsonrpc:"2.0",method:"executeSnap",params:snapData,id:(0,nanoid_1.nanoid)()});return __classPrivateFieldGet(this,_AbstractExecutionService_instances,"m",_AbstractExecutionService_createSnapHooks).call(this,snapData.snapId,job.id),result}async command(jobId,message){if("object"!=typeof message)throw new Error("Must send object.");const job=this.jobs.get(jobId);if(!job)throw new Error(`Job with id "${jobId}" not found.`);(0,logging_1.log)("Parent: Sending Command",message);const response=await job.rpcEngine.handle(message);if(response.error)throw new Error(response.error.message);return response.result}async handleRpcRequest(snapId,options){const rpcRequestHandler=await this.getRpcRequestHandler(snapId);if(!rpcRequestHandler)throw new Error(`Snap execution service returned no RPC handler for running snap "${snapId}".`);return rpcRequestHandler(options)}},_AbstractExecutionService_snapRpcHooks=new WeakMap,_AbstractExecutionService_snapToJobMap=new WeakMap,_AbstractExecutionService_jobToSnapMap=new WeakMap,_AbstractExecutionService_messenger=new WeakMap,_AbstractExecutionService_terminationTimeout=new WeakMap,_AbstractExecutionService_instances=new WeakSet,_AbstractExecutionService_removeSnapHooks=function _AbstractExecutionService_removeSnapHooks(snapId){__classPrivateFieldGet(this,_AbstractExecutionService_snapRpcHooks,"f").delete(snapId)},_AbstractExecutionService_createSnapHooks=function _AbstractExecutionService_createSnapHooks(snapId,workerId){__classPrivateFieldGet(this,_AbstractExecutionService_snapRpcHooks,"f").set(snapId,(async({origin,handler,request})=>await this.command(workerId,{id:(0,nanoid_1.nanoid)(),jsonrpc:"2.0",method:"snapRpc",params:{origin,handler,request,target:snapId}})))},_AbstractExecutionService_mapSnapAndJob=function _AbstractExecutionService_mapSnapAndJob(snapId,jobId){__classPrivateFieldGet(this,_AbstractExecutionService_snapToJobMap,"f").set(snapId,jobId),__classPrivateFieldGet(this,_AbstractExecutionService_jobToSnapMap,"f").set(jobId,snapId)},_AbstractExecutionService_removeSnapAndJobMapping=function _AbstractExecutionService_removeSnapAndJobMapping(jobId){const snapId=__classPrivateFieldGet(this,_AbstractExecutionService_jobToSnapMap,"f").get(jobId);if(!snapId)throw new Error(`job: "${jobId}" has no mapped snap.`);__classPrivateFieldGet(this,_AbstractExecutionService_jobToSnapMap,"f").delete(jobId),__classPrivateFieldGet(this,_AbstractExecutionService_snapToJobMap,"f").delete(snapId),__classPrivateFieldGet(this,_AbstractExecutionService_instances,"m",_AbstractExecutionService_removeSnapHooks).call(this,snapId)},exports.setupMultiplex=setupMultiplex},"./node_modules/@metamask/snaps-controllers/dist/services/ExecutionService.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-controllers/dist/services/browser.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/AbstractExecutionService.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/ExecutionService.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/iframe/index.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/offscreen/index.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/services/iframe/IframeExecutionService.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IframeExecutionService=void 0;const post_message_stream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/browser.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),AbstractExecutionService_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/AbstractExecutionService.js");class IframeExecutionService extends AbstractExecutionService_1.AbstractExecutionService{constructor({iframeUrl,messenger,setupSnapProvider}){super({messenger,setupSnapProvider}),this.iframeUrl=iframeUrl}terminateJob(jobWrapper){document.getElementById(jobWrapper.id)?.remove()}async initEnvStream(jobId){const iframeWindow=await(0,snaps_utils_1.createWindow)(this.iframeUrl.toString(),jobId);return{worker:iframeWindow,stream:new post_message_stream_1.WindowPostMessageStream({name:"parent",target:"child",targetWindow:iframeWindow,targetOrigin:"*"})}}}exports.IframeExecutionService=IframeExecutionService},"./node_modules/@metamask/snaps-controllers/dist/services/iframe/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/iframe/IframeExecutionService.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/services/offscreen/OffscreenExecutionService.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _OffscreenExecutionService_runtimeStream,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OffscreenExecutionService=void 0;const post_message_stream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/browser.js"),nanoid_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.js"),AbstractExecutionService_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/AbstractExecutionService.js"),OffscreenPostMessageStream_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/offscreen/OffscreenPostMessageStream.js");class OffscreenExecutionService extends AbstractExecutionService_1.AbstractExecutionService{constructor({documentUrl,frameUrl,messenger,setupSnapProvider}){super({messenger,setupSnapProvider}),_OffscreenExecutionService_runtimeStream.set(this,void 0),this.documentUrl=documentUrl,this.frameUrl=frameUrl,__classPrivateFieldSet(this,_OffscreenExecutionService_runtimeStream,new post_message_stream_1.BrowserRuntimePostMessageStream({name:"parent",target:"child"}),"f")}async terminateJob(job){__classPrivateFieldGet(this,_OffscreenExecutionService_runtimeStream,"f").write({jobId:job.id,data:{jsonrpc:"2.0",method:"terminateJob",id:(0,nanoid_1.nanoid)()}})}async initEnvStream(jobId){await this.createDocument();return{worker:jobId,stream:new OffscreenPostMessageStream_1.OffscreenPostMessageStream({stream:__classPrivateFieldGet(this,_OffscreenExecutionService_runtimeStream,"f"),frameUrl:this.frameUrl.toString(),jobId})}}async createDocument(){await chrome.offscreen.hasDocument()||await chrome.offscreen.createDocument({justification:"MetaMask Snaps Execution Environment",reasons:["IFRAME_SCRIPTING"],url:this.documentUrl.toString()})}}exports.OffscreenExecutionService=OffscreenExecutionService,_OffscreenExecutionService_runtimeStream=new WeakMap},"./node_modules/@metamask/snaps-controllers/dist/services/offscreen/OffscreenPostMessageStream.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _OffscreenPostMessageStream_instances,_OffscreenPostMessageStream_stream,_OffscreenPostMessageStream_jobId,_OffscreenPostMessageStream_frameUrl,_OffscreenPostMessageStream_onData,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OffscreenPostMessageStream=void 0;const post_message_stream_1=__webpack_require__("./node_modules/@metamask/post-message-stream/dist/browser.js");class OffscreenPostMessageStream extends post_message_stream_1.BasePostMessageStream{constructor({stream,jobId,frameUrl}){super(),_OffscreenPostMessageStream_instances.add(this),_OffscreenPostMessageStream_stream.set(this,void 0),_OffscreenPostMessageStream_jobId.set(this,void 0),_OffscreenPostMessageStream_frameUrl.set(this,void 0),__classPrivateFieldSet(this,_OffscreenPostMessageStream_stream,stream,"f"),__classPrivateFieldSet(this,_OffscreenPostMessageStream_jobId,jobId,"f"),__classPrivateFieldSet(this,_OffscreenPostMessageStream_frameUrl,frameUrl,"f"),__classPrivateFieldGet(this,_OffscreenPostMessageStream_stream,"f").on("data",__classPrivateFieldGet(this,_OffscreenPostMessageStream_instances,"m",_OffscreenPostMessageStream_onData).bind(this))}_postMessage(data){__classPrivateFieldGet(this,_OffscreenPostMessageStream_stream,"f").write({jobId:__classPrivateFieldGet(this,_OffscreenPostMessageStream_jobId,"f"),frameUrl:__classPrivateFieldGet(this,_OffscreenPostMessageStream_frameUrl,"f"),data})}}exports.OffscreenPostMessageStream=OffscreenPostMessageStream,_OffscreenPostMessageStream_stream=new WeakMap,_OffscreenPostMessageStream_jobId=new WeakMap,_OffscreenPostMessageStream_frameUrl=new WeakMap,_OffscreenPostMessageStream_instances=new WeakSet,_OffscreenPostMessageStream_onData=function _OffscreenPostMessageStream_onData(data){data.jobId===__classPrivateFieldGet(this,_OffscreenPostMessageStream_jobId,"f")&&this.push(data.data)}},"./node_modules/@metamask/snaps-controllers/dist/services/offscreen/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/offscreen/OffscreenExecutionService.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/services/offscreen/OffscreenPostMessageStream.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/snaps/RequestQueue.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestQueue=void 0;exports.RequestQueue=class RequestQueue{constructor(maxQueueSize){this.maxQueueSize=maxQueueSize,this.queueSizes=new Map}increment(origin){const currentCount=this.queueSizes.get(origin)??0;if(currentCount>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(origin,currentCount+1)}decrement(origin){const currentCount=this.queueSizes.get(origin)??0;if(0===currentCount)throw new Error(`Cannot decrement, ${origin} does not have any outstanding requests.`);this.queueSizes.set(origin,currentCount-1)}get(origin){return this.queueSizes.get(origin)??0}}},"./node_modules/@metamask/snaps-controllers/dist/snaps/SnapController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _SnapController_instances,_SnapController_closeAllConnections,_SnapController_environmentEndowmentPermissions,_SnapController_excludedPermissions,_SnapController_featureFlags,_SnapController_fetchFunction,_SnapController_idleTimeCheckInterval,_SnapController_maxIdleTime,_SnapController_detectSnapLocation,_SnapController_rollbackSnapshots,_SnapController_timeoutForLastRequestStatus,_SnapController_statusMachine,_SnapController_initializeStateMachine,_SnapController_registerMessageHandlers,_SnapController_pollForLastRequestStatus,_SnapController_blockSnap,_SnapController_unblockSnap,_SnapController_assertIsInstallAllowed,_SnapController_stopSnapsLastRequestPastMax,_SnapController_transition,_SnapController_terminateSnap,_SnapController_removeSnapFromSubjects,_SnapController_createApproval,_SnapController_updateApproval,_SnapController_add,_SnapController_startSnap,_SnapController_getEndowments,_SnapController_set,_SnapController_fetchSnap,_SnapController_processSnapPermissions,_SnapController_validateSnapPermissions,_SnapController_getRpcRequestHandler,_SnapController_executeWithTimeout,_SnapController_recordSnapRpcRequestStart,_SnapController_recordSnapRpcRequestFinish,_SnapController_getRollbackSnapshot,_SnapController_createRollbackSnapshot,_SnapController_rollbackSnap,_SnapController_rollbackSnaps,_SnapController_getRuntime,_SnapController_getRuntimeExpect,_SnapController_setupRuntime,_SnapController_calculatePermissionsChange,_SnapController_isValidUpdate,__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)},__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapController=exports.SNAP_APPROVAL_RESULT=exports.SNAP_APPROVAL_UPDATE=exports.SNAP_APPROVAL_INSTALL=exports.controllerName=void 0;const base_controller_1=__webpack_require__("./node_modules/@metamask/base-controller/dist/index.js"),permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),rpc_methods_1=__webpack_require__("./node_modules/@metamask/rpc-methods/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),fsm_1=__webpack_require__("./node_modules/@xstate/fsm/es/index.js"),eth_rpc_errors_1=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),nanoid_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.js"),fsm_2=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/fsm.js"),logging_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/logging.js"),utils_2=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/utils.js"),endowments_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/index.js"),rpc_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/rpc.js"),location_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/index.js"),registry_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/registry/index.js"),RequestQueue_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/RequestQueue.js"),Timer_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/Timer.js");exports.controllerName="SnapController",exports.SNAP_APPROVAL_INSTALL="wallet_installSnap",exports.SNAP_APPROVAL_UPDATE="wallet_updateSnap",exports.SNAP_APPROVAL_RESULT="wallet_installSnapResult";const TRUNCATED_SNAP_PROPERTIES=new Set(["initialPermissions","id","version","enabled","blocked"]),defaultState={snapErrors:{},snaps:{},snapStates:{}};function truncateSnap(snap){return Object.keys(snap).reduce(((serialized,key)=>(TRUNCATED_SNAP_PROPERTIES.has(key)&&(serialized[key]=snap[key]),serialized)),{})}class SnapController extends base_controller_1.BaseControllerV2{constructor({closeAllConnections,messenger,state,environmentEndowmentPermissions=[],excludedPermissions={},idleTimeCheckInterval=(0,utils_1.inMilliseconds)(5,utils_1.Duration.Second),maxIdleTime=(0,utils_1.inMilliseconds)(30,utils_1.Duration.Second),maxRequestTime=(0,utils_1.inMilliseconds)(60,utils_1.Duration.Second),fetchFunction=globalThis.fetch.bind(globalThis),featureFlags={},detectSnapLocation:detectSnapLocationFunction=location_1.detectSnapLocation}){super({messenger,metadata:{snapErrors:{persist:!1,anonymous:!1},snapStates:{persist:()=>Object.keys(this.state.snaps).reduce(((acc,cur)=>(acc[cur]=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,cur).state,acc)),{}),anonymous:!1},snaps:{persist:snaps=>Object.values(snaps).map((snap=>({...snap,sourceCode:__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snap.id).sourceCode,status:snaps_utils_1.SnapStatus.Stopped}))).reduce(((memo,snap)=>(memo[snap.id]=snap,memo)),{}),anonymous:!1}},name:"SnapController",state:{...defaultState,...{...state,snaps:Object.values(state?.snaps??{}).reduce(((memo,snap)=>{const{sourceCode,...rest}=snap;return memo[snap.id]=rest,memo}),{})}}}),_SnapController_instances.add(this),_SnapController_closeAllConnections.set(this,void 0),_SnapController_environmentEndowmentPermissions.set(this,void 0),_SnapController_excludedPermissions.set(this,void 0),_SnapController_featureFlags.set(this,void 0),_SnapController_fetchFunction.set(this,void 0),_SnapController_idleTimeCheckInterval.set(this,void 0),_SnapController_maxIdleTime.set(this,void 0),_SnapController_detectSnapLocation.set(this,void 0),_SnapController_rollbackSnapshots.set(this,void 0),_SnapController_timeoutForLastRequestStatus.set(this,void 0),_SnapController_statusMachine.set(this,void 0),__classPrivateFieldSet(this,_SnapController_closeAllConnections,closeAllConnections,"f"),__classPrivateFieldSet(this,_SnapController_environmentEndowmentPermissions,environmentEndowmentPermissions,"f"),__classPrivateFieldSet(this,_SnapController_excludedPermissions,excludedPermissions,"f"),__classPrivateFieldSet(this,_SnapController_featureFlags,featureFlags,"f"),__classPrivateFieldSet(this,_SnapController_fetchFunction,fetchFunction,"f"),__classPrivateFieldSet(this,_SnapController_idleTimeCheckInterval,idleTimeCheckInterval,"f"),__classPrivateFieldSet(this,_SnapController_maxIdleTime,maxIdleTime,"f"),this.maxRequestTime=maxRequestTime,__classPrivateFieldSet(this,_SnapController_detectSnapLocation,detectSnapLocationFunction,"f"),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),__classPrivateFieldSet(this,_SnapController_rollbackSnapshots,new Map,"f"),this.snapsRuntimeData=new Map,__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_pollForLastRequestStatus).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_initializeStateMachine).call(this),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_registerMessageHandlers).call(this),Object.values(state?.snaps??{}).forEach((snap=>__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_setupRuntime).call(this,snap.id,{sourceCode:snap.sourceCode,state:state?.snapStates?.[snap.id]??null})))}async updateBlockedSnaps(){const blockedSnaps=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((blockListArg,snap)=>(blockListArg[snap.id]={version:snap.version,checksum:snap.manifest.source.shasum},blockListArg)),{}));await Promise.all(Object.entries(blockedSnaps).map((async([snapId,{status,reason}])=>status===registry_1.SnapsRegistryStatus.Blocked?__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_blockSnap).call(this,snapId,reason):__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_unblockSnap).call(this,snapId))))}_onUnhandledSnapError(snapId,error){this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Crash).then((()=>this.addSnapError(error))).catch((stopSnapError=>{(0,snaps_utils_1.logError)(stopSnapError)}))}_onOutboundRequest(snapId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);runtime.pendingInboundRequests.filter((pendingRequest=>"running"===pendingRequest.timer.status)).forEach((pendingRequest=>pendingRequest.timer.pause())),runtime.pendingOutboundRequests+=1}_onOutboundResponse(snapId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);runtime.pendingOutboundRequests-=1,0===runtime.pendingOutboundRequests&&runtime.pendingInboundRequests.filter((pendingRequest=>"paused"===pendingRequest.timer.status)).forEach((pendingRequest=>pendingRequest.timer.resume()))}async startSnap(snapId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);if(!1===this.state.snaps[snapId].enabled)throw new Error(`Snap "${snapId}" is disabled.`);(0,utils_1.assert)(runtime.sourceCode),await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_startSnap).call(this,{snapId,sourceCode:runtime.sourceCode})}enableSnap(snapId){if(this.getExpect(snapId),this.state.snaps[snapId].blocked)throw new Error(`Snap "${snapId}" is blocked and cannot be enabled.`);this.update((state=>{state.snaps[snapId].enabled=!0}))}async disableSnap(snapId){if(!this.has(snapId))throw new Error(`Snap "${snapId}" not found.`);return this.update((state=>{state.snaps[snapId].enabled=!1})),this.isRunning(snapId)?this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Stop):Promise.resolve()}async stopSnap(snapId,statusEvent=snaps_utils_1.SnapStatusEvents.Stop){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntime).call(this,snapId);if(!runtime)throw new Error(`The snap "${snapId}" is not running.`);runtime.lastRequest=null,runtime.pendingInboundRequests=[],runtime.pendingOutboundRequests=0;try{this.isRunning(snapId)&&(__classPrivateFieldGet(this,_SnapController_closeAllConnections,"f").call(this,snapId),await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_terminateSnap).call(this,snapId))}finally{this.isRunning(snapId)&&__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_transition).call(this,snapId,statusEvent)}}isRunning(snapId){return"running"===this.getExpect(snapId).status}has(snapId){return Boolean(this.get(snapId))}get(snapId){return this.state.snaps[snapId]}getExpect(snapId){const snap=this.get(snapId);return(0,utils_1.assert)(void 0!==snap,new Error(`Snap "${snapId}" not found.`)),snap}getTruncated(snapId){const snap=this.get(snapId);return snap?truncateSnap(snap):null}getTruncatedExpect(snapId){return truncateSnap(this.getExpect(snapId))}async updateSnapState(snapId,newSnapState){__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).state=newSnapState}clearSnapState(snapId){__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).state=null}addSnapError(snapError){this.update((state=>{const id=(0,nanoid_1.nanoid)();state.snapErrors[id]={...snapError,internalID:id}}))}removeSnapError(internalID){this.update((state=>{delete state.snapErrors[internalID]}))}clearSnapErrors(){this.update((state=>{state.snapErrors={}}))}async getSnapState(snapId){const{state}=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);return state??null}async clearState(){const snapIds=Object.keys(this.state.snaps);snapIds.forEach((snapId=>{__classPrivateFieldGet(this,_SnapController_closeAllConnections,"f").call(this,snapId)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),snapIds.forEach((snapId=>this.revokeAllSnapPermissions(snapId))),this.update((state=>{state.snaps={},state.snapStates={}}))}async removeSnap(snapId){return this.removeSnaps([snapId])}async removeSnaps(snapIds){if(!Array.isArray(snapIds))throw new Error("Expected array of snap ids.");await Promise.all(snapIds.map((async snapId=>{const truncated=this.getTruncatedExpect(snapId);await this.disableSnap(snapId),this.revokeAllSnapPermissions(snapId),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_removeSnapFromSubjects).call(this,snapId),this.snapsRuntimeData.delete(snapId),this.update((state=>{delete state.snaps[snapId],delete state.snapStates[snapId]})),this.messagingSystem.publish("SnapController:snapRemoved",truncated)})))}revokeAllSnapPermissions(snapId){this.messagingSystem.call("PermissionController:hasPermissions",snapId)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",snapId)}incrementActiveReferences(snapId){__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).activeReferences+=1}decrementActiveReferences(snapId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);(0,utils_1.assert)(runtime.activeReferences>0,"SnapController reference management is in an invalid state."),runtime.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(truncateSnap)}getPermittedSnaps(origin){const permissions=this.messagingSystem.call("PermissionController:getPermissions",origin)??{},snaps=permissions[rpc_methods_1.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((caveat=>caveat.type===snaps_utils_1.SnapCaveatType.SnapIds))?.value??{};return Object.keys(snaps).reduce(((permittedSnaps,snapId)=>{const snap=this.get(snapId),truncatedSnap=this.getTruncated(snapId);return truncatedSnap&&snap?.status!==snaps_utils_1.SnapStatus.Installing&&(permittedSnaps[snapId]=truncatedSnap),permittedSnaps}),{})}async installSnaps(origin,requestedSnaps){const result={},snapIds=Object.keys(requestedSnaps),pendingUpdates=[],pendingInstalls=[];try{for(const[snapId,{version:rawVersion}]of Object.entries(requestedSnaps)){(0,snaps_utils_1.assertIsValidSnapId)(snapId);const[error,version]=(0,snaps_utils_1.resolveVersionRange)(rawVersion);if(error)throw eth_rpc_errors_1.ethErrors.rpc.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${rawVersion}".`);const location=__classPrivateFieldGet(this,_SnapController_detectSnapLocation,"f").call(this,snapId,{versionRange:version,fetch:__classPrivateFieldGet(this,_SnapController_fetchFunction,"f"),allowLocal:__classPrivateFieldGet(this,_SnapController_featureFlags,"f").allowLocalSnaps}),isUpdate=this.has(snapId)&&!location.shouldAlwaysReload;if(isUpdate&&__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_isValidUpdate).call(this,snapId,version)){pendingUpdates.push(snapId);let rollbackSnapshot=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRollbackSnapshot).call(this,snapId);if(void 0!==rollbackSnapshot)throw new Error("This snap is already being updated.");{const prevSourceCode=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).sourceCode;rollbackSnapshot=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_createRollbackSnapshot).call(this,snapId),rollbackSnapshot.sourceCode=prevSourceCode,rollbackSnapshot.newVersion=version}}else isUpdate||pendingInstalls.push(snapId);result[snapId]=await this.processRequestedSnap(origin,snapId,location,version)}snapIds.forEach((snapId=>__classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").delete(snapId)))}catch(error){const installed=pendingInstalls.filter((snapId=>this.has(snapId)));await this.removeSnaps(installed);const snapshottedSnaps=[...__classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").keys()],snapsToRollback=pendingUpdates.filter((snapId=>snapshottedSnaps.includes(snapId)));throw await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_rollbackSnaps).call(this,snapsToRollback),error}return result}async processRequestedSnap(origin,snapId,location,versionRange){const existingSnap=this.getTruncated(snapId);if(existingSnap&&!location.shouldAlwaysReload){if((0,utils_1.satisfiesVersionRange)(existingSnap.version,versionRange))return existingSnap;if(!0===__classPrivateFieldGet(this,_SnapController_featureFlags,"f").dappsCanUpdateSnaps)return await this.updateSnap(origin,snapId,location,versionRange);throw eth_rpc_errors_1.ethErrors.rpc.invalidParams(`Version mismatch with already installed snap. ${snapId}@${existingSnap.version} doesn't satisfy requested version ${versionRange}.`)}let pendingApproval=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_createApproval).call(this,{origin,snapId,type:exports.SNAP_APPROVAL_INSTALL});existingSnap&&this.isRunning(snapId)&&await this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Stop),existingSnap&&location.shouldAlwaysReload&&this.revokeAllSnapPermissions(snapId);try{const{sourceCode}=await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_add).call(this,{origin,id:snapId,location,versionRange});await this.authorize(snapId,pendingApproval),pendingApproval=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_createApproval).call(this,{origin,snapId,type:exports.SNAP_APPROVAL_RESULT}),await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_startSnap).call(this,{snapId,sourceCode});const truncated=this.getTruncatedExpect(snapId);return __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_updateApproval).call(this,pendingApproval.id,{loading:!1,type:exports.SNAP_APPROVAL_INSTALL}),this.messagingSystem.publish("SnapController:snapInstalled",truncated),truncated}catch(error){throw(0,snaps_utils_1.logError)("Error when adding snap.",error),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_updateApproval).call(this,pendingApproval.id,{loading:!1,type:exports.SNAP_APPROVAL_INSTALL,error:error instanceof Error?error.message:error.toString()}),error}}async updateSnap(origin,snapId,location,newVersionRange=snaps_utils_1.DEFAULT_REQUESTED_SNAP_VERSION){if(!(0,utils_1.isValidSemVerRange)(newVersionRange))throw new Error(`Received invalid snap version range: "${newVersionRange}".`);let pendingApproval=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_createApproval).call(this,{origin,snapId,type:exports.SNAP_APPROVAL_UPDATE});try{const snap=this.getExpect(snapId),newSnap=await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_fetchSnap).call(this,snapId,location),newVersion=newSnap.manifest.result.version;if(!(0,utils_1.gtVersion)(newVersion,snap.version))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams(`Snap "${snapId}@${snap.version}" is already installed. Couldn't update to a version inside requested "${newVersionRange}" range.`);if(!(0,utils_1.satisfiesVersionRange)(newVersion,newVersionRange))throw new Error(`Version mismatch. Manifest for "${snapId}" specifies version "${newVersion}" which doesn't satisfy requested version range "${newVersionRange}".`);await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_assertIsInstallAllowed).call(this,snapId,{version:newVersion,checksum:newSnap.manifest.result.source.shasum});const processedPermissions=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_processSnapPermissions).call(this,newSnap.manifest.result.initialPermissions);__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_validateSnapPermissions).call(this,processedPermissions);const{newPermissions,unusedPermissions,approvedPermissions}=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_calculatePermissionsChange).call(this,snapId,processedPermissions);__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_updateApproval).call(this,pendingApproval.id,{permissions:newPermissions,newVersion:newSnap.manifest.result.version,newPermissions,approvedPermissions,unusedPermissions,loading:!1});const{permissions:approvedNewPermissions,...requestData}=await pendingApproval.promise;pendingApproval=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_createApproval).call(this,{origin,snapId,type:exports.SNAP_APPROVAL_RESULT}),this.isRunning(snapId)&&await this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Stop),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_transition).call(this,snapId,snaps_utils_1.SnapStatusEvents.Update),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_set).call(this,{origin,id:snapId,manifest:newSnap.manifest,files:newSnap.files,isUpdate:!0});const unusedPermissionsKeys=Object.keys(unusedPermissions);(0,utils_1.isNonEmptyArray)(unusedPermissionsKeys)&&this.messagingSystem.call("PermissionController:revokePermissions",{[snapId]:unusedPermissionsKeys}),(0,utils_1.isNonEmptyArray)(Object.keys(approvedNewPermissions))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:approvedNewPermissions,subject:{origin:snapId},requestData});const rollbackSnapshot=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRollbackSnapshot).call(this,snapId);void 0!==rollbackSnapshot&&(rollbackSnapshot.permissions.revoked=unusedPermissions,rollbackSnapshot.permissions.granted=Object.keys(approvedNewPermissions),rollbackSnapshot.permissions.requestData=requestData);const normalizedSourcePath=(0,snaps_utils_1.normalizeRelative)(newSnap.manifest.result.source.location.npm.filePath),sourceCode=newSnap.files.find((file=>file.path===normalizedSourcePath))?.toString();(0,utils_1.assert)("string"==typeof sourceCode&&sourceCode.length>0,`Invalid source code for snap "${snapId}".`);try{await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_startSnap).call(this,{snapId,sourceCode})}catch{throw new Error(`Snap ${snapId} crashed with updated source code.`)}const truncatedSnap=this.getTruncatedExpect(snapId);return this.messagingSystem.publish("SnapController:snapUpdated",truncatedSnap,snap.version),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_updateApproval).call(this,pendingApproval.id,{loading:!1,type:exports.SNAP_APPROVAL_UPDATE}),truncatedSnap}catch(error){throw(0,snaps_utils_1.logError)("Error when updating snap,",error),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_updateApproval).call(this,pendingApproval.id,{loading:!1,error:error instanceof Error?error.message:error.toString(),type:exports.SNAP_APPROVAL_UPDATE}),error}}async getRegistryMetadata(snapId){return await this.messagingSystem.call("SnapsRegistry:getMetadata",snapId)}async authorize(snapId,pendingApproval){(0,logging_1.log)(`Authorizing snap: ${snapId}`);const snap=this.state.snaps[snapId],{initialPermissions}=snap;try{const processedPermissions=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_processSnapPermissions).call(this,initialPermissions);__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_validateSnapPermissions).call(this,processedPermissions),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_updateApproval).call(this,pendingApproval.id,{loading:!1,permissions:processedPermissions});const{permissions:approvedPermissions,...requestData}=await pendingApproval.promise;(0,utils_1.isNonEmptyArray)(Object.keys(approvedPermissions))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions,subject:{origin:snapId},requestData})}finally{__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).installPromise=null}}destroy(){super.destroy(),__classPrivateFieldGet(this,_SnapController_timeoutForLastRequestStatus,"f")&&clearTimeout(__classPrivateFieldGet(this,_SnapController_timeoutForLastRequestStatus,"f")),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse)}async handleRequest({snapId,origin,handler:handlerType,request}){const permissionName=endowments_1.handlerEndowments[handlerType];if(!this.messagingSystem.call("PermissionController:hasPermission",snapId,permissionName))throw new Error(`Snap "${snapId}" is not permitted to use "${permissionName}".`);if(permissionName===endowments_1.SnapEndowments.Rpc){const subject=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",origin),isSnap=subject?.subjectType===permission_controller_1.SubjectType.Snap,permissions=this.messagingSystem.call("PermissionController:getPermissions",snapId),rpcPermission=permissions?.[endowments_1.SnapEndowments.Rpc];(0,utils_1.assert)(rpcPermission);const origins=(0,rpc_1.getRpcCaveatOrigins)(rpcPermission);if((0,utils_1.assert)(origins),isSnap&&!origins.snaps||!isSnap&&!origins.dapps)throw new Error(`Snap "${snapId}" is not permitted to handle JSON-RPC requests from "${origin}".`)}const handler=await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRpcRequestHandler).call(this,snapId);if(!handler)throw new Error(`Snap RPC message handler not found for snap "${snapId}".`);return handler({origin,handler:handlerType,request})}}exports.SnapController=SnapController,_SnapController_closeAllConnections=new WeakMap,_SnapController_environmentEndowmentPermissions=new WeakMap,_SnapController_excludedPermissions=new WeakMap,_SnapController_featureFlags=new WeakMap,_SnapController_fetchFunction=new WeakMap,_SnapController_idleTimeCheckInterval=new WeakMap,_SnapController_maxIdleTime=new WeakMap,_SnapController_detectSnapLocation=new WeakMap,_SnapController_rollbackSnapshots=new WeakMap,_SnapController_timeoutForLastRequestStatus=new WeakMap,_SnapController_statusMachine=new WeakMap,_SnapController_instances=new WeakSet,_SnapController_initializeStateMachine=function _SnapController_initializeStateMachine(){const disableGuard=({snapId})=>this.getExpect(snapId).enabled,statusConfig={initial:snaps_utils_1.SnapStatus.Installing,states:{[snaps_utils_1.SnapStatus.Installing]:{on:{[snaps_utils_1.SnapStatusEvents.Start]:{target:snaps_utils_1.SnapStatus.Running,cond:disableGuard}}},[snaps_utils_1.SnapStatus.Updating]:{on:{[snaps_utils_1.SnapStatusEvents.Start]:{target:snaps_utils_1.SnapStatus.Running,cond:disableGuard},[snaps_utils_1.SnapStatusEvents.Stop]:snaps_utils_1.SnapStatus.Stopped}},[snaps_utils_1.SnapStatus.Running]:{on:{[snaps_utils_1.SnapStatusEvents.Stop]:snaps_utils_1.SnapStatus.Stopped,[snaps_utils_1.SnapStatusEvents.Crash]:snaps_utils_1.SnapStatus.Crashed}},[snaps_utils_1.SnapStatus.Stopped]:{on:{[snaps_utils_1.SnapStatusEvents.Start]:{target:snaps_utils_1.SnapStatus.Running,cond:disableGuard},[snaps_utils_1.SnapStatusEvents.Update]:snaps_utils_1.SnapStatus.Updating}},[snaps_utils_1.SnapStatus.Crashed]:{on:{[snaps_utils_1.SnapStatusEvents.Start]:{target:snaps_utils_1.SnapStatus.Running,cond:disableGuard},[snaps_utils_1.SnapStatusEvents.Update]:snaps_utils_1.SnapStatus.Updating}}}};__classPrivateFieldSet(this,_SnapController_statusMachine,(0,fsm_1.createMachine)(statusConfig),"f"),(0,fsm_2.validateMachine)(__classPrivateFieldGet(this,_SnapController_statusMachine,"f"))},_SnapController_registerMessageHandlers=function _SnapController_registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${exports.controllerName}:clearSnapState`,((...args)=>this.clearSnapState(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:get`,((...args)=>this.get(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:getSnapState`,(async(...args)=>this.getSnapState(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:handleRequest`,(async(...args)=>this.handleRequest(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:has`,((...args)=>this.has(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${exports.controllerName}:updateSnapState`,(async(...args)=>this.updateSnapState(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:enable`,((...args)=>this.enableSnap(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:disable`,(async(...args)=>this.disableSnap(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:remove`,(async(...args)=>this.removeSnap(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:getPermitted`,((...args)=>this.getPermittedSnaps(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:install`,(async(...args)=>this.installSnaps(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:removeSnapError`,((...args)=>this.removeSnapError(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:getAll`,((...args)=>this.getAllSnaps(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:incrementActiveReferences`,((...args)=>this.incrementActiveReferences(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:decrementActiveReferences`,((...args)=>this.decrementActiveReferences(...args))),this.messagingSystem.registerActionHandler(`${exports.controllerName}:getRegistryMetadata`,(async(...args)=>this.getRegistryMetadata(...args)))},_SnapController_pollForLastRequestStatus=function _SnapController_pollForLastRequestStatus(){__classPrivateFieldSet(this,_SnapController_timeoutForLastRequestStatus,setTimeout((()=>{__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_stopSnapsLastRequestPastMax).call(this).catch((error=>{(0,snaps_utils_1.logError)(error)})),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_pollForLastRequestStatus).call(this)}),__classPrivateFieldGet(this,_SnapController_idleTimeCheckInterval,"f")),"f")},_SnapController_blockSnap=async function _SnapController_blockSnap(snapId,blockedSnapInfo){if(this.has(snapId)){try{this.update((state=>{state.snaps[snapId].blocked=!0,state.snaps[snapId].blockInformation=blockedSnapInfo})),await this.disableSnap(snapId)}catch(error){(0,snaps_utils_1.logError)(`Encountered error when stopping blocked snap "${snapId}".`,error)}this.messagingSystem.publish(`${exports.controllerName}:snapBlocked`,snapId,blockedSnapInfo)}},_SnapController_unblockSnap=function _SnapController_unblockSnap(snapId){this.has(snapId)&&this.state.snaps[snapId].blocked&&(this.update((state=>{state.snaps[snapId].blocked=!1,delete state.snaps[snapId].blockInformation})),this.messagingSystem.publish(`${exports.controllerName}:snapUnblocked`,snapId))},_SnapController_assertIsInstallAllowed=async function _SnapController_assertIsInstallAllowed(snapId,snapInfo){const result=(await this.messagingSystem.call("SnapsRegistry:get",{[snapId]:snapInfo}))[snapId];if(result.status===registry_1.SnapsRegistryStatus.Blocked)throw new Error(`Cannot install version "${snapInfo.version}" of snap "${snapId}": The version is blocked. ${result.reason?.explanation??""}`);if(__classPrivateFieldGet(this,_SnapController_featureFlags,"f").requireAllowlist&&result.status!==registry_1.SnapsRegistryStatus.Verified)throw new Error(`Cannot install version "${snapInfo.version}" of snap "${snapId}": The snap is not on the allow list.`)},_SnapController_stopSnapsLastRequestPastMax=async function _SnapController_stopSnapsLastRequestPastMax(){const entries=[...this.snapsRuntimeData.entries()];return Promise.all(entries.filter((([_snapId,runtime])=>0===runtime.activeReferences&&0===runtime.pendingInboundRequests.length&&runtime.lastRequest&&__classPrivateFieldGet(this,_SnapController_maxIdleTime,"f")&&(0,utils_1.timeSince)(runtime.lastRequest)>__classPrivateFieldGet(this,_SnapController_maxIdleTime,"f"))).map((async([snapId])=>this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Stop))))},_SnapController_transition=function _SnapController_transition(snapId,event){const{interpreter}=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);interpreter.send(event),this.update((state=>{state.snaps[snapId].status=interpreter.state.value}))},_SnapController_terminateSnap=async function _SnapController_terminateSnap(snapId){await this.messagingSystem.call("ExecutionService:terminateSnap",snapId),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(snapId))},_SnapController_removeSnapFromSubjects=function _SnapController_removeSnapFromSubjects(snapId){const subjects=this.messagingSystem.call("PermissionController:getSubjectNames");for(const subject of subjects){const subjectPermissions=this.messagingSystem.call("PermissionController:getPermissions",subject),snapIdsCaveat=subjectPermissions?.[rpc_methods_1.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((caveat=>caveat.type===snaps_utils_1.SnapCaveatType.SnapIds))??{};if(Boolean(snapIdsCaveat.value?.[snapId])){const newCaveatValue={...snapIdsCaveat.value};delete newCaveatValue[snapId],Object.keys(newCaveatValue).length>0?this.messagingSystem.call("PermissionController:updateCaveat",subject,rpc_methods_1.WALLET_SNAP_PERMISSION_KEY,snaps_utils_1.SnapCaveatType.SnapIds,newCaveatValue):this.messagingSystem.call("PermissionController:revokePermissions",{[subject]:[rpc_methods_1.WALLET_SNAP_PERMISSION_KEY]})}}},_SnapController_createApproval=function _SnapController_createApproval({origin,snapId,type}){const id=(0,nanoid_1.nanoid)();return{id,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin,id,type,requestData:{metadata:{id,origin:snapId,dappOrigin:origin},snapId},requestState:{loading:!0}},!0)}},_SnapController_updateApproval=function _SnapController_updateApproval(id,requestState){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id,requestState})}catch{}},_SnapController_add=async function _SnapController_add(args){const{id:snapId,location,versionRange}=args;__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_setupRuntime).call(this,snapId,{sourceCode:null,state:null});const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);runtime.installPromise||((0,logging_1.log)(`Adding snap: ${snapId}`),runtime.installPromise=(async()=>{const fetchedSnap=await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_fetchSnap).call(this,snapId,location),manifest=fetchedSnap.manifest.result;if((0,snaps_utils_1.assertIsSnapManifest)(manifest),!(0,utils_1.satisfiesVersionRange)(manifest.version,versionRange))throw new Error(`Version mismatch. Manifest for "${snapId}" specifies version "${manifest.version}" which doesn't satisfy requested version range "${versionRange}".`);return await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_assertIsInstallAllowed).call(this,snapId,{version:manifest.version,checksum:manifest.source.shasum}),__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_set).call(this,{...args,...fetchedSnap,id:snapId})})());try{return await runtime.installPromise}catch(error){throw runtime.installPromise=null,error}},_SnapController_startSnap=async function _SnapController_startSnap(snapData){const{snapId}=snapData;if(this.isRunning(snapId))throw new Error(`Snap "${snapId}" is already started.`);try{const result=await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_executeWithTimeout).call(this,snapId,this.messagingSystem.call("ExecutionService:executeSnap",{...snapData,endowments:await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getEndowments).call(this,snapId)}));return __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_transition).call(this,snapId,snaps_utils_1.SnapStatusEvents.Start),result}catch(error){throw await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_terminateSnap).call(this,snapId),error}},_SnapController_getEndowments=async function _SnapController_getEndowments(snapId){let allEndowments=[];for(const permissionName of __classPrivateFieldGet(this,_SnapController_environmentEndowmentPermissions,"f"))if(this.messagingSystem.call("PermissionController:hasPermission",snapId,permissionName)){const endowments=await this.messagingSystem.call("PermissionController:getEndowments",snapId,permissionName);if(endowments){if(!Array.isArray(endowments)||endowments.some((value=>"string"!=typeof value)))throw new Error("Expected an array of string endowment names.");allEndowments=allEndowments.concat(endowments)}}const dedupedEndowments=[...new Set([...snaps_utils_1.DEFAULT_ENDOWMENTS,...allEndowments])];return dedupedEndowments.length<snaps_utils_1.DEFAULT_ENDOWMENTS.length+allEndowments.length&&(0,snaps_utils_1.logError)("Duplicate endowments found. Default endowments should not be requested.",allEndowments),dedupedEndowments},_SnapController_set=function _SnapController_set(args){const{id:snapId,origin,manifest,files,isUpdate=!1}=args;(0,snaps_utils_1.assertIsSnapManifest)(manifest.result);const{version}=manifest.result,normalizedSourcePath=(0,snaps_utils_1.normalizeRelative)(manifest.result.source.location.npm.filePath),{iconPath}=manifest.result.source.location.npm,normalizedIconPath=iconPath&&(0,snaps_utils_1.normalizeRelative)(iconPath),sourceCode=files.find((file=>file.path===normalizedSourcePath))?.toString(),svgIcon=normalizedIconPath?files.find((file=>file.path===normalizedIconPath)):void 0;(0,utils_1.assert)("string"==typeof sourceCode&&sourceCode.length>0,`Invalid source code for snap "${snapId}".`);const existingSnap=this.state.snaps[snapId],versionHistory=[...existingSnap?.versionHistory??[],{version,date:Date.now(),origin}],snap={...existingSnap,blocked:!1,enabled:!0,id:snapId,initialPermissions:manifest.result.initialPermissions,manifest:manifest.result,status:__classPrivateFieldGet(this,_SnapController_statusMachine,"f").config.initial,version,versionHistory};delete snap.blockInformation;const{inversePatches}=this.update((state=>{state.snaps[snapId]=snap}));if(isUpdate){const rollbackSnapshot=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRollbackSnapshot).call(this,snapId);void 0!==rollbackSnapshot&&(rollbackSnapshot.statePatches=inversePatches)}return __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).sourceCode=sourceCode,this.messagingSystem.publish("SnapController:snapAdded",snap,svgIcon?.toString()),{...snap,sourceCode}},_SnapController_fetchSnap=async function _SnapController_fetchSnap(snapId,location){try{const manifest=await location.manifest(),sourceCode=await location.fetch(manifest.result.source.location.npm.filePath),{iconPath}=manifest.result.source.location.npm,svgIcon=iconPath?await location.fetch(iconPath):void 0,files=[sourceCode];return svgIcon&&files.push(svgIcon),(0,snaps_utils_1.validateSnapShasum)({manifest,sourceCode,svgIcon}),{manifest,files,location}}catch(error){const message=error instanceof Error?error.message:error.toString();throw new Error(`Failed to fetch Snap "${snapId}": ${message}.`)}},_SnapController_processSnapPermissions=function _SnapController_processSnapPermissions(initialPermissions){return Object.fromEntries(Object.entries(initialPermissions).map((([initialPermission,value])=>(0,utils_1.hasProperty)(rpc_methods_1.caveatMappers,initialPermission)?[initialPermission,rpc_methods_1.caveatMappers[initialPermission](value)]:(0,utils_1.hasProperty)(endowments_1.endowmentCaveatMappers,initialPermission)?[initialPermission,endowments_1.endowmentCaveatMappers[initialPermission](value)]:[initialPermission,value])))},_SnapController_validateSnapPermissions=function _SnapController_validateSnapPermissions(processedPermissions){const permissionKeys=Object.keys(processedPermissions),handlerPermissions=Object.values(endowments_1.handlerEndowments);(0,utils_1.assert)(permissionKeys.some((key=>handlerPermissions.includes(key))),`A snap must request at least one of the following permissions: ${handlerPermissions.join(", ")}.`);const excludedPermissionErrors=permissionKeys.reduce(((errors,permission)=>((0,utils_1.hasProperty)(__classPrivateFieldGet(this,_SnapController_excludedPermissions,"f"),permission)&&errors.push(__classPrivateFieldGet(this,_SnapController_excludedPermissions,"f")[permission]),errors)),[]);(0,utils_1.assert)(0===excludedPermissionErrors.length,`One or more permissions are not allowed:\n${excludedPermissionErrors.join("\n")}`)},_SnapController_getRpcRequestHandler=function _SnapController_getRpcRequestHandler(snapId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId),existingHandler=runtime.rpcHandler;if(existingHandler)return existingHandler;const requestQueue=new RequestQueue_1.RequestQueue(5),startPromises=new Map,rpcHandler=async({origin,handler:handlerType,request})=>{if(!1===this.state.snaps[snapId].enabled)throw new Error(`Snap "${snapId}" is disabled.`);if(this.state.snaps[snapId].status===snaps_utils_1.SnapStatus.Installing)throw new Error(`Snap "${snapId}" is currently being installed. Please try again later.`);if(!this.isRunning(snapId)){let localStartPromise=startPromises.get(snapId);if(localStartPromise){if(requestQueue.get(origin)>=requestQueue.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else localStartPromise=this.startSnap(snapId),startPromises.set(snapId,localStartPromise);requestQueue.increment(origin);try{await localStartPromise}finally{requestQueue.decrement(origin),startPromises.get(snapId)===localStartPromise&&startPromises.delete(snapId)}}let _request=request;if((0,utils_1.hasProperty)(request,"jsonrpc")){if("2.0"!==request.jsonrpc)throw eth_rpc_errors_1.ethErrors.rpc.invalidRequest({message:'Invalid "jsonrpc" property. Must be "2.0" if provided.',data:request.jsonrpc})}else _request={...request,jsonrpc:"2.0"};const timer=new Timer_1.Timer(this.maxRequestTime);__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_recordSnapRpcRequestStart).call(this,snapId,request.id,timer);const handleRpcRequestPromise=this.messagingSystem.call("ExecutionService:handleRpcRequest",snapId,{origin,handler:handlerType,request:_request});try{const result=await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_executeWithTimeout).call(this,snapId,handleRpcRequestPromise,timer);return __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_recordSnapRpcRequestFinish).call(this,snapId,request.id),result}catch(error){throw await this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Crash),error}};return runtime.rpcHandler=rpcHandler,rpcHandler},_SnapController_executeWithTimeout=async function _SnapController_executeWithTimeout(snapId,promise,timer){if(this.messagingSystem.call("PermissionController:hasPermission",snapId,endowments_1.SnapEndowments.LongRunning))return(0,snaps_utils_1.logWarning)(`${endowments_1.SnapEndowments.LongRunning} will soon be deprecated. For more information please see https://github.com/MetaMask/snaps-monorepo/issues/945.`),promise;const result=await(0,utils_2.withTimeout)(promise,timer??this.maxRequestTime);if(result===utils_2.hasTimedOut)throw new Error("The request timed out.");return result},_SnapController_recordSnapRpcRequestStart=function _SnapController_recordSnapRpcRequestStart(snapId,requestId,timer){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);runtime.pendingInboundRequests.push({requestId,timer}),runtime.lastRequest=null},_SnapController_recordSnapRpcRequestFinish=function _SnapController_recordSnapRpcRequestFinish(snapId,requestId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId);runtime.pendingInboundRequests=runtime.pendingInboundRequests.filter((request=>request.requestId!==requestId)),0===runtime.pendingInboundRequests.length&&(runtime.lastRequest=Date.now())},_SnapController_getRollbackSnapshot=function _SnapController_getRollbackSnapshot(snapId){return __classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").get(snapId)},_SnapController_createRollbackSnapshot=function _SnapController_createRollbackSnapshot(snapId){(0,utils_1.assert)(void 0===__classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").get(snapId),new Error(`Snap "${snapId}" rollback snapshot already exists.`)),__classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").set(snapId,{statePatches:[],sourceCode:"",permissions:{revoked:null,granted:[],requestData:null},newVersion:""});const newRollbackSnapshot=__classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").get(snapId);return(0,utils_1.assert)(void 0!==newRollbackSnapshot,new Error(`Snapshot creation failed for ${snapId}.`)),newRollbackSnapshot},_SnapController_rollbackSnap=async function _SnapController_rollbackSnap(snapId){const rollbackSnapshot=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRollbackSnapshot).call(this,snapId);if(!rollbackSnapshot)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(snapId,snaps_utils_1.SnapStatusEvents.Stop),this.get(snapId)?.status!==snaps_utils_1.SnapStatus.Stopped&&__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_transition).call(this,snapId,snaps_utils_1.SnapStatusEvents.Stop);const{statePatches,sourceCode,permissions}=rollbackSnapshot;if(statePatches?.length&&this.applyPatches(statePatches),this.get(snapId)?.status!==snaps_utils_1.SnapStatus.Stopped&&this.update((state=>{state.snaps[snapId].status=snaps_utils_1.SnapStatus.Stopped})),sourceCode){__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntimeExpect).call(this,snapId).sourceCode=sourceCode}permissions.revoked&&Object.keys(permissions.revoked).length&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:permissions.revoked,subject:{origin:snapId},requestData:permissions.requestData}),permissions.granted?.length&&this.messagingSystem.call("PermissionController:revokePermissions",{[snapId]:permissions.granted});const truncatedSnap=this.getTruncatedExpect(snapId);this.messagingSystem.publish("SnapController:snapRolledback",truncatedSnap,rollbackSnapshot.newVersion),__classPrivateFieldGet(this,_SnapController_rollbackSnapshots,"f").delete(snapId)},_SnapController_rollbackSnaps=async function _SnapController_rollbackSnaps(snapIds){for(const snapId of snapIds)await __classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_rollbackSnap).call(this,snapId)},_SnapController_getRuntime=function _SnapController_getRuntime(snapId){return this.snapsRuntimeData.get(snapId)},_SnapController_getRuntimeExpect=function _SnapController_getRuntimeExpect(snapId){const runtime=__classPrivateFieldGet(this,_SnapController_instances,"m",_SnapController_getRuntime).call(this,snapId);return(0,utils_1.assert)(void 0!==runtime,new Error(`Snap "${snapId}" runtime data not found`)),runtime},_SnapController_setupRuntime=function _SnapController_setupRuntime(snapId,data){if(this.snapsRuntimeData.has(snapId))return;const snap=this.get(snapId),interpreter=(0,fsm_1.interpret)(__classPrivateFieldGet(this,_SnapController_statusMachine,"f"));interpreter.start({context:{snapId},value:snap?.status??__classPrivateFieldGet(this,_SnapController_statusMachine,"f").config.initial}),(0,fsm_2.forceStrict)(interpreter),this.snapsRuntimeData.set(snapId,{lastRequest:null,rpcHandler:null,installPromise:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter,...data})},_SnapController_calculatePermissionsChange=function _SnapController_calculatePermissionsChange(snapId,desiredPermissionsSet){const oldPermissions=this.messagingSystem.call("PermissionController:getPermissions",snapId)??{},newPermissions=(0,utils_2.setDiff)(desiredPermissionsSet,oldPermissions),unusedPermissions=(0,utils_2.setDiff)(oldPermissions,desiredPermissionsSet);return{newPermissions,unusedPermissions,approvedPermissions:(0,utils_2.setDiff)(oldPermissions,unusedPermissions)}},_SnapController_isValidUpdate=function _SnapController_isValidUpdate(snapId,newVersionRange){const existingSnap=this.getExpect(snapId);return!(0,utils_1.satisfiesVersionRange)(existingSnap.version,newVersionRange)&&!(0,utils_1.gtRange)(existingSnap.version,newVersionRange)}},"./node_modules/@metamask/snaps-controllers/dist/snaps/Timer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timer=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js");exports.Timer=class Timer{constructor(ms){(0,utils_1.assert)(!Number.isNaN(ms),new TypeError("Can't start a timer with NaN time")),(0,utils_1.assert)(ms>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:ms}}get status(){return this.state.value}cancel(){(0,utils_1.assert)("paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}pause(){(0,utils_1.assert)("running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback,start,timeout,remaining}=this.state;void 0!==timeout&&clearTimeout(timeout),this.state={value:"paused",callback,remaining:remaining-(Date.now()-start)}}start(callback){(0,utils_1.assert)("stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining}=this.state;this.state={value:"paused",remaining,callback},this.resume()}resume(){(0,utils_1.assert)("paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining,callback}=this.state,start=Date.now();let timeout;remaining!==Number.POSITIVE_INFINITY&&(timeout=setTimeout((()=>this.onFinish(!0)),remaining)),this.state={value:"running",callback,remaining,start,timeout}}onFinish(shouldCall){(0,utils_1.assert)("running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&void 0!==this.state.timeout&&clearTimeout(this.state.timeout);const{callback}=this.state;this.state={value:"finished"},shouldCall&&callback()}}},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/cronjob.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cronjobCaveatSpecifications=exports.validateCronjobCaveat=exports.getCronjobCaveatJobs=exports.getCronjobCaveatMapper=exports.cronjobEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),eth_rpc_errors_1=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.Cronjob;function validateCronjobCaveat(caveat){if(!(0,utils_1.hasProperty)(caveat,"value")||!(0,utils_1.isPlainObject)(caveat.value))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Expected a plain object."});const{value}=caveat;if(!(0,utils_1.hasProperty)(value,"jobs")||!(0,utils_1.isPlainObject)(value))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Expected a plain object."});if(!(0,snaps_utils_1.isCronjobSpecificationArray)(value.jobs))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Expected a valid cronjob specification array."})}exports.cronjobEndowmentBuilder=Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName:permissionName,allowedCaveats:[snaps_utils_1.SnapCaveatType.SnapCronjob],endowmentGetter:_getterOptions=>{},subjectTypes:[permission_controller_1.SubjectType.Snap]})}),exports.getCronjobCaveatMapper=function getCronjobCaveatMapper(value){return{caveats:[{type:snaps_utils_1.SnapCaveatType.SnapCronjob,value}]}},exports.getCronjobCaveatJobs=function getCronjobCaveatJobs(permission){if(!permission?.caveats)return null;(0,utils_1.assert)(1===permission.caveats.length),(0,utils_1.assert)(permission.caveats[0].type===snaps_utils_1.SnapCaveatType.SnapCronjob);const caveat=permission.caveats[0];return caveat.value?.jobs??null},exports.validateCronjobCaveat=validateCronjobCaveat,exports.cronjobCaveatSpecifications={[snaps_utils_1.SnapCaveatType.SnapCronjob]:Object.freeze({type:snaps_utils_1.SnapCaveatType.SnapCronjob,validator:caveat=>validateCronjobCaveat(caveat)})}},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapEndowments=void 0,function(SnapEndowments){SnapEndowments.NetworkAccess="endowment:network-access",SnapEndowments.LongRunning="endowment:long-running",SnapEndowments.TransactionInsight="endowment:transaction-insight",SnapEndowments.Keyring="endowment:keyring",SnapEndowments.Cronjob="endowment:cronjob",SnapEndowments.EthereumProvider="endowment:ethereum-provider",SnapEndowments.Rpc="endowment:rpc",SnapEndowments.WebAssemblyAccess="endowment:webassembly"}(exports.SnapEndowments||(exports.SnapEndowments={}))},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/ethereum-provider.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ethereumProviderEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.EthereumProvider;exports.ethereumProviderEndowmentBuilder=Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName:permissionName,allowedCaveats:null,endowmentGetter:_getterOptions=>["ethereum"],subjectTypes:[permission_controller_1.SubjectType.Snap]})})},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTransactionOriginCaveat=exports.getRpcCaveatOrigins=exports.handlerEndowments=exports.endowmentCaveatMappers=exports.endowmentCaveatSpecifications=exports.endowmentPermissionBuilders=void 0;const snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),cronjob_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/cronjob.js"),ethereum_provider_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/ethereum-provider.js"),keyring_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/keyring.js"),long_running_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/long-running.js"),network_access_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/network-access.js"),rpc_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/rpc.js"),transaction_insight_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/transaction-insight.js"),web_assembly_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/web-assembly.js");exports.endowmentPermissionBuilders={[network_access_1.networkAccessEndowmentBuilder.targetName]:network_access_1.networkAccessEndowmentBuilder,[long_running_1.longRunningEndowmentBuilder.targetName]:long_running_1.longRunningEndowmentBuilder,[transaction_insight_1.transactionInsightEndowmentBuilder.targetName]:transaction_insight_1.transactionInsightEndowmentBuilder,[keyring_1.keyringEndowmentBuilder.targetName]:keyring_1.keyringEndowmentBuilder,[cronjob_1.cronjobEndowmentBuilder.targetName]:cronjob_1.cronjobEndowmentBuilder,[ethereum_provider_1.ethereumProviderEndowmentBuilder.targetName]:ethereum_provider_1.ethereumProviderEndowmentBuilder,[rpc_1.rpcEndowmentBuilder.targetName]:rpc_1.rpcEndowmentBuilder,[web_assembly_1.webAssemblyEndowmentBuilder.targetName]:web_assembly_1.webAssemblyEndowmentBuilder},exports.endowmentCaveatSpecifications={...keyring_1.keyringCaveatSpecifications,...cronjob_1.cronjobCaveatSpecifications,...transaction_insight_1.transactionInsightCaveatSpecifications,...rpc_1.rpcCaveatSpecifications},exports.endowmentCaveatMappers={[keyring_1.keyringEndowmentBuilder.targetName]:keyring_1.getKeyringCaveatMapper,[cronjob_1.cronjobEndowmentBuilder.targetName]:cronjob_1.getCronjobCaveatMapper,[transaction_insight_1.transactionInsightEndowmentBuilder.targetName]:transaction_insight_1.getTransactionInsightCaveatMapper,[rpc_1.rpcEndowmentBuilder.targetName]:rpc_1.getRpcCaveatMapper},exports.handlerEndowments={[snaps_utils_1.HandlerType.OnRpcRequest]:rpc_1.rpcEndowmentBuilder.targetName,[snaps_utils_1.HandlerType.SnapKeyring]:keyring_1.keyringEndowmentBuilder.targetName,[snaps_utils_1.HandlerType.OnTransaction]:transaction_insight_1.transactionInsightEndowmentBuilder.targetName,[snaps_utils_1.HandlerType.OnCronjob]:cronjob_1.cronjobEndowmentBuilder.targetName},__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js"),exports);var rpc_2=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/rpc.js");Object.defineProperty(exports,"getRpcCaveatOrigins",{enumerable:!0,get:function(){return rpc_2.getRpcCaveatOrigins}});var transaction_insight_2=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/transaction-insight.js");Object.defineProperty(exports,"getTransactionOriginCaveat",{enumerable:!0,get:function(){return transaction_insight_2.getTransactionOriginCaveat}})},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/keyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keyringCaveatSpecifications=exports.getKeyringCaveatNamespaces=exports.getKeyringCaveatMapper=exports.keyringEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),eth_rpc_errors_1=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),targetName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.Keyring;exports.keyringEndowmentBuilder=Object.freeze({targetName,specificationBuilder:()=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName,allowedCaveats:[snaps_utils_1.SnapCaveatType.SnapKeyring],endowmentGetter:_getterOptions=>{},validator:({caveats})=>{if(1!==caveats?.length||caveats[0].type!==snaps_utils_1.SnapCaveatType.SnapKeyring)throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:`Expected a single "${snaps_utils_1.SnapCaveatType.SnapKeyring}" caveat.`})},subjectTypes:[permission_controller_1.SubjectType.Snap]})}),exports.getKeyringCaveatMapper=function getKeyringCaveatMapper(value){return{caveats:[{type:snaps_utils_1.SnapCaveatType.SnapKeyring,value}]}},exports.getKeyringCaveatNamespaces=function getKeyringCaveatNamespaces(permission){if(!permission?.caveats)return null;(0,utils_1.assert)(1===permission.caveats.length),(0,utils_1.assert)(permission.caveats[0].type===snaps_utils_1.SnapCaveatType.SnapKeyring);const caveat=permission.caveats[0];return caveat.value?.namespaces??null},exports.keyringCaveatSpecifications={[snaps_utils_1.SnapCaveatType.SnapKeyring]:Object.freeze({type:snaps_utils_1.SnapCaveatType.SnapKeyring,validator:caveat=>function validateCaveatNamespace(caveat){if(!(0,utils_1.hasProperty)(caveat,"value")||!(0,utils_1.isPlainObject)(caveat.value))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Expected a plain object."});const{value}=caveat;if(!(0,utils_1.hasProperty)(value,"namespaces")||!(0,utils_1.isPlainObject)(value))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Expected a plain object."});(0,snaps_utils_1.assertIsNamespacesObject)(value.namespaces,eth_rpc_errors_1.ethErrors.rpc.invalidParams)}(caveat)})}},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/long-running.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.longRunningEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.LongRunning;exports.longRunningEndowmentBuilder=Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName:permissionName,allowedCaveats:null,endowmentGetter:_getterOptions=>{},subjectTypes:[permission_controller_1.SubjectType.Snap]})})},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/network-access.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.networkAccessEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.NetworkAccess;exports.networkAccessEndowmentBuilder=Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName:permissionName,allowedCaveats:null,endowmentGetter:_getterOptions=>["fetch","Request","Headers","Response"],subjectTypes:[permission_controller_1.SubjectType.Snap]})})},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/rpc.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rpcCaveatSpecifications=exports.getRpcCaveatOrigins=exports.getRpcCaveatMapper=exports.rpcEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),eth_rpc_errors_1=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),targetName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.Rpc;exports.rpcEndowmentBuilder=Object.freeze({targetName,specificationBuilder:()=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName,allowedCaveats:[snaps_utils_1.SnapCaveatType.RpcOrigin],endowmentGetter:_getterOptions=>{},validator:({caveats})=>{if(1!==caveats?.length||caveats[0].type!==snaps_utils_1.SnapCaveatType.RpcOrigin)throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:`Expected a single "${snaps_utils_1.SnapCaveatType.RpcOrigin}" caveat.`})},subjectTypes:[permission_controller_1.SubjectType.Snap]})}),exports.getRpcCaveatMapper=function getRpcCaveatMapper(value){return{caveats:[{type:snaps_utils_1.SnapCaveatType.RpcOrigin,value}]}},exports.getRpcCaveatOrigins=function getRpcCaveatOrigins(permission){return(0,utils_1.assert)(permission?.caveats),(0,utils_1.assert)(1===permission.caveats.length),(0,utils_1.assert)(permission.caveats[0].type===snaps_utils_1.SnapCaveatType.RpcOrigin),permission.caveats[0].value},exports.rpcCaveatSpecifications={[snaps_utils_1.SnapCaveatType.RpcOrigin]:Object.freeze({type:snaps_utils_1.SnapCaveatType.RpcOrigin,validator:caveat=>function validateCaveatOrigins(caveat){if(!(0,utils_1.hasProperty)(caveat,"value")||!(0,utils_1.isPlainObject)(caveat.value))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Invalid JSON-RPC origins: Expected a plain object."});const{value}=caveat;(0,snaps_utils_1.assertIsRpcOrigins)(value,eth_rpc_errors_1.ethErrors.rpc.invalidParams)}(caveat)})}},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/transaction-insight.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transactionInsightCaveatSpecifications=exports.getTransactionOriginCaveat=exports.getTransactionInsightCaveatMapper=exports.transactionInsightEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),eth_rpc_errors_1=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.TransactionInsight;exports.transactionInsightEndowmentBuilder=Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName:permissionName,allowedCaveats:[snaps_utils_1.SnapCaveatType.TransactionOrigin],endowmentGetter:_getterOptions=>{},validator:({caveats})=>{if(null!==caveats&&caveats?.length>1||1===caveats?.length&&caveats[0].type!==snaps_utils_1.SnapCaveatType.TransactionOrigin)throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:`Expected a single "${snaps_utils_1.SnapCaveatType.TransactionOrigin}" caveat.`})},subjectTypes:[permission_controller_1.SubjectType.Snap]})}),exports.getTransactionInsightCaveatMapper=function getTransactionInsightCaveatMapper(value){return!value||!(0,utils_1.isObject)(value)||(0,utils_1.isObject)(value)&&0===Object.keys(value).length?{caveats:null}:{caveats:[{type:snaps_utils_1.SnapCaveatType.TransactionOrigin,value:(0,utils_1.hasProperty)(value,"allowTransactionOrigin")&&value.allowTransactionOrigin}]}},exports.getTransactionOriginCaveat=function getTransactionOriginCaveat(permission){return permission?.caveats?((0,utils_1.assert)(1===permission.caveats.length),(0,utils_1.assert)(permission.caveats[0].type===snaps_utils_1.SnapCaveatType.TransactionOrigin),permission.caveats[0].value??null):null},exports.transactionInsightCaveatSpecifications={[snaps_utils_1.SnapCaveatType.TransactionOrigin]:Object.freeze({type:snaps_utils_1.SnapCaveatType.TransactionOrigin,validator:caveat=>function validateCaveat(caveat){if(!(0,utils_1.hasProperty)(caveat,"value")||!(0,utils_1.isPlainObject)(caveat))throw eth_rpc_errors_1.ethErrors.rpc.invalidParams({message:"Expected a plain object."});const{value}=caveat;(0,utils_1.assert)("boolean"==typeof value,'Expected caveat value to have type "boolean"')}(caveat)})}},"./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/web-assembly.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.webAssemblyEndowmentBuilder=void 0;const permission_controller_1=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),permissionName=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/enum.js").SnapEndowments.WebAssemblyAccess;exports.webAssemblyEndowmentBuilder=Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:permission_controller_1.PermissionType.Endowment,targetName:permissionName,allowedCaveats:null,endowmentGetter:_getterOptions=>["WebAssembly"],subjectTypes:[permission_controller_1.SubjectType.Snap]})})},"./node_modules/@metamask/snaps-controllers/dist/snaps/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/SnapController.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/endowments/index.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/selectors.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/registry/index.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/snaps/location/http.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpLocation=void 0;const snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js");exports.HttpLocation=class HttpLocation{constructor(url,opts={}){this.cache=new Map,(0,utils_1.assertStruct)(url.toString(),snaps_utils_1.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=opts.fetch??globalThis.fetch.bind(globalThis),this.fetchOptions=opts.fetchOptions,this.url=url}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const canonicalPath=new URL(snaps_utils_1.NpmSnapFileNames.Manifest,this.url).toString(),response=await this.fetchFn(canonicalPath,this.fetchOptions);if(!response.ok)throw new Error(`Failed to fetch "${canonicalPath}". Status code: ${response.status}.`);const contents=await response.text(),manifest=(0,snaps_utils_1.parseJson)(contents),vfile=new snaps_utils_1.VirtualFile({value:contents,result:(0,snaps_utils_1.createSnapManifest)(manifest),path:snaps_utils_1.NpmSnapFileNames.Manifest,data:{canonicalPath}});return this.validatedManifest=vfile,this.manifest()}async fetch(path){const relativePath=(0,snaps_utils_1.normalizeRelative)(path),cached=this.cache.get(relativePath);if(void 0!==cached){const{file,contents}=cached,value=new Uint8Array(await contents.arrayBuffer()),vfile=file.clone();return vfile.value=value,vfile}const canonicalPath=this.toCanonical(relativePath).toString(),response=await this.fetchFn(canonicalPath,this.fetchOptions);if(!response.ok)throw new Error(`Failed to fetch "${canonicalPath}". Status code: ${response.status}.`);const vfile=new snaps_utils_1.VirtualFile({value:"",path:relativePath,data:{canonicalPath}}),blob=await response.blob();return(0,utils_1.assert)(!this.cache.has(relativePath),"Corrupted cache, multiple files with same path."),this.cache.set(relativePath,{file:vfile,contents:blob}),this.fetch(relativePath)}get root(){return new URL(this.url)}toCanonical(path){return(0,utils_1.assert)(!path.startsWith("/"),"Tried to parse absolute path."),new URL(path,this.url)}}},"./node_modules/@metamask/snaps-controllers/dist/snaps/location/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/location.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/npm.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/local.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/http.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/snaps/location/local.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _LocalLocation_http,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocalLocation=void 0;const snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),http_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/http.js");function convertCanonical(vfile){return(0,utils_1.assert)(void 0!==vfile.data.canonicalPath),vfile.data.canonicalPath=`local:${vfile.data.canonicalPath}`,vfile}exports.LocalLocation=class LocalLocation{constructor(url,opts={}){_LocalLocation_http.set(this,void 0),(0,utils_1.assertStruct)(url.toString(),snaps_utils_1.LocalSnapIdStruct,"Invalid Snap Id"),(0,utils_1.assert)(void 0===opts.fetchOptions,"Currently adding fetch options to local: is unsupported."),__classPrivateFieldSet(this,_LocalLocation_http,new http_1.HttpLocation(new URL(url.toString().slice(snaps_utils_1.SnapIdPrefixes.local.length)),{...opts,fetchOptions:{cache:"no-cache"}}),"f")}async manifest(){return convertCanonical(await __classPrivateFieldGet(this,_LocalLocation_http,"f").manifest())}async fetch(path){return convertCanonical(await __classPrivateFieldGet(this,_LocalLocation_http,"f").fetch(path))}get shouldAlwaysReload(){return!0}},_LocalLocation_http=new WeakMap},"./node_modules/@metamask/snaps-controllers/dist/snaps/location/location.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detectSnapLocation=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),http_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/http.js"),local_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/local.js"),npm_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/location/npm.js");exports.detectSnapLocation=function detectSnapLocation(location,opts){const allowHttp=opts?.allowHttp??!1,allowLocal=opts?.allowLocal??!1,root=new URL(location);switch(root.protocol){case"npm:":return new npm_1.NpmLocation(root,opts);case"local:":return(0,utils_1.assert)(allowLocal,new TypeError("Fetching local snaps is disabled.")),new local_1.LocalLocation(root,opts);case"http:":case"https:":return(0,utils_1.assert)(allowHttp,new TypeError("Fetching snaps through http/https is disabled.")),new http_1.HttpLocation(root,opts);default:throw new TypeError(`Unrecognized "${root.protocol}" snap location protocol.`)}}},"./node_modules/@metamask/snaps-controllers/dist/snaps/location/npm.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _NpmLocation_instances,_NpmLocation_lazyInit,__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NpmLocation=void 0;const snaps_utils_1=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/index.browser.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),concat_stream_1=__importDefault(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js")),gunzip_maybe_1=__importDefault(__webpack_require__("./node_modules/gunzip-maybe/index.js")),pump_1=__importDefault(__webpack_require__("./node_modules/pump/index.js")),readable_web_to_node_stream_1=__webpack_require__("./node_modules/readable-web-to-node-stream/lib/index.js"),tar_stream_1=__webpack_require__("./node_modules/tar-stream/index.js");exports.NpmLocation=class NpmLocation{constructor(url,opts={}){_NpmLocation_instances.add(this);const allowCustomRegistries=opts.allowCustomRegistries??!1,fetchFunction=opts.fetch??globalThis.fetch.bind(globalThis),requestedRange=opts.versionRange??snaps_utils_1.DEFAULT_REQUESTED_SNAP_VERSION;let registry;(0,utils_1.assertStruct)(url.toString(),snaps_utils_1.NpmSnapIdStruct,"Invalid Snap Id: "),""===url.host&&""===url.port&&""===url.username&&""===url.password?registry=new URL("https://registry.npmjs.org"):(registry="https://",url.username&&(registry+=url.username,url.password&&(registry+=`:${url.password}`),registry+="@"),registry+=url.host,registry=new URL(registry),(0,utils_1.assert)(allowCustomRegistries,new TypeError(`Custom NPM registries are disabled, tried to use "${registry.toString()}".`))),(0,utils_1.assert)("/"===registry.pathname&&""===registry.search&&""===registry.hash),(0,utils_1.assert)(""!==url.pathname&&"/"!==url.pathname,new TypeError("The package name in NPM location is empty."));let packageName=url.pathname;packageName.startsWith("/")&&(packageName=packageName.slice(1)),this.meta={requestedRange,registry,packageName,fetch:fetchFunction}}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const vfile=await this.fetch("snap.manifest.json"),result=(0,snaps_utils_1.parseJson)(vfile.toString());return vfile.result=(0,snaps_utils_1.createSnapManifest)(result),this.validatedManifest=vfile,this.manifest()}async fetch(path){const relativePath=(0,snaps_utils_1.normalizeRelative)(path);this.files||(await __classPrivateFieldGet(this,_NpmLocation_instances,"m",_NpmLocation_lazyInit).call(this),(0,utils_1.assert)(void 0!==this.files));const vfile=this.files.get(relativePath);return(0,utils_1.assert)(void 0!==vfile,new TypeError(`File "${path}" not found in package.`)),vfile.clone()}get packageName(){return this.meta.packageName}get version(){return(0,utils_1.assert)(void 0!==this.meta.version,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}},_NpmLocation_instances=new WeakSet,_NpmLocation_lazyInit=async function _NpmLocation_lazyInit(){(0,utils_1.assert)(void 0===this.files);const[tarballResponse,actualVersion]=await async function fetchNpmTarball(packageName,versionRange,registryUrl,fetchFunction){const packageResponse=await fetchFunction(new URL(packageName,registryUrl).toString());if(!packageResponse.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${packageResponse.status}.`);const packageMetadata=await packageResponse.json();if(!(0,utils_1.isObject)(packageMetadata))throw new Error(`Failed to fetch package "${packageName}" metadata from npm.`);const versions=Object.keys(packageMetadata?.versions??{}).map((version=>((0,utils_1.assertIsSemVerVersion)(version),version))),targetVersion=(0,snaps_utils_1.getTargetVersion)(versions,versionRange);if(null===targetVersion)throw new Error(`Failed to find a matching version in npm metadata for package "${packageName}" and requested semver range "${versionRange}".`);const tarballUrlString=packageMetadata?.versions?.[targetVersion]?.dist?.tarball;if(!(0,snaps_utils_1.isValidUrl)(tarballUrlString)||!tarballUrlString.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${packageName}".`);const newRegistryUrl=new URL(registryUrl),newTarballUrl=new URL(tarballUrlString);newTarballUrl.hostname=newRegistryUrl.hostname,newTarballUrl.protocol=newRegistryUrl.protocol;const tarballResponse=await fetchFunction(newTarballUrl.toString());if(!tarballResponse.ok||!tarballResponse.body)throw new Error(`Failed to fetch tarball for package "${packageName}".`);const tarballSizeString=tarballResponse.headers.get("content-length");(0,utils_1.assert)(tarballSizeString,"Snap tarball has invalid content-length");const tarballSize=parseInt(tarballSizeString,10);return(0,utils_1.assert)(tarballSize<=TARBALL_SIZE_SAFETY_LIMIT,"Snap tarball exceeds size limit"),[tarballResponse.body,targetVersion]}(this.meta.packageName,this.meta.requestedRange,this.meta.registry,this.meta.fetch);this.meta.version=actualVersion;let canonicalBase="npm://";""!==this.meta.registry.username&&(canonicalBase+=this.meta.registry.username,""!==this.meta.registry.password&&(canonicalBase+=`:${this.meta.registry.password}`),canonicalBase+="@"),canonicalBase+=this.meta.registry.host,await new Promise(((resolve,reject)=>{this.files=new Map,(0,pump_1.default)(function getNodeStream(stream){if("function"!=typeof stream.getReader)return stream;return new readable_web_to_node_stream_1.ReadableWebToNodeStream(stream)}(tarballResponse),(0,gunzip_maybe_1.default)(1),function createTarballStream(canonicalBase,files){(0,utils_1.assert)(canonicalBase.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),(0,utils_1.assert)(canonicalBase.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const extractStream=(0,tar_stream_1.extract)();let totalSize=0;return extractStream.on("entry",((header,entryStream,next)=>{const{name:headerName,type:headerType}=header;if("file"===headerType){const path=headerName.replace(NPM_TARBALL_PATH_PREFIX,"");return entryStream.pipe((0,concat_stream_1.default)((data=>{try{totalSize+=data.byteLength,(0,utils_1.assert)(totalSize<TARBALL_SIZE_SAFETY_LIMIT,`Snap tarball exceeds limit of ${TARBALL_SIZE_SAFETY_LIMIT} bytes.`);const vfile=new snaps_utils_1.VirtualFile({value:data,path,data:{canonicalPath:new URL(path,canonicalBase).toString()}});return(0,utils_1.assert)(!files.has(path),"Malformed tarball, multiple files with the same path."),files.set(path,vfile),next()}catch(error){return extractStream.destroy(error)}})))}return entryStream.on("end",(()=>next())),entryStream.resume()})),extractStream}(`${canonicalBase}/${this.meta.packageName}/`,this.files),(error=>{error?reject(error):resolve()}))}))};const TARBALL_SIZE_SAFETY_LIMIT=262144e3;const NPM_TARBALL_PATH_PREFIX=/^package\//u},"./node_modules/@metamask/snaps-controllers/dist/snaps/registry/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/registry/registry.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/registry/json.js"),exports)},"./node_modules/@metamask/snaps-controllers/dist/snaps/registry/json.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _JsonSnapsRegistry_instances,_JsonSnapsRegistry_url,_JsonSnapsRegistry_publicKey,_JsonSnapsRegistry_fetchFunction,_JsonSnapsRegistry_recentFetchThreshold,_JsonSnapsRegistry_refetchOnAllowlistMiss,_JsonSnapsRegistry_failOnUnavailableRegistry,_JsonSnapsRegistry_wasRecentlyFetched,_JsonSnapsRegistry_updateDatabase,_JsonSnapsRegistry_getDatabase,_JsonSnapsRegistry_getSingle,_JsonSnapsRegistry_get,_JsonSnapsRegistry_getMetadata,_JsonSnapsRegistry_verifySignature,_JsonSnapsRegistry_safeFetch,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonSnapsRegistry=void 0;const base_controller_1=__webpack_require__("./node_modules/@metamask/base-controller/dist/index.js"),snaps_registry_1=__webpack_require__("./node_modules/@metamask/snaps-registry/dist/index.js"),utils_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js"),registry_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/registry/registry.js"),defaultState={database:null,lastUpdated:null};class JsonSnapsRegistry extends base_controller_1.BaseControllerV2{constructor({messenger,state,url={registry:"https://cdn.jsdelivr.net/gh/MetaMask/snaps-registry@gh-pages/latest/registry.json",signature:"https://cdn.jsdelivr.net/gh/MetaMask/snaps-registry@gh-pages/latest/signature.json"},publicKey,fetchFunction=globalThis.fetch.bind(globalThis),recentFetchThreshold=(0,utils_1.inMilliseconds)(5,utils_1.Duration.Minute),failOnUnavailableRegistry=!0,refetchOnAllowlistMiss=!0}){super({messenger,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...defaultState,...state}}),_JsonSnapsRegistry_instances.add(this),_JsonSnapsRegistry_url.set(this,void 0),_JsonSnapsRegistry_publicKey.set(this,void 0),_JsonSnapsRegistry_fetchFunction.set(this,void 0),_JsonSnapsRegistry_recentFetchThreshold.set(this,void 0),_JsonSnapsRegistry_refetchOnAllowlistMiss.set(this,void 0),_JsonSnapsRegistry_failOnUnavailableRegistry.set(this,void 0),__classPrivateFieldSet(this,_JsonSnapsRegistry_url,url,"f"),__classPrivateFieldSet(this,_JsonSnapsRegistry_publicKey,publicKey,"f"),__classPrivateFieldSet(this,_JsonSnapsRegistry_fetchFunction,fetchFunction,"f"),__classPrivateFieldSet(this,_JsonSnapsRegistry_recentFetchThreshold,recentFetchThreshold,"f"),__classPrivateFieldSet(this,_JsonSnapsRegistry_refetchOnAllowlistMiss,refetchOnAllowlistMiss,"f"),__classPrivateFieldSet(this,_JsonSnapsRegistry_failOnUnavailableRegistry,failOnUnavailableRegistry,"f"),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...args)=>__classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_get).call(this,...args))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...args)=>__classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_getMetadata).call(this,...args)))}}exports.JsonSnapsRegistry=JsonSnapsRegistry,_JsonSnapsRegistry_url=new WeakMap,_JsonSnapsRegistry_publicKey=new WeakMap,_JsonSnapsRegistry_fetchFunction=new WeakMap,_JsonSnapsRegistry_recentFetchThreshold=new WeakMap,_JsonSnapsRegistry_refetchOnAllowlistMiss=new WeakMap,_JsonSnapsRegistry_failOnUnavailableRegistry=new WeakMap,_JsonSnapsRegistry_instances=new WeakSet,_JsonSnapsRegistry_wasRecentlyFetched=function _JsonSnapsRegistry_wasRecentlyFetched(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<__classPrivateFieldGet(this,_JsonSnapsRegistry_recentFetchThreshold,"f")},_JsonSnapsRegistry_updateDatabase=async function _JsonSnapsRegistry_updateDatabase(){if(!__classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_wasRecentlyFetched).call(this))try{const database=await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_safeFetch).call(this,__classPrivateFieldGet(this,_JsonSnapsRegistry_url,"f").registry);if(__classPrivateFieldGet(this,_JsonSnapsRegistry_publicKey,"f")){const signature=await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_safeFetch).call(this,__classPrivateFieldGet(this,_JsonSnapsRegistry_url,"f").signature);await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_verifySignature).call(this,database,signature)}this.update((state=>{state.database=JSON.parse(database),state.lastUpdated=Date.now()}))}catch{}},_JsonSnapsRegistry_getDatabase=async function _JsonSnapsRegistry_getDatabase(){if(null===this.state.database&&await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_updateDatabase).call(this),__classPrivateFieldGet(this,_JsonSnapsRegistry_failOnUnavailableRegistry,"f")&&null===this.state.database)throw new Error("Snaps registry is unavailable, installation blocked.");return this.state.database},_JsonSnapsRegistry_getSingle=async function _JsonSnapsRegistry_getSingle(snapId,snapInfo,refetch=!1){const database=await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_getDatabase).call(this),blockedEntry=database?.blockedSnaps.find((blocked=>"id"in blocked?blocked.id===snapId&&(0,utils_1.satisfiesVersionRange)(snapInfo.version,blocked.versionRange):blocked.checksum===snapInfo.checksum));if(blockedEntry)return{status:registry_1.SnapsRegistryStatus.Blocked,reason:blockedEntry.reason};const verified=database?.verifiedSnaps[snapId],version=verified?.versions?.[snapInfo.version];return version&&version.checksum===snapInfo.checksum?{status:registry_1.SnapsRegistryStatus.Verified}:__classPrivateFieldGet(this,_JsonSnapsRegistry_refetchOnAllowlistMiss,"f")&&!refetch?(await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_updateDatabase).call(this),__classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_getSingle).call(this,snapId,snapInfo,!0)):{status:registry_1.SnapsRegistryStatus.Unverified}},_JsonSnapsRegistry_get=async function _JsonSnapsRegistry_get(snaps){return Object.entries(snaps).reduce((async(previousPromise,[snapId,snapInfo])=>{const result=await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_getSingle).call(this,snapId,snapInfo),acc=await previousPromise;return acc[snapId]=result,acc}),Promise.resolve({}))},_JsonSnapsRegistry_getMetadata=async function _JsonSnapsRegistry_getMetadata(snapId){const database=await __classPrivateFieldGet(this,_JsonSnapsRegistry_instances,"m",_JsonSnapsRegistry_getDatabase).call(this);return database?.verifiedSnaps[snapId]?.metadata??null},_JsonSnapsRegistry_verifySignature=async function _JsonSnapsRegistry_verifySignature(database,signature){(0,utils_1.assert)(__classPrivateFieldGet(this,_JsonSnapsRegistry_publicKey,"f"),"No public key provided.");const valid=await(0,snaps_registry_1.verify)({registry:database,signature:JSON.parse(signature),publicKey:__classPrivateFieldGet(this,_JsonSnapsRegistry_publicKey,"f")});(0,utils_1.assert)(valid,"Invalid registry signature.")},_JsonSnapsRegistry_safeFetch=async function _JsonSnapsRegistry_safeFetch(url){const response=await __classPrivateFieldGet(this,_JsonSnapsRegistry_fetchFunction,"f").call(this,url);if(!response.ok)throw new Error(`Failed to fetch ${url}.`);return await response.text()}},"./node_modules/@metamask/snaps-controllers/dist/snaps/registry/registry.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapsRegistryStatus=void 0,function(SnapsRegistryStatus){SnapsRegistryStatus[SnapsRegistryStatus.Unverified=0]="Unverified",SnapsRegistryStatus[SnapsRegistryStatus.Blocked=1]="Blocked",SnapsRegistryStatus[SnapsRegistryStatus.Verified=2]="Verified"}(exports.SnapsRegistryStatus||(exports.SnapsRegistryStatus={}))},"./node_modules/@metamask/snaps-controllers/dist/snaps/selectors.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRunnableSnaps=void 0;exports.getRunnableSnaps=snaps=>snaps.filter((snap=>snap.enabled&&!snap.blocked))},"./node_modules/@metamask/snaps-controllers/dist/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withTimeout=exports.hasTimedOut=exports.delayWithTimer=exports.delay=exports.setDiff=void 0;const Timer_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/dist/snaps/Timer.js");function delayWithTimer(timer,result){let rejectFunc;const promise=new Promise(((resolve,reject)=>{timer.start((()=>{void 0===result?resolve():resolve(result)})),rejectFunc=reject}));return promise.cancel=()=>{"finished"!==timer.status&&(timer.cancel(),rejectFunc(new Error("The delay has been canceled.")))},promise}exports.setDiff=function setDiff(objectA,objectB){return Object.entries(objectA).reduce(((acc,[key,value])=>(key in objectB||(acc[key]=value),acc)),{})},exports.delay=function delay(ms,result){return delayWithTimer(new Timer_1.Timer(ms),result)},exports.delayWithTimer=delayWithTimer,exports.hasTimedOut=Symbol("Used to check if the requested promise has timeout (see withTimeout)"),exports.withTimeout=async function withTimeout(promise,timerOrMs){const delayPromise=delayWithTimer("number"==typeof timerOrMs?new Timer_1.Timer(timerOrMs):timerOrMs,exports.hasTimedOut);try{return await Promise.race([promise,delayPromise])}finally{delayPromise.cancel()}}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertExhaustive=exports.assertStruct=exports.assert=exports.AssertionError=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs");function getError(ErrorWrapper,message){return function isConstructable(fn){return Boolean("string"==typeof fn?.prototype?.constructor?.name)}(ErrorWrapper)?new ErrorWrapper({message}):ErrorWrapper({message})}class AssertionError extends Error{constructor(options){super(options.message),this.code="ERR_ASSERTION"}}exports.AssertionError=AssertionError,exports.assert=function assert(value,message="Assertion failed.",ErrorWrapper=AssertionError){if(!value){if(message instanceof Error)throw message;throw getError(ErrorWrapper,message)}},exports.assertStruct=function assertStruct(value,struct,errorPrefix="Assertion failed",ErrorWrapper=AssertionError){try{(0,superstruct_1.assert)(value,struct)}catch(error){throw getError(ErrorWrapper,`${errorPrefix}: ${function getErrorMessage(error){const message=function isErrorWithMessage(error){return"object"==typeof error&&null!==error&&"message"in error}(error)?error.message:String(error);return message.endsWith(".")?message.slice(0,-1):message}(error)}.`)}},exports.assertExhaustive=function assertExhaustive(_object){throw new Error("Invalid branch reached. Should be detected during compilation.")}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/base64.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.base64=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js");exports.base64=(struct,options={})=>{const paddingRequired=options.paddingRequired??!1,characterSet=options.characterSet??"base64";let letters,re;return"base64"===characterSet?letters=String.raw`[A-Za-z0-9+\/]`:((0,assert_1.assert)("base64url"===characterSet),letters=String.raw`[-_A-Za-z0-9]`),re=paddingRequired?new RegExp(`^(?:${letters}{4})*(?:${letters}{3}=|${letters}{2}==)?$`,"u"):new RegExp(`^(?:${letters}{4})*(?:${letters}{2,3}|${letters}{3}=|${letters}{2}==)?$`,"u"),(0,superstruct_1.pattern)(struct,re)}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/bytes.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDataView=exports.concatBytes=exports.valueToBytes=exports.stringToBytes=exports.numberToBytes=exports.signedBigIntToBytes=exports.bigIntToBytes=exports.hexToBytes=exports.bytesToString=exports.bytesToNumber=exports.bytesToSignedBigInt=exports.bytesToBigInt=exports.bytesToHex=exports.assertIsBytes=exports.isBytes=void 0;const assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js"),hex_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/hex.js"),HEX_MINIMUM_NUMBER_CHARACTER=48,HEX_MAXIMUM_NUMBER_CHARACTER=58,HEX_CHARACTER_OFFSET=87;const getPrecomputedHexValues=function getPrecomputedHexValuesBuilder(){const lookupTable=[];return()=>{if(0===lookupTable.length)for(let i=0;i<256;i++)lookupTable.push(i.toString(16).padStart(2,"0"));return lookupTable}}();function isBytes(value){return value instanceof Uint8Array}function assertIsBytes(value){(0,assert_1.assert)(isBytes(value),"Value must be a Uint8Array.")}function bytesToHex(bytes){if(assertIsBytes(bytes),0===bytes.length)return"0x";const lookupTable=getPrecomputedHexValues(),hexadecimal=new Array(bytes.length);for(let i=0;i<bytes.length;i++)hexadecimal[i]=lookupTable[bytes[i]];return(0,hex_1.add0x)(hexadecimal.join(""))}function bytesToBigInt(bytes){assertIsBytes(bytes);const hexadecimal=bytesToHex(bytes);return BigInt(hexadecimal)}function hexToBytes(value){if("0x"===value?.toLowerCase?.())return new Uint8Array;(0,hex_1.assertIsHexString)(value);const strippedValue=(0,hex_1.remove0x)(value).toLowerCase(),normalizedValue=strippedValue.length%2==0?strippedValue:`0${strippedValue}`,bytes=new Uint8Array(normalizedValue.length/2);for(let i=0;i<bytes.length;i++){const c1=normalizedValue.charCodeAt(2*i),c2=normalizedValue.charCodeAt(2*i+1),n1=c1-(c1<HEX_MAXIMUM_NUMBER_CHARACTER?HEX_MINIMUM_NUMBER_CHARACTER:HEX_CHARACTER_OFFSET),n2=c2-(c2<HEX_MAXIMUM_NUMBER_CHARACTER?HEX_MINIMUM_NUMBER_CHARACTER:HEX_CHARACTER_OFFSET);bytes[i]=16*n1+n2}return bytes}function bigIntToBytes(value){(0,assert_1.assert)("bigint"==typeof value,"Value must be a bigint."),(0,assert_1.assert)(value>=BigInt(0),"Value must be a non-negative bigint.");return hexToBytes(value.toString(16))}function numberToBytes(value){(0,assert_1.assert)("number"==typeof value,"Value must be a number."),(0,assert_1.assert)(value>=0,"Value must be a non-negative number."),(0,assert_1.assert)(Number.isSafeInteger(value),"Value is not a safe integer. Use `bigIntToBytes` instead.");return hexToBytes(value.toString(16))}function stringToBytes(value){return(0,assert_1.assert)("string"==typeof value,"Value must be a string."),(new TextEncoder).encode(value)}function valueToBytes(value){if("bigint"==typeof value)return bigIntToBytes(value);if("number"==typeof value)return numberToBytes(value);if("string"==typeof value)return value.startsWith("0x")?hexToBytes(value):stringToBytes(value);if(isBytes(value))return value;throw new TypeError(`Unsupported value type: "${typeof value}".`)}exports.isBytes=isBytes,exports.assertIsBytes=assertIsBytes,exports.bytesToHex=bytesToHex,exports.bytesToBigInt=bytesToBigInt,exports.bytesToSignedBigInt=function bytesToSignedBigInt(bytes){assertIsBytes(bytes);let value=BigInt(0);for(const byte of bytes)value=(value<<BigInt(8))+BigInt(byte);return BigInt.asIntN(8*bytes.length,value)},exports.bytesToNumber=function bytesToNumber(bytes){assertIsBytes(bytes);const bigint=bytesToBigInt(bytes);return(0,assert_1.assert)(bigint<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(bigint)},exports.bytesToString=function bytesToString(bytes){return assertIsBytes(bytes),(new TextDecoder).decode(bytes)},exports.hexToBytes=hexToBytes,exports.bigIntToBytes=bigIntToBytes,exports.signedBigIntToBytes=function signedBigIntToBytes(value,byteLength){(0,assert_1.assert)("bigint"==typeof value,"Value must be a bigint."),(0,assert_1.assert)("number"==typeof byteLength,"Byte length must be a number."),(0,assert_1.assert)(byteLength>0,"Byte length must be greater than 0."),(0,assert_1.assert)(function bigIntFits(value,bytes){(0,assert_1.assert)(bytes>0);const mask=value>>BigInt(31);return!((~value&mask)+(value&~mask)>>BigInt(8*bytes-1))}(value,byteLength),"Byte length is too small to represent the given value.");let numberValue=value;const bytes=new Uint8Array(byteLength);for(let i=0;i<bytes.length;i++)bytes[i]=Number(BigInt.asUintN(8,numberValue)),numberValue>>=BigInt(8);return bytes.reverse()},exports.numberToBytes=numberToBytes,exports.stringToBytes=stringToBytes,exports.valueToBytes=valueToBytes,exports.concatBytes=function concatBytes(values){const normalizedValues=new Array(values.length);let byteLength=0;for(let i=0;i<values.length;i++){const value=valueToBytes(values[i]);normalizedValues[i]=value,byteLength+=value.length}const bytes=new Uint8Array(byteLength);for(let i=0,offset=0;i<normalizedValues.length;i++)bytes.set(normalizedValues[i],offset),offset+=normalizedValues[i].length;return bytes},exports.createDataView=function createDataView(bytes){if(void 0!==Buffer&&bytes instanceof Buffer){const buffer=bytes.buffer.slice(bytes.byteOffset,bytes.byteOffset+bytes.byteLength);return new DataView(buffer)}return new DataView(bytes.buffer,bytes.byteOffset,bytes.byteLength)}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/checksum.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChecksumStruct=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),base64_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/base64.js");exports.ChecksumStruct=(0,superstruct_1.size)((0,base64_1.base64)((0,superstruct_1.string)(),{paddingRequired:!0}),44,44)},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/coercers.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHex=exports.createBytes=exports.createBigInt=exports.createNumber=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js"),bytes_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/bytes.js"),hex_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/hex.js"),NumberLikeStruct=(0,superstruct_1.union)([(0,superstruct_1.number)(),(0,superstruct_1.bigint)(),(0,superstruct_1.string)(),hex_1.StrictHexStruct]),NumberCoercer=(0,superstruct_1.coerce)((0,superstruct_1.number)(),NumberLikeStruct,Number),BigIntCoercer=(0,superstruct_1.coerce)((0,superstruct_1.bigint)(),NumberLikeStruct,BigInt),BytesCoercer=((0,superstruct_1.union)([hex_1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array)]),(0,superstruct_1.coerce)((0,superstruct_1.instance)(Uint8Array),(0,superstruct_1.union)([hex_1.StrictHexStruct]),bytes_1.hexToBytes)),HexCoercer=(0,superstruct_1.coerce)(hex_1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array),bytes_1.bytesToHex);exports.createNumber=function createNumber(value){try{const result=(0,superstruct_1.create)(value,NumberCoercer);return(0,assert_1.assert)(Number.isFinite(result),`Expected a number-like value, got "${value}".`),result}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a number-like value, got "${value}".`);throw error}},exports.createBigInt=function createBigInt(value){try{return(0,superstruct_1.create)(value,BigIntCoercer)}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a number-like value, got "${String(error.value)}".`);throw error}},exports.createBytes=function createBytes(value){if("string"==typeof value&&"0x"===value.toLowerCase())return new Uint8Array;try{return(0,superstruct_1.create)(value,BytesCoercer)}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a bytes-like value, got "${String(error.value)}".`);throw error}},exports.createHex=function createHex(value){if(value instanceof Uint8Array&&0===value.length||"string"==typeof value&&"0x"===value.toLowerCase())return"0x";try{return(0,superstruct_1.create)(value,HexCoercer)}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a bytes-like value, got "${String(error.value)}".`);throw error}}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/collections.js":function(__unused_webpack_module,exports){"use strict";var _FrozenMap_map,_FrozenSet_set,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrozenSet=exports.FrozenMap=void 0;class FrozenMap{constructor(entries){_FrozenMap_map.set(this,void 0),__classPrivateFieldSet(this,_FrozenMap_map,new Map(entries),"f"),Object.freeze(this)}get size(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").size}[(_FrozenMap_map=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenMap_map,"f")[Symbol.iterator]()}entries(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").entries()}forEach(callbackfn,thisArg){return __classPrivateFieldGet(this,_FrozenMap_map,"f").forEach(((value,key,_map)=>callbackfn.call(thisArg,value,key,this)))}get(key){return __classPrivateFieldGet(this,_FrozenMap_map,"f").get(key)}has(key){return __classPrivateFieldGet(this,_FrozenMap_map,"f").has(key)}keys(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([key,value])=>`${String(key)} => ${String(value)}`)).join(", ")} `:""}}`}}exports.FrozenMap=FrozenMap;class FrozenSet{constructor(values){_FrozenSet_set.set(this,void 0),__classPrivateFieldSet(this,_FrozenSet_set,new Set(values),"f"),Object.freeze(this)}get size(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").size}[(_FrozenSet_set=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenSet_set,"f")[Symbol.iterator]()}entries(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").entries()}forEach(callbackfn,thisArg){return __classPrivateFieldGet(this,_FrozenSet_set,"f").forEach(((value,value2,_set)=>callbackfn.call(thisArg,value,value2,this)))}has(value){return __classPrivateFieldGet(this,_FrozenSet_set,"f").has(value)}keys(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((member=>String(member))).join(", ")} `:""}}`}}exports.FrozenSet=FrozenSet,Object.freeze(FrozenMap),Object.freeze(FrozenMap.prototype),Object.freeze(FrozenSet),Object.freeze(FrozenSet.prototype)},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/encryption-types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/hex.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove0x=exports.add0x=exports.assertIsStrictHexString=exports.assertIsHexString=exports.isStrictHexString=exports.isHexString=exports.StrictHexStruct=exports.HexStruct=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js");function isHexString(value){return(0,superstruct_1.is)(value,exports.HexStruct)}function isStrictHexString(value){return(0,superstruct_1.is)(value,exports.StrictHexStruct)}exports.HexStruct=(0,superstruct_1.pattern)((0,superstruct_1.string)(),/^(?:0x)?[0-9a-f]+$/iu),exports.StrictHexStruct=(0,superstruct_1.pattern)((0,superstruct_1.string)(),/^0x[0-9a-f]+$/iu),exports.isHexString=isHexString,exports.isStrictHexString=isStrictHexString,exports.assertIsHexString=function assertIsHexString(value){(0,assert_1.assert)(isHexString(value),"Value must be a hexadecimal string.")},exports.assertIsStrictHexString=function assertIsStrictHexString(value){(0,assert_1.assert)(isStrictHexString(value),'Value must be a hexadecimal string, starting with "0x".')},exports.add0x=function add0x(hexadecimal){return hexadecimal.startsWith("0x")?hexadecimal:hexadecimal.startsWith("0X")?`0x${hexadecimal.substring(2)}`:`0x${hexadecimal}`},exports.remove0x=function remove0x(hexadecimal){return hexadecimal.startsWith("0x")||hexadecimal.startsWith("0X")?hexadecimal.substring(2):hexadecimal}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/base64.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/bytes.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/checksum.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/coercers.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/collections.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/encryption-types.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/hex.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/json.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/keyring.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/logging.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/misc.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/number.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/opaque.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/time.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/transaction-types.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/versions.js"),exports)},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/json.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getJsonRpcIdValidator=exports.assertIsJsonRpcError=exports.isJsonRpcError=exports.assertIsJsonRpcFailure=exports.isJsonRpcFailure=exports.assertIsJsonRpcSuccess=exports.isJsonRpcSuccess=exports.assertIsJsonRpcResponse=exports.isJsonRpcResponse=exports.assertIsPendingJsonRpcResponse=exports.isPendingJsonRpcResponse=exports.JsonRpcResponseStruct=exports.JsonRpcFailureStruct=exports.JsonRpcSuccessStruct=exports.PendingJsonRpcResponseStruct=exports.assertIsJsonRpcRequest=exports.isJsonRpcRequest=exports.assertIsJsonRpcNotification=exports.isJsonRpcNotification=exports.JsonRpcNotificationStruct=exports.JsonRpcRequestStruct=exports.JsonRpcParamsStruct=exports.JsonRpcErrorStruct=exports.JsonRpcIdStruct=exports.JsonRpcVersionStruct=exports.jsonrpc2=exports.getJsonSize=exports.getSafeJson=exports.isValidJson=exports.JsonStruct=exports.UnsafeJsonStruct=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js");function getSafeJson(value){return(0,superstruct_1.create)(value,exports.JsonStruct)}exports.UnsafeJsonStruct=(0,superstruct_1.union)([(0,superstruct_1.literal)(null),(0,superstruct_1.boolean)(),(0,superstruct_1.define)("finite number",(value=>(0,superstruct_1.is)(value,(0,superstruct_1.number)())&&Number.isFinite(value))),(0,superstruct_1.string)(),(0,superstruct_1.array)((0,superstruct_1.lazy)((()=>exports.UnsafeJsonStruct))),(0,superstruct_1.record)((0,superstruct_1.string)(),(0,superstruct_1.lazy)((()=>exports.UnsafeJsonStruct)))]),exports.JsonStruct=(0,superstruct_1.coerce)(exports.UnsafeJsonStruct,(0,superstruct_1.any)(),(value=>((0,assert_1.assertStruct)(value,exports.UnsafeJsonStruct),JSON.parse(JSON.stringify(value,((propKey,propValue)=>{if("__proto__"!==propKey&&"constructor"!==propKey)return propValue})))))),exports.isValidJson=function isValidJson(value){try{return getSafeJson(value),!0}catch{return!1}},exports.getSafeJson=getSafeJson,exports.getJsonSize=function getJsonSize(value){(0,assert_1.assertStruct)(value,exports.JsonStruct,"Invalid JSON value");const json=JSON.stringify(value);return(new TextEncoder).encode(json).byteLength},exports.jsonrpc2="2.0",exports.JsonRpcVersionStruct=(0,superstruct_1.literal)(exports.jsonrpc2),exports.JsonRpcIdStruct=(0,superstruct_1.nullable)((0,superstruct_1.union)([(0,superstruct_1.number)(),(0,superstruct_1.string)()])),exports.JsonRpcErrorStruct=(0,superstruct_1.object)({code:(0,superstruct_1.integer)(),message:(0,superstruct_1.string)(),data:(0,superstruct_1.optional)(exports.JsonStruct),stack:(0,superstruct_1.optional)((0,superstruct_1.string)())}),exports.JsonRpcParamsStruct=(0,superstruct_1.optional)((0,superstruct_1.union)([(0,superstruct_1.record)((0,superstruct_1.string)(),exports.JsonStruct),(0,superstruct_1.array)(exports.JsonStruct)])),exports.JsonRpcRequestStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,method:(0,superstruct_1.string)(),params:exports.JsonRpcParamsStruct}),exports.JsonRpcNotificationStruct=(0,superstruct_1.omit)(exports.JsonRpcRequestStruct,["id"]),exports.isJsonRpcNotification=function isJsonRpcNotification(value){return(0,superstruct_1.is)(value,exports.JsonRpcNotificationStruct)},exports.assertIsJsonRpcNotification=function assertIsJsonRpcNotification(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",ErrorWrapper)},exports.isJsonRpcRequest=function isJsonRpcRequest(value){return(0,superstruct_1.is)(value,exports.JsonRpcRequestStruct)},exports.assertIsJsonRpcRequest=function assertIsJsonRpcRequest(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcRequestStruct,"Invalid JSON-RPC request",ErrorWrapper)},exports.PendingJsonRpcResponseStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,result:(0,superstruct_1.optional)((0,superstruct_1.unknown)()),error:(0,superstruct_1.optional)(exports.JsonRpcErrorStruct)}),exports.JsonRpcSuccessStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,result:exports.JsonStruct}),exports.JsonRpcFailureStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,error:exports.JsonRpcErrorStruct}),exports.JsonRpcResponseStruct=(0,superstruct_1.union)([exports.JsonRpcSuccessStruct,exports.JsonRpcFailureStruct]),exports.isPendingJsonRpcResponse=function isPendingJsonRpcResponse(response){return(0,superstruct_1.is)(response,exports.PendingJsonRpcResponseStruct)},exports.assertIsPendingJsonRpcResponse=function assertIsPendingJsonRpcResponse(response,ErrorWrapper){(0,assert_1.assertStruct)(response,exports.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",ErrorWrapper)},exports.isJsonRpcResponse=function isJsonRpcResponse(response){return(0,superstruct_1.is)(response,exports.JsonRpcResponseStruct)},exports.assertIsJsonRpcResponse=function assertIsJsonRpcResponse(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcResponseStruct,"Invalid JSON-RPC response",ErrorWrapper)},exports.isJsonRpcSuccess=function isJsonRpcSuccess(value){return(0,superstruct_1.is)(value,exports.JsonRpcSuccessStruct)},exports.assertIsJsonRpcSuccess=function assertIsJsonRpcSuccess(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",ErrorWrapper)},exports.isJsonRpcFailure=function isJsonRpcFailure(value){return(0,superstruct_1.is)(value,exports.JsonRpcFailureStruct)},exports.assertIsJsonRpcFailure=function assertIsJsonRpcFailure(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",ErrorWrapper)},exports.isJsonRpcError=function isJsonRpcError(value){return(0,superstruct_1.is)(value,exports.JsonRpcErrorStruct)},exports.assertIsJsonRpcError=function assertIsJsonRpcError(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcErrorStruct,"Invalid JSON-RPC error",ErrorWrapper)},exports.getJsonRpcIdValidator=function getJsonRpcIdValidator(options){const{permitEmptyString,permitFractions,permitNull}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...options};return id=>Boolean("number"==typeof id&&(permitFractions||Number.isInteger(id))||"string"==typeof id&&(permitEmptyString||id.length>0)||permitNull&&null===id)}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/keyring.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/logging.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createModuleLogger=exports.createProjectLogger=void 0;const globalLogger=(0,__importDefault(__webpack_require__("./node_modules/debug/src/browser.js")).default)("metamask");exports.createProjectLogger=function createProjectLogger(projectName){return globalLogger.extend(projectName)},exports.createModuleLogger=function createModuleLogger(projectLogger,moduleName){return projectLogger.extend(moduleName)}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/misc.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateNumberSize=exports.calculateStringSize=exports.isASCII=exports.isPlainObject=exports.ESCAPE_CHARACTERS_REGEXP=exports.JsonSize=exports.hasProperty=exports.isObject=exports.isNullOrUndefined=exports.isNonEmptyArray=void 0,exports.isNonEmptyArray=function isNonEmptyArray(value){return Array.isArray(value)&&value.length>0},exports.isNullOrUndefined=function isNullOrUndefined(value){return null==value},exports.isObject=function isObject(value){return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)};function isASCII(character){return character.charCodeAt(0)<=127}exports.hasProperty=(objectToCheck,name)=>Object.hasOwnProperty.call(objectToCheck,name),function(JsonSize){JsonSize[JsonSize.Null=4]="Null",JsonSize[JsonSize.Comma=1]="Comma",JsonSize[JsonSize.Wrapper=1]="Wrapper",JsonSize[JsonSize.True=4]="True",JsonSize[JsonSize.False=5]="False",JsonSize[JsonSize.Quote=1]="Quote",JsonSize[JsonSize.Colon=1]="Colon",JsonSize[JsonSize.Date=24]="Date"}(exports.JsonSize||(exports.JsonSize={})),exports.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,exports.isPlainObject=function isPlainObject(value){if("object"!=typeof value||null===value)return!1;try{let proto=value;for(;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(value)===proto}catch(_){return!1}},exports.isASCII=isASCII,exports.calculateStringSize=function calculateStringSize(value){return value.split("").reduce(((total,character)=>isASCII(character)?total+1:total+2),0)+(value.match(exports.ESCAPE_CHARACTERS_REGEXP)??[]).length},exports.calculateNumberSize=function calculateNumberSize(value){return value.toString().length}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/number.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hexToBigInt=exports.hexToNumber=exports.bigIntToHex=exports.numberToHex=void 0;const assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js"),hex_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/hex.js");exports.numberToHex=value=>((0,assert_1.assert)("number"==typeof value,"Value must be a number."),(0,assert_1.assert)(value>=0,"Value must be a non-negative number."),(0,assert_1.assert)(Number.isSafeInteger(value),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,hex_1.add0x)(value.toString(16)));exports.bigIntToHex=value=>((0,assert_1.assert)("bigint"==typeof value,"Value must be a bigint."),(0,assert_1.assert)(value>=0,"Value must be a non-negative bigint."),(0,hex_1.add0x)(value.toString(16)));exports.hexToNumber=value=>{(0,hex_1.assertIsHexString)(value);const numberValue=parseInt(value,16);return(0,assert_1.assert)(Number.isSafeInteger(numberValue),"Value is not a safe integer. Use `hexToBigInt` instead."),numberValue};exports.hexToBigInt=value=>((0,hex_1.assertIsHexString)(value),BigInt((0,hex_1.add0x)(value)))},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/opaque.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/time.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.timeSince=exports.inMilliseconds=exports.Duration=void 0,function(Duration){Duration[Duration.Millisecond=1]="Millisecond",Duration[Duration.Second=1e3]="Second",Duration[Duration.Minute=6e4]="Minute",Duration[Duration.Hour=36e5]="Hour",Duration[Duration.Day=864e5]="Day",Duration[Duration.Week=6048e5]="Week",Duration[Duration.Year=31536e6]="Year"}(exports.Duration||(exports.Duration={}));const assertIsNonNegativeInteger=(number,name)=>{if(!(number=>Number.isInteger(number)&&number>=0)(number))throw new Error(`"${name}" must be a non-negative integer. Received: "${number}".`)};exports.inMilliseconds=function inMilliseconds(count,duration){return assertIsNonNegativeInteger(count,"count"),count*duration},exports.timeSince=function timeSince(timestamp){return assertIsNonNegativeInteger(timestamp,"timestamp"),Date.now()-timestamp}},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/transaction-types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/versions.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.satisfiesVersionRange=exports.gtRange=exports.gtVersion=exports.assertIsSemVerRange=exports.assertIsSemVerVersion=exports.isValidSemVerRange=exports.isValidSemVerVersion=exports.VersionRangeStruct=exports.VersionStruct=void 0;const semver_1=__webpack_require__("./node_modules/semver/index.js"),superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/@metamask/utils/dist/assert.js");exports.VersionStruct=(0,superstruct_1.refine)((0,superstruct_1.string)(),"Version",(value=>null!==(0,semver_1.valid)(value)||`Expected SemVer version, got "${value}"`)),exports.VersionRangeStruct=(0,superstruct_1.refine)((0,superstruct_1.string)(),"Version range",(value=>null!==(0,semver_1.validRange)(value)||`Expected SemVer range, got "${value}"`)),exports.isValidSemVerVersion=function isValidSemVerVersion(version){return(0,superstruct_1.is)(version,exports.VersionStruct)},exports.isValidSemVerRange=function isValidSemVerRange(versionRange){return(0,superstruct_1.is)(versionRange,exports.VersionRangeStruct)},exports.assertIsSemVerVersion=function assertIsSemVerVersion(version){(0,assert_1.assertStruct)(version,exports.VersionStruct)},exports.assertIsSemVerRange=function assertIsSemVerRange(range){(0,assert_1.assertStruct)(range,exports.VersionRangeStruct)},exports.gtVersion=function gtVersion(version1,version2){return(0,semver_1.gt)(version1,version2)},exports.gtRange=function gtRange(version,range){return(0,semver_1.gtr)(version,range)},exports.satisfiesVersionRange=function satisfiesVersionRange(version,versionRange){return(0,semver_1.satisfies)(version,versionRange,{includePrerelease:!0})}},"./node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,Writable=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/readable-browser.js").Writable,inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),U8=Uint8Array;function ConcatStream(opts,cb){if(!(this instanceof ConcatStream))return new ConcatStream(opts,cb);"function"==typeof opts&&(cb=opts,opts={}),opts||(opts={});var encoding=opts.encoding,shouldInferEncoding=!1;encoding?"u8"!==(encoding=String(encoding).toLowerCase())&&"uint8"!==encoding||(encoding="uint8array"):shouldInferEncoding=!0,Writable.call(this,{objectMode:!0}),this.encoding=encoding,this.shouldInferEncoding=shouldInferEncoding,cb&&this.on("finish",(function(){cb(this.getBody())})),this.body=[]}function isBufferish(p){return"string"==typeof p||function isArrayish(arr){return/Array\]$/.test(Object.prototype.toString.call(arr))}(p)||p&&"function"==typeof p.subarray}module.exports=ConcatStream,inherits(ConcatStream,Writable),ConcatStream.prototype._write=function(chunk,enc,next){this.body.push(chunk),next()},ConcatStream.prototype.inferEncoding=function(buff){var firstBuffer=void 0===buff?this.body[0]:buff;return Buffer.isBuffer(firstBuffer)?"buffer":"undefined"!=typeof Uint8Array&&firstBuffer instanceof Uint8Array?"uint8array":Array.isArray(firstBuffer)?"array":"string"==typeof firstBuffer?"string":"[object Object]"===Object.prototype.toString.call(firstBuffer)?"object":"buffer"},ConcatStream.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function arrayConcat(parts){for(var res=[],i=0;i<parts.length;i++)res.push.apply(res,parts[i]);return res}(this.body):"string"===this.encoding?function stringConcat(parts){for(var strings=[],i=0;i<parts.length;i++){var p=parts[i];"string"==typeof p||Buffer.isBuffer(p)?strings.push(p):isBufferish(p)?strings.push(Buffer.from(p)):strings.push(Buffer.from(String(p)))}strings=Buffer.isBuffer(parts[0])?(strings=Buffer.concat(strings)).toString("utf8"):strings.join("");return strings}(this.body):"buffer"===this.encoding?function bufferConcat(parts){for(var bufs=[],i=0;i<parts.length;i++){var p=parts[i];Buffer.isBuffer(p)?bufs.push(p):isBufferish(p)?bufs.push(Buffer.from(p)):bufs.push(Buffer.from(String(p)))}return Buffer.concat(bufs)}(this.body):"uint8array"===this.encoding?function u8Concat(parts){for(var len=0,i=0;i<parts.length;i++)"string"==typeof parts[i]&&(parts[i]=Buffer.from(parts[i])),len+=parts[i].length;for(var u8=new U8(len),offset=(i=0,0);i<parts.length;i++)for(var part=parts[i],j=0;j<part.length;j++)u8[offset++]=part[j];return u8}(this.body):this.body):[]}},"./node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{customAlphabet:()=>customAlphabet,customRandom:()=>customRandom,nanoid:()=>nanoid,random:()=>random,urlAlphabet:()=>urlAlphabet});let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",random=bytes=>crypto.getRandomValues(new Uint8Array(bytes)),customRandom=(alphabet,defaultSize,getRandom)=>{let mask=(2<<Math.log(alphabet.length-1)/Math.LN2)-1,step=-~(1.6*mask*defaultSize/alphabet.length);return(size=defaultSize)=>{let id="";for(;;){let bytes=getRandom(step),j=step;for(;j--;)if(id+=alphabet[bytes[j]&mask]||"",id.length===size)return id}}},customAlphabet=(alphabet,size=21)=>customRandom(alphabet,size,random),nanoid=(size=21)=>crypto.getRandomValues(new Uint8Array(size)).reduce(((id,byte)=>id+=(byte&=63)<36?byte.toString(36):byte<62?(byte-26).toString(36).toUpperCase():byte>62?"-":"_"),"")},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js":module=>{"use strict";var codes={};function createErrorType(code,message,Base){Base||(Base=Error);var NodeError=function(_Base){function NodeError(arg1,arg2,arg3){return _Base.call(this,function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3))||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}(NodeError,_Base),NodeError}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map((function(i){return String(i)})),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(String(expected))}createErrorType("ERR_INVALID_OPT_VALUE",(function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(name,expected,actual){var determiner,msg;if("string"==typeof expected&&function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(name){return"The "+name+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(name){return"Cannot call "+name+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(arg){return"Unknown encoding: "+arg}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.q=codes},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_writable.js");__webpack_require__("./node_modules/inherits/inherits_browser.js")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}})},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_transform.js");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");module.exports=Readable,Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/events/events.js").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var debug,debugUtil=__webpack_require__("?6403");debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function debug(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/buffer_list.js"),destroyImpl=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;__webpack_require__("./node_modules/inherits/inherits_browser.js")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var er,state=stream._readableState;if(null===chunk)state.reading=!1,function onEofChunk(stream,state){if(debug("onEofChunk"),state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}(stream,state);else if(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk));return er}(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state));return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};var MAX_HWM=1073741824;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),state.destroyed||!state.length&&!state.ended||(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self.listenerCount("data")>0&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0!==state.highWaterMark?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=this.listenerCount("readable")>0,!1!==state.flowing&&this.resume()):"readable"===ev&&(state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||process.nextTick(nReadingNextTick,this))),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ev&&void 0!==ev||process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/async_iterator.js")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/from-browser.js")),from(Readable,iterable,opts)})},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var _require$codes=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js").q,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js");function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(er,data){done(_this,er,data)}))}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2)}))}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}(_this,state)}}module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__("./node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){var isDuplex=this instanceof(Duplex=Duplex||__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"));if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(function prefinish(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function realHasInstance(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"==typeof chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/async_iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Object$setPrototypeO,process=__webpack_require__("./node_modules/process/browser.js");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value,done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(resolve,reject){process.nextTick((function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))}))}));var promise,lastPromise=this[kLastPromise];if(lastPromise)promise=new Promise(function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then((function(){iter[kEnded]?resolve(createIterResult(void 0,!0)):iter[kHandlePromise](resolve,reject)}),reject)}}(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function _return(){var _this2=this;return new Promise((function(resolve,reject){_this2[kStream].destroy(null,(function(err){err?reject(err):resolve(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype);module.exports=function createReadableStreamAsyncIterator(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(_Object$create={},kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,(function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0})),stream.on("readable",onReadable.bind(null,iterator)),iterator}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/buffer_list.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,inspect=__webpack_require__("?8d1f").inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(0===this.length)return Buffer.alloc(0);for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,Buffer.prototype.copy.call(src,target,offset),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):ret=n===this.head.data.length?this.shift():hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function value(_,options){return inspect(this,function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},options,{depth:0,customInspect:!1}))}}]),BufferList}()},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js").q.ERR_STREAM_PREMATURE_CLOSE;function noop(){}module.exports=function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function onlegacyfinish(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function onfinish(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function onend(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function onerror(err){callback.call(stream,err)},onclose=function onclose(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function onrequest(){stream.req.on("finish",onfinish)};return!function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/from-browser.js":module=>{module.exports=function(){throw new Error("Readable.from is not available in the browser")}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/pipeline.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var eos;var _require$codes=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js").q,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}module.exports=function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var error,callback=function popCallback(streams){return streams.length?"function"!=typeof streams[streams.length-1]?noop:streams.pop():noop}(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return function destroyer(stream,reading,writing,callback){callback=function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}(callback);var closed=!1;stream.on("close",(function(){closed=!0})),void 0===eos&&(eos=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/end-of-stream.js")),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe"))}}(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/state.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js").q.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=function highWaterMarkFrom(options,isDuplex,duplexKey){return null!=options.highWaterMark?options.highWaterMark:isDuplex?options[duplexKey]:null}(options,isDuplex,duplexKey);if(null!=hwm){if(!isFinite(hwm)||Math.floor(hwm)!==hwm||hwm<0)throw new ERR_INVALID_OPT_VALUE(isDuplex?duplexKey:"highWaterMark",hwm);return Math.floor(hwm)}return state.objectMode?16:16384}}},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/events/events.js").EventEmitter},"./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_passthrough.js"),exports.finished=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),exports.pipeline=__webpack_require__("./node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/pipeline.js")},"./node_modules/@metamask/snaps-registry/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapsRegistryDatabaseStruct=exports.BlockedSnapStruct=exports.BlockReasonStruct=exports.VerifiedSnapStruct=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/index.js"),superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),VerifiedSnapVersionStruct=(0,superstruct_1.object)({checksum:utils_1.ChecksumStruct});exports.VerifiedSnapStruct=(0,superstruct_1.object)({id:(0,superstruct_1.string)(),metadata:(0,superstruct_1.object)({name:(0,superstruct_1.string)()}),versions:(0,superstruct_1.record)(utils_1.VersionStruct,VerifiedSnapVersionStruct)}),exports.BlockReasonStruct=(0,superstruct_1.object)({explanation:(0,superstruct_1.optional)((0,superstruct_1.string)()),url:(0,superstruct_1.optional)((0,superstruct_1.string)())}),exports.BlockedSnapStruct=(0,superstruct_1.union)([(0,superstruct_1.object)({id:(0,superstruct_1.string)(),versionRange:utils_1.VersionRangeStruct,reason:(0,superstruct_1.optional)(exports.BlockReasonStruct)}),(0,superstruct_1.object)({checksum:utils_1.ChecksumStruct,reason:(0,superstruct_1.optional)(exports.BlockReasonStruct)})]),exports.SnapsRegistryDatabaseStruct=(0,superstruct_1.object)({verifiedSnaps:(0,superstruct_1.record)((0,superstruct_1.string)(),exports.VerifiedSnapStruct),blockedSnaps:(0,superstruct_1.array)(exports.BlockedSnapStruct)}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/dist/verify.js"),exports)},"./node_modules/@metamask/snaps-registry/dist/verify.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.verify=exports.SignatureStruct=void 0;const utils_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/index.js"),secp256k1_1=__webpack_require__("./node_modules/@noble/secp256k1/lib/index.js"),superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs");exports.SignatureStruct=(0,superstruct_1.object)({signature:(0,superstruct_1.pattern)((0,superstruct_1.string)(),/0x[0-9a-f]{140}/u),curve:(0,superstruct_1.literal)("secp256k1"),format:(0,superstruct_1.literal)("DER")}),exports.verify=async function verify({registry,signature,publicKey}){(0,utils_1.assertStruct)(signature,exports.SignatureStruct,"Invalid signature object");const publicKeyBytes=(0,utils_1.hexToBytes)(publicKey);return(0,secp256k1_1.verify)(secp256k1_1.Signature.fromHex((0,utils_1.remove0x)(signature.signature)),await secp256k1_1.utils.sha256((0,utils_1.stringToBytes)(registry)),publicKeyBytes)}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertExhaustive=exports.assertStruct=exports.assert=exports.AssertionError=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs");function getError(ErrorWrapper,message){return function isConstructable(fn){return Boolean("string"==typeof fn?.prototype?.constructor?.name)}(ErrorWrapper)?new ErrorWrapper({message}):ErrorWrapper({message})}class AssertionError extends Error{constructor(options){super(options.message),this.code="ERR_ASSERTION"}}exports.AssertionError=AssertionError,exports.assert=function assert(value,message="Assertion failed.",ErrorWrapper=AssertionError){if(!value){if(message instanceof Error)throw message;throw getError(ErrorWrapper,message)}},exports.assertStruct=function assertStruct(value,struct,errorPrefix="Assertion failed",ErrorWrapper=AssertionError){try{(0,superstruct_1.assert)(value,struct)}catch(error){throw getError(ErrorWrapper,`${errorPrefix}: ${function getErrorMessage(error){const message=function isErrorWithMessage(error){return"object"==typeof error&&null!==error&&"message"in error}(error)?error.message:String(error);return message.endsWith(".")?message.slice(0,-1):message}(error)}.`)}},exports.assertExhaustive=function assertExhaustive(_object){throw new Error("Invalid branch reached. Should be detected during compilation.")}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/base64.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.base64=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js");exports.base64=(struct,options={})=>{const paddingRequired=options.paddingRequired??!1,characterSet=options.characterSet??"base64";let letters,re;return"base64"===characterSet?letters=String.raw`[A-Za-z0-9+\/]`:((0,assert_1.assert)("base64url"===characterSet),letters=String.raw`[-_A-Za-z0-9]`),re=paddingRequired?new RegExp(`^(?:${letters}{4})*(?:${letters}{3}=|${letters}{2}==)?$`,"u"):new RegExp(`^(?:${letters}{4})*(?:${letters}{2,3}|${letters}{3}=|${letters}{2}==)?$`,"u"),(0,superstruct_1.pattern)(struct,re)}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/bytes.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDataView=exports.concatBytes=exports.valueToBytes=exports.stringToBytes=exports.numberToBytes=exports.signedBigIntToBytes=exports.bigIntToBytes=exports.hexToBytes=exports.bytesToString=exports.bytesToNumber=exports.bytesToSignedBigInt=exports.bytesToBigInt=exports.bytesToHex=exports.assertIsBytes=exports.isBytes=void 0;const assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js"),hex_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/hex.js"),HEX_MINIMUM_NUMBER_CHARACTER=48,HEX_MAXIMUM_NUMBER_CHARACTER=58,HEX_CHARACTER_OFFSET=87;const getPrecomputedHexValues=function getPrecomputedHexValuesBuilder(){const lookupTable=[];return()=>{if(0===lookupTable.length)for(let i=0;i<256;i++)lookupTable.push(i.toString(16).padStart(2,"0"));return lookupTable}}();function isBytes(value){return value instanceof Uint8Array}function assertIsBytes(value){(0,assert_1.assert)(isBytes(value),"Value must be a Uint8Array.")}function bytesToHex(bytes){if(assertIsBytes(bytes),0===bytes.length)return"0x";const lookupTable=getPrecomputedHexValues(),hexadecimal=new Array(bytes.length);for(let i=0;i<bytes.length;i++)hexadecimal[i]=lookupTable[bytes[i]];return(0,hex_1.add0x)(hexadecimal.join(""))}function bytesToBigInt(bytes){assertIsBytes(bytes);const hexadecimal=bytesToHex(bytes);return BigInt(hexadecimal)}function hexToBytes(value){if("0x"===value?.toLowerCase?.())return new Uint8Array;(0,hex_1.assertIsHexString)(value);const strippedValue=(0,hex_1.remove0x)(value).toLowerCase(),normalizedValue=strippedValue.length%2==0?strippedValue:`0${strippedValue}`,bytes=new Uint8Array(normalizedValue.length/2);for(let i=0;i<bytes.length;i++){const c1=normalizedValue.charCodeAt(2*i),c2=normalizedValue.charCodeAt(2*i+1),n1=c1-(c1<HEX_MAXIMUM_NUMBER_CHARACTER?HEX_MINIMUM_NUMBER_CHARACTER:HEX_CHARACTER_OFFSET),n2=c2-(c2<HEX_MAXIMUM_NUMBER_CHARACTER?HEX_MINIMUM_NUMBER_CHARACTER:HEX_CHARACTER_OFFSET);bytes[i]=16*n1+n2}return bytes}function bigIntToBytes(value){(0,assert_1.assert)("bigint"==typeof value,"Value must be a bigint."),(0,assert_1.assert)(value>=BigInt(0),"Value must be a non-negative bigint.");return hexToBytes(value.toString(16))}function numberToBytes(value){(0,assert_1.assert)("number"==typeof value,"Value must be a number."),(0,assert_1.assert)(value>=0,"Value must be a non-negative number."),(0,assert_1.assert)(Number.isSafeInteger(value),"Value is not a safe integer. Use `bigIntToBytes` instead.");return hexToBytes(value.toString(16))}function stringToBytes(value){return(0,assert_1.assert)("string"==typeof value,"Value must be a string."),(new TextEncoder).encode(value)}function valueToBytes(value){if("bigint"==typeof value)return bigIntToBytes(value);if("number"==typeof value)return numberToBytes(value);if("string"==typeof value)return value.startsWith("0x")?hexToBytes(value):stringToBytes(value);if(isBytes(value))return value;throw new TypeError(`Unsupported value type: "${typeof value}".`)}exports.isBytes=isBytes,exports.assertIsBytes=assertIsBytes,exports.bytesToHex=bytesToHex,exports.bytesToBigInt=bytesToBigInt,exports.bytesToSignedBigInt=function bytesToSignedBigInt(bytes){assertIsBytes(bytes);let value=BigInt(0);for(const byte of bytes)value=(value<<BigInt(8))+BigInt(byte);return BigInt.asIntN(8*bytes.length,value)},exports.bytesToNumber=function bytesToNumber(bytes){assertIsBytes(bytes);const bigint=bytesToBigInt(bytes);return(0,assert_1.assert)(bigint<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(bigint)},exports.bytesToString=function bytesToString(bytes){return assertIsBytes(bytes),(new TextDecoder).decode(bytes)},exports.hexToBytes=hexToBytes,exports.bigIntToBytes=bigIntToBytes,exports.signedBigIntToBytes=function signedBigIntToBytes(value,byteLength){(0,assert_1.assert)("bigint"==typeof value,"Value must be a bigint."),(0,assert_1.assert)("number"==typeof byteLength,"Byte length must be a number."),(0,assert_1.assert)(byteLength>0,"Byte length must be greater than 0."),(0,assert_1.assert)(function bigIntFits(value,bytes){(0,assert_1.assert)(bytes>0);const mask=value>>BigInt(31);return!((~value&mask)+(value&~mask)>>BigInt(8*bytes-1))}(value,byteLength),"Byte length is too small to represent the given value.");let numberValue=value;const bytes=new Uint8Array(byteLength);for(let i=0;i<bytes.length;i++)bytes[i]=Number(BigInt.asUintN(8,numberValue)),numberValue>>=BigInt(8);return bytes.reverse()},exports.numberToBytes=numberToBytes,exports.stringToBytes=stringToBytes,exports.valueToBytes=valueToBytes,exports.concatBytes=function concatBytes(values){const normalizedValues=new Array(values.length);let byteLength=0;for(let i=0;i<values.length;i++){const value=valueToBytes(values[i]);normalizedValues[i]=value,byteLength+=value.length}const bytes=new Uint8Array(byteLength);for(let i=0,offset=0;i<normalizedValues.length;i++)bytes.set(normalizedValues[i],offset),offset+=normalizedValues[i].length;return bytes},exports.createDataView=function createDataView(bytes){if(void 0!==Buffer&&bytes instanceof Buffer){const buffer=bytes.buffer.slice(bytes.byteOffset,bytes.byteOffset+bytes.byteLength);return new DataView(buffer)}return new DataView(bytes.buffer,bytes.byteOffset,bytes.byteLength)}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/checksum.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChecksumStruct=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),base64_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/base64.js");exports.ChecksumStruct=(0,superstruct_1.size)((0,base64_1.base64)((0,superstruct_1.string)(),{paddingRequired:!0}),44,44)},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/coercers.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHex=exports.createBytes=exports.createBigInt=exports.createNumber=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js"),bytes_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/bytes.js"),hex_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/hex.js"),NumberLikeStruct=(0,superstruct_1.union)([(0,superstruct_1.number)(),(0,superstruct_1.bigint)(),(0,superstruct_1.string)(),hex_1.StrictHexStruct]),NumberCoercer=(0,superstruct_1.coerce)((0,superstruct_1.number)(),NumberLikeStruct,Number),BigIntCoercer=(0,superstruct_1.coerce)((0,superstruct_1.bigint)(),NumberLikeStruct,BigInt),BytesCoercer=((0,superstruct_1.union)([hex_1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array)]),(0,superstruct_1.coerce)((0,superstruct_1.instance)(Uint8Array),(0,superstruct_1.union)([hex_1.StrictHexStruct]),bytes_1.hexToBytes)),HexCoercer=(0,superstruct_1.coerce)(hex_1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array),bytes_1.bytesToHex);exports.createNumber=function createNumber(value){try{const result=(0,superstruct_1.create)(value,NumberCoercer);return(0,assert_1.assert)(Number.isFinite(result),`Expected a number-like value, got "${value}".`),result}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a number-like value, got "${value}".`);throw error}},exports.createBigInt=function createBigInt(value){try{return(0,superstruct_1.create)(value,BigIntCoercer)}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a number-like value, got "${String(error.value)}".`);throw error}},exports.createBytes=function createBytes(value){if("string"==typeof value&&"0x"===value.toLowerCase())return new Uint8Array;try{return(0,superstruct_1.create)(value,BytesCoercer)}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a bytes-like value, got "${String(error.value)}".`);throw error}},exports.createHex=function createHex(value){if(value instanceof Uint8Array&&0===value.length||"string"==typeof value&&"0x"===value.toLowerCase())return"0x";try{return(0,superstruct_1.create)(value,HexCoercer)}catch(error){if(error instanceof superstruct_1.StructError)throw new Error(`Expected a bytes-like value, got "${String(error.value)}".`);throw error}}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/collections.js":function(__unused_webpack_module,exports){"use strict";var _FrozenMap_map,_FrozenSet_set,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrozenSet=exports.FrozenMap=void 0;class FrozenMap{constructor(entries){_FrozenMap_map.set(this,void 0),__classPrivateFieldSet(this,_FrozenMap_map,new Map(entries),"f"),Object.freeze(this)}get size(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").size}[(_FrozenMap_map=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenMap_map,"f")[Symbol.iterator]()}entries(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").entries()}forEach(callbackfn,thisArg){return __classPrivateFieldGet(this,_FrozenMap_map,"f").forEach(((value,key,_map)=>callbackfn.call(thisArg,value,key,this)))}get(key){return __classPrivateFieldGet(this,_FrozenMap_map,"f").get(key)}has(key){return __classPrivateFieldGet(this,_FrozenMap_map,"f").has(key)}keys(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([key,value])=>`${String(key)} => ${String(value)}`)).join(", ")} `:""}}`}}exports.FrozenMap=FrozenMap;class FrozenSet{constructor(values){_FrozenSet_set.set(this,void 0),__classPrivateFieldSet(this,_FrozenSet_set,new Set(values),"f"),Object.freeze(this)}get size(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").size}[(_FrozenSet_set=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenSet_set,"f")[Symbol.iterator]()}entries(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").entries()}forEach(callbackfn,thisArg){return __classPrivateFieldGet(this,_FrozenSet_set,"f").forEach(((value,value2,_set)=>callbackfn.call(thisArg,value,value2,this)))}has(value){return __classPrivateFieldGet(this,_FrozenSet_set,"f").has(value)}keys(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((member=>String(member))).join(", ")} `:""}}`}}exports.FrozenSet=FrozenSet,Object.freeze(FrozenMap),Object.freeze(FrozenMap.prototype),Object.freeze(FrozenSet),Object.freeze(FrozenSet.prototype)},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/encryption-types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/hex.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove0x=exports.add0x=exports.assertIsStrictHexString=exports.assertIsHexString=exports.isStrictHexString=exports.isHexString=exports.StrictHexStruct=exports.HexStruct=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js");function isHexString(value){return(0,superstruct_1.is)(value,exports.HexStruct)}function isStrictHexString(value){return(0,superstruct_1.is)(value,exports.StrictHexStruct)}exports.HexStruct=(0,superstruct_1.pattern)((0,superstruct_1.string)(),/^(?:0x)?[0-9a-f]+$/iu),exports.StrictHexStruct=(0,superstruct_1.pattern)((0,superstruct_1.string)(),/^0x[0-9a-f]+$/iu),exports.isHexString=isHexString,exports.isStrictHexString=isStrictHexString,exports.assertIsHexString=function assertIsHexString(value){(0,assert_1.assert)(isHexString(value),"Value must be a hexadecimal string.")},exports.assertIsStrictHexString=function assertIsStrictHexString(value){(0,assert_1.assert)(isStrictHexString(value),'Value must be a hexadecimal string, starting with "0x".')},exports.add0x=function add0x(hexadecimal){return hexadecimal.startsWith("0x")?hexadecimal:hexadecimal.startsWith("0X")?`0x${hexadecimal.substring(2)}`:`0x${hexadecimal}`},exports.remove0x=function remove0x(hexadecimal){return hexadecimal.startsWith("0x")||hexadecimal.startsWith("0X")?hexadecimal.substring(2):hexadecimal}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/base64.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/bytes.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/checksum.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/coercers.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/collections.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/encryption-types.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/hex.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/json.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/keyring.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/logging.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/misc.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/number.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/opaque.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/time.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/transaction-types.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/versions.js"),exports)},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/json.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getJsonRpcIdValidator=exports.assertIsJsonRpcError=exports.isJsonRpcError=exports.assertIsJsonRpcFailure=exports.isJsonRpcFailure=exports.assertIsJsonRpcSuccess=exports.isJsonRpcSuccess=exports.assertIsJsonRpcResponse=exports.isJsonRpcResponse=exports.assertIsPendingJsonRpcResponse=exports.isPendingJsonRpcResponse=exports.JsonRpcResponseStruct=exports.JsonRpcFailureStruct=exports.JsonRpcSuccessStruct=exports.PendingJsonRpcResponseStruct=exports.assertIsJsonRpcRequest=exports.isJsonRpcRequest=exports.assertIsJsonRpcNotification=exports.isJsonRpcNotification=exports.JsonRpcNotificationStruct=exports.JsonRpcRequestStruct=exports.JsonRpcParamsStruct=exports.JsonRpcErrorStruct=exports.JsonRpcIdStruct=exports.JsonRpcVersionStruct=exports.jsonrpc2=exports.getJsonSize=exports.getSafeJson=exports.isValidJson=exports.JsonStruct=exports.UnsafeJsonStruct=void 0;const superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js");function getSafeJson(value){return(0,superstruct_1.create)(value,exports.JsonStruct)}exports.UnsafeJsonStruct=(0,superstruct_1.union)([(0,superstruct_1.literal)(null),(0,superstruct_1.boolean)(),(0,superstruct_1.define)("finite number",(value=>(0,superstruct_1.is)(value,(0,superstruct_1.number)())&&Number.isFinite(value))),(0,superstruct_1.string)(),(0,superstruct_1.array)((0,superstruct_1.lazy)((()=>exports.UnsafeJsonStruct))),(0,superstruct_1.record)((0,superstruct_1.string)(),(0,superstruct_1.lazy)((()=>exports.UnsafeJsonStruct)))]),exports.JsonStruct=(0,superstruct_1.coerce)(exports.UnsafeJsonStruct,(0,superstruct_1.any)(),(value=>((0,assert_1.assertStruct)(value,exports.UnsafeJsonStruct),JSON.parse(JSON.stringify(value,((propKey,propValue)=>{if("__proto__"!==propKey&&"constructor"!==propKey)return propValue})))))),exports.isValidJson=function isValidJson(value){try{return getSafeJson(value),!0}catch{return!1}},exports.getSafeJson=getSafeJson,exports.getJsonSize=function getJsonSize(value){(0,assert_1.assertStruct)(value,exports.JsonStruct,"Invalid JSON value");const json=JSON.stringify(value);return(new TextEncoder).encode(json).byteLength},exports.jsonrpc2="2.0",exports.JsonRpcVersionStruct=(0,superstruct_1.literal)(exports.jsonrpc2),exports.JsonRpcIdStruct=(0,superstruct_1.nullable)((0,superstruct_1.union)([(0,superstruct_1.number)(),(0,superstruct_1.string)()])),exports.JsonRpcErrorStruct=(0,superstruct_1.object)({code:(0,superstruct_1.integer)(),message:(0,superstruct_1.string)(),data:(0,superstruct_1.optional)(exports.JsonStruct),stack:(0,superstruct_1.optional)((0,superstruct_1.string)())}),exports.JsonRpcParamsStruct=(0,superstruct_1.optional)((0,superstruct_1.union)([(0,superstruct_1.record)((0,superstruct_1.string)(),exports.JsonStruct),(0,superstruct_1.array)(exports.JsonStruct)])),exports.JsonRpcRequestStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,method:(0,superstruct_1.string)(),params:exports.JsonRpcParamsStruct}),exports.JsonRpcNotificationStruct=(0,superstruct_1.omit)(exports.JsonRpcRequestStruct,["id"]),exports.isJsonRpcNotification=function isJsonRpcNotification(value){return(0,superstruct_1.is)(value,exports.JsonRpcNotificationStruct)},exports.assertIsJsonRpcNotification=function assertIsJsonRpcNotification(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",ErrorWrapper)},exports.isJsonRpcRequest=function isJsonRpcRequest(value){return(0,superstruct_1.is)(value,exports.JsonRpcRequestStruct)},exports.assertIsJsonRpcRequest=function assertIsJsonRpcRequest(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcRequestStruct,"Invalid JSON-RPC request",ErrorWrapper)},exports.PendingJsonRpcResponseStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,result:(0,superstruct_1.optional)((0,superstruct_1.unknown)()),error:(0,superstruct_1.optional)(exports.JsonRpcErrorStruct)}),exports.JsonRpcSuccessStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,result:exports.JsonStruct}),exports.JsonRpcFailureStruct=(0,superstruct_1.object)({id:exports.JsonRpcIdStruct,jsonrpc:exports.JsonRpcVersionStruct,error:exports.JsonRpcErrorStruct}),exports.JsonRpcResponseStruct=(0,superstruct_1.union)([exports.JsonRpcSuccessStruct,exports.JsonRpcFailureStruct]),exports.isPendingJsonRpcResponse=function isPendingJsonRpcResponse(response){return(0,superstruct_1.is)(response,exports.PendingJsonRpcResponseStruct)},exports.assertIsPendingJsonRpcResponse=function assertIsPendingJsonRpcResponse(response,ErrorWrapper){(0,assert_1.assertStruct)(response,exports.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",ErrorWrapper)},exports.isJsonRpcResponse=function isJsonRpcResponse(response){return(0,superstruct_1.is)(response,exports.JsonRpcResponseStruct)},exports.assertIsJsonRpcResponse=function assertIsJsonRpcResponse(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcResponseStruct,"Invalid JSON-RPC response",ErrorWrapper)},exports.isJsonRpcSuccess=function isJsonRpcSuccess(value){return(0,superstruct_1.is)(value,exports.JsonRpcSuccessStruct)},exports.assertIsJsonRpcSuccess=function assertIsJsonRpcSuccess(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",ErrorWrapper)},exports.isJsonRpcFailure=function isJsonRpcFailure(value){return(0,superstruct_1.is)(value,exports.JsonRpcFailureStruct)},exports.assertIsJsonRpcFailure=function assertIsJsonRpcFailure(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",ErrorWrapper)},exports.isJsonRpcError=function isJsonRpcError(value){return(0,superstruct_1.is)(value,exports.JsonRpcErrorStruct)},exports.assertIsJsonRpcError=function assertIsJsonRpcError(value,ErrorWrapper){(0,assert_1.assertStruct)(value,exports.JsonRpcErrorStruct,"Invalid JSON-RPC error",ErrorWrapper)},exports.getJsonRpcIdValidator=function getJsonRpcIdValidator(options){const{permitEmptyString,permitFractions,permitNull}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...options};return id=>Boolean("number"==typeof id&&(permitFractions||Number.isInteger(id))||"string"==typeof id&&(permitEmptyString||id.length>0)||permitNull&&null===id)}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/keyring.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/logging.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createModuleLogger=exports.createProjectLogger=void 0;const globalLogger=(0,__importDefault(__webpack_require__("./node_modules/debug/src/browser.js")).default)("metamask");exports.createProjectLogger=function createProjectLogger(projectName){return globalLogger.extend(projectName)},exports.createModuleLogger=function createModuleLogger(projectLogger,moduleName){return projectLogger.extend(moduleName)}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/misc.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateNumberSize=exports.calculateStringSize=exports.isASCII=exports.isPlainObject=exports.ESCAPE_CHARACTERS_REGEXP=exports.JsonSize=exports.hasProperty=exports.isObject=exports.isNullOrUndefined=exports.isNonEmptyArray=void 0,exports.isNonEmptyArray=function isNonEmptyArray(value){return Array.isArray(value)&&value.length>0},exports.isNullOrUndefined=function isNullOrUndefined(value){return null==value},exports.isObject=function isObject(value){return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)};function isASCII(character){return character.charCodeAt(0)<=127}exports.hasProperty=(objectToCheck,name)=>Object.hasOwnProperty.call(objectToCheck,name),function(JsonSize){JsonSize[JsonSize.Null=4]="Null",JsonSize[JsonSize.Comma=1]="Comma",JsonSize[JsonSize.Wrapper=1]="Wrapper",JsonSize[JsonSize.True=4]="True",JsonSize[JsonSize.False=5]="False",JsonSize[JsonSize.Quote=1]="Quote",JsonSize[JsonSize.Colon=1]="Colon",JsonSize[JsonSize.Date=24]="Date"}(exports.JsonSize||(exports.JsonSize={})),exports.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,exports.isPlainObject=function isPlainObject(value){if("object"!=typeof value||null===value)return!1;try{let proto=value;for(;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(value)===proto}catch(_){return!1}},exports.isASCII=isASCII,exports.calculateStringSize=function calculateStringSize(value){return value.split("").reduce(((total,character)=>isASCII(character)?total+1:total+2),0)+(value.match(exports.ESCAPE_CHARACTERS_REGEXP)??[]).length},exports.calculateNumberSize=function calculateNumberSize(value){return value.toString().length}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/number.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hexToBigInt=exports.hexToNumber=exports.bigIntToHex=exports.numberToHex=void 0;const assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js"),hex_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/hex.js");exports.numberToHex=value=>((0,assert_1.assert)("number"==typeof value,"Value must be a number."),(0,assert_1.assert)(value>=0,"Value must be a non-negative number."),(0,assert_1.assert)(Number.isSafeInteger(value),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,hex_1.add0x)(value.toString(16)));exports.bigIntToHex=value=>((0,assert_1.assert)("bigint"==typeof value,"Value must be a bigint."),(0,assert_1.assert)(value>=0,"Value must be a non-negative bigint."),(0,hex_1.add0x)(value.toString(16)));exports.hexToNumber=value=>{(0,hex_1.assertIsHexString)(value);const numberValue=parseInt(value,16);return(0,assert_1.assert)(Number.isSafeInteger(numberValue),"Value is not a safe integer. Use `hexToBigInt` instead."),numberValue};exports.hexToBigInt=value=>((0,hex_1.assertIsHexString)(value),BigInt((0,hex_1.add0x)(value)))},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/opaque.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/time.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.timeSince=exports.inMilliseconds=exports.Duration=void 0,function(Duration){Duration[Duration.Millisecond=1]="Millisecond",Duration[Duration.Second=1e3]="Second",Duration[Duration.Minute=6e4]="Minute",Duration[Duration.Hour=36e5]="Hour",Duration[Duration.Day=864e5]="Day",Duration[Duration.Week=6048e5]="Week",Duration[Duration.Year=31536e6]="Year"}(exports.Duration||(exports.Duration={}));const assertIsNonNegativeInteger=(number,name)=>{if(!(number=>Number.isInteger(number)&&number>=0)(number))throw new Error(`"${name}" must be a non-negative integer. Received: "${number}".`)};exports.inMilliseconds=function inMilliseconds(count,duration){return assertIsNonNegativeInteger(count,"count"),count*duration},exports.timeSince=function timeSince(timestamp){return assertIsNonNegativeInteger(timestamp,"timestamp"),Date.now()-timestamp}},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/transaction-types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/versions.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.satisfiesVersionRange=exports.gtRange=exports.gtVersion=exports.assertIsSemVerRange=exports.assertIsSemVerVersion=exports.isValidSemVerRange=exports.isValidSemVerVersion=exports.VersionRangeStruct=exports.VersionStruct=void 0;const semver_1=__webpack_require__("./node_modules/semver/index.js"),superstruct_1=__webpack_require__("./node_modules/superstruct/dist/index.mjs"),assert_1=__webpack_require__("./node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.js");exports.VersionStruct=(0,superstruct_1.refine)((0,superstruct_1.string)(),"Version",(value=>null!==(0,semver_1.valid)(value)||`Expected SemVer version, got "${value}"`)),exports.VersionRangeStruct=(0,superstruct_1.refine)((0,superstruct_1.string)(),"Version range",(value=>null!==(0,semver_1.validRange)(value)||`Expected SemVer range, got "${value}"`)),exports.isValidSemVerVersion=function isValidSemVerVersion(version){return(0,superstruct_1.is)(version,exports.VersionStruct)},exports.isValidSemVerRange=function isValidSemVerRange(versionRange){return(0,superstruct_1.is)(versionRange,exports.VersionRangeStruct)},exports.assertIsSemVerVersion=function assertIsSemVerVersion(version){(0,assert_1.assertStruct)(version,exports.VersionStruct)},exports.assertIsSemVerRange=function assertIsSemVerRange(range){(0,assert_1.assertStruct)(range,exports.VersionRangeStruct)},exports.gtVersion=function gtVersion(version1,version2){return(0,semver_1.gt)(version1,version2)},exports.gtRange=function gtRange(version,range){return(0,semver_1.gtr)(version,range)},exports.satisfiesVersionRange=function satisfiesVersionRange(version,versionRange){return(0,semver_1.satisfies)(version,versionRange,{includePrerelease:!0})}},"./node_modules/@xstate/fsm/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function t(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return a}var n;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{InterpreterStatus:()=>n,assign:()=>i,createMachine:()=>s,interpret:()=>v}),function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(n||(n={}));var e={type:"xstate.init"};function r(t){return void 0===t?[]:[].concat(t)}function i(t){return{type:"xstate.assign",assignment:t}}function o(t,n){return"string"==typeof(t="string"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:"function"==typeof t?{type:t.name,exec:t}:t}function a(t){return function(n){return t===n}}function u(t){return"string"==typeof t?{type:t}:t}function c(t,n){return{value:t,context:n,actions:[],changed:!1,matches:a(t)}}function f(t,n,e){var r=n,i=!1;return[t.filter((function(t){if("xstate.assign"===t.type){i=!0;var n=Object.assign({},r);return"function"==typeof t.assignment?n=t.assignment(r,e):Object.keys(t.assignment).forEach((function(i){n[i]="function"==typeof t.assignment[i]?t.assignment[i](r,e):t.assignment[i]})),r=n,!1}return!0})),r,i]}function s(n,i){void 0===i&&(i={});var s=t(f(r(n.states[n.initial].entry).map((function(t){return o(t,i.actions)})),n.context,e),2),l=s[0],v=s[1],y={config:n,_options:i,initialState:{value:n.initial,actions:l,context:v,matches:a(n.initial)},transition:function(e,i){var s,l,v="string"==typeof e?{value:e,context:n.context}:e,p=v.value,g=v.context,d=u(i),x=n.states[p];if(x.on){var m=r(x.on[d.type]);try{for(var h=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(m),b=h.next();!b.done;b=h.next()){var S=b.value;if(void 0===S)return c(p,g);var w="string"==typeof S?{target:S}:S,j=w.target,E=w.actions,R=void 0===E?[]:E,N=w.cond,O=void 0===N?function(){return!0}:N,_=void 0===j,k=null!=j?j:p,T=n.states[k];if(O(g,d)){var q=t(f((_?r(R):[].concat(x.exit,R,T.entry).filter((function(t){return t}))).map((function(t){return o(t,y._options.actions)})),g,d),3),z=q[0],A=q[1],B=q[2],C=null!=j?j:p;return{value:C,context:A,actions:z,changed:j!==p||z.length>0||B,matches:a(C)}}}}catch(t){s={error:t}}finally{try{b&&!b.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}}return c(p,g)}};return y}var l=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function v(t){var r=t.initialState,i=n.NotStarted,o=new Set,c={_machine:t,send:function(e){i===n.Running&&(r=t.transition(r,e),l(r,u(e)),o.forEach((function(t){return t(r)})))},subscribe:function(t){return o.add(t),t(r),{unsubscribe:function(){return o.delete(t)}}},start:function(o){if(o){var u="object"==typeof o?o:{context:t.config.context,value:o};r={value:u.value,actions:[],context:u.context,matches:a(u.value)}}else r=t.initialState;return i=n.Running,l(r,e),c},stop:function(){return i=n.Stopped,o.clear(),c},get state(){return r},get status(){return i}};return c}},"./node_modules/bl/BufferList.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{Buffer}=__webpack_require__("./node_modules/buffer/index.js"),symbol=Symbol.for("BufferList");function BufferList(buf){if(!(this instanceof BufferList))return new BufferList(buf);BufferList._init.call(this,buf)}BufferList._init=function _init(buf){Object.defineProperty(this,symbol,{value:!0}),this._bufs=[],this.length=0,buf&&this.append(buf)},BufferList.prototype._new=function _new(buf){return new BufferList(buf)},BufferList.prototype._offset=function _offset(offset){if(0===offset)return[0,0];let tot=0;for(let i=0;i<this._bufs.length;i++){const _t=tot+this._bufs[i].length;if(offset<_t||i===this._bufs.length-1)return[i,offset-tot];tot=_t}},BufferList.prototype._reverseOffset=function(blOffset){const bufferId=blOffset[0];let offset=blOffset[1];for(let i=0;i<bufferId;i++)offset+=this._bufs[i].length;return offset},BufferList.prototype.get=function get(index){if(index>this.length||index<0)return;const offset=this._offset(index);return this._bufs[offset[0]][offset[1]]},BufferList.prototype.slice=function slice(start,end){return"number"==typeof start&&start<0&&(start+=this.length),"number"==typeof end&&end<0&&(end+=this.length),this.copy(null,0,start,end)},BufferList.prototype.copy=function copy(dst,dstStart,srcStart,srcEnd){if(("number"!=typeof srcStart||srcStart<0)&&(srcStart=0),("number"!=typeof srcEnd||srcEnd>this.length)&&(srcEnd=this.length),srcStart>=this.length)return dst||Buffer.alloc(0);if(srcEnd<=0)return dst||Buffer.alloc(0);const copy=!!dst,off=this._offset(srcStart),len=srcEnd-srcStart;let bytes=len,bufoff=copy&&dstStart||0,start=off[1];if(0===srcStart&&srcEnd===this.length){if(!copy)return 1===this._bufs.length?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(dst,bufoff),bufoff+=this._bufs[i].length;return dst}if(bytes<=this._bufs[off[0]].length-start)return copy?this._bufs[off[0]].copy(dst,dstStart,start,start+bytes):this._bufs[off[0]].slice(start,start+bytes);copy||(dst=Buffer.allocUnsafe(len));for(let i=off[0];i<this._bufs.length;i++){const l=this._bufs[i].length-start;if(!(bytes>l)){this._bufs[i].copy(dst,bufoff,start,start+bytes),bufoff+=l;break}this._bufs[i].copy(dst,bufoff,start),bufoff+=l,bytes-=l,start&&(start=0)}return dst.length>bufoff?dst.slice(0,bufoff):dst},BufferList.prototype.shallowSlice=function shallowSlice(start,end){if(start=start||0,end="number"!=typeof end?this.length:end,start<0&&(start+=this.length),end<0&&(end+=this.length),start===end)return this._new();const startOffset=this._offset(start),endOffset=this._offset(end),buffers=this._bufs.slice(startOffset[0],endOffset[0]+1);return 0===endOffset[1]?buffers.pop():buffers[buffers.length-1]=buffers[buffers.length-1].slice(0,endOffset[1]),0!==startOffset[1]&&(buffers[0]=buffers[0].slice(startOffset[1])),this._new(buffers)},BufferList.prototype.toString=function toString(encoding,start,end){return this.slice(start,end).toString(encoding)},BufferList.prototype.consume=function consume(bytes){if(bytes=Math.trunc(bytes),Number.isNaN(bytes)||bytes<=0)return this;for(;this._bufs.length;){if(!(bytes>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(bytes),this.length-=bytes;break}bytes-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function duplicate(){const copy=this._new();for(let i=0;i<this._bufs.length;i++)copy.append(this._bufs[i]);return copy},BufferList.prototype.append=function append(buf){if(null==buf)return this;if(buf.buffer)this._appendBuffer(Buffer.from(buf.buffer,buf.byteOffset,buf.byteLength));else if(Array.isArray(buf))for(let i=0;i<buf.length;i++)this.append(buf[i]);else if(this._isBufferList(buf))for(let i=0;i<buf._bufs.length;i++)this.append(buf._bufs[i]);else"number"==typeof buf&&(buf=buf.toString()),this._appendBuffer(Buffer.from(buf));return this},BufferList.prototype._appendBuffer=function appendBuffer(buf){this._bufs.push(buf),this.length+=buf.length},BufferList.prototype.indexOf=function(search,offset,encoding){if(void 0===encoding&&"string"==typeof offset&&(encoding=offset,offset=void 0),"function"==typeof search||Array.isArray(search))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof search?search=Buffer.from([search]):"string"==typeof search?search=Buffer.from(search,encoding):this._isBufferList(search)?search=search.slice():Array.isArray(search.buffer)?search=Buffer.from(search.buffer,search.byteOffset,search.byteLength):Buffer.isBuffer(search)||(search=Buffer.from(search)),offset=Number(offset||0),isNaN(offset)&&(offset=0),offset<0&&(offset=this.length+offset),offset<0&&(offset=0),0===search.length)return offset>this.length?this.length:offset;const blOffset=this._offset(offset);let blIndex=blOffset[0],buffOffset=blOffset[1];for(;blIndex<this._bufs.length;blIndex++){const buff=this._bufs[blIndex];for(;buffOffset<buff.length;){if(buff.length-buffOffset>=search.length){const nativeSearchResult=buff.indexOf(search,buffOffset);if(-1!==nativeSearchResult)return this._reverseOffset([blIndex,nativeSearchResult]);buffOffset=buff.length-search.length+1}else{const revOffset=this._reverseOffset([blIndex,buffOffset]);if(this._match(revOffset,search))return revOffset;buffOffset++}}buffOffset=0}return-1},BufferList.prototype._match=function(offset,search){if(this.length-offset<search.length)return!1;for(let searchOffset=0;searchOffset<search.length;searchOffset++)if(this.get(offset+searchOffset)!==search[searchOffset])return!1;return!0},function(){const methods={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const m in methods)!function(m){BufferList.prototype[m]=null===methods[m]?function(offset,byteLength){return this.slice(offset,offset+byteLength)[m](0,byteLength)}:function(offset=0){return this.slice(offset,offset+methods[m])[m](0)}}(m)}(),BufferList.prototype._isBufferList=function _isBufferList(b){return b instanceof BufferList||BufferList.isBufferList(b)},BufferList.isBufferList=function isBufferList(b){return null!=b&&b[symbol]},module.exports=BufferList},"./node_modules/bl/bl.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const DuplexStream=__webpack_require__("./node_modules/bl/node_modules/readable-stream/readable-browser.js").Duplex,inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),BufferList=__webpack_require__("./node_modules/bl/BufferList.js");function BufferListStream(callback){if(!(this instanceof BufferListStream))return new BufferListStream(callback);if("function"==typeof callback){this._callback=callback;const piper=function piper(err){this._callback&&(this._callback(err),this._callback=null)}.bind(this);this.on("pipe",(function onPipe(src){src.on("error",piper)})),this.on("unpipe",(function onUnpipe(src){src.removeListener("error",piper)})),callback=null}BufferList._init.call(this,callback),DuplexStream.call(this)}inherits(BufferListStream,DuplexStream),Object.assign(BufferListStream.prototype,BufferList.prototype),BufferListStream.prototype._new=function _new(callback){return new BufferListStream(callback)},BufferListStream.prototype._write=function _write(buf,encoding,callback){this._appendBuffer(buf),"function"==typeof callback&&callback()},BufferListStream.prototype._read=function _read(size){if(!this.length)return this.push(null);size=Math.min(size,this.length),this.push(this.slice(0,size)),this.consume(size)},BufferListStream.prototype.end=function end(chunk){DuplexStream.prototype.end.call(this,chunk),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferListStream.prototype._destroy=function _destroy(err,cb){this._bufs.length=0,this.length=0,cb(err)},BufferListStream.prototype._isBufferList=function _isBufferList(b){return b instanceof BufferListStream||b instanceof BufferList||BufferListStream.isBufferList(b)},BufferListStream.isBufferList=BufferList.isBufferList,module.exports=BufferListStream,module.exports.BufferListStream=BufferListStream,module.exports.BufferList=BufferList},"./node_modules/bl/node_modules/readable-stream/errors-browser.js":module=>{"use strict";var codes={};function createErrorType(code,message,Base){Base||(Base=Error);var NodeError=function(_Base){function NodeError(arg1,arg2,arg3){return _Base.call(this,function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3))||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}(NodeError,_Base),NodeError}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map((function(i){return String(i)})),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(String(expected))}createErrorType("ERR_INVALID_OPT_VALUE",(function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(name,expected,actual){var determiner,msg;if("string"==typeof expected&&function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(name){return"The "+name+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(name){return"Cannot call "+name+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(arg){return"Unknown encoding: "+arg}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.q=codes},"./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_writable.js");__webpack_require__("./node_modules/inherits/inherits_browser.js")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}})},"./node_modules/bl/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_transform.js");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/bl/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");module.exports=Readable,Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/events/events.js").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var debug,debugUtil=__webpack_require__("?c28c");debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function debug(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/buffer_list.js"),destroyImpl=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/bl/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;__webpack_require__("./node_modules/inherits/inherits_browser.js")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var er,state=stream._readableState;if(null===chunk)state.reading=!1,function onEofChunk(stream,state){if(debug("onEofChunk"),state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}(stream,state);else if(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk));return er}(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state));return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};var MAX_HWM=1073741824;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),state.destroyed||!state.length&&!state.ended||(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self.listenerCount("data")>0&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0!==state.highWaterMark?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=this.listenerCount("readable")>0,!1!==state.flowing&&this.resume()):"readable"===ev&&(state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||process.nextTick(nReadingNextTick,this))),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ev&&void 0!==ev||process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/async_iterator.js")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/from-browser.js")),from(Readable,iterable,opts)})},"./node_modules/bl/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var _require$codes=__webpack_require__("./node_modules/bl/node_modules/readable-stream/errors-browser.js").q,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js");function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(er,data){done(_this,er,data)}))}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2)}))}},"./node_modules/bl/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}(_this,state)}}module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__("./node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/bl/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){var isDuplex=this instanceof(Duplex=Duplex||__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js"));if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(function prefinish(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function realHasInstance(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"==typeof chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/async_iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Object$setPrototypeO,process=__webpack_require__("./node_modules/process/browser.js");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value,done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(resolve,reject){process.nextTick((function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))}))}));var promise,lastPromise=this[kLastPromise];if(lastPromise)promise=new Promise(function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then((function(){iter[kEnded]?resolve(createIterResult(void 0,!0)):iter[kHandlePromise](resolve,reject)}),reject)}}(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function _return(){var _this2=this;return new Promise((function(resolve,reject){_this2[kStream].destroy(null,(function(err){err?reject(err):resolve(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype);module.exports=function createReadableStreamAsyncIterator(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(_Object$create={},kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,(function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0})),stream.on("readable",onReadable.bind(null,iterator)),iterator}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/buffer_list.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,inspect=__webpack_require__("?a3fc").inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(0===this.length)return Buffer.alloc(0);for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,Buffer.prototype.copy.call(src,target,offset),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):ret=n===this.head.data.length?this.shift():hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function value(_,options){return inspect(this,function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},options,{depth:0,customInspect:!1}))}}]),BufferList}()},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__("./node_modules/bl/node_modules/readable-stream/errors-browser.js").q.ERR_STREAM_PREMATURE_CLOSE;function noop(){}module.exports=function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function onlegacyfinish(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function onfinish(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function onend(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function onerror(err){callback.call(stream,err)},onclose=function onclose(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function onrequest(){stream.req.on("finish",onfinish)};return!function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/from-browser.js":module=>{module.exports=function(){throw new Error("Readable.from is not available in the browser")}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/pipeline.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var eos;var _require$codes=__webpack_require__("./node_modules/bl/node_modules/readable-stream/errors-browser.js").q,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}module.exports=function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var error,callback=function popCallback(streams){return streams.length?"function"!=typeof streams[streams.length-1]?noop:streams.pop():noop}(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return function destroyer(stream,reading,writing,callback){callback=function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}(callback);var closed=!1;stream.on("close",(function(){closed=!0})),void 0===eos&&(eos=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/end-of-stream.js")),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe"))}}(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/state.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__("./node_modules/bl/node_modules/readable-stream/errors-browser.js").q.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=function highWaterMarkFrom(options,isDuplex,duplexKey){return null!=options.highWaterMark?options.highWaterMark:isDuplex?options[duplexKey]:null}(options,isDuplex,duplexKey);if(null!=hwm){if(!isFinite(hwm)||Math.floor(hwm)!==hwm||hwm<0)throw new ERR_INVALID_OPT_VALUE(isDuplex?duplexKey:"highWaterMark",hwm);return Math.floor(hwm)}return state.objectMode?16:16384}}},"./node_modules/bl/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/events/events.js").EventEmitter},"./node_modules/bl/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/_stream_passthrough.js"),exports.finished=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),exports.pipeline=__webpack_require__("./node_modules/bl/node_modules/readable-stream/lib/internal/streams/pipeline.js")},"./node_modules/buffer-from/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,toString=Object.prototype.toString,isModern=void 0!==Buffer&&"function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;module.exports=function bufferFrom(value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return function isArrayBuffer(input){return"ArrayBuffer"===toString.call(input).slice(8,-1)}(value)?function fromArrayBuffer(obj,byteOffset,length){byteOffset>>>=0;var maxLength=obj.byteLength-byteOffset;if(maxLength<0)throw new RangeError("'offset' is out of bounds");if(void 0===length)length=maxLength;else if((length>>>=0)>maxLength)throw new RangeError("'length' is out of bounds");return isModern?Buffer.from(obj.slice(byteOffset,byteOffset+length)):new Buffer(new Uint8Array(obj.slice(byteOffset,byteOffset+length)))}(value,encodingOrOffset,length):"string"==typeof value?function fromString(string,encoding){if("string"==typeof encoding&&""!==encoding||(encoding="utf8"),!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');return isModern?Buffer.from(string,encoding):new Buffer(string,encoding)}(value,encodingOrOffset):isModern?Buffer.from(value):new Buffer(value)}},"./node_modules/end-of-stream/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),once=__webpack_require__("./node_modules/once/once.js"),noop=function(){},eos=function(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=once(callback||noop);var ws=stream._writableState,rs=stream._readableState,readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,cancelled=!1,onlegacyfinish=function(){stream.writable||onfinish()},onfinish=function(){writable=!1,readable||callback.call(stream)},onend=function(){readable=!1,writable||callback.call(stream)},onexit=function(exitCode){callback.call(stream,exitCode?new Error("exited with error code: "+exitCode):null)},onerror=function(err){callback.call(stream,err)},onclose=function(){process.nextTick(onclosenexttick)},onclosenexttick=function(){if(!cancelled)return(!readable||rs&&rs.ended&&!rs.destroyed)&&(!writable||ws&&ws.ended&&!ws.destroyed)?void 0:callback.call(stream,new Error("premature close"))},onrequest=function(){stream.req.on("finish",onfinish)};return!function(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!ws&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),function(stream){return stream.stdio&&Array.isArray(stream.stdio)&&3===stream.stdio.length}(stream)&&stream.on("exit",onexit),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){cancelled=!0,stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("exit",onexit),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}};module.exports=eos},"./node_modules/fs-constants/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("?e8c7")},"./node_modules/gunzip-maybe/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var zlib=__webpack_require__("./node_modules/gunzip-maybe/node_modules/browserify-zlib/src/index.js"),peek=__webpack_require__("./node_modules/peek-stream/index.js"),through=__webpack_require__("./node_modules/gunzip-maybe/node_modules/through2/through2.js"),pumpify=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pumpify/index.js"),isGzip=__webpack_require__("./node_modules/is-gzip/index.js"),isDeflate=__webpack_require__("./node_modules/is-deflate/index.js"),gunzip=function(maxRecursion){return void 0===maxRecursion&&(maxRecursion=3),peek({newline:!1,maxBuffer:10},(function(data,swap){if(maxRecursion<0)return swap(new Error("Maximum recursion reached"));switch(function(data){return isGzip(data)?1:isDeflate(data)?2:0}(data)){case 1:swap(null,pumpify(zlib.createGunzip(),gunzip(maxRecursion-1)));break;case 2:swap(null,pumpify(zlib.createInflate(),gunzip(maxRecursion-1)));break;default:swap(null,through())}}))};module.exports=gunzip},"./node_modules/gunzip-maybe/node_modules/browserify-zlib/src/binding.js":(__unused_webpack_module,exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,msg=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/messages.js"),zstream=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/zstream.js"),zlib_deflate=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/deflate.js"),zlib_inflate=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/inflate.js"),constants=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/constants.js");for(var key in constants)exports[key]=constants[key];function Zlib(mode){if(mode<exports.DEFLATE||mode>exports.UNZIP)throw new TypeError("Bad argument");this.mode=mode,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function bufferSet(data,offset){for(var i=0;i<data.length;i++)this[offset+i]=data[i]}exports.NONE=0,exports.DEFLATE=1,exports.INFLATE=2,exports.GZIP=3,exports.GUNZIP=4,exports.DEFLATERAW=5,exports.INFLATERAW=6,exports.UNZIP=7,Zlib.prototype.init=function(windowBits,level,memLevel,strategy,dictionary){switch(this.windowBits=windowBits,this.level=level,this.memLevel=memLevel,this.strategy=strategy,this.mode!==exports.GZIP&&this.mode!==exports.GUNZIP||(this.windowBits+=16),this.mode===exports.UNZIP&&(this.windowBits+=32),this.mode!==exports.DEFLATERAW&&this.mode!==exports.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new zstream,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var status=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:status=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}status===exports.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(status)},Zlib.prototype.params=function(){throw new Error("deflateParams Not supported")},Zlib.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===exports.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},Zlib.prototype.write=function(flush,input,in_off,in_len,out,out_off,out_len){this._writeCheck(),this.write_in_progress=!0;var self=this;return process.nextTick((function(){self.write_in_progress=!1;var res=self._write(flush,input,in_off,in_len,out,out_off,out_len);self.callback(res[0],res[1]),self.pending_close&&self.close()})),this},Zlib.prototype.writeSync=function(flush,input,in_off,in_len,out,out_off,out_len){return this._writeCheck(),this._write(flush,input,in_off,in_len,out,out_off,out_len)},Zlib.prototype._write=function(flush,input,in_off,in_len,out,out_off,out_len){if(this.write_in_progress=!0,flush!==exports.Z_NO_FLUSH&&flush!==exports.Z_PARTIAL_FLUSH&&flush!==exports.Z_SYNC_FLUSH&&flush!==exports.Z_FULL_FLUSH&&flush!==exports.Z_FINISH&&flush!==exports.Z_BLOCK)throw new Error("Invalid flush value");null==input&&(input=new Buffer(0),in_len=0,in_off=0),out._set?out.set=out._set:out.set=bufferSet;var strm=this.strm;switch(strm.avail_in=in_len,strm.input=input,strm.next_in=in_off,strm.avail_out=out_len,strm.output=out,strm.next_out=out_off,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var status=zlib_deflate.deflate(strm,flush);break;case exports.UNZIP:case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:status=zlib_inflate.inflate(strm,flush);break;default:throw new Error("Unknown mode "+this.mode)}return status!==exports.Z_STREAM_END&&status!==exports.Z_OK&&this._error(status),this.write_in_progress=!1,[strm.avail_in,strm.avail_out]},Zlib.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW?zlib_deflate.deflateEnd(this.strm):zlib_inflate.inflateEnd(this.strm),this.mode=exports.NONE)},Zlib.prototype.reset=function(){switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:var status=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:status=zlib_inflate.inflateReset(this.strm)}status!==exports.Z_OK&&this._error(status)},Zlib.prototype._error=function(status){this.onerror(msg[status]+": "+this.strm.msg,status),this.write_in_progress=!1,this.pending_close&&this.close()},exports.Zlib=Zlib},"./node_modules/gunzip-maybe/node_modules/browserify-zlib/src/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,process=__webpack_require__("./node_modules/process/browser.js"),Transform=__webpack_require__("./node_modules/readable-stream/lib/_stream_transform.js"),binding=__webpack_require__("./node_modules/gunzip-maybe/node_modules/browserify-zlib/src/binding.js"),util=__webpack_require__("./node_modules/util/util.js"),assert=__webpack_require__("./node_modules/assert/build/assert.js").ok;function zlibBuffer(engine,buffer,callback){var buffers=[],nread=0;function flow(){for(var chunk;null!==(chunk=engine.read());)buffers.push(chunk),nread+=chunk.length;engine.once("readable",flow)}function onEnd(){var buf=Buffer.concat(buffers,nread);buffers=[],callback(null,buf),engine.close()}engine.on("error",(function onError(err){engine.removeListener("end",onEnd),engine.removeListener("readable",flow),callback(err)})),engine.on("end",onEnd),engine.end(buffer),flow()}function zlibBufferSync(engine,buffer){if("string"==typeof buffer&&(buffer=new Buffer(buffer)),!Buffer.isBuffer(buffer))throw new TypeError("Not a string or buffer");var flushFlag=binding.Z_FINISH;return engine._processChunk(buffer,flushFlag)}function Deflate(opts){if(!(this instanceof Deflate))return new Deflate(opts);Zlib.call(this,opts,binding.DEFLATE)}function Inflate(opts){if(!(this instanceof Inflate))return new Inflate(opts);Zlib.call(this,opts,binding.INFLATE)}function Gzip(opts){if(!(this instanceof Gzip))return new Gzip(opts);Zlib.call(this,opts,binding.GZIP)}function Gunzip(opts){if(!(this instanceof Gunzip))return new Gunzip(opts);Zlib.call(this,opts,binding.GUNZIP)}function DeflateRaw(opts){if(!(this instanceof DeflateRaw))return new DeflateRaw(opts);Zlib.call(this,opts,binding.DEFLATERAW)}function InflateRaw(opts){if(!(this instanceof InflateRaw))return new InflateRaw(opts);Zlib.call(this,opts,binding.INFLATERAW)}function Unzip(opts){if(!(this instanceof Unzip))return new Unzip(opts);Zlib.call(this,opts,binding.UNZIP)}function Zlib(opts,mode){if(this._opts=opts=opts||{},this._chunkSize=opts.chunkSize||exports.Z_DEFAULT_CHUNK,Transform.call(this,opts),opts.flush&&opts.flush!==binding.Z_NO_FLUSH&&opts.flush!==binding.Z_PARTIAL_FLUSH&&opts.flush!==binding.Z_SYNC_FLUSH&&opts.flush!==binding.Z_FULL_FLUSH&&opts.flush!==binding.Z_FINISH&&opts.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+opts.flush);if(this._flushFlag=opts.flush||binding.Z_NO_FLUSH,opts.chunkSize&&(opts.chunkSize<exports.Z_MIN_CHUNK||opts.chunkSize>exports.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+opts.chunkSize);if(opts.windowBits&&(opts.windowBits<exports.Z_MIN_WINDOWBITS||opts.windowBits>exports.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+opts.windowBits);if(opts.level&&(opts.level<exports.Z_MIN_LEVEL||opts.level>exports.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+opts.level);if(opts.memLevel&&(opts.memLevel<exports.Z_MIN_MEMLEVEL||opts.memLevel>exports.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+opts.memLevel);if(opts.strategy&&opts.strategy!=exports.Z_FILTERED&&opts.strategy!=exports.Z_HUFFMAN_ONLY&&opts.strategy!=exports.Z_RLE&&opts.strategy!=exports.Z_FIXED&&opts.strategy!=exports.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+opts.strategy);if(opts.dictionary&&!Buffer.isBuffer(opts.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(mode);var self=this;this._hadError=!1,this._binding.onerror=function(message,errno){self._binding=null,self._hadError=!0;var error=new Error(message);error.errno=errno,error.code=exports.codes[errno],self.emit("error",error)};var level=exports.Z_DEFAULT_COMPRESSION;"number"==typeof opts.level&&(level=opts.level);var strategy=exports.Z_DEFAULT_STRATEGY;"number"==typeof opts.strategy&&(strategy=opts.strategy),this._binding.init(opts.windowBits||exports.Z_DEFAULT_WINDOWBITS,level,opts.memLevel||exports.Z_DEFAULT_MEMLEVEL,strategy,opts.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=level,this._strategy=strategy,this.once("end",this.close)}binding.Z_MIN_WINDOWBITS=8,binding.Z_MAX_WINDOWBITS=15,binding.Z_DEFAULT_WINDOWBITS=15,binding.Z_MIN_CHUNK=64,binding.Z_MAX_CHUNK=1/0,binding.Z_DEFAULT_CHUNK=16384,binding.Z_MIN_MEMLEVEL=1,binding.Z_MAX_MEMLEVEL=9,binding.Z_DEFAULT_MEMLEVEL=8,binding.Z_MIN_LEVEL=-1,binding.Z_MAX_LEVEL=9,binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION,Object.keys(binding).forEach((function(k){k.match(/^Z/)&&(exports[k]=binding[k])})),exports.codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR},Object.keys(exports.codes).forEach((function(k){exports.codes[exports.codes[k]]=k})),exports.Deflate=Deflate,exports.Inflate=Inflate,exports.Gzip=Gzip,exports.Gunzip=Gunzip,exports.DeflateRaw=DeflateRaw,exports.InflateRaw=InflateRaw,exports.Unzip=Unzip,exports.createDeflate=function(o){return new Deflate(o)},exports.createInflate=function(o){return new Inflate(o)},exports.createDeflateRaw=function(o){return new DeflateRaw(o)},exports.createInflateRaw=function(o){return new InflateRaw(o)},exports.createGzip=function(o){return new Gzip(o)},exports.createGunzip=function(o){return new Gunzip(o)},exports.createUnzip=function(o){return new Unzip(o)},exports.deflate=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new Deflate(opts),buffer,callback)},exports.deflateSync=function(buffer,opts){return zlibBufferSync(new Deflate(opts),buffer)},exports.gzip=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new Gzip(opts),buffer,callback)},exports.gzipSync=function(buffer,opts){return zlibBufferSync(new Gzip(opts),buffer)},exports.deflateRaw=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new DeflateRaw(opts),buffer,callback)},exports.deflateRawSync=function(buffer,opts){return zlibBufferSync(new DeflateRaw(opts),buffer)},exports.unzip=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new Unzip(opts),buffer,callback)},exports.unzipSync=function(buffer,opts){return zlibBufferSync(new Unzip(opts),buffer)},exports.inflate=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new Inflate(opts),buffer,callback)},exports.inflateSync=function(buffer,opts){return zlibBufferSync(new Inflate(opts),buffer)},exports.gunzip=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new Gunzip(opts),buffer,callback)},exports.gunzipSync=function(buffer,opts){return zlibBufferSync(new Gunzip(opts),buffer)},exports.inflateRaw=function(buffer,opts,callback){return"function"==typeof opts&&(callback=opts,opts={}),zlibBuffer(new InflateRaw(opts),buffer,callback)},exports.inflateRawSync=function(buffer,opts){return zlibBufferSync(new InflateRaw(opts),buffer)},util.inherits(Zlib,Transform),Zlib.prototype.params=function(level,strategy,callback){if(level<exports.Z_MIN_LEVEL||level>exports.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+level);if(strategy!=exports.Z_FILTERED&&strategy!=exports.Z_HUFFMAN_ONLY&&strategy!=exports.Z_RLE&&strategy!=exports.Z_FIXED&&strategy!=exports.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+strategy);if(this._level!==level||this._strategy!==strategy){var self=this;this.flush(binding.Z_SYNC_FLUSH,(function(){self._binding.params(level,strategy),self._hadError||(self._level=level,self._strategy=strategy,callback&&callback())}))}else process.nextTick(callback)},Zlib.prototype.reset=function(){return this._binding.reset()},Zlib.prototype._flush=function(callback){this._transform(new Buffer(0),"",callback)},Zlib.prototype.flush=function(kind,callback){var ws=this._writableState;if(("function"==typeof kind||void 0===kind&&!callback)&&(callback=kind,kind=binding.Z_FULL_FLUSH),ws.ended)callback&&process.nextTick(callback);else if(ws.ending)callback&&this.once("end",callback);else if(ws.needDrain){var self=this;this.once("drain",(function(){self.flush(callback)}))}else this._flushFlag=kind,this.write(new Buffer(0),"",callback)},Zlib.prototype.close=function(callback){if(callback&&process.nextTick(callback),!this._closed){this._closed=!0,this._binding.close();var self=this;process.nextTick((function(){self.emit("close")}))}},Zlib.prototype._transform=function(chunk,encoding,cb){var flushFlag,ws=this._writableState,last=(ws.ending||ws.ended)&&(!chunk||ws.length===chunk.length);if(null===!chunk&&!Buffer.isBuffer(chunk))return cb(new Error("invalid input"));last?flushFlag=binding.Z_FINISH:(flushFlag=this._flushFlag,chunk.length>=ws.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH));this._processChunk(chunk,flushFlag,cb)},Zlib.prototype._processChunk=function(chunk,flushFlag,cb){var availInBefore=chunk&&chunk.length,availOutBefore=this._chunkSize-this._offset,inOff=0,self=this,async="function"==typeof cb;if(!async){var error,buffers=[],nread=0;this.on("error",(function(er){error=er}));do{var res=this._binding.writeSync(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore)}while(!this._hadError&&callback(res[0],res[1]));if(this._hadError)throw error;var buf=Buffer.concat(buffers,nread);return this.close(),buf}var req=this._binding.write(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);function callback(availInAfter,availOutAfter){if(!self._hadError){var have=availOutBefore-availOutAfter;if(assert(have>=0,"have should not go down"),have>0){var out=self._buffer.slice(self._offset,self._offset+have);self._offset+=have,async?self.push(out):(buffers.push(out),nread+=out.length)}if((0===availOutAfter||self._offset>=self._chunkSize)&&(availOutBefore=self._chunkSize,self._offset=0,self._buffer=new Buffer(self._chunkSize)),0===availOutAfter){if(inOff+=availInBefore-availInAfter,availInBefore=availInAfter,!async)return!0;var newReq=self._binding.write(flushFlag,chunk,inOff,availInBefore,self._buffer,self._offset,self._chunkSize);return newReq.callback=callback,void(newReq.buffer=chunk)}if(!async)return!1;cb()}}req.buffer=chunk,req.callback=callback},util.inherits(Deflate,Zlib),util.inherits(Inflate,Zlib),util.inherits(Gzip,Zlib),util.inherits(Gunzip,Zlib),util.inherits(DeflateRaw,Zlib),util.inherits(InflateRaw,Zlib),util.inherits(Unzip,Zlib)},"./node_modules/gunzip-maybe/node_modules/duplexify/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,process=__webpack_require__("./node_modules/process/browser.js"),stream=__webpack_require__("./node_modules/readable-stream/readable-browser.js"),eos=__webpack_require__("./node_modules/end-of-stream/index.js"),inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),shift=__webpack_require__("./node_modules/stream-shift/index.js"),SIGNAL_FLUSH=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),onuncork=function(self,fn){self._corked?self.once("uncork",fn):fn()},destroyer=function(self,end){return function(err){err?function(self,err){self._autoDestroy&&self.destroy(err)}(self,"premature close"===err.message?null:err):end&&!self._ended&&self.end()}},Duplexify=function(writable,readable,opts){if(!(this instanceof Duplexify))return new Duplexify(writable,readable,opts);stream.Duplex.call(this,opts),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!opts||!1!==opts.autoDestroy,this._forwardDestroy=!opts||!1!==opts.destroy,this._forwardEnd=!opts||!1!==opts.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,writable&&this.setWritable(writable),readable&&this.setReadable(readable)};inherits(Duplexify,stream.Duplex),Duplexify.obj=function(writable,readable,opts){return opts||(opts={}),opts.objectMode=!0,opts.highWaterMark=16,new Duplexify(writable,readable,opts)},Duplexify.prototype.cork=function(){1==++this._corked&&this.emit("cork")},Duplexify.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},Duplexify.prototype.setWritable=function(writable){if(this._unwrite&&this._unwrite(),this.destroyed)writable&&writable.destroy&&writable.destroy();else if(null!==writable&&!1!==writable){var self=this,unend=eos(writable,{writable:!0,readable:!1},destroyer(this,this._forwardEnd)),ondrain=function(){var ondrain=self._ondrain;self._ondrain=null,ondrain&&ondrain()};this._unwrite&&process.nextTick(ondrain),this._writable=writable,this._writable.on("drain",ondrain),this._unwrite=function(){self._writable.removeListener("drain",ondrain),unend()},this.uncork()}else this.end()},Duplexify.prototype.setReadable=function(readable){if(this._unread&&this._unread(),this.destroyed)readable&&readable.destroy&&readable.destroy();else{if(null===readable||!1===readable)return this.push(null),void this.resume();var rs,self=this,unend=eos(readable,{writable:!1,readable:!0},destroyer(this)),onreadable=function(){self._forward()},onend=function(){self.push(null)};this._drained=!0,this._readable=readable,this._readable2=readable._readableState?readable:(rs=readable,new stream.Readable({objectMode:!0,highWaterMark:16}).wrap(rs)),this._readable2.on("readable",onreadable),this._readable2.on("end",onend),this._unread=function(){self._readable2.removeListener("readable",onreadable),self._readable2.removeListener("end",onend),unend()},this._forward()}},Duplexify.prototype._read=function(){this._drained=!0,this._forward()},Duplexify.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var data;for(this._forwarding=!0;this._drained&&null!==(data=shift(this._readable2));)this.destroyed||(this._drained=this.push(data));this._forwarding=!1}},Duplexify.prototype.destroy=function(err){if(!this.destroyed){this.destroyed=!0;var self=this;process.nextTick((function(){self._destroy(err)}))}},Duplexify.prototype._destroy=function(err){if(err){var ondrain=this._ondrain;this._ondrain=null,ondrain?ondrain(err):this.emit("error",err)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},Duplexify.prototype._write=function(data,enc,cb){return this.destroyed?cb():this._corked?onuncork(this,this._write.bind(this,data,enc,cb)):data===SIGNAL_FLUSH?this._finish(cb):this._writable?void(!1===this._writable.write(data)?this._ondrain=cb:cb()):cb()},Duplexify.prototype._finish=function(cb){var self=this;this.emit("preend"),onuncork(this,(function(){var ws,fn;ws=self._forwardEnd&&self._writable,fn=function(){!1===self._writableState.prefinished&&(self._writableState.prefinished=!0),self.emit("prefinish"),onuncork(self,cb)},ws?ws._writableState&&ws._writableState.finished?fn():ws._writableState?ws.end(fn):(ws.end(),fn()):fn()}))},Duplexify.prototype.end=function(data,enc,cb){return"function"==typeof data?this.end(null,null,data):"function"==typeof enc?this.end(data,null,enc):(this._ended=!0,data&&this.write(data),this._writableState.ending||this.write(SIGNAL_FLUSH),stream.Writable.prototype.end.call(this,cb))},module.exports=Duplexify},"./node_modules/gunzip-maybe/node_modules/pako/lib/utils/common.js":(__unused_webpack_module,exports)=>{"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(var p in source)source.hasOwnProperty(p)&&(obj[p]=source[p])}}return obj},exports.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray)dest.set(src.subarray(src_offs,src_offs+len),dest_offs);else for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)chunk=chunks[i],result.set(chunk,pos),pos+=chunk.length;return result}},fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){on?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK)},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/adler32.js":module=>{"use strict";module.exports=function adler32(adler,buf,len,pos){for(var s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;0!==len;){len-=n=len>2e3?2e3:len;do{s2=s2+(s1=s1+buf[pos++]|0)|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/constants.js":module=>{"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/crc32.js":module=>{"use strict";var crcTable=function makeTable(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}();module.exports=function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/deflate.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var configuration_table,utils=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/utils/common.js"),trees=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/trees.js"),adler32=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/adler32.js"),crc32=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/crc32.js"),msg=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/messages.js"),Z_NO_FLUSH=0,Z_FINISH=4,Z_OK=0,Z_STREAM_ERROR=-2,Z_DEFAULT_COMPRESSION=-1,Z_FIXED=4,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,L_CODES=286,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,INIT_STATE=42,BUSY_STATE=113,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4;function err(strm,errorCode){return strm.msg=msg[errorCode],errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function flush_pending(strm){var s=strm.state,len=s.pending;len>strm.avail_out&&(len=strm.avail_out),0!==len&&(utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,0===s.pending&&(s.pending_out=0))}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=255&b}function longest_match(s,cur_match){var match,len,chain_length=s.max_chain_length,scan=s.strstart,best_len=s.prev_length,nice_match=s.nice_match,limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+MAX_MATCH,scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(_win[(match=cur_match)+best_len]===scan_end&&_win[match+best_len-1]===scan_end1&&_win[match]===_win[scan]&&_win[++match]===_win[scan+1]){scan+=2,match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=MAX_MATCH-(strend-scan),scan=strend-MAX_MATCH,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}}while((cur_match=prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=s.lookahead?best_len:s.lookahead}function fill_window(s){var p,n,m,more,str,strm,buf,start,size,len,_w_size=s.w_size;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,p=n=s.hash_size;do{m=s.head[--p],s.head[p]=m>=_w_size?m-_w_size:0}while(--n);p=n=_w_size;do{m=s.prev[--p],s.prev[p]=m>=_w_size?m-_w_size:0}while(--n);more+=_w_size}if(0===s.strm.avail_in)break;if(strm=s.strm,buf=s.window,start=s.strstart+s.lookahead,size=more,len=void 0,(len=strm.avail_in)>size&&(len=size),n=0===len?0:(strm.avail_in-=len,utils.arraySet(buf,strm.input,strm.next_in,len,start),1===strm.state.wrap?strm.adler=adler32(strm.adler,buf,len,start):2===strm.state.wrap&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len),s.lookahead+=n,s.lookahead+s.insert>=MIN_MATCH)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<MIN_MATCH)););}while(s.lookahead<MIN_LOOKAHEAD&&0!==s.strm.avail_in)}function deflate_fast(s,flush){for(var hash_head,bflush;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),0!==hash_head&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head)),s.match_length>=MIN_MATCH)if(bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do{s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart}while(0!=--s.match_length);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(s,flush){for(var hash_head,bflush,max_insert;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=MIN_MATCH-1,0!==hash_head&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(1===s.strategy||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)&&(s.match_length=MIN_MATCH-1)),s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH,bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH),s.lookahead-=s.prev_length-1,s.prev_length-=2;do{++s.strstart<=max_insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart)}while(0!=--s.prev_length);if(s.match_available=0,s.match_length=MIN_MATCH-1,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}else if(s.match_available){if((bflush=trees._tr_tally(s,0,s.window[s.strstart-1]))&&flush_block_only(s,!1),s.strstart++,s.lookahead--,0===s.strm.avail_out)return BS_NEED_MORE}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(2*HEAP_SIZE),this.dyn_dtree=new utils.Buf16(2*(2*D_CODES+1)),this.bl_tree=new utils.Buf16(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(strm){var s;return strm&&strm.state?(strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN,(s=strm.state).pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?INIT_STATE:BUSY_STATE,strm.adler=2===s.wrap?0:1,s.last_flush=Z_NO_FLUSH,trees._tr_init(s),Z_OK):err(strm,Z_STREAM_ERROR)}function deflateReset(strm){var ret=deflateResetKeep(strm);return ret===Z_OK&&function lm_init(s){s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,s.ins_h=0}(strm.state),ret}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return Z_STREAM_ERROR;var wrap=1;if(level===Z_DEFAULT_COMPRESSION&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED)return err(strm,Z_STREAM_ERROR);8===windowBits&&(windowBits=9);var s=new DeflateState;return strm.state=s,s.strm=strm,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH),s.window=new utils.Buf8(2*s.w_size),s.head=new utils.Buf16(s.hash_size),s.prev=new utils.Buf16(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new utils.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)}configuration_table=[new Config(0,0,0,0,(function deflate_stored(s,flush){var max_block_size=65535;for(max_block_size>s.pending_buf_size-5&&(max_block_size=s.pending_buf_size-5);;){if(s.lookahead<=1){if(fill_window(s),0===s.lookahead&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}s.strstart+=s.lookahead,s.lookahead=0;var max_start=s.block_start+max_block_size;if((0===s.strstart||s.strstart>=max_start)&&(s.lookahead=s.strstart-max_start,s.strstart=max_start,flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE;if(s.strstart-s.block_start>=s.w_size-MIN_LOOKAHEAD&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):(s.strstart>s.block_start&&(flush_block_only(s,!1),s.strm.avail_out),BS_NEED_MORE)})),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,15,8,0)},exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=function deflateSetHeader(strm,head){return strm&&strm.state?2!==strm.state.wrap?Z_STREAM_ERROR:(strm.state.gzhead=head,Z_OK):Z_STREAM_ERROR},exports.deflate=function deflate(strm,flush){var old_flush,s,beg,val;if(!strm||!strm.state||flush>5||flush<0)return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;if(s=strm.state,!strm.output||!strm.input&&0!==strm.avail_in||666===s.status&&flush!==Z_FINISH)return err(strm,0===strm.avail_out?-5:Z_STREAM_ERROR);if(s.strm=strm,old_flush=s.last_flush,s.last_flush=flush,s.status===INIT_STATE)if(2===s.wrap)strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,3),s.status=BUSY_STATE);else{var header=Z_DEFLATED+(s.w_bits-8<<4)<<8;header|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(header|=32),header+=31-header%31,s.status=BUSY_STATE,putShortMSB(s,header),0!==s.strstart&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),strm.adler=1}if(69===s.status)if(s.gzhead.extra){for(beg=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending!==s.pending_buf_size));)put_byte(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(strm),s.pending+2<=s.pending_buf_size&&(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),strm.adler=0,s.status=BUSY_STATE)):s.status=BUSY_STATE),0!==s.pending){if(flush_pending(strm),0===strm.avail_out)return s.last_flush=-1,Z_OK}else if(0===strm.avail_in&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH)return err(strm,-5);if(666===s.status&&0!==strm.avail_in)return err(strm,-5);if(0!==strm.avail_in||0!==s.lookahead||flush!==Z_NO_FLUSH&&666!==s.status){var bstate=2===s.strategy?function deflate_huff(s,flush){for(var bflush;;){if(0===s.lookahead&&(fill_window(s),0===s.lookahead)){if(flush===Z_NO_FLUSH)return BS_NEED_MORE;break}if(s.match_length=0,bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}(s,flush):3===s.strategy?function deflate_rle(s,flush){for(var bflush,prev,scan,strend,_win=s.window;;){if(s.lookahead<=MAX_MATCH){if(fill_window(s),s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(0===s.lookahead)break}if(s.match_length=0,s.lookahead>=MIN_MATCH&&s.strstart>0&&(prev=_win[scan=s.strstart-1])===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]){strend=s.strstart+MAX_MATCH;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=MIN_MATCH?(bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}(s,flush):configuration_table[s.level].func(s,flush);if(bstate!==BS_FINISH_STARTED&&bstate!==BS_FINISH_DONE||(s.status=666),bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED)return 0===strm.avail_out&&(s.last_flush=-1),Z_OK;if(bstate===BS_BLOCK_DONE&&(1===flush?trees._tr_align(s):5!==flush&&(trees._tr_stored_block(s,0,0,!1),3===flush&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),0===strm.avail_out))return s.last_flush=-1,Z_OK}return flush!==Z_FINISH?Z_OK:s.wrap<=0?1:(2===s.wrap?(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,255&strm.total_in),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?Z_OK:1)},exports.deflateEnd=function deflateEnd(strm){var status;return strm&&strm.state?(status=strm.state.status)!==INIT_STATE&&69!==status&&73!==status&&91!==status&&103!==status&&status!==BUSY_STATE&&666!==status?err(strm,Z_STREAM_ERROR):(strm.state=null,status===BUSY_STATE?err(strm,-3):Z_OK):Z_STREAM_ERROR},exports.deflateSetDictionary=function deflateSetDictionary(strm,dictionary){var s,str,n,wrap,avail,next,input,tmpDict,dictLength=dictionary.length;if(!strm||!strm.state)return Z_STREAM_ERROR;if(2===(wrap=(s=strm.state).wrap)||1===wrap&&s.status!==INIT_STATE||s.lookahead)return Z_STREAM_ERROR;for(1===wrap&&(strm.adler=adler32(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size&&(0===wrap&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0),tmpDict=new utils.Buf8(s.w_size),utils.arraySet(tmpDict,dictionary,dictLength-s.w_size,s.w_size,0),dictionary=tmpDict,dictLength=s.w_size),avail=strm.avail_in,next=strm.next_in,input=strm.input,strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=MIN_MATCH;){str=s.strstart,n=s.lookahead-(MIN_MATCH-1);do{s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++}while(--n);s.strstart=str,s.lookahead=MIN_MATCH-1,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,Z_OK},exports.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/inffast.js":module=>{"use strict";module.exports=function inflate_fast(strm,start){var state,_in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;state=strm.state,_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(hold>>>=op=here>>>24,bits-=op,0===(op=here>>>16&255))output[_out++]=65535&here;else{if(!(16&op)){if(0==(64&op)){here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}if(32&op){state.mode=12;break top}strm.msg="invalid literal/length code",state.mode=30;break top}len=65535&here,(op&=15)&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(hold>>>=op=here>>>24,bits-=op,!(16&(op=here>>>16&255))){if(0==(64&op)){here=dcode[(65535&here)+(hold&(1<<op)-1)];continue dodist}strm.msg="invalid distance code",state.mode=30;break top}if(dist=65535&here,bits<(op&=15)&&(hold+=input[_in++]<<bits,(bits+=8)<op&&(hold+=input[_in++]<<bits,bits+=8)),(dist+=hold&(1<<op)-1)>dmax){strm.msg="invalid distance too far back",state.mode=30;break top}if(hold>>>=op,bits-=op,dist>(op=_out-beg)){if((op=dist-op)>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,(op-=wnext)<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){len-=op=wnext;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}}break}}while(_in<last&&_out<end);_in-=len=bits>>3,hold&=(1<<(bits-=len<<3))-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/inflate.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var utils=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/utils/common.js"),adler32=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/adler32.js"),crc32=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/crc32.js"),inflate_fast=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/inffast.js"),inflate_table=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/inftrees.js"),LENS=1,DISTS=2,Z_OK=0,Z_STREAM_ERROR=-2,HEAD=1,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(strm){var state;return strm&&strm.state?(state=strm.state,strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=HEAD,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS),state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS),state.sane=1,state.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(strm){var state;return strm&&strm.state?((state=strm.state).wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)):Z_STREAM_ERROR}function inflateReset2(strm,windowBits){var wrap,state;return strm&&strm.state?(state=strm.state,windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=1+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR:(null!==state.window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))):Z_STREAM_ERROR}function inflateInit2(strm,windowBits){var ret,state;return strm?(state=new InflateState,strm.state=state,state.window=null,(ret=inflateReset2(strm,windowBits))!==Z_OK&&(strm.state=null),ret):Z_STREAM_ERROR}var lenfix,distfix,virgin=!0;function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}function updatewindow(strm,src,end,copy){var dist,state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):((dist=state.wsize-state.wnext)>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),(copy-=dist)?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=function inflateInit(strm){return inflateInit2(strm,15)},exports.inflateInit2=inflateInit2,exports.inflate=function inflate(strm,flush){var state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,opts,n,here=0,hbuf=new utils.Buf8(4),order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&0!==strm.avail_in)return Z_STREAM_ERROR;12===(state=strm.state).mode&&(state.mode=13),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(0===state.wrap){state.mode=13;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=2;break}if(state.flags=0,state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=30;break}if(8!=(15&hold)){strm.msg="unknown compression method",state.mode=30;break}if(bits-=4,len=8+(15&(hold>>>=4)),0===state.wbits)state.wbits=len;else if(len>state.wbits){strm.msg="invalid window size",state.mode=30;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=512&hold?10:12,hold=0,bits=0;break;case 2:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,8!=(255&state.flags)){strm.msg="unknown compression method",state.mode=30;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=30;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=3;case 3:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=4;case 4:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=5;case 5:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=6;case 6:if(1024&state.flags&&((copy=state.length)>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=7;case 7:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=8;case 8:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=9;case 9:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=30;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=12;break;case 10:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=11;case 11:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,2;strm.adler=state.check=1,state.mode=12;case 12:if(5===flush||6===flush)break inf_leave;case 13:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=27;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,bits-=1,3&(hold>>>=1)){case 0:state.mode=14;break;case 1:if(fixedtables(state),state.mode=20,6===flush){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=17;break;case 3:strm.msg="invalid block type",state.mode=30}hold>>>=2,bits-=2;break;case 14:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=30;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=15,6===flush)break inf_leave;case 15:state.mode=16;case 16:if(copy=state.length){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=12;break;case 17:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),hold>>>=5,bits-=5,state.ndist=1+(31&hold),hold>>>=5,bits-=5,state.ncode=4+(15&hold),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=30;break}state.have=0,state.mode=18;case 18:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(0,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=30;break}state.have=0,state.mode=19;case 19:for(;state.have<state.nlen+state.ndist;){for(;here_op=(here=state.lencode[hold&(1<<state.lenbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=30;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}bits-=here_bits,len=0,copy=3+(7&(hold>>>=here_bits)),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}bits-=here_bits,len=0,copy=11+(127&(hold>>>=here_bits)),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=30;break}for(;copy--;)state.lens[state.have++]=len}}if(30===state.mode)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=30;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=30;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=30;break}if(state.mode=20,6===flush)break inf_leave;case 20:state.mode=21;case 21:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,12===state.mode&&(state.back=-1);break}for(state.back=0;here_op=(here=state.lencode[hold&(1<<state.lenbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here_op=(here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)])>>>16&255,here_val=65535&here,!(last_bits+(here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=26;break}if(32&here_op){state.back=-1,state.mode=12;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=30;break}state.extra=15&here_op,state.mode=22;case 22:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=23;case 23:for(;here_op=(here=state.distcode[hold&(1<<state.distbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here_op=(here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)])>>>16&255,here_val=65535&here,!(last_bits+(here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=30;break}state.offset=here_val,state.extra=15&here_op,state.mode=24;case 24:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=30;break}state.mode=25;case 25:if(0===left)break inf_leave;if(copy=_out-left,state.offset>copy){if((copy=state.offset-copy)>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=21);break;case 26:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=21;break;case 27:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=30;break}hold=0,bits=0}state.mode=28;case 28:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=30;break}hold=0,bits=0}state.mode=29;case 29:ret=1;break inf_leave;case 30:ret=-3;break inf_leave;case 31:return-4;default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<30&&(state.mode<27||4!==flush))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=31,-4):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(12===state.mode?128:0)+(20===state.mode||15===state.mode?256:0),(0===_in&&0===_out||4===flush)&&ret===Z_OK&&(ret=-5),ret)},exports.inflateEnd=function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK},exports.inflateGetHeader=function inflateGetHeader(strm,head){var state;return strm&&strm.state?0==(2&(state=strm.state).wrap)?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK):Z_STREAM_ERROR},exports.inflateSetDictionary=function inflateSetDictionary(strm,dictionary){var state,dictLength=dictionary.length;return strm&&strm.state?0!==(state=strm.state).wrap&&11!==state.mode?Z_STREAM_ERROR:11===state.mode&&adler32(1,dictionary,dictLength,0)!==state.check?-3:updatewindow(strm,dictionary,dictLength,dictLength)?(state.mode=31,-4):(state.havedict=1,Z_OK):Z_STREAM_ERROR},exports.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/inftrees.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var utils=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/utils/common.js"),lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(type,lens,lens_index,codes,table,table_index,work,opts){var incr,fill,low,mask,next,end,here_bits,here_op,here_val,bits=opts.bits,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null,base_index=0,count=new utils.Buf16(16),offs=new utils.Buf16(16),extra=null,extra_index=0;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=15;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=15;len++)if(left<<=1,(left-=count[len])<0)return-1;if(left>0&&(0===type||1!==max))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(0===type?(base=extra=work,end=19):1===type?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,mask=(used=1<<root)-1,1===type&&used>852||2===type&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,min=fill=1<<curr;do{table[next+(huff>>drop)+(fill-=incr)]=here_bits<<24|here_op<<16|here_val|0}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,left=1<<(curr=len-drop);curr+drop<max&&!((left-=count[curr+drop])<=0);)curr++,left<<=1;if(used+=1<<curr,1===type&&used>852||2===type&&used>592)return 1;table[low=huff&mask]=root<<24|curr<<16|next-table_index|0}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/messages.js":module=>{"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/trees.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var utils=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pako/lib/utils/common.js"),Z_BINARY=0,Z_TEXT=1;function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}var STORED_BLOCK=0,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(512);zero(_dist_code);var _length_code=new Array(256);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var static_l_desc,static_d_desc,static_bl_desc,base_dist=new Array(D_CODES);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=255&w,s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){s.bi_valid>Buf_size-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>Buf_size-s.bi_valid,s.bi_valid+=length-Buf_size):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)}function send_code(s,c,tree){send_bits(s,tree[2*c],tree[2*c+1])}function bi_reverse(code,len){var res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1}function gen_codes(tree,max_code,bl_count){var bits,n,next_code=new Array(MAX_BITS+1),code=0;for(bits=1;bits<=MAX_BITS;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[2*n+1];0!==len&&(tree[2*n]=bi_reverse(next_code[len]++,len))}}function init_block(s){var n;for(n=0;n<L_CODES;n++)s.dyn_ltree[2*n]=0;for(n=0;n<D_CODES;n++)s.dyn_dtree[2*n]=0;for(n=0;n<BL_CODES;n++)s.bl_tree[2*n]=0;s.dyn_ltree[2*END_BLOCK]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function bi_windup(s){s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function smaller(tree,n,m,depth){var _n2=2*n,_m2=2*m;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){for(var v=s.heap[k],j=k<<1;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v}function compress_block(s,ltree,dtree){var dist,lc,code,extra,lx=0;if(0!==s.last_lit)do{dist=s.pending_buf[s.d_buf+2*lx]<<8|s.pending_buf[s.d_buf+2*lx+1],lc=s.pending_buf[s.l_buf+lx],lx++,0===dist?send_code(s,lc,ltree):(send_code(s,(code=_length_code[lc])+LITERALS+1,ltree),0!==(extra=extra_lbits[code])&&send_bits(s,lc-=base_length[code],extra),send_code(s,code=d_code(--dist),dtree),0!==(extra=extra_dbits[code])&&send_bits(s,dist-=base_dist[code],extra))}while(lx<s.last_lit);send_code(s,END_BLOCK,ltree)}function build_tree(s,desc){var n,m,node,tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems,max_code=-1;for(s.heap_len=0,s.heap_max=HEAP_SIZE,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)tree[2*(node=s.heap[++s.heap_len]=max_code<2?++max_code:0)]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[2*node+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],function gen_bitlen(s,desc){var h,n,m,bits,xbits,f,tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length,overflow=0;for(bits=0;bits<=MAX_BITS;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<HEAP_SIZE;h++)(bits=tree[2*tree[2*(n=s.heap[h])+1]+1]+1)>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[2*n],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)(m=s.heap[--h])>max_code||(tree[2*m+1]!==bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}}(s,desc),gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen===nextlen||(count<min_count?s.bl_tree[2*curlen]+=count:0!==curlen?(curlen!==prevlen&&s.bl_tree[2*curlen]++,s.bl_tree[2*REP_3_6]++):count<=10?s.bl_tree[2*REPZ_3_10]++:s.bl_tree[2*REPZ_11_138]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))}function send_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do{send_code(s,curlen,s.bl_tree)}while(0!=--count);else 0!==curlen?(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,REP_3_6,s.bl_tree),send_bits(s,count-3,2)):count<=10?(send_code(s,REPZ_3_10,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,REPZ_11_138,s.bl_tree),send_bits(s,count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}zero(base_dist);var static_init_done=!1;function _tr_stored_block(s,buf,stored_len,last){send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3),function copy_block(s,buf,len,header){bi_windup(s),header&&(put_short(s,len),put_short(s,~len)),utils.arraySet(s.pending_buf,s.window,buf,len,s.pending),s.pending+=len}(s,buf,stored_len,!0)}exports._tr_init=function _tr_init(s){static_init_done||(!function tr_static_init(){var n,bits,length,code,dist,bl_count=new Array(MAX_BITS+1);for(length=0,code=0;code<LENGTH_CODES-1;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<D_CODES;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=MAX_BITS;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[2*n+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[2*n+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,L_CODES+1,bl_count),n=0;n<D_CODES;n++)static_dtree[2*n+1]=5,static_dtree[2*n]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=function _tr_flush_block(s,buf,stored_len,last){var opt_lenb,static_lenb,max_blindex=0;s.level>0?(2===s.strm.data_type&&(s.strm.data_type=function detect_data_type(s){var n,black_mask=4093624447;for(n=0;n<=31;n++,black_mask>>>=1)if(1&black_mask&&0!==s.dyn_ltree[2*n])return Z_BINARY;if(0!==s.dyn_ltree[18]||0!==s.dyn_ltree[20]||0!==s.dyn_ltree[26])return Z_TEXT;for(n=32;n<LITERALS;n++)if(0!==s.dyn_ltree[2*n])return Z_TEXT;return Z_BINARY}(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=function build_bl_tree(s){var max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=BL_CODES-1;max_blindex>=3&&0===s.bl_tree[2*bl_order[max_blindex]+1];max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}(s),opt_lenb=s.opt_len+3+7>>>3,(static_lenb=s.static_len+3+7>>>3)<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!==buf?_tr_stored_block(s,buf,stored_len,last):4===s.strategy||static_lenb===opt_lenb?(send_bits(s,2+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,4+(last?1:0),3),function send_all_trees(s,lcodes,dcodes,blcodes){var rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[2*bl_order[rank]+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)}(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)},exports._tr_tally=function _tr_tally(s,dist,lc){return s.pending_buf[s.d_buf+2*s.last_lit]=dist>>>8&255,s.pending_buf[s.d_buf+2*s.last_lit+1]=255&dist,s.pending_buf[s.l_buf+s.last_lit]=255&lc,s.last_lit++,0===dist?s.dyn_ltree[2*lc]++:(s.matches++,dist--,s.dyn_ltree[2*(_length_code[lc]+LITERALS+1)]++,s.dyn_dtree[2*d_code(dist)]++),s.last_lit===s.lit_bufsize-1},exports._tr_align=function _tr_align(s){send_bits(s,2,3),send_code(s,END_BLOCK,static_ltree),function bi_flush(s){16===s.bi_valid?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)}(s)}},"./node_modules/gunzip-maybe/node_modules/pako/lib/zlib/zstream.js":module=>{"use strict";module.exports=function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"./node_modules/gunzip-maybe/node_modules/pump/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var once=__webpack_require__("./node_modules/once/once.js"),eos=__webpack_require__("./node_modules/end-of-stream/index.js"),fs=__webpack_require__("?4908"),noop=function(){},isFn=function(fn){return"function"==typeof fn},destroyer=function(stream,reading,writing,callback){callback=once(callback);var closed=!1;stream.on("close",(function(){closed=!0})),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function(stream){return!!fs&&(stream instanceof(fs.ReadStream||noop)||stream instanceof(fs.WriteStream||noop))&&isFn(stream.close)}(stream)?stream.close(noop):function(stream){return stream.setHeader&&isFn(stream.abort)}(stream)?stream.abort():isFn(stream.destroy)?stream.destroy():void callback(err||new Error("stream was destroyed"))}},call=function(fn){fn()},pipe=function(from,to){return from.pipe(to)};module.exports=function(){var error,streams=Array.prototype.slice.call(arguments),callback=isFn(streams[streams.length-1]||noop)&&streams.pop()||noop;if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new Error("pump requires two streams per minimum");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return destroyer(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/gunzip-maybe/node_modules/pumpify/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var pump=__webpack_require__("./node_modules/gunzip-maybe/node_modules/pump/index.js"),inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),Duplexify=__webpack_require__("./node_modules/gunzip-maybe/node_modules/duplexify/index.js"),toArray=function(args){return args.length?Array.isArray(args[0])?args[0]:Array.prototype.slice.call(args):[]},define=function(opts){var Pumpify=function(){var streams=toArray(arguments);if(!(this instanceof Pumpify))return new Pumpify(streams);Duplexify.call(this,null,null,opts),streams.length&&this.setPipeline(streams)};return inherits(Pumpify,Duplexify),Pumpify.prototype.setPipeline=function(){var streams=toArray(arguments),self=this,ended=!1,w=streams[0],r=streams[streams.length-1];r=r.readable?r:null,w=w.writable?w:null;var onclose=function(){streams[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",onclose),this.on("prefinish",(function(){ended||self.cork()})),pump(streams,(function(err){if(self.removeListener("close",onclose),err)return self.destroy(err);ended=!0,self.uncork()})),this.destroyed)return onclose();this.setWritable(w),this.setReadable(r)},Pumpify};module.exports=define({destroy:!1}),module.exports.obj=define({destroy:!1,objectMode:!0,highWaterMark:16})},"./node_modules/gunzip-maybe/node_modules/through2/through2.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Transform=__webpack_require__("./node_modules/readable-stream/readable-browser.js").Transform,inherits=__webpack_require__("./node_modules/util/util.js").inherits,xtend=__webpack_require__("./node_modules/xtend/immutable.js");function DestroyableTransform(opts){Transform.call(this,opts),this._destroyed=!1}function noop(chunk,enc,callback){callback(null,chunk)}function through2(construct){return function(options,transform,flush){return"function"==typeof options&&(flush=transform,transform=options,options={}),"function"!=typeof transform&&(transform=noop),"function"!=typeof flush&&(flush=null),construct(options,transform,flush)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(err){if(!this._destroyed){this._destroyed=!0;var self=this;process.nextTick((function(){err&&self.emit("error",err),self.emit("close")}))}},module.exports=through2((function(options,transform,flush){var t2=new DestroyableTransform(options);return t2._transform=transform,flush&&(t2._flush=flush),t2})),module.exports.ctor=through2((function(options,transform,flush){function Through2(override){if(!(this instanceof Through2))return new Through2(override);this.options=xtend(options,override),DestroyableTransform.call(this,this.options)}return inherits(Through2,DestroyableTransform),Through2.prototype._transform=transform,flush&&(Through2.prototype._flush=flush),Through2})),module.exports.obj=through2((function(options,transform,flush){var t2=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},options));return t2._transform=transform,flush&&(t2._flush=flush),t2}))},"./node_modules/is-deflate/index.js":module=>{"use strict";module.exports=function(buf){return!(!buf||buf.length<2)&&(120===buf[0]&&(1===buf[1]||156===buf[1]||218===buf[1]))}},"./node_modules/is-gzip/index.js":module=>{"use strict";module.exports=function(buf){return!(!buf||buf.length<3)&&(31===buf[0]&&139===buf[1]&&8===buf[2])}},"./node_modules/json-rpc-middleware-stream/dist/createEngineStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const readable_stream_1=__webpack_require__("./node_modules/readable-stream/readable-browser.js");exports.default=function createEngineStream(opts){if(!opts||!opts.engine)throw new Error("Missing engine parameter!");const{engine}=opts,stream=new readable_stream_1.Duplex({objectMode:!0,read:()=>{},write:function write(req,_encoding,cb){engine.handle(req,((_err,res)=>{stream.push(res)})),cb()}});return engine.on&&engine.on("notification",(message=>{stream.push(message)})),stream}},"./node_modules/json-rpc-middleware-stream/dist/createStreamMiddleware.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const safe_event_emitter_1=__importDefault(__webpack_require__("./node_modules/@metamask/safe-event-emitter/index.js")),readable_stream_1=__webpack_require__("./node_modules/readable-stream/readable-browser.js");exports.default=function createStreamMiddleware(options={}){const idMap={},stream=new readable_stream_1.Duplex({objectMode:!0,read:()=>{},write:function processMessage(res,_encoding,cb){let err=null;try{!res.id?function processNotification(notif){(null==options?void 0:options.retryOnMessage)&&notif.method===options.retryOnMessage&&function retryStuckRequests(){Object.values(idMap).forEach((({req,retryCount=0})=>{if(req.id){if(retryCount>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${req.id}"`);idMap[req.id].retryCount=retryCount+1,sendToStream(req)}}))}();events.emit("notification",notif)}(res):function processResponse(res){const context=idMap[res.id];if(!context)return void console.warn(`StreamMiddleware - Unknown response id "${res.id}"`);delete idMap[res.id],Object.assign(context.res,res),setTimeout(context.end)}(res)}catch(_err){err=_err}cb(err)}}),events=new safe_event_emitter_1.default;return{events,middleware:(req,res,next,end)=>{sendToStream(req),idMap[req.id]={req,res,next,end}},stream};function sendToStream(req){stream.push(req)}}},"./node_modules/json-rpc-middleware-stream/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStreamMiddleware=exports.createEngineStream=void 0;const createEngineStream_1=__importDefault(__webpack_require__("./node_modules/json-rpc-middleware-stream/dist/createEngineStream.js"));exports.createEngineStream=createEngineStream_1.default;const createStreamMiddleware_1=__importDefault(__webpack_require__("./node_modules/json-rpc-middleware-stream/dist/createStreamMiddleware.js"));exports.createStreamMiddleware=createStreamMiddleware_1.default},"./node_modules/once/once.js":(module,__unused_webpack_exports,__webpack_require__)=>{var wrappy=__webpack_require__("./node_modules/wrappy/wrappy.js");function once(fn){var f=function(){return f.called?f.value:(f.called=!0,f.value=fn.apply(this,arguments))};return f.called=!1,f}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);return f.called=!0,f.value=fn.apply(this,arguments)},name=fn.name||"Function wrapped with `once`";return f.onceError=name+" shouldn't be called more than once",f.called=!1,f}module.exports=wrappy(once),module.exports.strict=wrappy(onceStrict),once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}))},"./node_modules/peek-stream/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,duplexify=__webpack_require__("./node_modules/peek-stream/node_modules/duplexify/index.js"),through=__webpack_require__("./node_modules/peek-stream/node_modules/through2/through2.js"),bufferFrom=__webpack_require__("./node_modules/buffer-from/index.js"),peek=function(opts,onpeek){if("number"==typeof opts&&(opts={maxBuffer:opts}),"function"==typeof opts)return peek(null,opts);opts||(opts={});var maxBuffer="number"==typeof opts.maxBuffer?opts.maxBuffer:65535,strict=opts.strict,newline=!1!==opts.newline,buffer=[],bufferSize=0,dup=duplexify.obj(),peeker=through.obj({highWaterMark:1},(function(data,enc,cb){if(function(data){return!Buffer.isBuffer(data)&&"string"!=typeof data}(data))return ready(data,null,cb);if(Buffer.isBuffer(data)||(data=bufferFrom(data)),newline){var nl=Array.prototype.indexOf.call(data,10);if(nl>0&&13===data[nl-1]&&nl--,nl>-1)return buffer.push(data.slice(0,nl)),ready(Buffer.concat(buffer),data.slice(nl),cb)}return buffer.push(data),(bufferSize+=data.length)<maxBuffer?cb():strict?cb(new Error("No newline found")):void ready(Buffer.concat(buffer),null,cb)})),onpreend=function(){if(strict)return dup.destroy(new Error("No newline found"));dup.cork(),ready(Buffer.concat(buffer),null,(function(err){if(err)return dup.destroy(err);dup.uncork()}))},ready=function(data,overflow,cb){dup.removeListener("preend",onpreend),onpeek(data,(function(err,parser){if(err)return cb(err);dup.setWritable(parser),dup.setReadable(parser),data&&parser.write(data),overflow&&parser.write(overflow),overflow=buffer=peeker=null,cb()}))};return dup.on("preend",onpreend),dup.setWritable(peeker),dup};module.exports=peek},"./node_modules/peek-stream/node_modules/duplexify/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,process=__webpack_require__("./node_modules/process/browser.js"),stream=__webpack_require__("./node_modules/readable-stream/readable-browser.js"),eos=__webpack_require__("./node_modules/end-of-stream/index.js"),inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),shift=__webpack_require__("./node_modules/stream-shift/index.js"),SIGNAL_FLUSH=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),onuncork=function(self,fn){self._corked?self.once("uncork",fn):fn()},destroyer=function(self,end){return function(err){err?function(self,err){self._autoDestroy&&self.destroy(err)}(self,"premature close"===err.message?null:err):end&&!self._ended&&self.end()}},Duplexify=function(writable,readable,opts){if(!(this instanceof Duplexify))return new Duplexify(writable,readable,opts);stream.Duplex.call(this,opts),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!opts||!1!==opts.autoDestroy,this._forwardDestroy=!opts||!1!==opts.destroy,this._forwardEnd=!opts||!1!==opts.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,writable&&this.setWritable(writable),readable&&this.setReadable(readable)};inherits(Duplexify,stream.Duplex),Duplexify.obj=function(writable,readable,opts){return opts||(opts={}),opts.objectMode=!0,opts.highWaterMark=16,new Duplexify(writable,readable,opts)},Duplexify.prototype.cork=function(){1==++this._corked&&this.emit("cork")},Duplexify.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},Duplexify.prototype.setWritable=function(writable){if(this._unwrite&&this._unwrite(),this.destroyed)writable&&writable.destroy&&writable.destroy();else if(null!==writable&&!1!==writable){var self=this,unend=eos(writable,{writable:!0,readable:!1},destroyer(this,this._forwardEnd)),ondrain=function(){var ondrain=self._ondrain;self._ondrain=null,ondrain&&ondrain()};this._unwrite&&process.nextTick(ondrain),this._writable=writable,this._writable.on("drain",ondrain),this._unwrite=function(){self._writable.removeListener("drain",ondrain),unend()},this.uncork()}else this.end()},Duplexify.prototype.setReadable=function(readable){if(this._unread&&this._unread(),this.destroyed)readable&&readable.destroy&&readable.destroy();else{if(null===readable||!1===readable)return this.push(null),void this.resume();var rs,self=this,unend=eos(readable,{writable:!1,readable:!0},destroyer(this)),onreadable=function(){self._forward()},onend=function(){self.push(null)};this._drained=!0,this._readable=readable,this._readable2=readable._readableState?readable:(rs=readable,new stream.Readable({objectMode:!0,highWaterMark:16}).wrap(rs)),this._readable2.on("readable",onreadable),this._readable2.on("end",onend),this._unread=function(){self._readable2.removeListener("readable",onreadable),self._readable2.removeListener("end",onend),unend()},this._forward()}},Duplexify.prototype._read=function(){this._drained=!0,this._forward()},Duplexify.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var data;for(this._forwarding=!0;this._drained&&null!==(data=shift(this._readable2));)this.destroyed||(this._drained=this.push(data));this._forwarding=!1}},Duplexify.prototype.destroy=function(err){if(!this.destroyed){this.destroyed=!0;var self=this;process.nextTick((function(){self._destroy(err)}))}},Duplexify.prototype._destroy=function(err){if(err){var ondrain=this._ondrain;this._ondrain=null,ondrain?ondrain(err):this.emit("error",err)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},Duplexify.prototype._write=function(data,enc,cb){return this.destroyed?cb():this._corked?onuncork(this,this._write.bind(this,data,enc,cb)):data===SIGNAL_FLUSH?this._finish(cb):this._writable?void(!1===this._writable.write(data)?this._ondrain=cb:cb()):cb()},Duplexify.prototype._finish=function(cb){var self=this;this.emit("preend"),onuncork(this,(function(){var ws,fn;ws=self._forwardEnd&&self._writable,fn=function(){!1===self._writableState.prefinished&&(self._writableState.prefinished=!0),self.emit("prefinish"),onuncork(self,cb)},ws?ws._writableState&&ws._writableState.finished?fn():ws._writableState?ws.end(fn):(ws.end(),fn()):fn()}))},Duplexify.prototype.end=function(data,enc,cb){return"function"==typeof data?this.end(null,null,data):"function"==typeof enc?this.end(data,null,enc):(this._ended=!0,data&&this.write(data),this._writableState.ending||this.write(SIGNAL_FLUSH),stream.Writable.prototype.end.call(this,cb))},module.exports=Duplexify},"./node_modules/peek-stream/node_modules/through2/through2.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Transform=__webpack_require__("./node_modules/readable-stream/readable-browser.js").Transform,inherits=__webpack_require__("./node_modules/util/util.js").inherits,xtend=__webpack_require__("./node_modules/xtend/immutable.js");function DestroyableTransform(opts){Transform.call(this,opts),this._destroyed=!1}function noop(chunk,enc,callback){callback(null,chunk)}function through2(construct){return function(options,transform,flush){return"function"==typeof options&&(flush=transform,transform=options,options={}),"function"!=typeof transform&&(transform=noop),"function"!=typeof flush&&(flush=null),construct(options,transform,flush)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(err){if(!this._destroyed){this._destroyed=!0;var self=this;process.nextTick((function(){err&&self.emit("error",err),self.emit("close")}))}},module.exports=through2((function(options,transform,flush){var t2=new DestroyableTransform(options);return t2._transform=transform,flush&&(t2._flush=flush),t2})),module.exports.ctor=through2((function(options,transform,flush){function Through2(override){if(!(this instanceof Through2))return new Through2(override);this.options=xtend(options,override),DestroyableTransform.call(this,this.options)}return inherits(Through2,DestroyableTransform),Through2.prototype._transform=transform,flush&&(Through2.prototype._flush=flush),Through2})),module.exports.obj=through2((function(options,transform,flush){var t2=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},options));return t2._transform=transform,flush&&(t2._flush=flush),t2}))},"./node_modules/pump/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),once=__webpack_require__("./node_modules/once/once.js"),eos=__webpack_require__("./node_modules/end-of-stream/index.js"),fs=__webpack_require__("?7874"),noop=function(){},ancient=/^v?\.0/.test(process.version),isFn=function(fn){return"function"==typeof fn},destroyer=function(stream,reading,writing,callback){callback=once(callback);var closed=!1;stream.on("close",(function(){closed=!0})),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function(stream){return!!ancient&&!!fs&&(stream instanceof(fs.ReadStream||noop)||stream instanceof(fs.WriteStream||noop))&&isFn(stream.close)}(stream)?stream.close(noop):function(stream){return stream.setHeader&&isFn(stream.abort)}(stream)?stream.abort():isFn(stream.destroy)?stream.destroy():void callback(err||new Error("stream was destroyed"))}},call=function(fn){fn()},pipe=function(from,to){return from.pipe(to)};module.exports=function(){var error,streams=Array.prototype.slice.call(arguments),callback=isFn(streams[streams.length-1]||noop)&&streams.pop()||noop;if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new Error("pump requires two streams per minimum");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return destroyer(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/readable-web-to-node-stream/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadableWebToNodeStream=void 0;const readable_stream_1=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/readable-browser.js");class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(stream){super(),this.bytesRead=0,this.released=!1,this.reader=stream.getReader()}async _read(){if(this.released)return void this.push(null);this.pendingRead=this.reader.read();const data=await this.pendingRead;delete this.pendingRead,data.done||this.released?this.push(null):(this.bytesRead+=data.value.length,this.push(data.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}exports.ReadableWebToNodeStream=ReadableWebToNodeStream},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js":module=>{"use strict";var codes={};function createErrorType(code,message,Base){Base||(Base=Error);var NodeError=function(_Base){function NodeError(arg1,arg2,arg3){return _Base.call(this,function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3))||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}(NodeError,_Base),NodeError}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map((function(i){return String(i)})),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(String(expected))}createErrorType("ERR_INVALID_OPT_VALUE",(function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(name,expected,actual){var determiner,msg;if("string"==typeof expected&&function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(name){return"The "+name+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(name){return"Cannot call "+name+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(arg){return"Unknown encoding: "+arg}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.q=codes},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_writable.js");__webpack_require__("./node_modules/inherits/inherits_browser.js")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}})},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_transform.js");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");module.exports=Readable,Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/events/events.js").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var debug,debugUtil=__webpack_require__("?521a");debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function debug(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"),destroyImpl=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;__webpack_require__("./node_modules/inherits/inherits_browser.js")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var er,state=stream._readableState;if(null===chunk)state.reading=!1,function onEofChunk(stream,state){if(debug("onEofChunk"),state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}(stream,state);else if(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk));return er}(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state));return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};var MAX_HWM=1073741824;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),state.destroyed||!state.length&&!state.ended||(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self.listenerCount("data")>0&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0!==state.highWaterMark?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=this.listenerCount("readable")>0,!1!==state.flowing&&this.resume()):"readable"===ev&&(state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||process.nextTick(nReadingNextTick,this))),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ev&&void 0!==ev||process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js")),from(Readable,iterable,opts)})},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var _require$codes=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js").q,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js");function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(er,data){done(_this,er,data)}))}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2)}))}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}(_this,state)}}module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__("./node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){var isDuplex=this instanceof(Duplex=Duplex||__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"));if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(function prefinish(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function realHasInstance(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"==typeof chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Object$setPrototypeO,process=__webpack_require__("./node_modules/process/browser.js");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value,done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(resolve,reject){process.nextTick((function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))}))}));var promise,lastPromise=this[kLastPromise];if(lastPromise)promise=new Promise(function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then((function(){iter[kEnded]?resolve(createIterResult(void 0,!0)):iter[kHandlePromise](resolve,reject)}),reject)}}(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function _return(){var _this2=this;return new Promise((function(resolve,reject){_this2[kStream].destroy(null,(function(err){err?reject(err):resolve(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype);module.exports=function createReadableStreamAsyncIterator(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(_Object$create={},kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,(function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0})),stream.on("readable",onReadable.bind(null,iterator)),iterator}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,inspect=__webpack_require__("?7338").inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(0===this.length)return Buffer.alloc(0);for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,Buffer.prototype.copy.call(src,target,offset),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):ret=n===this.head.data.length?this.shift():hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function value(_,options){return inspect(this,function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},options,{depth:0,customInspect:!1}))}}]),BufferList}()},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js").q.ERR_STREAM_PREMATURE_CLOSE;function noop(){}module.exports=function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function onlegacyfinish(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function onfinish(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function onend(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function onerror(err){callback.call(stream,err)},onclose=function onclose(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function onrequest(){stream.req.on("finish",onfinish)};return!function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js":module=>{module.exports=function(){throw new Error("Readable.from is not available in the browser")}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var eos;var _require$codes=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js").q,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}module.exports=function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var error,callback=function popCallback(streams){return streams.length?"function"!=typeof streams[streams.length-1]?noop:streams.pop():noop}(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return function destroyer(stream,reading,writing,callback){callback=function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}(callback);var closed=!1;stream.on("close",(function(){closed=!0})),void 0===eos&&(eos=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js")),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe"))}}(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/state.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js").q.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=function highWaterMarkFrom(options,isDuplex,duplexKey){return null!=options.highWaterMark?options.highWaterMark:isDuplex?options[duplexKey]:null}(options,isDuplex,duplexKey);if(null!=hwm){if(!isFinite(hwm)||Math.floor(hwm)!==hwm||hwm<0)throw new ERR_INVALID_OPT_VALUE(isDuplex?duplexKey:"highWaterMark",hwm);return Math.floor(hwm)}return state.objectMode?16:16384}}},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/events/events.js").EventEmitter},"./node_modules/readable-web-to-node-stream/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_passthrough.js"),exports.finished=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),exports.pipeline=__webpack_require__("./node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js")},"./node_modules/stream-shift/index.js":module=>{module.exports=function shift(stream){var rs=stream._readableState;return rs?rs.objectMode?stream.read():stream.read(function getStateLength(state){if(state.buffer.length)return state.buffer.head?state.buffer.head.data.length:state.buffer[0].length;return state.length}(rs)):null}},"./node_modules/tar-stream/extract.js":(module,__unused_webpack_exports,__webpack_require__)=>{var util=__webpack_require__("./node_modules/util/util.js"),bl=__webpack_require__("./node_modules/bl/bl.js"),headers=__webpack_require__("./node_modules/tar-stream/headers.js"),Writable=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/readable-browser.js").Writable,PassThrough=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/readable-browser.js").PassThrough,noop=function(){},overflow=function(size){return(size&=511)&&512-size},Source=function(self,offset){this._parent=self,this.offset=offset,PassThrough.call(this,{autoDestroy:!1})};util.inherits(Source,PassThrough),Source.prototype.destroy=function(err){this._parent.destroy(err)};var Extract=function(opts){if(!(this instanceof Extract))return new Extract(opts);Writable.call(this,opts),opts=opts||{},this._offset=0,this._buffer=bl(),this._missing=0,this._partial=!1,this._onparse=noop,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var self=this,b=self._buffer,oncontinue=function(){self._continue()},onunlock=function(err){if(self._locked=!1,err)return self.destroy(err);self._stream||oncontinue()},onstreamend=function(){self._stream=null;var drain=overflow(self._header.size);drain?self._parse(drain,ondrain):self._parse(512,onheader),self._locked||oncontinue()},ondrain=function(){self._buffer.consume(overflow(self._header.size)),self._parse(512,onheader),oncontinue()},onpaxglobalheader=function(){var size=self._header.size;self._paxGlobal=headers.decodePax(b.slice(0,size)),b.consume(size),onstreamend()},onpaxheader=function(){var size=self._header.size;self._pax=headers.decodePax(b.slice(0,size)),self._paxGlobal&&(self._pax=Object.assign({},self._paxGlobal,self._pax)),b.consume(size),onstreamend()},ongnulongpath=function(){var size=self._header.size;this._gnuLongPath=headers.decodeLongPath(b.slice(0,size),opts.filenameEncoding),b.consume(size),onstreamend()},ongnulonglinkpath=function(){var size=self._header.size;this._gnuLongLinkPath=headers.decodeLongPath(b.slice(0,size),opts.filenameEncoding),b.consume(size),onstreamend()},onheader=function(){var header,offset=self._offset;try{header=self._header=headers.decode(b.slice(0,512),opts.filenameEncoding,opts.allowUnknownFormat)}catch(err){self.emit("error",err)}return b.consume(512),header?"gnu-long-path"===header.type?(self._parse(header.size,ongnulongpath),void oncontinue()):"gnu-long-link-path"===header.type?(self._parse(header.size,ongnulonglinkpath),void oncontinue()):"pax-global-header"===header.type?(self._parse(header.size,onpaxglobalheader),void oncontinue()):"pax-header"===header.type?(self._parse(header.size,onpaxheader),void oncontinue()):(self._gnuLongPath&&(header.name=self._gnuLongPath,self._gnuLongPath=null),self._gnuLongLinkPath&&(header.linkname=self._gnuLongLinkPath,self._gnuLongLinkPath=null),self._pax&&(self._header=header=function(header,pax){return pax.path&&(header.name=pax.path),pax.linkpath&&(header.linkname=pax.linkpath),pax.size&&(header.size=parseInt(pax.size,10)),header.pax=pax,header}(header,self._pax),self._pax=null),self._locked=!0,header.size&&"directory"!==header.type?(self._stream=new Source(self,offset),self.emit("entry",header,self._stream,onunlock),self._parse(header.size,onstreamend),void oncontinue()):(self._parse(512,onheader),void self.emit("entry",header,function(self,offset){var s=new Source(self,offset);return s.end(),s}(self,offset),onunlock))):(self._parse(512,onheader),void oncontinue())};this._onheader=onheader,this._parse(512,onheader)};util.inherits(Extract,Writable),Extract.prototype.destroy=function(err){this._destroyed||(this._destroyed=!0,err&&this.emit("error",err),this.emit("close"),this._stream&&this._stream.emit("close"))},Extract.prototype._parse=function(size,onparse){this._destroyed||(this._offset+=size,this._missing=size,onparse===this._onheader&&(this._partial=!1),this._onparse=onparse)},Extract.prototype._continue=function(){if(!this._destroyed){var cb=this._cb;this._cb=noop,this._overflow?this._write(this._overflow,void 0,cb):cb()}},Extract.prototype._write=function(data,enc,cb){if(!this._destroyed){var s=this._stream,b=this._buffer,missing=this._missing;if(data.length&&(this._partial=!0),data.length<missing)return this._missing-=data.length,this._overflow=null,s?s.write(data,cb):(b.append(data),cb());this._cb=cb,this._missing=0;var overflow=null;data.length>missing&&(overflow=data.slice(missing),data=data.slice(0,missing)),s?s.end(data):b.append(data),this._overflow=overflow,this._onparse()}},Extract.prototype._final=function(cb){if(this._partial)return this.destroy(new Error("Unexpected end of data"));cb()},module.exports=Extract},"./node_modules/tar-stream/headers.js":(__unused_webpack_module,exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,alloc=Buffer.alloc,ZERO_OFFSET="0".charCodeAt(0),USTAR_MAGIC=Buffer.from("ustar\0","binary"),USTAR_VER=Buffer.from("00","binary"),GNU_MAGIC=Buffer.from("ustar ","binary"),GNU_VER=Buffer.from(" \0","binary"),MASK=parseInt("7777",8),indexOf=function(block,num,offset,end){for(;offset<end;offset++)if(block[offset]===num)return offset;return end},cksum=function(block){for(var sum=256,i=0;i<148;i++)sum+=block[i];for(var j=156;j<512;j++)sum+=block[j];return sum},encodeOct=function(val,n){return(val=val.toString(8)).length>n?"7777777777777777777".slice(0,n)+" ":"0000000000000000000".slice(0,n-val.length)+val+" "};var decodeOct=function(val,offset,length){if(128&(val=val.slice(offset,offset+length))[offset=0])return function parse256(buf){var positive;if(128===buf[0])positive=!0;else{if(255!==buf[0])return null;positive=!1}for(var tuple=[],i=buf.length-1;i>0;i--){var byte=buf[i];positive?tuple.push(byte):tuple.push(255-byte)}var sum=0,l=tuple.length;for(i=0;i<l;i++)sum+=tuple[i]*Math.pow(256,i);return positive?sum:-1*sum}(val);for(;offset<val.length&&32===val[offset];)offset++;for(var end=(index=indexOf(val,32,offset,val.length),len=val.length,defaultValue=val.length,"number"!=typeof index?defaultValue:(index=~~index)>=len?len:index>=0||(index+=len)>=0?index:0);offset<end&&0===val[offset];)offset++;return end===offset?0:parseInt(val.slice(offset,end).toString(),8);var index,len,defaultValue},decodeStr=function(val,offset,length,encoding){return val.slice(offset,indexOf(val,0,offset,offset+length)).toString(encoding)},addLength=function(str){var len=Buffer.byteLength(str),digits=Math.floor(Math.log(len)/Math.log(10))+1;return len+digits>=Math.pow(10,digits)&&digits++,len+digits+str};exports.decodeLongPath=function(buf,encoding){return decodeStr(buf,0,buf.length,encoding)},exports.encodePax=function(opts){var result="";opts.name&&(result+=addLength(" path="+opts.name+"\n")),opts.linkname&&(result+=addLength(" linkpath="+opts.linkname+"\n"));var pax=opts.pax;if(pax)for(var key in pax)result+=addLength(" "+key+"="+pax[key]+"\n");return Buffer.from(result)},exports.decodePax=function(buf){for(var result={};buf.length;){for(var i=0;i<buf.length&&32!==buf[i];)i++;var len=parseInt(buf.slice(0,i).toString(),10);if(!len)return result;var b=buf.slice(i+1,len-1).toString(),keyIndex=b.indexOf("=");if(-1===keyIndex)return result;result[b.slice(0,keyIndex)]=b.slice(keyIndex+1),buf=buf.slice(len)}return result},exports.encode=function(opts){var buf=alloc(512),name=opts.name,prefix="";if(5===opts.typeflag&&"/"!==name[name.length-1]&&(name+="/"),Buffer.byteLength(name)!==name.length)return null;for(;Buffer.byteLength(name)>100;){var i=name.indexOf("/");if(-1===i)return null;prefix+=prefix?"/"+name.slice(0,i):name.slice(0,i),name=name.slice(i+1)}return Buffer.byteLength(name)>100||Buffer.byteLength(prefix)>155||opts.linkname&&Buffer.byteLength(opts.linkname)>100?null:(buf.write(name),buf.write(encodeOct(opts.mode&MASK,6),100),buf.write(encodeOct(opts.uid,6),108),buf.write(encodeOct(opts.gid,6),116),buf.write(encodeOct(opts.size,11),124),buf.write(encodeOct(opts.mtime.getTime()/1e3|0,11),136),buf[156]=ZERO_OFFSET+function(flag){switch(flag){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(opts.type),opts.linkname&&buf.write(opts.linkname,157),USTAR_MAGIC.copy(buf,257),USTAR_VER.copy(buf,263),opts.uname&&buf.write(opts.uname,265),opts.gname&&buf.write(opts.gname,297),buf.write(encodeOct(opts.devmajor||0,6),329),buf.write(encodeOct(opts.devminor||0,6),337),prefix&&buf.write(prefix,345),buf.write(encodeOct(cksum(buf),6),148),buf)},exports.decode=function(buf,filenameEncoding,allowUnknownFormat){var typeflag=0===buf[156]?0:buf[156]-ZERO_OFFSET,name=decodeStr(buf,0,100,filenameEncoding),mode=decodeOct(buf,100,8),uid=decodeOct(buf,108,8),gid=decodeOct(buf,116,8),size=decodeOct(buf,124,12),mtime=decodeOct(buf,136,12),type=function(flag){switch(flag){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(typeflag),linkname=0===buf[157]?null:decodeStr(buf,157,100,filenameEncoding),uname=decodeStr(buf,265,32),gname=decodeStr(buf,297,32),devmajor=decodeOct(buf,329,8),devminor=decodeOct(buf,337,8),c=cksum(buf);if(256===c)return null;if(c!==decodeOct(buf,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===USTAR_MAGIC.compare(buf,257,263))buf[345]&&(name=decodeStr(buf,345,155,filenameEncoding)+"/"+name);else if(0===GNU_MAGIC.compare(buf,257,263)&&0===GNU_VER.compare(buf,263,265));else if(!allowUnknownFormat)throw new Error("Invalid tar header: unknown format.");return 0===typeflag&&name&&"/"===name[name.length-1]&&(typeflag=5),{name,mode,uid,gid,size,mtime:new Date(1e3*mtime),type,linkname,uname,gname,devmajor,devminor}}},"./node_modules/tar-stream/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{exports.extract=__webpack_require__("./node_modules/tar-stream/extract.js"),exports.pack=__webpack_require__("./node_modules/tar-stream/pack.js")},"./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js":module=>{"use strict";var codes={};function createErrorType(code,message,Base){Base||(Base=Error);var NodeError=function(_Base){function NodeError(arg1,arg2,arg3){return _Base.call(this,function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}(arg1,arg2,arg3))||this}return function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}(NodeError,_Base),NodeError}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map((function(i){return String(i)})),len>2?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(String(expected))}createErrorType("ERR_INVALID_OPT_VALUE",(function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(name,expected,actual){var determiner,msg;if("string"==typeof expected&&function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be",function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(name){return"The "+name+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(name){return"Cannot call "+name+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(arg){return"Unknown encoding: "+arg}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.q=codes},"./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_writable.js");__webpack_require__("./node_modules/inherits/inherits_browser.js")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}})},"./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_transform.js");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");module.exports=Readable,Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/events/events.js").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var debug,debugUtil=__webpack_require__("?4961");debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function debug(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"),destroyImpl=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;__webpack_require__("./node_modules/inherits/inherits_browser.js")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var er,state=stream._readableState;if(null===chunk)state.reading=!1,function onEofChunk(stream,state){if(debug("onEofChunk"),state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,state.emittedReadable||(state.emittedReadable=!0,emitReadable_(stream)))}(stream,state);else if(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk));return er}(state,chunk)),er)errorOrDestroy(stream,er);else if(state.objectMode||chunk&&chunk.length>0)if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}else addToFront||(state.reading=!1,maybeReadMore(stream,state));return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};var MAX_HWM=1073741824;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),state.destroyed||!state.length&&!state.ended||(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0,state.resumeScheduled&&!state.paused?state.flowing=!0:self.listenerCount("data")>0&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0!==state.highWaterMark?state.length>=state.highWaterMark:state.length>0)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=this.listenerCount("readable")>0,!1!==state.flowing&&this.resume()):"readable"===ev&&(state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):state.reading||process.nextTick(nReadingNextTick,this))),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ev&&void 0!==ev||process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js")),from(Readable,iterable,opts)})},"./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var _require$codes=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js").q,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js");function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(er,data){done(_this,er,data)}))}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2)}))}},"./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,process=__webpack_require__("./node_modules/process/browser.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}(_this,state)}}module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__("./node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"),getHighWaterMark=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,_require$codes=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js").q,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){var isDuplex=this instanceof(Duplex=Duplex||__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"));if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(function prefinish(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}__webpack_require__("./node_modules/inherits/inherits_browser.js")(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function realHasInstance(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"==typeof chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Object$setPrototypeO,process=__webpack_require__("./node_modules/process/browser.js");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var finished=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(value,done){return{value,done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(resolve,reject){process.nextTick((function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))}))}));var promise,lastPromise=this[kLastPromise];if(lastPromise)promise=new Promise(function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then((function(){iter[kEnded]?resolve(createIterResult(void 0,!0)):iter[kHandlePromise](resolve,reject)}),reject)}}(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function _return(){var _this2=this;return new Promise((function(resolve,reject){_this2[kStream].destroy(null,(function(err){err?reject(err):resolve(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype);module.exports=function createReadableStreamAsyncIterator(stream){var _Object$create,iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(_Object$create={},kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create));return iterator[kLastPromise]=null,finished(stream,(function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0})),stream.on("readable",onReadable.bind(null,iterator)),iterator}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,inspect=__webpack_require__("?eeee").inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(0===this.length)return Buffer.alloc(0);for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,Buffer.prototype.copy.call(src,target,offset),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):ret=n===this.head.data.length?this.shift():hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function value(_,options){return inspect(this,function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},options,{depth:0,customInspect:!1}))}}]),BufferList}()},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js").q.ERR_STREAM_PREMATURE_CLOSE;function noop(){}module.exports=function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function onlegacyfinish(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function onfinish(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function onend(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function onerror(err){callback.call(stream,err)},onclose=function onclose(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function onrequest(){stream.req.on("finish",onfinish)};return!function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)):(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js":module=>{module.exports=function(){throw new Error("Readable.from is not available in the browser")}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var eos;var _require$codes=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js").q,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}module.exports=function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var error,callback=function popCallback(streams){return streams.length?"function"!=typeof streams[streams.length-1]?noop:streams.pop():noop}(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),streams.length<2)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map((function(stream,i){var reading=i<streams.length-1;return function destroyer(stream,reading,writing,callback){callback=function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}(callback);var closed=!1;stream.on("close",(function(){closed=!0})),void 0===eos&&(eos=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js")),eos(stream,{readable:reading,writable:writing},(function(err){if(err)return callback(err);closed=!0,callback()}));var destroyed=!1;return function(err){if(!closed&&!destroyed)return destroyed=!0,function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe"))}}(stream,reading,i>0,(function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))}))}));return streams.reduce(pipe)}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/state.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/errors-browser.js").q.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=function highWaterMarkFrom(options,isDuplex,duplexKey){return null!=options.highWaterMark?options.highWaterMark:isDuplex?options[duplexKey]:null}(options,isDuplex,duplexKey);if(null!=hwm){if(!isFinite(hwm)||Math.floor(hwm)!==hwm||hwm<0)throw new ERR_INVALID_OPT_VALUE(isDuplex?duplexKey:"highWaterMark",hwm);return Math.floor(hwm)}return state.objectMode?16:16384}}},"./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/events/events.js").EventEmitter},"./node_modules/tar-stream/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/_stream_passthrough.js"),exports.finished=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),exports.pipeline=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js")},"./node_modules/tar-stream/pack.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,process=__webpack_require__("./node_modules/process/browser.js"),constants=__webpack_require__("./node_modules/fs-constants/browser.js"),eos=__webpack_require__("./node_modules/end-of-stream/index.js"),inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),alloc=Buffer.alloc,Readable=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/readable-browser.js").Readable,Writable=__webpack_require__("./node_modules/tar-stream/node_modules/readable-stream/readable-browser.js").Writable,StringDecoder=__webpack_require__("./node_modules/string_decoder/lib/string_decoder.js").s,headers=__webpack_require__("./node_modules/tar-stream/headers.js"),DMODE=parseInt("755",8),FMODE=parseInt("644",8),END_OF_TAR=alloc(1024),noop=function(){},overflow=function(self,size){(size&=511)&&self.push(END_OF_TAR.slice(0,512-size))};var Sink=function(to){Writable.call(this),this.written=0,this._to=to,this._destroyed=!1};inherits(Sink,Writable),Sink.prototype._write=function(data,enc,cb){if(this.written+=data.length,this._to.push(data))return cb();this._to._drain=cb},Sink.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var LinkSink=function(){Writable.call(this),this.linkname="",this._decoder=new StringDecoder("utf-8"),this._destroyed=!1};inherits(LinkSink,Writable),LinkSink.prototype._write=function(data,enc,cb){this.linkname+=this._decoder.write(data),cb()},LinkSink.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var Void=function(){Writable.call(this),this._destroyed=!1};inherits(Void,Writable),Void.prototype._write=function(data,enc,cb){cb(new Error("No body allowed for this entry"))},Void.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var Pack=function(opts){if(!(this instanceof Pack))return new Pack(opts);Readable.call(this,opts),this._drain=noop,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};inherits(Pack,Readable),Pack.prototype.entry=function(header,buffer,callback){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof buffer&&(callback=buffer,buffer=null),callback||(callback=noop);var self=this;if(header.size&&"symlink"!==header.type||(header.size=0),header.type||(header.type=function modeToType(mode){switch(mode&constants.S_IFMT){case constants.S_IFBLK:return"block-device";case constants.S_IFCHR:return"character-device";case constants.S_IFDIR:return"directory";case constants.S_IFIFO:return"fifo";case constants.S_IFLNK:return"symlink"}return"file"}(header.mode)),header.mode||(header.mode="directory"===header.type?DMODE:FMODE),header.uid||(header.uid=0),header.gid||(header.gid=0),header.mtime||(header.mtime=new Date),"string"==typeof buffer&&(buffer=Buffer.from(buffer)),Buffer.isBuffer(buffer)){header.size=buffer.length,this._encode(header);var ok=this.push(buffer);return overflow(self,header.size),ok?process.nextTick(callback):this._drain=callback,new Void}if("symlink"===header.type&&!header.linkname){var linkSink=new LinkSink;return eos(linkSink,(function(err){if(err)return self.destroy(),callback(err);header.linkname=linkSink.linkname,self._encode(header),callback()})),linkSink}if(this._encode(header),"file"!==header.type&&"contiguous-file"!==header.type)return process.nextTick(callback),new Void;var sink=new Sink(this);return this._stream=sink,eos(sink,(function(err){return self._stream=null,err?(self.destroy(),callback(err)):sink.written!==header.size?(self.destroy(),callback(new Error("size mismatch"))):(overflow(self,header.size),self._finalizing&&self.finalize(),void callback())})),sink}},Pack.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(END_OF_TAR),this.push(null))},Pack.prototype.destroy=function(err){this._destroyed||(this._destroyed=!0,err&&this.emit("error",err),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},Pack.prototype._encode=function(header){if(!header.pax){var buf=headers.encode(header);if(buf)return void this.push(buf)}this._encodePax(header)},Pack.prototype._encodePax=function(header){var paxHeader=headers.encodePax({name:header.name,linkname:header.linkname,pax:header.pax}),newHeader={name:"PaxHeader",mode:header.mode,uid:header.uid,gid:header.gid,size:paxHeader.length,mtime:header.mtime,type:"pax-header",linkname:header.linkname&&"PaxHeader",uname:header.uname,gname:header.gname,devmajor:header.devmajor,devminor:header.devminor};this.push(headers.encode(newHeader)),this.push(paxHeader),overflow(this,paxHeader.length),newHeader.size=header.size,newHeader.type=header.type,this.push(headers.encode(newHeader))},Pack.prototype._read=function(n){var drain=this._drain;this._drain=noop,drain()},module.exports=Pack},"./node_modules/wrappy/wrappy.js":module=>{module.exports=function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if("function"!=typeof fn)throw new TypeError("need wrapper function");return Object.keys(fn).forEach((function(k){wrapper[k]=fn[k]})),wrapper;function wrapper(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];var ret=fn.apply(this,args),cb=args[args.length-1];return"function"==typeof ret&&ret!==cb&&Object.keys(cb).forEach((function(k){ret[k]=cb[k]})),ret}}}}]);